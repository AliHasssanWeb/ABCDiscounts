@model ABC.EFCore.Repository.Edmx.PosSale
@{
    ViewData["Title"] = "SalesInvoice";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" />

<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>


@* get data on page load *@
<script>
    var AllItemsList = [];
    var PaymentTypeList = [];

    $(document).ready(function () {

         if (AllItemsList.length < 1) {
            AllItemsList = ABCPOSWebsite.init();
        }

        if(PaymentTypeList.length < 1){
            PaymentTypeList = ABCPOSWebsite.PaymentType();
        }

    });
</script>


<style>

    .aqua {
        background: #c1e4e4;
    }

        .aqua:focus {
            background-color: #c1e4e4;
        }

    .brdr-right {
        border-right: 0.2px solid;
    }

    .rowst {
        background-color: blue;
    }

    .table td, .table th {
        padding: 5px !important;
        width: 100%;
    }

    .tablest thead th {
        font-size: 1.2rem;
        font-weight: 400;
        color: #2587c3;
        border: 1px solid #000100;
        border-bottom: 1px solid #000100 !important;
    }

    .tablest td {
        font-size: 1.2rem;
        font-weight: 400;
        color: #2587c3;
        border-bottom: none;
    }


    .wd-5 {
        width: 5rem;
    }

    .wd-8 {
        width: 10rem;
    }

    .wd-3 {
        margin-left: 3rem;
    }

    .wd-7 {
        width: 2rem;
        margin-left: 7rem;
        /*position: relative;
                            left: 15%;
                            border:0px solid;*/
    }

    .wd-10 {
        margin: 0px;
        width: 70px;
        padding: 0px;
        /* border: 0px;*/
    }

    .mw-125 {
        width: 160% !important;
        margin-left: -27%;
    }

    input[type=checkbox] {
        transform: scale(0.9);
    }

    label {
        font-size: 14px !important;
    }

    .table td, .table th {
        padding: 5px !important;
        width: 100%;
    }

    .classtop {
        margin-top: 31px;
    }

    .TotalItem {
        margin-bottom: 31px;
    }

    .receivedtext {
        margin-top: 80px;
        width: 110px;
    }

    .OverHeadalign {
        margin-left: 150px;
    }

    .borderdiv {
        border-right: 1px solid;
        border-right-color: black;
    }

    /*.tablesize {
                                width: 1180px;
                            }*/


    .ti-close {
        font-size: 20px;
    }

    .add-row {
        color: #32CD32;
    }

        .add-row:hover {
            color: #228B22;
        }

    .delete-row {
        color: #FF0000;
    }

        .delete-row:hover {
            color: #B22222;
        }

    .textboxwidth {
        width: 175px;
    }

    .overheadwidth {
        width: 80px;
    }

    .inputblue {
        color: #00008be6;
        font-weight: 700;
        font-size: large;
    }

    .inputbluesmall {
        color: #00008be6;
        font-weight: 700;
    }

    .marginbtm {
        margin-bottom: -7.4%;
    }

    .modalstyling {
        width: 57%;
        left: 25%;
    }
    /* Extra small devices (phones, 600px and down) */
    @@media only screen and (max-width: 600px) {
        .marginbtm {
            margin-bottom: -7.4%;
        }

        .margintop {
            margin-top: 15%;
        }

        .marginbotm {
            margin-bottom: -7%;
        }
    }

    /* Small devices (portrait tablets and large phones, 600px and up) */
    @@media only screen and (min-width: 600px) {
        .marginbtm {
            margin-bottom: -7.4%;
        }

        .margintop {
            margin-top: 15%;
        }

        .marginbotm {
            margin-bottom: -7%;
        }
    }

    /* Medium devices (landscape tablets, 768px and up) */
    @@media only screen and (min-width: 768px) {
        .marginbtm {
            margin-bottom: -3.7%;
        }

        .margintop {
            margin-top: 5%;
        }

        .marginbotm {
            margin-bottom: 0%;
        }
    }

    /* Large devices (laptops/desktops, 992px and up) */
    @@media only screen and (min-width: 992px) {
        .marginbtm {
            margin-bottom: -7.4%;
        }

        .margintop {
            margin-top: 10%;
        }

        .marginbotm {
            margin-bottom: -6%;
        }
    }

    @@media only screen and (min-width: 1024px) {
        .marginbtm {
            margin-bottom: -10.3%;
        }

        .marginlft {
            margin-left: -250%;
        }

        .margintop {
            margin-top: 10%;
        }

        .marginbotm {
            margin-bottom: -4%;
        }
    }

    /* Extra large devices (large laptops and desktops, 1200px and up) */
    @@media only screen and (min-width: 1200px) {
        .marginbtm {
            margin-bottom: -7.4%;
        }

        .marginlft {
            margin-left: -65%;
        }

        .margintop {
            margin-top: 6%;
        }

        .marginbotm {
            margin-bottom: -4%;
        }

        .customModal {
            overflow-y: hidden !important;
            left: 28% !important;
            width: 40% !important;
        }
    }
</style>
<style>
    select {
        max-width: 90%;
    }

    .div-style {
        max-width: 15%;
    }

    .card .card-body {
        background-color: #eae8ea;
        border-radius: 15px;
    }

    .table td, .table th {
        padding: 5px !important;
        width: 100%;
    }

    .editor-label {
        float: left;
        margin-right: 15px;
    }

    .editor-field {
        float: left;
        margin-right: 0px !important;
    }

    .border-style {
        border: 0.7px solid;
    }

    .table td, .table th {
        padding: 5px !important;
    }

    .card .card-body {
        background-color: #eae8ea;
        border-radius: 15px;
    }

    .editor-label, .editor-field {
        float: left;
        margin-right: 15px;
    }

    .btn-style {
        padding: 25px 25px !important;
        color: blue !important;
        box-shadow: 2px 2px #888888;
    }

    .textbox-style {
        padding: 10px 10px !important;
        font-size: 15px !important;
    }

    .label-style {
        font-size: 20px !important;
        text-align: center;
    }

    .modal-style {
        /*width:170%!important;*/
    }

    .invoice-num {
        background-color: #87c5e4;
        border: 0px;
    }

    .brz {
        border-radius: 0px;
    }

    .mb-2 {
        margin-bottom: -2% !important;
    }

    .saletext {
        color: red;
        font-size: 18px;
    }

    .saletexttotal {
        color: blue;
        font-size: 18px;
    }


    .setsearchbox {
        position: relative;
        margin-top: 0%;
        width: auto;
        background-color: antiquewhite;
        border-radius: 0px;
    }

    .searchheader {
        font-size: 16px;
        text-align: center;
        font-weight: bold;
        display: inline-block;
        width: 50%;
        text-align: start;
        border-bottom: 1px solid #dee2e6;
        border-right: 1px solid #dee2e6;
    }

    .di {
        display: inline-block;
    }

    .itemnumberbox {
        border: 1px solid #989a9d;
        background: #80808047;
    }

    .fr {
        float: right !important;
    }

    .mg-t-5 {
        margin-top: 5%;
    }

    .ml-2 {
        margin-left: 2%;
    }

    .mg-t-2 {
        margin-top: 2%;
    }

    .ml-3 {
        margin-left: 3%;
    }

    .mg-t-3 {
        margin-top: 3%;
    }

    .dn {
        display: none;
    }

    .checkcheapitems {
        margin-top: 50%;
        position: relative;
        left: 110%;
        width: 20%;
    }

    .emptygrid {
        height: 300px;
        background-color: antiquewhite;
    }




    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 10px 10px;
            transition: 0.3s;
            font-size: 12px;
        }

            /* Change background color of buttons on hover */
            .tab button:hover {
                background-color: #ddd;
            }

            /* Create an active/current tablink class */
            .tab button.active {
                background-color: #ccc;
            }

    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        /* border: 1px solid #ccc;*/
        border-top: none;
    }

    .newspaper {
        column-gap: 44px;
    }

    .responsive {
        width: 100%;
        height: auto;
    }

    .mtop {
        margin-top: -15px;
    }

    .bordercolormodal {
        border: 2px solid #b0b6c3;
        background-color: #ffffff;
    }

    .selectcash {
        max-width: 100%;
    }

    .st-1 {
        color: #0000ab;
        border: 1.1px solid #b0bde0;
        font-size: xxx-large;
        font-style: bold;
        font-weight: 900;
        width: 100%;
    }

    .font-size {
        font-size: 13px;
        font-weight: 500;
    }

    .swal2-modal {
        min-height: 0 !important;
    }

    .actionbox {
        background: white;
        box-sizing: border-box;
        margin-bottom: 2%;
        border-radius: 20px;
    }

    .setsearchbox {
        position: relative;
        margin-top: 0%;
        width: auto;
        background-color: antiquewhite;
        border-radius: 0px;
    }

    .searchheader {
        font-size: 16px;
        text-align: center;
        font-weight: bold;
        display: inline-block;
        width: 50%;
        text-align: start;
        border-bottom: 1px solid #dee2e6;
        border-right: 1px solid #dee2e6;
    }

    .di {
        display: inline-block;
    }

    .itemnumberbox {
        border: 1px solid #989a9d;
        background: #80808047;
    }

    .fr {
        float: right !important;
    }

    .bar-styles {
        border-radius: 20px;
        height: 40px;
        margin-bottom: 10px;
    }

    .labelreds {
        color: red;
    }

    .panel-head {
        padding: 10px 15px;
        border-bottom: 1px solid transparent;
        border-top-left-radius: 3px;
        border-top-right-radius: 3px;
    }

    label {
        color: #00008B;
    }

    .add-style {
        color: red;
    }

    .dropadditemCategory {
        background: #e9ecef;
        opacity: 1;
        border: 0;
        outline: 1px solid #dee2e6;
        font-weight: 400;
        font-size: 0.875rem;
        border-radius: 4px;
        height: 2rem;
    }

    .progress-bar-vertical {
        width: 20px;
        min-height: 200px;
        margin-right: 20px;
        background: #d0cece;
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        align-items: flex-end;
        -webkit-align-items: flex-end
    }

        .progress-bar-vertical .progress-bar {
            width: 100%;
            height: 0;
            -webkit-transition: height 0.6s ease;
            -o-transition: height 0.6s ease;
            transition: height 0.6s ease
        }

</style>


@{
    var shortaddvalue = 0;
}

<div class="container">
    <div class="row row-no-gutters">
        <div class="col-lg-12 col-md-12 col-sm-12 col-12">
            <div class="card">
                <div class="card-body">

                    <div class="row">
                        <div class="w-100 p-3 h-100 w-100 d-inline-block actionbox" id="listbtns">
                            <div id="onlisticon" class="di">
                                <img id="refresh-id" src="../images/refresh.png" style="width:50px" title="Refresh" onclick="ReloadPage()" />
                                @*   <img class="saverecord" src="../images/save.png" style="width:50px" title="Save" onclick="creditCheck(false, false,false,false)" /> *@
                                <img class="saverecord" src="../images/save.png" style="width:50px" title="Save" onclick="InsertSaleDetails1(false, false)" />
                               @*  <img class="editrecord" src="../images/edit.png" style="width: 50px; display: none" title="Edit" onclick="creditCheck(false,true,false,false)" /> *@
                                <img class="editrecord" src="../images/edit.png" style="width: 50px; display: none" title="Edit" onclick="InsertSaleDetails1(false,false)" />
                                <img class="hide-icon" src="../images/delete.png" style="width:50px" title="Delete" onclick="" />
@*
                                <img class="printrecord" src="../images/printer.png" style="width:50px" title="Print" onclick="creditCheck(true, false,false,false)" />*@
                                <div class="di div-style" style=" margin-left: 30px;">
                                    <select onchange="nextinvoice1('null',this.value, 'PostedInvoice')" id="posted-invoice">
                                        <option value="value">Posted</option>
                                    </select>
                                </div>
                                <div class="di div-style">
                                    <select onchange="nextinvoice1('null',this.value, 'OpenInvoice')" id="open-invoice">
                                        <option value="value">Open</option>
                                    </select>
                                </div>
                                <img src="../images/Edit_W.jpg" class="fa-eye d-none" style="height:40px" aria-hidden="true" />
                                @*<i class="fa fa-eye d-none" style="font-size:30px" aria-hidden="true"></i>*@
                                <div class="" style=" margin-left: 20px; display:none; " id="DivSP">
                                     <img class="hide-icon" src="../images/printer.png" style="width:50px" title="Print" onclick="openmodalabcd()" />
                                    <img class="hide-icon " src="../images/credit.png" style="width:50px;margin-left:8px;" title="Payment" onclick="openmodal()" />
                                 @*   <img class="printrecord" src="../images/printer.png" style="width:50px" title="Print" onclick="creditCheck(true, false,false,false)" />*@
                                  
                                    <img class="hide-icon" id="" src="../images/payment.png" style="width:50px;margin-left:5px;" title="Credit"  />
                                    @* <img class="hide-icon" id="" src="../images/add.png" style="width:50px;margin-left:5px;" title="Credit" onclick="openpaymentmodal2()" /> *@
                                </div>
                                <div class="di" style=" margin-left: 20px; " id="DivSP2">
                                    <img class="hide-icon" src="../images/printer.png" style="width:50px;margin-left:5px;" title="Print"  />
                                    <img class="hide-icon " src="../images/credit.png" style="width:50px;margin-left:8px;" title="Payment" />
                                    <img class="hide-icon" id="" src="../images/payment.png" style="width:50px;margin-left:5px;" title="Credit" />
                                </div>


                                <input class="d-none" id="open-invoices" value="true" />
                            </div>

                            <div id="defaultlisticons" class="di"></div>
                            <div id="onsaveicon">
                            </div>

                            @*<img class="saverecord hide-icon" src="~/images/save1.png" style="width:50px" title="Save" />*@&ensp;&ensp;&ensp;
                            <div class="row fr" id="newinvoicenumber">
                                @Html.HiddenFor(model => model.InvoiceNumber, new { @class = "form-control" })
                                <input type="text" style="display:none;" id="Accountnumber" />
                            </div>
                        </div>

                        <div class="col-lg-8">

                            <div class="row">
                                <div class="col-lg-10 col-md-12 col-sm-12 col-12">
                                    <div class="row">
                                        <div class="col-lg-8 col-md-8 col-sm-12 col-12 gx-0 gy-0">
                                          <div class="form-group" >
                                                <label class="dim col-sm-12" >
                                                    Sold To
                                                    @Html.EditorFor(model => model.CustomerName, new { htmlAttributes = new { @class = "form-control searchname brd", onkeyup = "GetAllMatchedItems(event)", autocomplete = "off", id = "searchname" } })
                                                    <div style="background-color: transparent !important;">
                                                        <div id="listallmissions" style="overflow: auto; max-height: 300px;">
                                                          
                                                        </div>
                                                    </div>
                                                    <label class="text-danger field-validation-error db" id="ValCustomerName" style="font-size:12px;"></label>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-3 col-sm-12 col-12" style="margin-top: 21.8px;">
                                            <div class="form-group">
                                                <label class="dim col-sm-12">
                                                    @Html.EditorFor(model => model.CustomerNumber, new { htmlAttributes = new { @class = "form-control customername brd", id = "customercodeinfo", @readonly = "readonly" } })
                                                    <label class="text-danger field-validation-error db" id="ValCustomercode" style="font-size:12px;"></label>
                                                </label>
                                            </div>
                                        </div>
                                         <div>
                                             @*PosSaleId Field *@
                                                <input type="hidden" id="PointOfSaleId" name="PointOfSaleId" value="">
                                            </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                            <div class="row gx-0 gy-0">
                                                <div class="col-lg-4 col-md-4 col-sm-12 col-12">
                                                    <div class="form-group">
                                                        <label class="dim col-sm-12" for="ShowAllitem">
                                                            Get Sales/Discount
                                                            @Html.CheckBox("GetSaleDiscount", false, new { @id = "getsalediscount", })
                                                        </label>

                                                    </div>
                                                </div>
                                                <div class="col-lg-3 col-md-3 col-sm-12 col-12">
                                                    <div class="form-group">
                                                        @Html.EditorFor(model => model.Discount, new { htmlAttributes = new { @class = "form-control brd", id = "discount", } })

                                                    </div>
                                                </div>
                                                <div class="col-lg-5 col-md-5 col-sm-12 col-12">
                                                    <div class="form-group" style="display:inline-flex">
                                                        <div class="col-lg-4 col-sm-6 col-6 col-md-4">
                                                            @Html.EditorFor(model => model.InDiscount, new { htmlAttributes = new { @class = "form-control brd", id = "discount", } })
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-6 col-6">
                                                            @Html.EditorFor(model => model.InDiscount, new { htmlAttributes = new { @class = "form-control brd", id = "discount", } })
                                                        </div>
                                                    </div>
                                                </div>
                                                <span style="display:none" id="customerid"></span>
                                                <span style="display:none" id="customername"></span>
                                                <span style="display:none" id="bussinessAddress"></span>
                                                <span style="display:none" id="customerAddToMail"></span>
                                                <span style="display:none" id="customerEmail"></span>
                                                <span style="display:none" id="popupMessage"></span>
                                                <span style="display:none" id="isPopupMessage"></span>
                                                <span style="display:none" id="isExclude"></span>
                                                <span style="display:none" id="remainingAmount"></span>
                                                <span style="display:none" id="supervisorId"></span>
                                                <span style="display:none" id="supervisorComment"></span>
                                                <span style="display:none" id="isBilltoBill"></span>
                                                <span style="display:none" id="iscredithold"></span>
                                            </div>
                                        </div>
                                    </div>
                                    @*<div class="row mb-2">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive">
                                    <table class="table  table-bordered table-condensed" style="border:0.7px solid;">
                                    <thead>
                                    <tr style="background-color:lightgreen">
                                    <th scope="col">Sales Man</th>
                                    <th scope="col">Paymnt Terms</th>
                                    <th scope="col">Shipped Via</th>
                                    <th scope="col">Driver</th>
                                    <th scope="col">Weight</th>
                                    <th scope="col">Count</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr style="height:2px;">

                                    <td contenteditable="true" id="salesmanid"></td>
                                    <td contenteditable="true"></td>
                                    <td contenteditable="true"></td>
                                    <td contenteditable="true" id="driverid"></td>
                                    <td contenteditable="true"></td>
                                    <td contenteditable="true" id="countnum"></td>
                                    </tr>

                                    </tbody>
                                    </table>
                                    </div>
                                    </div>*@
                                    <div class="row mb-2">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive">
                                            <table class="table  table-bordered table-condensed" style="border:0.7px solid;">
                                                <thead>
                                                    <tr style="background-color:lightgreen">
                                                        <th scope="col">Sales Man</th>
                                                        <th scope="col">Paymnt Terms</th>
                                                        <th scope="col">Shipped Via</th>
                                                        <th scope="col">Driver</th>
                                                        <th scope="col">Weight</th>
                                                        <th scope="col">Count</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr style="height:2px;">
                                                        <td id="salesmanid"></td>
                                                        <td id="paymentTermsid"></td>
                                                        <td id="shippedViaid"></td>
                                                        <td id="driverid"></td>
                                                        <td id="weightid"></td>
                                                        <td id="countnum"></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-2 col-md-12 col-sm-12 col-12">
                                    <img class="Paid d-none" id="showpaid" src="../images/Paid.png" style="height:70px; margin-left:10px;" aria-hidden="true" />
                                </div>
                            </div>

                        </div>
                        <div class="col-lg-4">
                            <div class="row">
                                <div class="row margintop marginbotm">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12 col">
                                        <input class="form-control border-style invoice-num" style="background-color: #87c5e4" type="text" id="invoicenumber" name="previousbalance" disabled>
                                        <label class="text-danger field-validation-error db" id="ValMsgpreviousbalance" style="font-size:12px;"></label>
                                    </div>
                                </div>

                                <div class="row marginbtm">
                                    <div class="col col-lg-3 col-md-3 col-sm-12 col-12 editor-label">
                                        <label class="saletext marginlft">Prev.bal</label>
                                    </div>
                                    <div class="col col-lg-8 col-md-8 col-sm-12 col-12 editor-field" style=" margin-top: 0px;">
                                        <input class="form-control border-style brz" type="text" id="previousbalance" name="previousbalance" readonly>
                                        <label class="text-danger field-validation-error db" id="ValMsgpreviousbalance" style="font-size:12px;"></label>
                                    </div>
                                </div>
                                @*</div>*@
                                @*<div class="col-lg-12 col-md-12 col-sm-12 col-12 col margin-botm">*@
                                <div class="row marginbtm">
                                    <div class=" col col-lg-3 col-md-3 col-sm-12 col-12 editor-label">
                                        <label class="saletexttotal marginlft">SubTotal</label>
                                    </div>
                                    <div class=" col col-lg-8 col-md-8 col-sm-12 col-12 editor-field">
                                        <input class="form-control border-style brz" type="text" id="subtotalauto" name="subtotal" readonly>
                                        <label class="text-danger field-validation-error db" id="ValMsgsubtotal" style="font-size:12px;"></label>
                                    </div>
                                </div>
                                @*</div>*@
                                @*<div class="col-lg-12 col-md-12 col-sm-12 col-12 col margin-botm">*@
                                <div class="row marginbtm">
                                    <div class=" col col-lg-3 col-md-3 col-sm-12 col-12 editor-label">
                                        <label class="saletexttotal marginlft">Other/Discount</label>
                                    </div>
                                    <div class=" col col-lg-4 col-md-4 col-sm-12 col-12 editor-field me-lg-0 me-md-0 pe-lg-0 pe-md-0">
                                        <input class="form-control border-style brz p-0 " autocomplete="off" type="text" id="otherid" name="subtotal" onkeyup="CalculatetaxPlusDiscount()">
                                        <label class="text-danger field-validation-error db" id="ValMsgsubtotal" style="font-size:12px;"></label>
                                    </div>
                                    <div class=" col col-lg-4 col-md-4 col-sm-12 col-12 editor-field ms-lg-0 ms-md-0 ps-lg-0 ps-md-0">
                                        <input class="form-control border-style brz " autocomplete="off" type="text" id="discountidadd" name="subtotal" onkeyup="CalculatetaxPlusDiscount()">
                                        <label class="text-danger field-validation-error db" id="ValMsgsubtotal" style="font-size:12px;"></label>
                                    </div>
                                </div>
                                @*</div>*@
                                @*<div class="col-lg-12 col-md-12 col-sm-12 col-12 col margin-botm">*@
                                <div class="row marginbtm">
                                    <div class=" col col-lg-3 col-md-3 col-sm-12 col-12 editor-label">
                                        <label class="saletexttotal marginlft">Tax/Freight</label>
                                    </div>
                                    <div class=" col col-lg-4 col-md-4 col-sm-12 col-12 editor-field me-lg-0 me-md-0 pe-lg-0 pe-md-0">
                                        <input class="form-control border-style brz" type="text" autocomplete="off" id="taxid" name="taxid" onkeyup="CalculatetaxPlusDiscount()">
                                        <label class="text-danger field-validation-error db" id="ValMsgsubtotal" style="font-size:12px;"></label>
                                    </div>
                                    <div class=" col col-lg-4 col-md-4 col-sm-12 col-12 editor-field ms-lg-0 ms-md-0 ps-lg-0 ps-md-0">
                                        <input class="form-control border-style brz p-0" type="text" autocomplete="off" id="freightid" ondblclick="taxfunc()" name="subtotal" onkeyup="CalculatetaxPlusDiscount()">
                                        <label class="text-danger field-validation-error db" id="ValMsgsubtotal" style="font-size:12px;"></label>
                                    </div>
                                </div>
                                @*</div>*@
                                @*<div class="col-lg-12 col-md-12 col-sm-12 col-12 col margin-botm">*@
                                <div class="row marginbtm">
                                    <div class="  col col-lg-3 col-md-3 col-sm-12 col-12 editor-label">
                                        <label class="saletext marginlft">Inv.Total</label>
                                    </div>
                                    <div class="col col-lg-8 col-md-8 col-sm-12 col-12 editor-field">
                                        <input class="form-control border-style brz" type="text" id="invoicetotal" name="subtotal" onkeyup="CalculatetaxPlusDiscount()" readonly>
                                        <label class="text-danger field-validation-error db" id="ValMsgsubtotal" style="font-size:12px;"></label>
                                    </div>
                                </div>
                                @*</div>*@
                                @*<div class="col-lg-12 col-md-12 col-sm-12 col-12 col margin-botm">*@
                                <div class="row marginbtm">
                                    <div class="col col-lg-3 col-md-3 col-sm-12 col-12 editor-label">
                                        <label class="saletext marginlft">AmountDue</label>
                                    </div>
                                    <div class="col col-lg-8 col-md-8 col-sm-12 col-12 editor-field">
                                        <input class="form-control border-style brz" type="text" id="amountdue" name="previousbalance" readonly>
                                        <label class="text-danger field-validation-error db" id="ValMsgamountdue" style="font-size:12px;"></label>
                                    </div>
                                </div>
                                @*</div>*@
                            </div>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive" id="saletable">
                            <table class="table table-bordered table-condensed" id="saletable" style="border:0.7px solid;">
                                <thead>
                                    <tr style="border:0.7px solid;border-bottom:1.4px solid">
                                        <th onclick="sortTable(0)" style="width: 10px">Ser</th>
                                        <th onclick="sortTable(1)" style="width: 10px">Item#</th>
                                        <th onclick="sortTable(2)">Description</th>
                                        @*<th>Quantity</th>*@
                                        <th onclick="sortTable(0)">Amount</th>
                                        <th colspan="2">Discount</th>
                                        <th colspan="2">Units</th>
                                        <th onclick="sortTable(4)">Price</th>
                                        <th onclick="sortTable(9)">Total</th>
                                        <th>Sales Limit</th>
                                        <th onclick="sortTable(0)">Ringer Quantity</th>
                                        <th><span class="add-row ti-plus"></span></th>

                                    </tr>
                                </thead>
                                <tbody id="appendnewrowforsale">
                                    <!-- hidden row -->
                                </tbody>
                            </table>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<div id="abcde" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title mx-auto" id="ModalLabel">Super Admin Pin</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodalabcd()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-group">
                        <label for="itemcategory">Please Enter Super Admin Pin</label>
                        <input class="form-control" type="text" placeholder="Super Admin Pin" id="" />
                        <label class="text-danger db" style="display:none" id="">Enter Credit</label>
                        <br>
                        <input class="form-control" type="text" placeholder="CreditLimit" id="" />
                    </div>
                    <button type="button" class="btn btn-dark text-white mx-auto col-md-3" id="itemcategorysubmit"><p style="color:white">Submit</p></button>
                </div>

            </div>

        </div>
    </div>
</div>
<div id="payment" class="modal fade" role="dialog" style="border-radius: 25px;">
    <div class="modal-dialog modal-lg ">
        <div class="modal-content col-lg-12 modal-style">
            <div class="modal-header" style="background-color: #eae8ea;">
                <h5 class="modal-title mx-auto" id="ModalLabel">Payment</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="background-color: #eae8ea;">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                            @*<div class="card">
                            <div class="card-body">*@
                            <div class="row">
                                <div class="col-lg-2 col-md-3 col-sm-6 col-6">
                                    <img class="" src="../images/create.png" style="width:50px" title="Create" />
                                </div>
                                <div class="col-lg-2 col-md-3 col-sm-6 col-6">
                                    <img class="" src="../images/search.png" style="width:50px" title="Search" />

                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12 col-12 mt-3">
                                    <div class="form-group" style="color:blue;">
                                        <label class="dim col-sm-12 col-12">
                                            @Html.CheckBox("GetSaleDiscount", false, new { @id = "getsalediscount", })
                                            List All Customers
                                        </label>

                                    </div>
                                </div>
                                <div class="col-lg-5 col-md-12 col-sm-12 col-12">
                                    <button class="btn  btn-style ">Silent/F4</button>
                                    <button class="btn  btn-style ">Print/F5</button>
                                    <img class="ms-lg-5" src="../images/cancel.png" style="width:50px" title="Close" />&ensp;&ensp;&ensp;
                                </div>
                            </div>
                            <div class="row mt-2">
                                <div class="col-lg-5">
                                    @Html.EditorFor(model => model.InDiscount, new { htmlAttributes = new { @class = "form-control", id = "discount", } })

                                </div>
                                <div class="col-lg-3">
                                    @Html.EditorFor(model => model.InDiscount, new { htmlAttributes = new { @class = "form-control", id = "discount", } })
                                </div>
                                <div class="col-lg-4">

                                    <div class="col-lg-1 col-sm-12 col-12 editor-label">
                                        <label>Prev.bal</label>
                                    </div>
                                    <div class="col-lg-9 col-sm-12 col-12 ps-5 editor-field">
                                        @Html.EditorFor(model => model.InDiscount, new { htmlAttributes = new { @class = "form-control border-style", id = "discount", } })
                                    </div>

                                </div>
                            </div>
                            <div class="row">
                                <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6 ;" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active Payments-tab" data-bs-toggle="tab" href="#payments" role="tab" aria-controls="payments" aria-selected="true">Payments</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link Invoice-tab" data-bs-toggle="tab" href="#invoice" role="tab" aria-controls="invoice" aria-selected="false">Unpaid Invoices[F8]</a>
                                    </li>

                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane fade show active" id="payments" role="tabpanel" aria-labelledby="Payments-tab">
                                        <div class="row" style="height:200px;overflow-x: auto; overflow-y: auto; ">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive" id="mytable">
                                                        <table class="table table-bordered table-condensed" style="border:0.7px solid;">
                                                            <thead>
                                                                <tr style="border:0.7px solid;border-bottom:1.4px solid">
                                                                    <th>Amount Paid</th>
                                                                    <th>Amount Alloc</th>
                                                                    <th>Payment Type</th>
                                                                    <th>Ck/Card Number</th>
                                                                    <th>Hold Date</th>

                                                                    <th><span class="add-row1 ti-plus"></span></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="appendnewrowforsale">
                                                                <!-- hidden row -->

                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <footer class="row">
                                            <div class="col-lg-3 col-md-6 col-sm-12 col-12 ">
                                                <div class="form-group">
                                                    <label class="dim col-sm-12 label-style" style="color: #53adcb">
                                                        Total Paid
                                                    </label>
                                                    @Html.EditorFor(model => model.InDiscount, new { htmlAttributes = new { @class = "form-control textbox-style", id = "discount", } })
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-6 col-sm-12 col-12">
                                                <div class="form-group">
                                                    <label class="dim col-sm-12 label-style" style="color: #53adcb">
                                                        Total Alloc
                                                    </label>
                                                    @Html.EditorFor(model => model.InDiscount, new { htmlAttributes = new { @class = "form-control textbox-style", id = "discount", } })
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-6 col-sm-12 col-12">
                                                <div class="form-group">
                                                    <label class="dim col-sm-12 label-style" style="color:red">
                                                        TotalChange
                                                    </label>
                                                    @Html.EditorFor(model => model.InDiscount, new { htmlAttributes = new { @class = "form-control textbox-style ", id = "discount", } })
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-6 col-sm-12 col-12">
                                                <div class="form-group">
                                                    <label class="dim col-sm-12 label-style" style="color:blue">
                                                        Balance
                                                    </label>
                                                    @Html.EditorFor(model => model.InDiscount, new { htmlAttributes = new { @class = "form-control textbox-style", id = "discount", } })
                                                </div>
                                            </div>
                                        </footer>
                                    </div>

                                    <div class="tab-pane fade" id="invoice" role="tabpanel" aria-labelledby="Invoice-tab">
                                        <div class="row" style="height:300px;">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive" id="mytable">
                                                        <table class="table table-bordered table-condensed" style="border:0.7px solid;">
                                                            <thead>
                                                                <tr style="border:0.7px solid;border-bottom:1.4px solid">
                                                                    <th>Innvoive #</th>
                                                                    <th>Date</th>
                                                                    <th>Days</th>
                                                                    <th>Inv.Total</th>
                                                                    <th>Total Paid</th>
                                                                    <th>Inv.Balance</th>
                                                                    <th style="color:blue;">Pay Order</th>
                                                                    @*<th><span class="add-row ti-plus"></span></th>*@
                                                                </tr>
                                                            </thead>
                                                            <tbody id="appendnewrowforsalepayment">
                                                                <!-- hidden row -->

                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <footer class="row">
                                        </footer>
                                    </div>
                                </div>
                            </div>
                            @*</div>
                            </div>*@

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@*//paymentmodal*@
<div id="customerpayment" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content modalstyling">
            <div class="modal-header text-center">
                <h5 class="modal-title w-100" id="InvoiceP"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="CustomerPMOdalhide()">
                    <span aria-hidden="true">&times;</span>
                </button>

            </div>


            <div class="tab">
                
                <button class="tablinks active" onclick="openCity(event, 'GeneralPayments')">General Payments</button>
                <button class="tablinks" onclick="openCity(event, 'MoreInfo')">More Info</button>
                <button class="tablinks" onclick="openCity(event, 'InvoicePayments')">Invoice Payments</button>
                <button class="tablinks" onclick="openCity(event, 'PrintOptions')">Print Options</button>
                <button class="tablinks" onclick="openCity(event, 'FooterMessages')">FooterMessages</button>
                <button class="tablinks" onclick="openCity(event, 'UnPaidInvoices')">UnPaidInvoices</button>
                @* <button class="tablinks" onclick="openCity(event, 'Payments')">Payments</button> *@
            </div>

            <div class="modal-body " style="background-color:#cccccc">

                <div id="GeneralPayments" class="tabcontent" style="display:block">
                    <div class="row">
                        <div class="col-lg-7">

                            <label id="CustomerNameP" style="color: #010083; font-size: 20px; font-weight: 600; "> 1803 Gondals 786 ltc </label>

                        </div>
                        <div class="col-lg-1"></div>
                        <div class="col-lg-4">

                            <label id="CustomerCodeP" style="color: #010083; font-weight: 700; font-size: 18px; "> 01 </label>

                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-4">
                            <div style="background-color: #ffff00; border: 2px solid #d1d6e1; display: block; text-align: center;">
                                <label style="font-weight: 600; color: #848091; font-size: 22px;">
                                    Invoice#
                                </label>
                                <br>
                                <label id="InvoiceNumber2P" style="color: #848091; font-weight: 500; font-size: 20px;">
                                    1121208-22222
                                </label>
                            </div>
                        </div>
                        <div class="col-lg-2">
                        </div>
                        <div class="col-lg-5" style="border: 2px solid #bbb4b4; font-size: 18px; ">
                            <label style="color: #848091; font-weight: 700;">
                                Invoice Total <span id="InvoiceTotalP" class="ms-5"></span>
                            </label>

                            <label style="color: #8f2000; font-weight: 700;">
                                Balance Due <span id="BalanceDueP" class="ms-5"></span>
                            </label>
                
                              @*InvoiceBalanceField *@
                              <input type="hidden" id="InvoiceBalance" name="InvoiceBalance" value="">

                        </div>
                        <div class="col-lg-1">
                        </div>
                    </div>
                    <br>
                    <br>
                    <div class="row " style="background-color: #cccccc;border: 2px solid #e3e8f1;">
                        <div class="col-lg-12 mt-1 col-md-12 col-sm-12 col-12 table-responsive" id="">
                            <table class="table table-bordered table-condensed table-responsive-lg" id="Custpaymenttable" style="border:0.7px solid;">
                                <thead>
                                    <tr style="border:0.7px solid;border-bottom:1.4px solid">
                                        <th style="color: #020caf;">Amount Paid</th>
                                        <th>Amount Alloc</th>
                                        <th>Payment Type</th>
                                        <th>Ck/Card Number</th>
                                        <th style="color: #c92d21">Hold Date</th>

                                        <th><span class="add-rowpayment ti-plus"></span></th>
                                    </tr>
                                </thead>
                                <tbody id="paymentmodaltable" style="background-color: white;">
                                    <!-- hidden row -->

                                </tbody>
                            </table>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-lg-2 col-md-6 col-sm-12 col-12">
                                <div class="form-group bordercolormodal">
                                    <label class="dim col-sm-12 label-style" style="color: #53adcb">
                                        Total Paid
                                    </label>
                                    <label id="TotalPaidP" class="dim col-sm-12 label-style" style="color: #53adcb">$0.00</label>

                                </div>
                            </div>
                            <div class="col-lg-2 col-md-6 col-sm-12 col-12">
                                <div class="form-group bordercolormodal">
                                    <label class="dim col-sm-12 label-style" style="color: #53adcb">
                                        Total Alloc
                                    </label>
                                    <label id="totalpaidd" class="dim col-sm-12 label-style" style="color: #53adcb">$0.00</label>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-12 col-12">
                                <div class="form-group bordercolormodal">
                                    <label class="dim col-sm-12 label-style" style="color:red">
                                        Change
                                    </label>
                                    <label class="dim col-sm-12 label-style" style="color: #53adcb">
                                        <input type="text" name="CJ" id="ChangeP" style="border:none; color: #53adcb; width:100%; text-align:center;" readonly />
                                    </label>

                                </div>
                            </div>
                            <div class="col-lg-2 col-md-6 col-sm-12 col-12">
                                @*  <div class="form-group bordercolormodal">


                                </div>*@
                                <button id="myButton" style="font-size:30px ; padding:9px 15px"> <i class="fa fa-hand-o-left"></i></button>
                                <button id="rightButton" style="font-size:30px ; padding:9px 15px" disabled> <i class="fa fa-hand-o-right"></i></button>

                                @*<button id="rightButton" style="font-size:30px ; padding:9px 15px; display:none;"> <i class="fa fa-hand-o-right"></i></button>*@

                            </div>

                            <div class="col-lg-3 col-md-6 col-sm-12 col-12">
                                <div class="form-group bordercolormodal">
                                    <label class="dim col-sm-12 label-style" style="color:blue">
                                        Balance
                                    </label>
                                    <label id="BalanceP" class="dim col-sm-12 label-style" style="color: #53adcb">$0.00</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2" style="background-color: #cccccc">
                        <div class="col-lg-4">
                            <label id="paythisinv" style="border: 2px solid #c99797;font-size: 13px;"><span style="color:Blue">F3</span> Pay This Invoice First </label>
                            <input class="" type="checkbox" id="PrintInvoicef3" />
                        </div>
                        <div class="col-lg-1">
                        </div>
                        <div class="col-lg-6">
                            <div class="row">
                                <div class="col-lg-4">
                                    <input type="checkbox" id="customeremailcopy" style=" height: 9px;" onclick="checkboxChange()">
                                    <label for="customeremailcopy" style=" font-size: 10px; font-weight: 800; color: red;">Email Copy</label>
                                    <input type = "text" id="CustomerEmailValue" value="false" hidden>
                                </div>
                                <div class="col-lg-6">
                                    <label id="customeremaillabel" style=" font-size: 11px; font-weight: 700;">qondalistion@gmail.com</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4">
                                    <input type="checkbox" id="textcopy" style=" height: 9px;" name="vehicle1" value="Bike">
                                    <label for="textcopy" style=" font-size: 10px; font-weight: 800; color: red;">Text Copy</label>
                                </div>
                                <div class="col-lg-8">
                                    <div class="row">
                                        <div class="col-lg-6 ps-3 pe-0 me-0">
                                            <!--<input class=" form-control" type="text"--> @*style=" font-size: 11px; font-weight: 700;"*@ <!--/>-->
                                            <label id="textlabel" style=" font-size: 11px; font-weight: 700;">qondalistion@gmail.com</label>
                                        </div>
                                        @*<input style=" font-size: 11px; font-weight: 700;">qondalistion@gmail.com>*@
                                        <div class="col-lg-6 form-group ms-0 ps-0">
                                            <select id="selectdropdown" class="form-control" aria-label="Default select example">
                                                <option selected>Open this select menu</option>
                                                <option value="1">One</option>
                                                <option value="2">Two</option>
                                                <option value="3">Three</option>
                                            </select>
                                        </div>

                                    </div>
                                </div>
                            </div>


                        </div>

                    </div>
                   
                    <div class="row" style="background-color: #cccccc">
                        <div class="col-md-2 ms-0">
                            <button type="button" class="btn btn-light p-3" style="border-radius: 0;">OrderByDescription</button>
                        </div>
                        <div class="ms-5 col-md-2">
                            <img class="responsive mtop" style="cursor:pointer" src="../images/icons8-microsoft-excel-96.png" />
                        </div>
                        <div class="col-md-2">
                            <button id="PrintInvoicef10" type="button" class="btn btn-light p-3" style="border-radius: 0;">PrintInvoiceF5</button>
                        </div>
                        <div class="col-md-2 ms-3">
                            <button type="button" class="btn btn-light p-3" style="border-radius: 0;" id="PaymentSilentF4">SilentF4</button>
                        </div>
                        @*<div class="col-md-2">
                        <img class="responsive mtop" style="cursor:pointer" src="~/images/icons8-shutdown-96.png" />

                        </div>*@
                    </div>

                </div>

                 <div style="background-color:#cccccc; text-align:center" id="MoreInfo" class="tabcontent ">
                    <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: #010083;font-weight: 700;" >Invoice Num</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border:inset" type="text" id="moreInfoInvoiceNumber">
                        </div>
                    </div>
                    <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: #010083;font-weight: 700;">Prev Balance</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border:inset"  type="text" id="moreInfoPreBalance">
                        </div>
                    </div>
                     <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: #010083;font-weight: 700;">Invoice Amount</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border:inset"  type="text" id="moreInfoInvAmount">
                        </div>
                    </div>
                        <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: #010083;font-weight: 700;">Amount Due</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border:inset"  type="text" id="moreInfoAmountDue">
                        </div>
                    </div>
                     <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: #010083;font-weight: 700;">Payment</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border:inset"  type="text" id="moreInfoPayment">
                        </div>
                    </div>
                      <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: #010083;font-weight: 700;">Final Balance</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border:inset"  type="text" id="moreInfoFinalBalance">
                        </div>
                    </div>
                     <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: darkred;font-weight: 700;">Invoice Date</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border :ridge; background-color:#cccccc; border: 1px solid white;" type="text" id="moreInfoInvDate">
                        </div>
                    </div>
                     <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: darkred;font-weight: 700;">Ship Date</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border :ridge; background-color:#cccccc; border: 1px solid white;" type="text" id="moreInfoShipDate">
                        </div>
                    </div>
                     <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: darkred;font-weight: 700;">State Reporting Date</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border :ridge; background-color:#cccccc; border: 1px solid white;" type="text" id="moreInfoSTDate">
                        </div>
                    </div>
                     <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: #010083;font-weight: 700;">Station</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border :ridge; background-color:#cccccc; border: 1px solid white;"   type="text" id="moreInfoStation">
                        </div>
                    </div>
                    <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: #010083;font-weight: 700;">User</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border :ridge; background-color:#cccccc; border: 1px solid white;"  type="text" id="moreInfoUser">
                        </div>
                    </div>
                     <div class="row" style="padding-bottom:10px">
                        <div class="col-md-5" style="text-align:right">
                            <p style="font-size: 20px;font-family: initial; color: #010083;font-weight: 700;">Printed On</p>
                        </div>
                        <div class="col-md-4">
                            <input style="border :ridge; background-color:#cccccc; border: 1px solid white;" type="text" id="moreInfoprintedOn">
                        </div>
                    </div>
                   
                    
                    <div class="row mt-2" style="background-color: #cccccc">
                       
                       
                        <div class="col-lg-12" style="border:ridge">
                            <div class="row" style="padding-top:20px">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Email Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            


                            <div class="row">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Text Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-lg-4 ">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">OrderByDescription</button>
                                </div>

                                <div class="col-lg-3 ">
                                    <button id="PrintInvoicef10" type="button" class="btn btn-light p-3" style="border-radius: 0;">PrintInvoiceF5</button>
                                </div>
                                <div class="col-lg-3">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">SilentF4</button>
                                </div>
                                <div class="col-lg-2">
                                    <i class='fa fa-power-off red-color' style="color:red;font-size:50px;"></i>
                                </div>

                                @*<div class="col-md-2">
                                <img class="responsive mtop" style="cursor:pointer" src="~/images/icons8-shutdown-96.png" />

                                </div>*@
                            </div>

                        </div>

                    </div>
                
                </div>

                <div id="InvoicePayments" class="tabcontent">
                    <h3>InvoicePayments</h3>
                    <p style="color:#010083;font-weight:700">All Invoice Payments</p>
                    <div class="row mt-2" style="background-color: #cccccc; ">


                        <div class="col-lg-12" style="border:1px solid #e3e8f1" ">
                            <div class="row" style="border-bottom:1px solid black;padding-top:5px;">
                                <div class="col">
                                    <h5 style="font-size:13px;color:white">Amount Paid</h5>
                                </div>
                                <div class="col">
                                    <h5 style="font-size:13px;color:white">Amount Alloc</h5>
                                </div>
                                <div class="col">
                                    <h5 style="font-size:13px;color:white">Payment Type</h5>
                                </div>
                                <div class="col">
                                    <h5 style="font-size:13px;color:white">CK/Card Num</h5>
                                </div>
                                <div class="col">
                                    <h5 style="font-size:13px;color:#010083">Date</h5>
                                </div>
                            </div>
                            <div style="height:150px"> </div>


                        </div>

                    </div>
                    <p style="color:#010083;padding-top:10px;font-weight:700"> Payments posted from this invoice</p>
                    <div class="row mt-2" style="background-color: #cccccc">


                        <div class="col-lg-12" style="border:1px solid #e3e8f1">
                            <div class="row" style="border-bottom:1px solid black;padding-top:5px;">
                                <div class="col">
                                    <h5 style="font-size:13px;color:white">Amount Paid</h5>
                                </div>
                                <div class="col">
                                    <h5 style="font-size:13px;color:white">Amount Alloc</h5>
                                </div>
                                <div class="col">
                                    <h5 style="font-size:13px;color:white">Payment Type</h5>
                                </div>
                                <div class="col">
                                    <h5 style="font-size:13px;color:white">CK/Card Num</h5>
                                </div>
                                <div class="col">
                                    <h5 style="font-size:13px;color:white">Change</h5>
                                </div>
                                <div class="col">
                                    <h5 style="font-size:13px;color:#010083">Date</h5>
                                </div>
                            </div>
                            <div style="height:150px"> </div>


                        </div>
                      

                    </div>
                    <div class="row mt-2" style="background-color: #cccccc">


                        <div class="col-lg-12" style="border:ridge">
                            <div class="row" style="padding-top:20px">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Email Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <div class="row">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Text Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4 ">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">OrderByDescription</button>
                                </div>

                                <div class="col-lg-3 ">
                                    <button id="PrintInvoicef10" type="button" class="btn btn-light p-3" style="border-radius: 0;">PrintInvoiceF5</button>
                                </div>
                                <div class="col-lg-3">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">SilentF4</button>
                                </div>
                                <div class="col-lg-2">
                                    <i class='fa fa-power-off red-color' style="color:red;font-size:50px;"></i>
                                </div>

                                @*<div class="col-md-2">
                                <img class="responsive mtop" style="cursor:pointer" src="~/images/icons8-shutdown-96.png" />

                                </div>*@
                            </div>

                        </div>

                    </div>
                </div>

                <div id="PrintOptions" class="tabcontent">
                    <h3>PrintOptions</h3>
                    <div class="row">
                        <!-- First Div with 4 Columns -->
                        <div class="col-md-5" >
                            <div class=" p-3" style="border:inset">
                                <input type="checkbox" id="" name="" value="">
                                <label for="vehicle1"> Simple Invoice</label><br>
                               <input type="checkbox" id="" name="" value="">
                                <label for="vehicle1"> Categorized</label><br>
                                 <input type="checkbox" id="" name="" value="">
                                <label for="vehicle1"> In Order</label><br>
                                 <input type="checkbox" id="" name="" value="">
                                <label for="vehicle1"> Snapshot</label><br>
                                 <input type="checkbox" id="" name="" value="">
                                <label for="vehicle1"> Pre-Printed Forms</label><br>
                                 <input type="checkbox" id="" name="" value="">
                                <label for="vehicle1"> With OTP Taxes</label><br>
                                 <input type="checkbox" id="" name="" value="">
                                <label for="vehicle1"> Custom Forms</label><br>
                                 <input type="checkbox" id="" name="" value="">
                                <label for="vehicle1"> Landscape</label><br>
                             
                            </div>
                        </div>

                        <!-- Second Div with 8 Columns -->
                        <div class="col-md-7" style="border:inset">
                            <div class="row" style="padding:15px">
                                <div class="col-md-6">
                                    <div  p-3">
                                        <input type="checkbox" id="" name="" value="">
                                        <label for="vehicle1"> Auto Number</label><br><br>
                                  @*      <input type="checkbox" id="" name="" value="">
                                        <label for="vehicle1"> Print Footer Messeges</label><br>*@
                                        <input type="checkbox" id="" name="" value="">
                                        <label for="vehicle1"> Separate Lines </label><br><br>
                                        <input type="checkbox" id="" name="" value="">
                                        <label for="vehicle1"> View SPR</label><br><br>
                                        <input type="checkbox" id="" name="" value="">
                                        <label for="vehicle1"> View Charge</label><br><br>
                                      @*  <input type="checkbox" id="" name="" value="">
                                        <label for="vehicle1"> View Barcode in Invoice</label><br>*@
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div >
                                        <div style="padding-bottom:15px">
                                        <label for="vehicle1"> Copies</label>  <input style="width:25%;margin-right:10px;" type="number" id=""><input style="width:25%" type="number" id=""><br>
                                        </div>
                                        <input type="checkbox" id="" name="" value="">
                                        <label for="vehicle1"> Print Discounts</label><br><br>
                                        <input type="checkbox" id="" name="" value="">
                                        <label for="vehicle1"> Print Payments</label><br><br>
                                      @*  <input type="checkbox" id="" name="" value="">
                                        <label for="vehicle1"> Print Prev Balance</label><br>*@
                                        <input type="checkbox" id="" name="" value="">
                                        <label for="vehicle1"> Print Statistics</label><br><br>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-2" style="background-color: #cccccc">


                        <div class="col-lg-12" >
                            <div class="row" style="padding-top:20px">
                                <div class="col-lg-7"> <button type="button" class="btn btn-light p-3" style="border-radius: 0;">Process Invoices</button></div>
                                <div class="col-lg-5">
                                    <div class="form-group row">
                                        <div class="col-lg-12">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Email Copy Default Setting</label>
                                        </div>
                                       
                                    </div>
                                </div>
                            </div>



                            <div class="row">
                                <div class="col-lg-7"></div>
                                <div class="col-lg-5">
                                    <div class="form-group row">
                                        <div class="col-lg-12">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Text Copy Default Setting</label>
                                        </div>
                                      
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-7 " style="padding-bottom:10px">
                                 
                              
                                 <p>Backup Location</p>
                                    <input style="border :ridge; background-color:#cccccc; border: 1px solid white;" type="text">

                                </div>
                                <div class="col-lg-1">
                                   
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group row">
                                        <div class="col-lg-12">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: #010083;">Keep Change</label>
                                        </div>
                                       
                                    </div>
                                </div>

                                @*<div class="col-md-2">
                                <img class="responsive mtop" style="cursor:pointer" src="~/images/icons8-shutdown-96.png" />

                                </div>*@
                            </div>

                        </div>

                    </div>
                    <div class="row mt-2" style="background-color: #cccccc">


                        <div class="col-lg-12" style="border:ridge">
                            <div class="row" style="padding-top:20px">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Email Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <div class="row">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Text Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4 ">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">OrderByDescription</button>
                                </div>

                                <div class="col-lg-3 ">
                                    <button id="PrintInvoicef10" type="button" class="btn btn-light p-3" style="border-radius: 0;">PrintInvoiceF5</button>
                                </div>
                                <div class="col-lg-3">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">SilentF4</button>
                                </div>
                                <div class="col-lg-2">
                                    <i class='fa fa-power-off red-color' style="color:red;font-size:50px;"></i>
                                </div>

                                @*<div class="col-md-2">
                                <img class="responsive mtop" style="cursor:pointer" src="~/images/icons8-shutdown-96.png" />

                                </div>*@
                            </div>

                        </div>

                    </div>

                </div>
                <div id="FooterMessages" class="tabcontent">
                    <h3>FooterMessages</h3>
                    <div style="border:inset;padding:15px;">
                        <div class="row" style="padding-bottom: 10px">
                            <div class="col-md-10" style="text-align: right; display: flex">
                                <p style="font-size: 14px; font-family: initial; color: black; padding-right:10px;">Copy #1:</p>
                                <input class="col-auto" style="line-height: 40px; flex-grow: 1;" type="text">
                            </div>
                        </div>
                        <div class="row" style="padding-bottom: 10px">
                            <div class="col-md-10" style="text-align: right; display: flex">
                                <p style="font-size: 14px; font-family: initial; color: black;padding-right:10px;">Copy #2:</p>
                                <input class="col-auto" style="line-height: 40px; flex-grow: 1;" type="text">
                            </div>
                        </div>
                        <div class="row" style="padding-bottom: 10px">
                            <div class="col-md-10" style="text-align: right; display: flex">
                                <p style="font-size: 14px; font-family: initial; color: black;padding-right:10px;">Copy #3:</p>
                                <input class="col-auto" style="line-height: 40px; flex-grow: 1;" type="text">
                            </div>
                        </div>
                    </div>
                    <div class="row" style="padding-top:10px">

                        <div class="col-md-10" style="text-align:right; display:flex">
                            <p style="font-size: 14px;font-family: initial; color: #010083; padding-right:10px; width:20% ">Sales Order Message</p>

                            <input style="line-height:40px;padding-right:70px;" type="text">
                        </div>
                    </div>
                    <div class="row" style="padding-top:10px">
                        <div class="col-md-10" style="text-align:right; display:flex">
                            <p style="font-size: 14px;font-family: initial; color: #010083; padding-right:10px;width:20% ">Above Signature Message</p>

                            <input style="line-height:40px;padding-right:70px;" type="text">
                        </div>
                    </div>
                 
                    <div class="row mt-2" style="background-color: #cccccc">


                        <div class="col-lg-12" style="border:ridge">
                            <div class="row" style="padding-top:20px">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Email Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <div class="row">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Text Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4 ">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">OrderByDescription</button>
                                </div>

                                <div class="col-lg-3 ">
                                    <button id="PrintInvoicef10" type="button" class="btn btn-light p-3" style="border-radius: 0;">PrintInvoiceF5</button>
                                </div>
                                <div class="col-lg-3">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">SilentF4</button>
                                </div>
                                <div class="col-lg-2">
                                    <i class='fa fa-power-off red-color' style="color:red;font-size:50px;"></i>
                                </div>

                                @*<div class="col-md-2">
                                <img class="responsive mtop" style="cursor:pointer" src="~/images/icons8-shutdown-96.png" />

                                </div>*@
                            </div>

                        </div>

                    </div>
                </div>
                <div id="UnPaidInvoices" class="tabcontent">
                    <h3>UnPaidInvoices</h3>
                    <div class="row" style="border:ridge">
                        <table class=" table-bordered" id="tblunpaidinv">
                            <thead>
                                <tr style="background-color:white;color:#010083">
                                    @* <th></th> *@
                                    <th>Invoice #</th>
                                    <th>Date</th>
                                    <th>Days</th>
                                    <th>Inv. Total</th>
                                    <th>Total Paid</th>
                                    <th>Inv. Balance</th>
                                    <th style="background-color:#cccccc">Pay Order</th>
                                </tr>
                            </thead>
                            <tbody>
                              @* Append Row Here *@
                            </tbody>
                        </table>
                    </div>

                    <div class="row mt-2" style="background-color: #cccccc">


                        <div class="col-lg-12" style="border:ridge">
                            <div class="row" style="padding-top:20px">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Email Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <div class="row">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Text Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4 ">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">OrderByDescription</button>
                                </div>

                                <div class="col-lg-3 ">
                                    <button id="PrintInvoicef10" type="button" class="btn btn-light p-3" style="border-radius: 0;">PrintInvoiceF5</button>
                                </div>
                                <div class="col-lg-3">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">SilentF4</button>
                                </div>
                                <div class="col-lg-2">
                                    <i class='fa fa-power-off red-color' style="color:red;font-size:50px;"></i>
                                </div>

                                @*<div class="col-md-2">
                                <img class="responsive mtop" style="cursor:pointer" src="~/images/icons8-shutdown-96.png" />

                                </div>*@
                            </div>

                        </div>

                    </div>
                </div>   
            </div>
        </div>
    </div>
</div>

<div id="receivablesid" class="modal fade bd-example-modal-sm customModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
    </div>
</div>
<div id="freightmodal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="padding:0.5rem!important;">
                <h5 class="modal-title" id="ModalLabel">Shipping & Handling</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodalfreight()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="color: #0000ab; padding-top: 10px;padding-bottom:10px;">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col">
                        <div class="row">
                            <div class="col-lg-3 col-md-3 col-sm-12 col">
                                <label>Invoice</label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col p-0 m-0">
                                <input type="text" class="form-control inputblue" name="name" id="Invoice-no" value="3232" />
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col p-0 m-0">
                                <input type="date" class="form-control inputbluesmall" id="cdate" value="" />
                            </div>
                        </div>
                        <div class="row mt-1">
                            <div class="col-lg-3 col-md-3 col-sm-12 col">
                                <label class="col-lg-12">Customer</label>
                            </div>
                            <div class="col-lg-8 col-md-8 col-sm-12 col p-0 m-0">
                                <input type="text" class="form-control inputblue" id="customerName" name="name" value="" />
                            </div>
                        </div>
                        <div class="row mt-1">
                            <div class="col-lg-3 col-md-3 col-sm-12 col">
                                <label>Date</label>
                            </div>
                            <div class="col-lg-5 col-md-4 col-sm-12 col p-0 m-0">
                                <input type="datetime-local" class="form-control inputbluesmall m-0 p-0" name="name" value="" />
                            </div>
                            <div class="col-lg-4 col-md-5 col-sm-12 col">
                                <label>RouteDeliveryDay</label>
                                <select class="form-control" name="cars" id="deliveryDay">
                                    <option value="Monday">Monday</option>
                                    <option value="Tuesday">Tuesday</option>
                                    <option value="Wednesday">Wednesday</option>
                                    <option value="Thursday">Thursday</option>
                                    <option value="Friday">Friday</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mt-1">
                            <div class="col-lg-3 col-md-3 col-sm-12 col" style="margin-top:-18px">
                                <label>Carrier</label>
                            </div>
                            <div class="col-lg-5 col-md-4 col-sm-12 col p-0 me-0" style="margin-top:-18px">
                                <select class="form-control" name="cars" id="carrier" style="min-width: 100%;">
                                    <option value="Monday">Bus</option>
                                    <option value="Truck">Truck</option>
                                    <option value="Railway">Railway</option>
                                </select>
                            </div>
                            <div class="col-lg-4 col-md-5 col-sm-12 col">
                                <label>Route Name</label>
                                <select class="form-control" name="cars" id="deliveryDay">
                                    <option value="">Lhr-KH</option>

                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-3 col-sm-12 col" style="margin-top:-33px">
                                <label>Tracking</label>
                            </div>
                            <div class="col-lg-5 col-md-4 col-sm-12 col p-0 me-0" style="margin-top:-33px">
                                <input type="text" class="form-control" name="name" value="" />
                            </div>
                        </div>
                        <div class="row mt-1">
                            <div class="col-lg-7 col-md-7 col-sm-12 col me-0">
                                <textarea id="txtid" name="txtname" class="form-control m-0 p-0" rows="4" style="width: 105%; height: 75%;">A nice day is a nice day.Lao Tseu</textarea>
                            </div>
                            <div class="col-lg-5 col-md-5 col-sm-12 col">
                                <textarea id="txtid" name="txtname" class="form-control" rows="4" style="width: 100%; height: 75%;">A nice day is a nice day.Lao Tseu</textarea>
                            </div>
                        </div>
                        <div class="row mt-1">
                            <div class="col-lg-4 col-md-4 col-sm-12 col pe-1 text-center">
                                <label>Shipping Cost</label>
                                <input type="text" class="form-control " name="name" value="" />
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col ps-1 pe-1 text-center">
                                <label>Handling Cost</label>
                                <input type="text" class="form-control" name="name" value="" />
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col ps-1 text-center">
                                <label style="color:maroon">CustomerCharge</label>
                                <input type="text" class="form-control" name="name" value="" />
                            </div>
                        </div>
                        <div class="row mt-1">
                            <div class="col-lg-9 col-md-9 col-sm-12 col">
                                <textarea id="txtid" class="form-control" name="txtname" rows="4" style="width:100%;height:75%;">A nice day is a nice day.Lao Tseu</textarea>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-12 col">
                                <img class="" src="../images/attach.png" style="width:50px" title="Attachment" onclick="" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-9 col-md-9 col-sm-12 col"></div>
                            <div class="col-lg-3 col-md-3 col-sm-12 col ps-0">
                                <button type="button" class="btn btn-lg btn-warning ps-4 pe-4">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="supervisorModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="padding:0.5rem!important;">
                <h5 class="modal-title" id="ModalLabelAuth">Authorize Supervisor</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodalAuth()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="color: #0000AB; padding-top: 10px;padding-bottom:10px;">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col">
                        <div class="row mt-3">
                            <div class="col-lg-3 col-md-3 col-sm-12 col">
                                <label class="col-lg-12">Pin</label>
                            </div>
                            <div class="col-lg-8 col-md-8 col-sm-12 col p-0 m-0">
                                <input type="password" class="form-control" id="superPin" name="pin" value="" placeholder="Pin" />
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-lg-3 col-md-3 col-sm-12 col">
                                <label class="col-lg-12">Comment</label>
                            </div>
                            <div class="col-lg-8 col-md-8 col-sm-12 col p-0 m-0">
                                <textarea id="superComment" class="form-control h-100" rows="4" cols="33" name="comment" form="usrform" placeholder="Enter Comment's here..."></textarea>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-lg-8 col-md-8 col-sm-12 col"></div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col ps-0">
                                <button type="button" onclick="authorizeSupervisor()" class="btn btn-lg btn-warning ps-4 pe-4">Authenticate</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="input-delivery" tabindex="-1" aria-labelledby="ModalLabel" style="display: none;" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <form id="approveform">
            <div class="modal-content">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodal()">
                    <span aria-hidden="true">close</span>
                </button>
                <div class="modal-header">
                    <h6 class="modal-title" id="ModalLabel">Quantity you are wishing to order for product <span id="productnamE" style="font-size: 22px;color: #0061c3;"></span> need following information to process</h6>

                </div>
                <div class="modal-body">

                    <div class="form-group">
                        <label for="plateNo" class="col-form-label">Plate No:</label>
                        <input name="plateNo" type="text" class="form-control col-lg-7" id="plateNo">

                    </div>
                    <div class="form-group">
                        <label for="drivingLicense" class="col-form-label">DrivingLicense:</label>
                        <input type="text" class="form-control col-lg-7" id="drivingLicense" name="drivingLicense">
                    </div>
                    @*<div class="form-group">
                    <label for="scannedfile" class="col-form-label">Upload Scanned File:</label>
                    <input type="file" class="form-control col-lg-7" id="scannedfile" name="scannedfile">
                    </div>*@

                </div>

                <div class="modal-footer">
                    <button type="button" onclick="ApproveItemQty()" class="btn btn-success" data-itemId="" data-ticketID="" data-count="" id="approvedetails">
                        Submit
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>


<div id="VendorDesModal" class="modal fade" z-index="-1" role="dialog">
    <div class="modal-dialog" style="min-width: 43%;">
        <div class="modal-content" style="background-color:#e1e1e1" id="VDMC">
            <div class="modal-header" style="padding:0.5rem!important;">
                <h5 class="modal-title" id="ModalLabel">Inventory Lookup</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodalDesc()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="color: #0000AB; padding-top: 20px;padding-bottom:10px;">
                <div class="row">
                    <div class="col-lg-10">
                        <div class="row ">
                            <div class="col-lg-2" style="margin-right: -10px;">
                                <label style="width: 62px;color: #810101;font-weight: bolder;">Description</label>
                            </div>
                            <div class="col-lg-8 " style="margin-left: 10px;">
                                <input type="text" class="desccM" autocomplete="off" style="min-width:100%" id="DescriptionInput" list="productList" onkeyup="GetItemListModal()">
                                <datalist class="dropt input-lg mx-auto dropdown w-100" id="productList" style="background-color: blue !important;cursor:pointer;position:absolute;"></datalist>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-lg-2" style="margin-right: -10px;">
                                <label style="width: 62px;color: #810101;font-weight: bolder;">UCP/item#</label>
                            </div>
                            <div class="col-lg-8 " style="margin-left: 10px;">
                                <input type="text" class="searchnameee" autocomplete="off" style="min-width:100%" id="itemnumberModal">
                                @*<div style="background-color: blue !important;cursor:pointer;position:absolute;" id="listallmissionsss"></div>*@
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-2">
                        <img onclick="closemodalDesc()" src="../images/cancel.png">
                    </div>
                </div>
                <hr style="height: 2px;margin-left:-26px; margin-right:-26px;">
                <div class="row">
                    <div class="col-lg-2" style="display:inline-flex;">
                        @*<input id="itemNumber" type="text" style="max-width:80px;border:none;background-color:transparent" disabled>*@
                        <i class="icon-book-open" style="padding:5px; border-right:1px solid gray; border-bottom:1px solid gray; float:left"></i>
                        <span style="font-weight:bold; color:black; margin-left:15px;" id="itemNumM"></span>
                    </div>
                    <div class="col-lg-5">
                        <label style="display:inline">Quantity On Hand:</label>
                        <input id="qtyOnHandM" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1" disabled>
                    </div>
                    <div class="col-lg-5">
                        <label style="display:inline">Buy Quantity:</label>
                        <input id="customQuantityM" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1">
                    </div>
                </div>
                <div class="row mt-2">
                    <input id="itemDescriptionM" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#f1f181" readonly>
                </div>
                <div class="row mt-2" style="--bs-gutter-x:0x;">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-3 text-center">
                                <label>Retail</label>
                                <input id="itemRetailM" type="text" style="max-width:130px; border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1" readonly>
                            </div>
                            <div class="col-lg-3 text-center" style="margin-left:-15px">
                                <label style="min-width:100px">Promotion</label>
                                <input id="itemPrice" type="text" style="max-width:130px;border: 2px solid rgb(0 0 0 / 0.2);background-color:lightcyan" readonly>
                            </div>
                            <div class="col-lg-2 text-center" style="margin-left:-15px">
                                <label style="min-width:100px">Unit</label>
                                <input id="itemPrice" type="text" style="max-width:130px;border: 2px solid rgb(0 0 0 / 0.2); background-color:#d3d2d2" readonly>
                            </div>
                            <div class="col-lg-2 text-center" style="margin-left:-15px">
                                <label style="min-width:100px">Unit Charge</label>
                                <input id="unitChargeM" type="text" style="max-width:130px;border: 2px solid rgb(0 0 0 / 0.2); background-color:#d3d2d2" readonly>
                            </div>
                            <div class="col-lg-2 text-center" style="margin-left:-15px">
                                <label style="min-width:100px">Unit Price</label>
                                <input id="unitPriceM" type="text" style="max-width:130px;border: 2px solid rgb(0 0 0 / 0.2); background-color:#d3d2d2" readonly>
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>
                    <br>
                    <div class="row">
                        <div class="col-lg-6">
                            <label style="min-width:60px; font-weight:bold; margin-bottom:5px; margin-top:5px;">Barcode</label>
                            <br />
                            <input type="text" style=" border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2" readonly>
                            <br />

                            <label style="min-width:67px; font-weight:bold; margin-bottom:5px; margin-top:5px;">Manufacture</label>
                            <br />
                            <input id="manufactureM" type="text" style=" border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2" readonly>
                            <br />

                            <label style="min-width:63px; font-weight:bold; margin-bottom:5px; margin-top:5px;">Catagory</label>
                            <br />
                            <input id="catagoryM" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2" readonly>
                            <br />

                            <label style="min-width:63px; font-weight:bold; margin-bottom:5px; margin-top:5px;">Sub Catagory</label>
                            <br />
                            <input id="subCatagoryM" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2" readonly>
                            <br />

                            <label style="min-width:63px; font-weight:bold; margin-bottom:5px; margin-top:5px;">Family</label>
                            <br />
                            <input id="familyM" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2" readonly>
                            <br />

                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <p style="color:black; text-align:end; font-size:20px">Code <span style="margin-left:10px; color:blue;">Price</span></p>
                            </div>
                            <div class="row" style="float:right;">
                                <div class="col">

                                    <label style="font-size:22px !important; margin-right:10px;">A</label>
                                    <input id="unitRetail" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2; width:65px; margin-left:10px; height:35px;">
                                    <br />
                                    <label style="font-size:22px !important; margin-right:10px;">B</label>
                                    <input id="unitRetail" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2; width:65px; margin-left:10px; margin-top:5px; height:35px;">
                                    <br />
                                    <label style="font-size:22px !important; margin-right:10px;">C</label>
                                    <input id="unitRetail" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2; width:65px; margin-left:7px; margin-top:5px; height:35px;">
                                    <br />
                                    <label style="font-size:22px !important; margin-right:10px;">D</label>
                                    <input id="unitRetail" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2; width:65px; margin-left:8px; margin-top:5px; height:35px;">
                                    <br />
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>
</div>


<div id="InventoryLookupModal" class="modal fade" z-index="-1" role="dialog">
    <div class="modal-dialog" style="min-width: 43%;">
        <div class="modal-content" style="background-color:#e1e1e1">
            <div class="modal-header" style="padding:0.5rem!important;">
                <h5 class="modal-title" id="ModalLabel">Inventory Lookup</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="CloseInventoryLookupModal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="color: #0000ab; padding-top: 20px;padding-bottom:10px;">
                <div class="row">
                    <div class="col-lg-10">
                        <div class="row ">
                            <div class="col-lg-2" style="margin-right: -10px;">
                                <label style="width: 62px;color: #810101;font-weight: bolder;">Find Item</label>
                            </div>
                            <div class="col-lg-2">
                                <input id="itemnumberModal1" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);margin-left:6px;background-color:#e1e1e1">
                            </div>
                            <div class="col-lg-8 " style="margin-left: 10px;">
                                <input type="text" class="searchnamee" onkeyup="GetItemListModal1()" id="DescriptionInput1" list="productList1" autocomplete="off" style="min-width:100%">
                                @*<div style="background-color: blue !important;cursor:pointer;position:absolute;" id="listallmissionss"></div>*@
                                <datalist class="dropt input-lg mx-auto dropdown w-100" id="productList1" style="background-color: blue !important;cursor:pointer;position:absolute;"></datalist>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-lg-2" style="margin-right: -10px;">
                                <label style="width: 62px;color: #810101;font-weight: bolder;">Customer</label>
                            </div>
                            <div class="col-lg-2">
                                <input id="customerCode" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);margin-left:6px;background-color:#e1e1e1;">
                            </div>
                            <div class="col-lg-8 " style="margin-left: 10px;">
                                <input type="text" class="searchnameee" id="customerInput1" onkeyup="getCustomers()" list="customerNames" autocomplete="off" style="min-width:100%">
                                <datalist class="dropt input-lg mx-auto dropdown w-100" id="customerNames" style="background-color: blue !important;cursor:pointer;position:absolute;"></datalist>
                                @*<div style="background-color: blue !important;cursor:pointer;position:absolute;" id="listallmissionsss"></div>*@


                                <!--<input type="text" class="searchnamee" onkeyup="GetItemListModal1()" id="DescriptionInput1" list="productList1" autocomplete="off" style="min-width:100%">-->
                                @*<div style="background-color: blue !important;cursor:pointer;position:absolute;" id="listallmissionss"></div>*@
                                <!--<datalist class="dropt input-lg mx-auto dropdown w-100" id="productList1" style="background-color: blue !important;cursor:pointer;position:absolute;"></datalist>-->

                            </div>
                        </div>


                    </div>
                    <div class="col-lg-2">
                        <img onclick="CloseInventoryLookupModal()" src="../images/cancel.png">
                    </div>
                </div>

                <hr style="height: 2px;width:112%;margin-left:-26px;">
                <div class="row">
                    <div class="col-lg-2">
                        <input id="itemNumber" type="text" style="max-width:80px;border:none;background-color:transparent" disabled>
                    </div>
                    <div class="col-lg-5">
                        <label style="display:inline">Quantity on Hand:</label>
                        <input id="qtyOnHand" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1" disabled>
                    </div>
                    <div class="col-lg-5">
                        <label style="display:inline">Buy Quantity:</label>
                        <input id="customQuantity" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1">
                    </div>
                </div>
                <div class="row mt-2">
                    <input id="itemDescription" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#f1f181" disabled>
                </div>
                <div class="row mt-2">
                    <div class="col-lg-6">
                        <div class="row">
                            <div class="col-lg-6 text-center">
                                <label>Retail</label>
                                <input id="itemRetail" type="text" style="max-width:130px; border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1" disabled>
                            </div>
                            <div class="col-lg-6 text-center" style="margin-left:-15px">
                                <label style="min-width:100px">Customer Price</label>
                                <input id="itemPrice1" type="text" style="max-width:130px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#f1f181" disabled>
                            </div>
                        </div>

                        <br>

                        <br>
                        <br>
                        <div class="row">
                            <div class="col-lg-4 text-center">
                                <label style="min-width:60px">Case Qty</label>
                                <input type="text" style="max-width:70px; border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2" disabled>
                            </div>
                            <div class="col-lg-4 text-center" style="margin-left:-5px">
                                <label style="min-width:67px">Case Pack</label>
                                <input id="caseQTY" type="text" style="max-width:70px; border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2" disabled>
                            </div>
                            <div class="col-lg-4 text-center" style="margin-left:-5px">
                                <label style="min-width:63px">Unit Price</label>
                                <input id="unitRetail1" type="text" style="max-width:70px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2" disabled>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="col">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th scope="col">Code</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Qty</th>
                                        <th scope="col">Qty Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @*style="border: 2px solid rgb(0 0 0/0.5)"*@
                                    <tr style="">
                                        <th scope="row">A</th>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">B</th>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">C</th>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">D</th>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Out of State</th>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>
@*Customer Short Modal*@
<div id="CustomerShortModal" class="modal fade" z-index="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" style="background-color:white; width:110%;">
            <div class="modal-header" style="padding:0.5rem!important;">
                <h5 class="modal-title" id="ModalLabel">Customer's info</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="CloseCustomerModal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="color: #0000AB; padding-top: 20px;padding-bottom:10px; padding-left:0px; padding-right:0px; background:rgb(225, 225, 225);">
                <div class="row" style="padding:10px;">
                    <div class="col-lg-8">
                        <h2 style="font-weight:bold" id="CustomerCodeShort"><span> </span></h2>
                        <h2 style="font-weight:bold"><span id="CompanyShort"></span></h2>
                    </div>
                    <div class="col-lg-4">
                        <input type="checkbox" id="ChAdShort" style="background:white;" disabled />
                        <label style="font-weight:bold;">Check Address </label>
                    </div>
                </div>
                <hr />
                <div class="row" style="padding: 0px 5px 0px 5px">
                    <div class="col-lg-12">
                        <label class="dim" style=" width:80px; font-weight:600; position:absolute; "> Street:</label>
                        <input id="StreetShort" type="text" class="form-control" style="width:86%; background:white; margin-left:80px" disabled />
                    </div>
                </div>
                <div class="row" style="padding:0px 5px 0px 5px">
                    <div class="col-lg-12">
                        <label class="dim" style=" width:80px; font-weight:600; position:absolute;"> City:</label>
                        <input id="CityShort" type="text" class="form-control" style="width:86%; background:white; margin-left:80px" disabled />
                    </div>
                </div>
                <div class="row" style="padding:0px 5px 0px 5px">
                    <div class="col-lg-6">
                        <label class="dim" style=" width:80px; font-weight:600; position:absolute;"> State:</label>
                        <input id="StateShort" type="text" class="form-control" style="width:55%; background:white; margin-left:80px" disabled />
                    </div>
                    <div class="col-lg-6">
                        <label class="dim" style=" font-weight:600; position:absolute;"> ZipCode:</label>
                        <input id="ZipCodeShort" type="text" class="form-control" style="width:69%; background:white; margin-left:82px" disabled />
                    </div>
                </div>
                <div class="row" style="padding:0px 5px 0px 5px">
                    <div class="col-lg-8">
                        <label class="dim" style=" width:80px; font-weight:600; position:absolute;"> Cell:</label>
                        <input id="CellShort" type="text" class="form-control" style="width:86%; background:white; margin-left:80px" disabled />
                        <input type="text"  id="PhoneNumber" hidden/>
                        <input type="text" id="faxNumber" hidden/>
                    </div>
                    <div class="col-lg-4">
                        <input id="ProviderShort" type="text" class="form-control" style="width:95%; background:white; margin-left:10px" disabled />
                    </div>
                </div>
                <div class="row" style="padding:0px 5px 0px 5px">
                    <div class="col-lg-9">
                        <label class="dim" style=" width:80px; font-weight:600; position:absolute;"> Tax ID:</label>
                        <input id="TaxIdShort" type="text" class="form-control" style="width:86%; background:white; margin-left:80px" disabled />
                    </div>
                    <div class="col-lg-3">
                        <input type="checkbox" style="background:white;" disabled />
                        <label id="TxExeShort" style="font-weight:bold; color:red">Tax Exempt</label>
                    </div>
                </div>
                <div class="row" style="padding:0px 5px 0px 5px">
                    <div class="col-lg-9">
                        <label class="dim" style=" width:80px; font-weight:600; position:absolute;"> Email:</label>
                        <input id="EmailShort" type="text" class="form-control" style="width:86%; background:white; margin-left:80px" disabled />
                    </div>
                    <div class="col-lg-3" style="padding-top:10px">
                        <input type="checkbox" style="background:white;" disabled />
                        <label id="AddToListShort" style="font-weight:bold;">Add to List</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="CustomerInfoModel" class="modal fade" z-index="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" style="background-color:white; width:90%;">
            <div class="modal-header" style="padding:0.5rem!important;">
                <h5 class="modal-title" id="ModalLabel">Customer's info</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodalabcd()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="color: #0000AB; padding-top: 20px;padding-bottom:10px; padding-left:0px; padding-right:0px; background:rgb(225, 225, 225);">

                <div class="row">
                    <div class="col-lg-4" style="display:flex">
                        <input type="checkbox" id="" style=" height:11px; margin:5px;" name="CustomerEmail" value="">
                        <label for="emailcopy" style=" font-size: 10px; font-weight: 800; color: #8f2000;padding-left:5px">Email Copy</label>
                    </div>
                    <div class="col-lg-8">
                        <input type="text" id="customerEmailCusinfo" value=""  style="font-size: 12px; width: 90%; margin-left: 8px;"/>
                    </div>
                </div>
                <div class="row pt-3">
                    <div class="col-lg-4" style="display:flex">
                        <input type="checkbox" id="emailcopy" style=" height:11px; margin:5px;" name="vehicle1" value="Bike">
                        <label for="emailcopy" style=" font-size: 10px; font-weight: 800; color: #8f2000;padding-left:5px">Text Copy</label>
                    </div>
                    <div class="col-lg-8">
                        <input type="text" style="font-size: 12px; width: 90%; margin-left: 8px;" />
                    </div>
                </div>
                <div class="row" pt-3 style="padding-top:12px">
                    <div class="col-lg-12" style="display:flex">
                        <input type="checkbox" id="emailcopy" style=" height:11px; margin:5px;" name="vehicle1" value="Bike">
                        <label for="emailcopy" style=" font-size: 10px; font-weight: 800; color: #8f2000;padding-left:5px">Standard Receipt (8.5 x 11)</label>
                    </div>

                </div>
                <div class="row" pt-3 style="padding-top:12px">
                    <div class="col-lg-5" style="text-align:center">

                        <button type="button" style="padding:17px;border:outset;color:#00008B;font-weight:700;" onclick=generatePdf("PrintPDF")>Silent/F4</button>
                    </div>
                    <div class="col-lg-2" style="text-align:center">
                        @*  <button class="btn  btn-style ">Silent/F4</button>*@
                        <p style="font-size: 17px;color: grey;">01</p>
                    </div>
                    <div class="col-lg-5" style="text-align:center">
                        <button type="button" style="padding:17px;border:outset;color:#00008B;font-weight:700;" onclick="openSalePrintModal();">Preview</button>

                    </div>

                </div>
                <div class="row" pt-3 style="padding-top:12px">
                    <div class="col-lg-1" style="text-align:center">
                        <select style="padding-right:18px" name="cars" id="cars">
                            <option value="volvo"></option>
                            <option value="saab"></option>
                            <option value="mercedes"></option>
                            <option value="audi"></option>
                        </select>
                    </div>
                    <div class="col-lg-4" style="text-align:center">
                        <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;">Order By Description</button>
                    </div>
                    <div class="col-lg-1" style="text-align:center">
                        <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;">1</button>

                    </div>
                    <div class="col-lg-1" style="text-align:center">
                        <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;">2</button>

                    </div>
                    <div class="col-lg-1" style="text-align:center">
                        <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;">3</button>
                    </div>
                    <div class="col-lg-1" style="text-align:center">
                        <i style="font-size:35px; margin-top:1px; color:red;" class="fa fa-power-off red-color" onclick="closemodalabcd()"></i>
                    </div>


                </div>

            </div>
        </div>
    </div>
</div>

<div id="paymentmodal2" class="modal fade" z-index="-1" role="dialog">
    <div class="modal-dialog" style="max-width: 80%;">
        <div class="modal-content" style="background-color:white; width:90%;">
            <div class="modal-header" style="padding:0.5rem!important;">
                <h5 class="modal-title" id="ModalLabel">Customer's info</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closepaymentmodal2()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
               <div class="tab">
                
                <button class="tablinks1 active" onclick="switchF9Tabs(event, 'UnPaidInvoicesTab')">UnPaidInvoices</button>
                <button class="tablinks1" onclick="switchF9Tabs(event, 'PaymentsTab')">Payments</button>
              
            </div>

            <div class="modal-body" style="color: #0000AB; padding-top: 20px;padding-bottom:10px; padding-left:0px; padding-right:0px; background:rgb(225, 225, 225);">
                <div id="UnPaidInvoicesTab" class="tabcontent1" style="display:block">
                    <h3>UnPaidInvoices</h3>
                    <div class="row" style="border:ridge; width:95%; margin:auto">
                        <table class=" table-bordered" id="tblunpaidinvF9">
                            <thead>
                                <tr style="background-color:white;color:#010083">
                                    @* <th></th> *@
                                    <th>Invoice #</th>
                                    <th>Date</th>
                                    <th>Days</th>
                                    <th>Inv. Total</th>
                                    <th>Total Paid</th>
                                    <th>Inv. Balance</th>
                                    <th style="background-color:#cccccc">Pay Order</th>
                                </tr>
                            </thead>
                            <tbody>
                              @* Append Row Here *@
                            </tbody>
                        </table>
                    </div>

                    <div class="row mt-2" style="background-color: #cccccc; width:95%; margin:auto">
                        <div class="col-lg-12" style="border:ridge">
                            <div class="row" style="padding-top:20px">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Email Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>



                            <div class="row">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="form-group row">
                                        <div class="col-lg-5">
                                            <input type="checkbox" id="emailcopy" style="height: 9px;" name="vehicle1" value="Bike">
                                            <label for="emailcopy" style="font-size: 10px; font-weight: 800; color: darkred;">Text Copy</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <input style="margin-left: 8px;" type="text" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4 ">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">OrderByDescription</button>
                                </div>

                                <div class="col-lg-3 ">
                                    <button id="PrintInvoicef10" type="button" class="btn btn-light p-3" style="border-radius: 0;">PrintInvoiceF5</button>
                                </div>
                                <div class="col-lg-3">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;">SilentF4</button>
                                </div>
                                <div class="col-lg-2">
                                    <i class='fa fa-power-off red-color' style="color:red;font-size:50px;"></i>
                                </div>

                                @*<div class="col-md-2">
                                <img class="responsive mtop" style="cursor:pointer" src="~/images/icons8-shutdown-96.png" />

                                </div>*@
                            </div>

                        </div>

                    </div>
                </div>
                <div id="PaymentsTab" class="tabcontent1" style="display:none">
                    <h3>Payments</h3>
                    <div class="row">
                        <div class="col-lg-12" style="border:ridge;padding-top:10px;padding-bottom:10px; width:95%; margin:auto">
                            <div class="row">
                                <div class="col-lg-1 ">
                                    <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;">
                                        <img class="" style="height:10px" src="../images/Edit Svg.svg" />
                                    </button>

                                </div>

                                <div class="col-lg-1 ">
                                    <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;">
                                        <img class="" style="height:10px" src="../images/Search SVG.svg" />
                                    </button>
                                    @*   <label>E-mail</label>
                                    <input style="width:65%" type="text" id="" name="">
                                    <input type="checkbox">
                                    <label>Text</label>
                                    <input style="width:65%; margin-left:7%"  type="number" id="" name="">
                                    <input type="checkbox">*@
                                </div>
                                <div class="col-lg-4 ">
                                    <input type="checkbox">
                                    <Label>List All Customers</Label>

                                </div>

                                <div class="col-lg-2 " style="margin-left:-18px">
                                    <button id="PrintInvoicef10" type="button" class="btn btn-light p-3" style="border-radius: 0;">SilentF4</button>
                                </div>
                                <div class="col-lg-3">
                                    <button type="button" class="btn btn-light p-3" style="border-radius: 0;" onclick="SaveMultiPayment()">PrintInvoiceF5</button>
                                </div>
                                <div class="col-lg-1">
                                    <i class='fa fa-power-off red-color' style="color:red;font-size:50px;"></i>
                                </div>

                                @*<div class="col-md-2">
                                <img class="responsive mtop" style="cursor:pointer" src="~/images/icons8-shutdown-96.png" />

                                </div>*@
                            </div>

                        </div>
                        <div class="col-lg-12" style="border:ridge;padding-top:10px;padding-bottom:10px; width:95%; margin:auto">
                            <div class="row">
                                <div class="col-lg-1 ">
                                    <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;">
                                        <i class="fa fa-plus" aria-hidden="true"></i>
                                    </button>
                                </div>

                                <div class="col-lg-3 ">
                                    <select class="" name="cars" id="deliveryDay">
                                        <option value="Monday">Monday</option>
                                        <option value="Tuesday">Tuesday</option>
                                        <option value="Wednesday">Wednesday</option>
                                        <option value="Thursday">Thursday</option>
                                        <option value="Friday">Friday</option>
                                    </select>
                                </div>
                                <div class="col-lg-2">
                                    <select class="" name="cars" id="deliveryDay">
                                        <option value="Monday">Monday</option>
                                        <option value="Tuesday">Tuesday</option>
                                        <option value="Wednesday">Wednesday</option>
                                        <option value="Thursday">Thursday</option>
                                        <option value="Friday">Friday</option>
                                    </select>
                                </div>
                                <div class="col-lg-5">
                                    <label>Balance:</label>
                                    <input disabled style="width:60%" type="text" id="CustomerBalance" name="">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row " style="background-color: #cccccc;border: 2px solid #e3e8f1; width:95%; margin:auto">
                        <div class="col-lg-12 mt-1 col-md-12 col-sm-12 col-12 table-responsive" id="">
                            <table class="table table-bordered table-condensed table-responsive-lg" id="CusMultiPaymentsTable" style="border:0.7px solid;">
                                <thead>
                                    <tr style="border:0.7px solid;border-bottom:1.4px solid">
                                        <th style="color: #020caf;">Amount Paid</th>
                                        <th>Amount Alloc</th>
                                        <th>Payment Type</th>
                                        <th>Ck/Card Number</th>
                                        <th style="color: #c92d21">Hold Date</th>

                                        <th><span class="add-generalpaymentrow ti-plus"></span></th>
                                    </tr>
                                </thead>
                                <tbody id="generalpaymentmodaltable" style="background-color: white;">
                                    <!-- hidden row -->

                                </tbody>
                            </table>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-lg-2 col-md-6 col-sm-12 col-12">
                                <div class="form-group bordercolormodal">
                                    <label class="dim col-sm-12 label-style" style="color: #53adcb">
                                        Total Paid
                                    </label>
                                    <label id="TotalPaidAmount" class="dim col-sm-12 label-style" style="color: #53adcb">$0.00</label>

                                </div>
                            </div>
                            <div class="col-lg-2 col-md-6 col-sm-12 col-12">
                                <div class="form-group bordercolormodal">
                                    <label class="dim col-sm-12 label-style" style="color: #53adcb">
                                        Total Alloc
                                    </label>
                                    <label id="totalAmountAllocation" class="dim col-sm-12 label-style" style="color: #53adcb">$0.00</label>

                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-12 col-12">
                                <div class="form-group bordercolormodal">
                                    <label class="dim col-sm-12 label-style" style="color:red">
                                        Change
                                    </label>
                                    <label class="dim col-sm-12 label-style" style="color: #53adcb">
                                        <input type="text" name="CJ" id="ChangeAmount" style="border:none; color: #53adcb; width:100%; text-align:center;" readonly />
                                    </label>

                                </div>
                            </div>
                            <div class="col-lg-2 col-md-6 col-sm-12 col-12">
                                @*  <div class="form-group bordercolormodal">


                                </div>*@
                                <button id="thumbRightButton" style="font-size:30px ; padding:9px 15px" disabled> <i class="fa fa-hand-o-right"></i></button>
                                <button id="thumbLeftButton" style="font-size:30px ; padding:9px 15px"> <i class="fa fa-hand-o-left"></i></button>

                                @*<button id="rightButton" style="font-size:30px ; padding:9px 15px; display:none;"> <i class="fa fa-hand-o-right"></i></button>*@

                            </div>

                            <div class="col-lg-3 col-md-6 col-sm-12 col-12">
                                <div class="form-group bordercolormodal">
                                    <label class="dim col-sm-12 label-style" style="color:blue">
                                        Balance
                                    </label>
                                    <label id="CustomerBalanceDue" class="dim col-sm-12 label-style" style="color: #53adcb">$0.00</label>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>
</div>


<div id="SaleOrderPrintModal" class="modal fade" z-index="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" style="width:55%">
            <div class="modal-header" style="padding: 5px 22px;">
                <h5 class="modal-title" id="ModalLabel" style="font-size:13px">Select an Option</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closeSalePrintModal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="padding:0px;">
                <div class="row" style="margin:0px;">
                    <div class="w-100 h-100 w-100 d-inline-block actionbox" id="listbtns" style="border-radius:0px; background:rgb(198, 201, 206); margin-bottom: 0px; font-size:17px;">
                        <div id="" class="row" style="display: flex; align-items: center;">
                            <p style="font-weight:800; color:#1F3BB3; font-size:17px;padding-top:10px; cursor: pointer" onclick=generatePdf("PrintPDF")>0-Print</p>
                            <p style="font-weight:800; color:#1F3BB3; font-size:17px; cursor: pointer" onclick=generatePdf("Preview")>1-Preview</p>
                            <p style="font-weight:800; color:#1F3BB3; font-size:17px; cursor: pointer" onclick=generatePdf("PDFUnProtected")>2-Adobe PDF</p>
                            <p style="font-weight:800; color:#1F3BB3; font-size:17px; cursor: pointer" onclick=generatePdfwithProtected("PDFProtected")>3-PDF (Protected)</p>
                            <p style="font-weight:800; color:#1F3BB3; font-size:17px; cursor: pointer">4-PDF Save As</p>
                            <p style="font-weight:800; color:#1F3BB3; font-size:17px; cursor: pointer">5-PDF Save As Protected</p>
                            <p style="font-weight:800; color:#1F3BB3; font-size:17px; cursor: pointer">6-Un-Protected Storage</p>
                            <p style="font-weight:800; color:#1F3BB3; font-size:17px; cursor: pointer">7-Protected Storage</p>
                            <p style="font-weight:800; color:#1F3BB3; font-size:17px; cursor: pointer" onclick=openemailmessagemodal("EmailUnProtected")>8-Email PDF </p>
                            <p style="font-weight:800; color:#1F3BB3; font-size:17px; cursor: pointer" onclick=openemailmessagemodal("EmailProtected")>9-Email PDF (Protected)</p>
                         @*   <p style="font-weight:800; color:#1F3BB3; font-size:17px; cursor: pointer" onclick=EmailSendwithProtected("EmailProtected")>9-email PDF (Protected)</p>*@

                        </div>
                    </div>
                </div>
            </div>
            <div style="display:flex; flex-direction:row;padding:10px">
                <p>PDF Protected Password : </p>
                <input style="font-size:10px; width:35%" type="text" value="" id="PdfProtectedPassword" />
            </div>
            <div style="padding:10px">
                <p>Protected Storage Location :</p>
                <input style="font-size:13px" type="file" id="myfile" name="myfile">
            </div>
        </div>
    </div>
</div>

<div id="emailmessagemodal" class="modal fade" z-index="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" style="width:85%">
            <div class="modal-header" style="padding: 5px 22px;">
                <h5 class="modal-title" id="ModalLabel" style="font-size:13px">Email Message</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closeemailmessagemodal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="padding:0px;">
                <div class="row" style="margin:0px;background:rgb(198, 201, 206);border:outset;padding-bottom:10px">
                    <div  style="padding-top:10px;display:flex;">
                        <label for="customers" style="font-weight:600;">Customer</label>
                        <select  style="width:60%;margin-left:10px" name="" id="customerDropDown">
                            <option value="" selected>Select</option>
                        </select>
                        <div class="col-lg-1" style="text-align:center;margin-left:15px">
                            <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;" onclick=CustomerSelectToCCEmail("To")>To</button>

                        </div>
                        <div class="col-lg-1" style="text-align:center;margin-left:15px">
                            <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;" onclick=CustomerSelectToCCEmail("CC")>Cc</button>
                        </div>
                        <input type="text" id="CustomerEmailCopyForToCC" hidden>
                    </div>
                    <div style="padding-top:10px;display:flex">
                        <label for="Vendor" style="font-weight:600;">Vendor</label>
                        <select style="width:59%;margin-left:29px" name="vendor" id="vendorDropDown">
                            <option value="" selected>Select</option>
                        </select>
                        <div class="col-lg-1" style="text-align:center;margin-left:15px">
                            <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;" onclick=VendorSelectToCCEmail("To")>To</button>
                        </div>
                        <div class="col-lg-1" style="text-align:center;margin-left:15px">
                            <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 5px;" onclick=VendorSelectToCCEmail("CC")>Cc</button>
                        </div>
                        <input type="text" id="VendorEmailCopyForToCC" hidden>
                    </div>
                  
                </div>
                <div class="row" style="margin:0px;background:rgb(198, 201, 206);padding-top:15px;padding-bottom:20px">
                    <div class="col-lg-2">  <label for="fname" style="font-weight:600;">To:</label><br /><br />
                         <label for="fname" style="font-weight:600;">Cc:</label><br><br />
                        <label for="fname" style="font-weight:600;">Bcc:</label><br><br />
                        <label for="fname" style="font-weight:600;">Subject:</label>
                   </div>
                    <div class="col-lg-7">
                        <input style="background:rgb(198, 201, 206);border:inset 1px;" type="text" id="CustomerToEmailId" name="" value=""><br>

                        <input style="margin-top:19px;background:rgb(198, 201, 206);border:inset 1px;" type="text" id="CustomerCCEmailId" name="" value=""><br>

                        <input style="margin-top:19px;background:rgb(198, 201, 206);border:inset 1px;" type="text" id="CustomerBCCEmailId" name="" value=""><br>

                        <input style="margin-top:19px;background:rgb(198, 201, 206);border:inset 1px;" type="text" id="CustomerSubjectId" name="" value=""><br>
                    </div>
                   <div class="col-lg-2">
                        <button type="button" style="padding:3px;border:outset;font-size: 10px; padding: 12px;" id="TypeEmailProtectedOrUnProtected" onclick=EmailSendwithProtected(this.id)>
                            <img src="../images/Dictionary SVG.svg" style="width:50px" title="SendEmail" />
                        </button>
                    </div>
                </div>
                 <div class="row" style="margin:0px; background:rgb(198, 201, 206); height:80px;">
                   <textarea id="emailBodyId" name="" rows="3" cols="30"></textarea>
                </div>
             </div>
           </div>
         </div>
            
        </div>
    </div>
</div>




<div id="additemshort" class="modal fade" role="dialog">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content mw-125" style="height:90%">
            <div class="modal-header m-0 p-0">
                <h5 class="modal-title mx-auto" id="ModalLabel">Select Inventory Items</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closeitemmodal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body m-0 pt-0" style="padding-left:1%;padding-right:1%">
                <div class="row">
                    <div class="w-100 h-100 w-100 d-inline-block actionbox" id="listbtns" style="margin-bottom:-7px;">
                        <div id="onlisticon" class="di">
                            <div class="col di div-style wd-8">
                                <label class="textBlue txtBold">Search</label>
                                <input class="textBlue txtBold borderCustom" type="text" name="name" id="searchPro" value="" style="width:80%;" />
                            </div>
                            <div class="col di div-style wd-5">
                                <input type="checkbox" name="name" value="" />
                                <label class="textBlue txtBold">Any Part</label>
                            </div>
                            <div class="col di div-style wd-7">
                                <input style="color:#1515b7;font-weight:bolder;border:none;" type="text" class="wd-10" id="itemquantitylabel" name="name" value="1" />
                            </div>
                            <div class="col di div-style wd-3">
                                <button id="slctbtn" onclick="GetItemDataAppendForDesModal3()" class="btn btn-outline-primary btn-icon-text mt-2 pt-2 pb-2">Select</button>
                            </div>
                            <div class="col di div-style wd-3" style="display:none;">
                                <input type="text" id="Pcd" />
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive m-0 p-0" style="background-color:#b0b0b3">
                        <table class="table tablest table-condensed modalTable" id="proTable" style="overflow-x:scroll;overflow-y:scroll;cursor:pointer;">
                            <thead>
                                <tr>
                                    <th scope="col">Description</th>
                                    <th style="width:10px;" scope="col">Retail</th>
                                </tr>
                            </thead>
                            <tbody id="modaltableitemgetlist">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@*Inventory Professional Partial Modal*@
<div id="InventoryPartial" class="modal fade" role="dialog">
    <div class="modal-dialog modal-dialog-scrollable" style="max-width:1100px;">
        <div class="modal-content" style="height:90%">
            <div class="modal-header m-0 p-0">
                <h5 class="modal-title mx-auto" id="ModalLabel">Item Detail</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="CloseInventoryPartial()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body m-0 pt-0" style="padding-left:1%;padding-right:1%">
                <div class="row">

                    <div class="col-lg-12 col-sm-12">
                        <div class="tab-content">
                            <div class="w-100 p-3 h-100 d-inline-block actionbox" id="listbtnss">
                                <div class="row fr" id="existingitemnumbers" style="width:25%">
                                </div>
                                @*<img class="saverecord hide-icon" src="../images/save1.png" style="width:50px" title="Save" />*@&ensp;&ensp;&ensp;
                                <div class="row fr">
                                    <div id="cheapmodalls" class="checkcheapitems">
                                        <div class="form-group">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="ListappenedTabss" class="tab-content">
                                <div class="tab-pane fade show active" id="details" role="tabpanel" aria-labelledby="Details-tab">
                                    <div id="exitingitemss">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading" style="">Items</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6 ;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link active Details-tab" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Financial-tab" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Suppliers-tab" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Purchase-tab" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Saless-tab" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Features-tab" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Tools-tab" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>

                                                    <div class="panel-body">
                                                    </div>




                                                    <div class="row">
                                                        <div class="col-lg-8 col-md-8 col-sm-8 col-8">
                                                            <div class="row">
                                                                <div class="col-lg-8 col-sm-8">
                                                                    <div class="form-group">
                                                                        <label>Image</label>

                                                                        <img id="output1s" style="width:100px; height:100px; display:none;" />
                                                                        <br />
                                                                        <input autocomplete="off" class="imginput" id="productImage1s" type="file" accept="image/*" onchange="loadFile1(event)" name="ProfileImage">

                                                                        <script>
                                                                            var loadFile1 = function (event) {
                                                                                var output = document.getElementById('output1');
                                                                                output.src = URL.createObjectURL(event.target.files[0]);
                                                                                output.onload = function () {
                                                                                    URL.revokeObjectURL(output.src) // free memory
                                                                                }
                                                                                output.style.display = "block";
                                                                                $("#defaultoutput").hide();
                                                                            };
                                                                        </script>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4 col-sm-4">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-8 col-sm-8">
                                                                    <div class="form-group">
                                                                        <label class="">Name</label>
                                                                        <input type="text" class="form-control" placeholder="Name" id="names" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4 col-sm-4">
                                                                    <div class="form-group">
                                                                        <label class="">Shipment Limit</label>
                                                                        <input type="text" class="form-control" placeholder="Shipment Limit" id="updateonlinelimitss" readonly>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="fba-r label-max-width" for="exampleFormControlSelect3">
                                                                            Category
                                                                        </label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="categorys" readonly>
                                                                        @*<input type="text" class="form-control" placeholder="Shipment Limit" id = "updateonlinelimits">*@
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="col-sm-5">Manufacture</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="manufactures" readonly>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="col-sm-5">Sub Category</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="sub-categorys" readonly>

                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="col-sm-5">Family</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="familys" readonly>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="row">
                                                                <div class="col-lg-3 col-md-3 col-sm-3 col-3">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-5">Retail</label>
                                                                        <input type="text" class="form-control" placeholder="Retail" id="retails" onkeyup="calculateupdate()" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-9 col-md-9 col-sm-9 col-9">
                                                                    <div class="row">
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Units</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" placeholder="Retail" id="unitss" onkeyup="calculateupdate()" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Unit Charge</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="unit-charges" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Unit Retail</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="unit-retails" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-3 col-md-3 col-sm-3 col-3">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12 col-12">BarCode</label>
                                                                        <input type="text" class="form-control" id="barcodes" placeholder="BarCode" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-9 col-md-9 col-sm-9 col-9">
                                                                    <div class="row">
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">QtyCase</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="qtycases" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Qty:Pallet</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="qtypallets" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">SingleUnitMSA</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="sunitmsas" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>

                                                            <div class="row mb-0">
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Location(Slot)</label>
                                                                        <input type="text" class="form-control" id="locationslos" placeholder="Location" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Group</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="groups" readonly>


                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Location 2</label>
                                                                        <input type="text" class="form-control" id="location2s" placeholder="Location" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Mispick</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="mispicks" readonly>


                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Location 3</label>
                                                                        <input type="text" class="form-control" id="location3s" placeholder="Location">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Color</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="colors" readonly>


                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-5 col-sm-5">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Location 4</label>
                                                                        <input type="text" class="form-control" id="location4s" placeholder="Location" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-7">
                                                                    <div class="row">
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Weight(lb)</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="weightlbs" readonly>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Weight(Oz)</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="weightozs" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                </div>

                                                            </div>


                                                        </div>
                                                        <div class="col-lg-3 col-md-3 col-sm-3 col-3">
                                                            <div class="row">
                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                    <div class="form-group">
                                                                        <label class="">SalesLimit</label>
                                                                        @*Html.EditorFor(model => model.SalesLimit, new { htmlAttributes = new { @class = "form-control", placeholder = "SalesLimit", id = "saleslimitnew" } })*@
                                                                        <input type="text" placeholder="" id="saleslimitnewss" class="form-control" readonly>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                    <div class="form-group">
                                                                        <label class="col-sm-12">MSAReportAs (00001)</label>
                                                                        <select class="form-control">
                                                                            <option>----Select----</option>


                                                                        </select>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-12">State Report As</label>
                                                                        <input type="text" class="form-control dropadditemCategory" readonly>


                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">

                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                    <br />
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Reporting Weight:</label>
                                                                        <input type="text" class="form-control" placeholder="ReportingWeight" readonly>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-8">Unit:</label>
                                                                        <select class="form-control">
                                                                            <option>------Select---------</option>
                                                                            <option>LB</option>
                                                                            <option>OZ</option>


                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <br /><br /><br /><br />
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12" style=" border: 1px solid; height:50%;">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Order Quantity</label>
                                                                        <input type="text" class="form-control" id="orderqntynews" placeholder="Order qnty" readonly>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Max Quantity</label>
                                                                        <input type="text" class="form-control" id="maxqntynews" placeholder="Max Quantity" readonly>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Min Quantity</label>
                                                                        <input type="text" class="form-control" id="minqntynews" placeholder="Min Quantity" readonly>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-1 col-md-1 col-sm-1 col-1">
                                                            <div class="form-group">
                                                                <label>
                                                                    On/Off
                                                                </label>
                                                                @*@Html.CheckBox("IsActive", Model.IsActive)*@
                                                                <input type="checkbox" class="">
                                                            </div>
                                                            <div class="progress progress-bar-vertical" style="height: 40%;width:80%;">
                                                                @*<div class="progress-bar" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="height: @Model.MaxOrderQty%">@Model.MaxOrderQty%</div><div class="progress-bar" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="height: @Model.MaxOrderQty%">@Model.MaxOrderQty%</div>*@
                                                                <div id="progressbarheights" class="progress-bar" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                                            </div>
                                                            <span class="add-style">Stock Level</span>

                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-bottom:15px">
                                                        @*<div class="col-lg-2 col-md-2 col-sm-2 col-2">

                                                        </div>*@
                                                        <div class="col-lg-4 col-md-4 col-sm-4 col-4">
                                                            <label class="dim col-sm-12">SalesLimitAges</label>
                                                            @*@Html.DropDownList("MaintainStockForDays", (IEnumerable<SelectListItem>)ViewBag.NoOfDays, "--Choose Age--", new { @class = "form-control" })*@
                                                            <input type="text" class="form-control dropadditemCategory" id="" readonly>

                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-4 col-4">
                                                            <label class="dim col-sm-12">Need High Authorization</label>
                                                            <input type="checkbox" class="" id="EditCheckBoxNHAs" readonly>
                                                        </div>


                                                    </div>
                                                    <div class="row" id="EditHighlimitOns" style="display:none">
                                                        <div class="col-lg-4 col-md-4 col-sm-4 col-4">
                                                            <label class="dim col-sm-12">High limit On</label>
                                                            <input type="checkbox" class=" txtinput" id="edithighlimitons" placeholder="High limit On" readonly>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="financial" role="tabpanel" aria-labelledby="Financial-tab">
                                    <div id="financial-mains">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                        <div class="panel panel-primary panel-head ">
                                                            <div class="panel-heading">Financial</div>

                                                            <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                                <li class="nav-item">
                                                                    <a class="nav-link Details-tab" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Financial-tab active" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Suppliers-tab" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Purchase-tab" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Saless-tab" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Features-tab" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Tools-tab" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                                </li>
                                                            </ul>




                                                            <div class="row">
                                                                @*<div class="col-lg-8 col-sm-8">
                                                                <div class="form-group">
                                                                <label class="">Search Item</label>
                                                                @Html.EditorFor(model => model.Financial.ItemName, new { htmlAttributes = new { @class = "form-control", placeholder = "Search Item", id = "searchnamee" } })
                                                                @Html.ValidationMessageFor(model => model.Financial.ItemName, "", new { @class = "text-danger db" })
                                                                </div>
                                                                </div>*@
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label class="">Item No</label>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row ">
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">Cost</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class="txtinput" id="costs" onkeypress="calculateupdateF()" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">Retail</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class="txtinput" id="retails" onkeypress="calculateupdateF()" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">Profit%</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="profitpercnts" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">

                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">MfgPromotion</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="mfgpromotions" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">AddToCost%</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="addtocosts" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">Unit Charge</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="unitcharges" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-md-5 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">OutofstateCost</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="outofstatecosts" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-5 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">OutOfStateRetail</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="outofstateretails" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-3 padding-lr">
                                                                            <div class="form-group">
                                                                                <label>.</label>
                                                                                <div class="col-sm-12">
                                                                                    @*@Html.EditorFor(model => model.OutofstateRetail, new { htmlAttributes = new { @class = "form-control", type = "number", id = "dotfield" } })
                                                                                    @Html.ValidationMessageFor(model => model.OutofstateRetail, "", new { @class = "text-danger db" })*@
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col">
                                                                    <table class="table table-bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th scope="col">Code</th>
                                                                                <th scope="col">Price</th>
                                                                                <th scope="col">Qty</th>
                                                                                <th scope="col">Qty Price</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr>
                                                                                <th scope="row">A</th>
                                                                                <td>Mark</td>
                                                                                <td>Otto</td>
                                                                                <td>mdo</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <th scope="row">B</th>
                                                                                <td>Jacob</td>
                                                                                <td>Thornton</td>
                                                                                <td>fat</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <th scope="row">C</th>
                                                                                <td>Larry</td>
                                                                                <td>the Bird</td>
                                                                                <td>twitter</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <th scope="row">D</th>
                                                                                <td>Larry</td>
                                                                                <td>the Bird</td>
                                                                                <td>twitter</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <th scope="row">Out of State</th>
                                                                                <td>Larry</td>
                                                                                <td>the Bird</td>
                                                                                <td>twitter</td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                                <div class="col">
                                                                    <div style="border:1px solid">
                                                                        <div class="form-group mb-0 ms-2">

                                                                            <input type="checkbox" class=" " id="askforpricings" readonly>
                                                                            <label class="form-check-label">
                                                                                AskForPricing
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class="" id="askfordescs" readonly>
                                                                            <label class="form-check-label">
                                                                                AskForDesc
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class=" " id="serializeds" readonly>
                                                                            <label class="form-check-label">
                                                                                Serialized
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class=" " id="taxonsaless" readonly>
                                                                            <label class="form-check-label">
                                                                                TaxOnSales
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class=" " id="purchases" readonly>
                                                                            <label class="form-check-label">
                                                                                Purchase
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class=" " id="nosuchdiscounts" readonly>
                                                                            <label class="form-check-label">
                                                                                NoSuchDiscount
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class=" " id="noreturnss" readonly>
                                                                            <label class="form-check-label labelreds">
                                                                                NoReturns
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group ms-2">
                                                                            <label class="form-check-label labelreds" readonly>
                                                                                SellBelowCost
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-4 col-md-4 col-sm-4 col-4">
                                                                    <table class="table table-borderless" style="border:1px solid;">
                                                                        <thead class="thead-light">
                                                                            <tr>
                                                                                <th scope="col">ST</th>
                                                                                <th scope="col">Tax</th>
                                                                                <th scope="col">Cost</th>
                                                                                <th scope="col">Retail</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr>
                                                                                <td>Larry</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>Larry</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>Larry</td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                    <button class="btn btn-lg mt-2" style="width:17.5rem;" type="button"><span style="color:red;">Special Customer Price</span></button>
                                                                    <div class="row ms-1" style="border: 1px solid; width: 100%;">
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">SgstdRetailPrice</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class="txtinput" id="sgtdretailprices" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group " style="margin-top:30%;">
                                                                                <input type="checkbox" class=" txtinput" id="autosetsrps" readonly>
                                                                                <label class="form-check-label">
                                                                                    Auto Set SRP
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-7 col-md-7 col-sm-7 col-7">
                                                                    <div class="row" style="border:1px solid">
                                                                        <div class="row">
                                                                            <div class="col">

                                                                                <button class="btn-info btn-qty">Qty Price</button>

                                                                            </div>
                                                                            <div class="col">

                                                                                <label>Price</label>
                                                                                <input type="number" class="form-control">
                                                                            </div>
                                                                            <div class="col">
                                                                                <label>Quantity</label>
                                                                                <input type="text" class="form-control" placeholder="Last name" readonly>
                                                                            </div>
                                                                            <div class="col">
                                                                                <label>Qty Price</label>
                                                                                <input type="text" class="form-control" placeholder="Last name" readonly>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row mt-3">
                                                                            <div class="col">

                                                                                <label class="mt-2">Out of State Sale</label>

                                                                            </div>
                                                                            <div class="col">

                                                                                <input type="number" class="form-control" readonly>
                                                                            </div>
                                                                            <div class="col">

                                                                                <input type="text" class="form-control" placeholder="Last name" readonly>
                                                                            </div>
                                                                            <div class="col">
                                                                                <input type="text" class="form-control" placeholder="Last name" readonly>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row mb-2 mt-2" style="border:1px solid">
                                                                        <div class="row pt-1">
                                                                            <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                                <label class="me-1"> Discount</label>
                                                                                <div class="col-lg-7 col-md-7 col-sm-7 col-7">
                                                                                    @*@Html.EditorFor(model => model., new { htmlAttributes = new { @class = "form-control", type = "number", id = "discount" } })*@
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                                <div class="">
                                                                                    <input type="checkbox" class=" txtinput" id="percnts" readonly>
                                                                                </div>
                                                                                <label class="me-1">%</label>
                                                                            </div>
                                                                            <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                                <label class="me-1"> From</label>
                                                                                <div class="">
                                                                                    @*@Html.EditorFor(model => model.From, new { htmlAttributes = new { @class = "form-control", type = "number", id = "from" } })*@
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                                <label class="me-1"> To</label>
                                                                                <div class="">
                                                                                    @*@Html.EditorFor(model => model., new { htmlAttributes = new { @class = "form-control", type = "number", id = "to" } })*@
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="form-group mb-0 mt-1 ms-2" style=" text-align-last: justify;">
                                                                                <label class="form-check-label me-1">
                                                                                    Apply to All
                                                                                </label>
                                                                                @*@Html.EditorFor(model => model.Aa, new { @class = "form-check-input", type = "checkbox", id = "applytoall" })*@
                                                                                <input type="checkbox" class="txtinput" id="purchases" readonly>
                                                                                <label class="form-check-label">
                                                                                    Retail
                                                                                </label>

                                                                                <input type="checkbox" class="txtinput" id="codeas" readonly>
                                                                                <label class="form-check-label">
                                                                                    Code A
                                                                                </label>

                                                                                <input type="checkbox" class=" txtinput" id="codebs" readonly>
                                                                                <label class="form-check-label">
                                                                                    Code B
                                                                                </label>

                                                                                <input type="checkbox" class="form-control txtinput" id="codecs" readonly>
                                                                                <label class="form-check-label">
                                                                                    Code C
                                                                                </label>

                                                                                <input type="checkbox" class=" txtinput" id="codeds" readonly>
                                                                                <label class="form-check-label">
                                                                                    Code D
                                                                                </label>
                                                                            </div>
                                                                            <div class="form-group mb-0 mt-1 ms-2">
                                                                                <input type="checkbox" class=" txtinput" id="addcustomersdiscounts" readonly>
                                                                                <label class="form-check-label">
                                                                                    Add Customer's Discount
                                                                                </label>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                    <div class="row pt-1 pb-1" style="border:1px solid">
                                                                        <div class="col-lg-2 col-md-2 col-sm-2 col-2" style="display:inline-flex">
                                                                            <label class="me-1"> Buy</label>
                                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                @*@Html.EditorFor(model => model.Buy, new { htmlAttributes = new { @class = "form-control", type = "number", id = "buy" } })*@
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-2 col-md-2 col-sm-2 col-2" style="display:inline-flex">
                                                                            <label class="me-1 ms-1"> Get</label>
                                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                @*@Html.EditorFor(model => model.Get, new { htmlAttributes = new { @class = "form-control", type = "number", id = "get" } })*@
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-2 col-md-2 col-sm-2 col-2" style="display:inline-flex">
                                                                            <label class="me-1 ms-1"> @@</label>
                                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                <input type="checkbox" class=" txtinput" id="attsigns" readonly>
                                                                            </div>
                                                                            <label> %</label>
                                                                        </div>
                                                                        <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                            <label class="me-1 ms-2"> From</label>
                                                                            <div class="">
                                                                                @*@Html.EditorFor(model => model.From, new { htmlAttributes = new { @class = "form-control", type = "number", id = "fromm" } })*@
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                            <label class="me-1"> To</label>
                                                                            <div class="">
                                                                                @*@Html.EditorFor(model => model.To, new { htmlAttributes = new { @class = "form-control", type = "number", id = "too" } })*@
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            @*<div class="col-lg-4 col-sm-4 fr" style="margin-right:-17%">
                                                            <button type="submit" class="btn btn-lg btn-dark me-3 wd-50"><p style="color:white">Save</p></button>
                                                            </div>*@

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="suppliers" role="tabpanel" aria-labelledby="Suppliers-tab">
                                    <div id="supplier-mains">
                                        <div class="card">
                                            <div class="card-body" style="width:100%;height:100%;">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading bar-styles">Supplier</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Details-tabs" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Financial-tabs" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link active" id="Suppliers-tabs" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Purchase-tabs" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Saless-tabs" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Features-tabs" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Tools-tabs  " data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>

                                                    <div class="row mt-3">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive" id="supplierTables">
                                                            <table class="table table-bordered table-condensed" id="supplierTables" style="border:0.7px solid;">
                                                                <thead>
                                                                    <tr style="border-bottom:1.4px solid" class="grids-head">
                                                                        <th style="width: 10px">Supplier</th>
                                                                        <th>Supplier Item #</th>
                                                                        <th>Case Qty</th>
                                                                        <th>Cost</th>
                                                                        <th>Discount</th>
                                                                        <th>Single Cost</th>
                                                                        <th>Net Cost</th>

                                                                    </tr>
                                                                </thead>
                                                                <tbody id="appendsuppliersmains">
                                                                </tbody>
                                                            </table>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="purchasetab" role="tabpanel" aria-labelledby="Purchase-tab">
                                    <div id="purchase-mains">
                                        <div class="card">
                                            <div class="card-body" style="width:100%;height:100%;">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading bar-styles">Purchase</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Details-tabs" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Financial-tabs" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Suppliers-tabs" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link active" id="Purchase-tabs" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Saless-tabs" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Features-tabs" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Tools-tabs" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>

                                                    <div class="row mt-3">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive" id="">
                                                            <table class="table table-bordered table-condensed" id="saletables" style="border:0.7px solid;">
                                                                <thead>
                                                                    <tr style="border-bottom:1.4px solid" class="grids-head">
                                                                        <th style="width: 10px">Sr#</th>
                                                                        <th>P.O. Number</th>
                                                                        <th>Supplier Name</th>
                                                                        <th>Date Received</th>
                                                                        <th>Quantity</th>
                                                                        <th>Case Qty</th>
                                                                        <th>Cost</th>
                                                                        <th>Total</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="appendpurchaseordersmains">
                                                                </tbody>
                                                            </table>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="sales" role="tabpanel" aria-labelledby="Saless-tab">
                                    <div id="sale-mains">
                                        <div class="card">
                                            <div class="card-body" style="width:100%;height:100%;">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading bar-styles">Sales</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Details-tabs" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Financial-tabs" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Suppliers-tabs" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Purchase-tabs" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link active" id="Saless-tabs" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Features-tabs" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Tools-tabs" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>
                                                    <div class="row mt-3">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive" id="">
                                                            <table class="table table-bordered table-condensed" id="saletables" style="border:0.7px solid;">
                                                                <thead>
                                                                    <tr style="border-bottom:1.4px solid" class="grids-head">
                                                                        <th style="width: 10px">Sr#</th>
                                                                        <th>Invoice #</th>
                                                                        <th>Date</th>
                                                                        <th>Customer Name</th>
                                                                        <th>Sales</th>
                                                                        <th style="color:red">Return</th>
                                                                        <th style="color:saddlebrown">Damage</th>
                                                                        <th style="color:darkred">Cost</th>
                                                                        <th style="color:darkred">Price</th>
                                                                        <th style="color:darkred">Total</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="appendsaleorderss">
                                                                </tbody>
                                                            </table>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="features" role="tabpanel" aria-labelledby="Features-tab">
                                    <div id="feature-mains">
                                        <div class="card">
                                            <div class="card-body" style="width:100%;height:100%;">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading bar-styles">Features</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Details-tabs" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Financial-tabs" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Suppliers-tabs" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Purchase-tabs" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Saless-tabs" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link active" id="Features-tabs" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Tools-tabs" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>
                                                    <h1>Features</h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="tools" role="tabpanel" aria-labelledby="Tools-tab">
                                    <div id="tool-mains">
                                        <div class="card">
                                            <div class="card-body" style="width:100%;height:100%;">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading bar-styles">Tools</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Details-tabs" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Financial-tabs" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Suppliers-tabs" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Purchase-tabs" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Saless-tabs" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Features-tabs" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link active" id="Tools-tabs" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>
                                                    <h1>Tools</h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                    @*End*@
                </div>
            </div>
        </div>
    </div>
</div>
@*<script>
            function SavePaymentDetails() {
                //debugger;
        var custname = $("#custname").text();
                var customerno = $("#custno").text();
                var InvoiceNo = $("#invno").text().trim();
                var InvoiceTotal = $("#invtotal").text();
                var BalanceDue = $("#balancedue").text();
                var TotalPaid = $("#totalpaid").text().trim();
                var TotalPaidd = $("#totalpaidd").text().trim();
                var Change = $("#change").text().trim();
                var Balance = $("#balance").text().trim();
                var EmailCopy = $("#emailcopy").is(':checked');/////checkbox//
                var TextCopy = $("#textcopy").is(':checked');/////checkbox//
                var Emaillabel = $("#emaillabel").text();
                var Textlabel = $("#textlabel").text();
                var SelectDropdown = $("#selectdropdown").val();
                console.log(customerno + "1/" + InvoiceNo + "2/" + InvoiceTotal + "3/" + BalanceDue + "4/" + TotalPaid + "5/" + TotalPaidd + "6/" + Change + "7/" + Balance + "8/" + EmailCopy + "9/" + TextCopy + "10/" + Emaillabel + "11/" + Textlabel + "12/" + SelectDropdown);
        var paymentdetail = new Array();
                $("#Custpaymenttable TBODY TR").each(function () {
            var row = $(this);
            var SalePayment = {};
                    SalePayment.ItemNumberr = row.find("TD").eq(0).html();
                    SalePayment.ItemNumber = row.find("TD").eq(1).html();
                    SalePayment.ItemDescription = row.find("TD").eq(2).html();
                    SalePayment.Quantity = row.find("TD").eq(3).html();
                    SalePayment.AmountRetail = row.find("TD").eq(4).html();
                    SalePayment.InDiscount = row.find("TD").eq(5).html();
                    SalePayment.OutDiscount = row.find("TD").eq(6).html();
                    SalePayment.InUnits = row.find("TD").eq(7).html();
                    SalePayment.OutUnits = row.find("TD").eq(8).html();
                    SalePayment.Price = row.find("TD").eq(9).html();
                    SalePayment.Total = row.find("TD").eq(10).html();
                    SalePayment.CustomerName = customername;
                    SalePayment.CustomerNumber = customercode;
                    SalePayment.CustomerID = CustomerID;
                    SalePayment.ItemId = row.find("TD").eq(14).html();
                    SalePayment.SaleManName = saleman;
                    SalePayment.InvoiceNumber = invoicenumber;
                    SalePayment.InvoiceTotal = invoicetotal;
                    SalePayment.Discount = discountidadd;
                    SalePayment.Other = otherid;
                    SalePayment.Tax = taxid;
                    SalePayment.Freight = freightid;
                    SalePayment.ItemName = row.find("TD").eq(2).html();

            if (GetSaleDiscount == true) {
                SalePayment.GetSaleDiscount = "true";
            } else {

                SalePayment.GetSaleDiscount = "false";

            }

                    SalePayment.Count = CountNumber;

           // Sale.GetSaleDiscount = GetSaleDiscount;

         //   alert(Sale.GetSaleDiscount);

                    paymentdetail.push(SalePayment);
        });
                console.log(paymentdetail);



        if (customername != "" && customername != "undefined") {
            $("#ValCustomerName").hide();
            isValid = true;

        } else {
            $("#ValCustomerName").first().focus();
            $("#ValCustomerName").text("CustomerName Is Required.");
            $("#ValCustomerName").show();
            isValid = false;
        }
        if (customercode != "" && customercode != "undefined") {

            $("#ValCustomercode").hide();
            isValid = true;

        } else {
            $("#ValCustomercode").first().focus();
            $("#ValCustomercode").text("ValCustomercode Is Required.");
            $("#ValCustomercode").show();
            isValid = false;
        }
        if (isValid == true) {
               $.confirm({
                title: 'Save New Sale Invoice!',
                   content: 'Are you sure to save new Sale Invoice?',
                buttons: {
                    confirm: function () {
                         $.ajax({
                type: "POST",
                url: '@Url.Action("AddSalePos", "Sale")',

                data: JSON.stringify(SaleDetails),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                             success: function (data) {
                                 if (data == true) {
                                     location.reload();
                                 }
                      }
                      });
                    },
                    cancel: function () {
                    },
                }
            });


        }
    }
        </script>*@
<link href="~/sweetalert/sweetalert2.min.css" rel="stylesheet" />
<script src="/vendors/sweetalert/sweetalert.min.js"></script>
<script src="~/sweetalert/sweetalert2.min.js"></script>



<script type="text/javascript">
    var nowDate = new Date();
    var nowDay = ((nowDate.getDate().toString().length) == 1) ? '0' + (nowDate.getDate()) : (nowDate.getDate());
    var nowMonth = ((nowDate.getMonth().toString().length) == 1) ? '0' + (nowDate.getMonth() + 1) : (nowDate.getMonth() + 1);
    var nowYear = nowDate.getFullYear();
    var formatDate = nowDay + "/" + nowMonth + "/" + nowYear;
    var sernum = 1;
    var paymentserial = 1;
    $(document).ready(function () {


        $.ajax({
            url: '@Url.Action("GetItemListformodal", "Purchase")',
            async: false,
            contentType: "application/json;",
            dataType: "json",
            success: function (data) {
                $.each(data, function (index, item) {

                    var html = '';
                    html += '<tr id="rowlistid-' + index + '" onclick ="Changerow(' + index + ',' + item.id + ',' + item.productCode + ' )"  class="itemnewtr">';
                    html += '<td id="deslistid-' + index + '">' + item.description + '</td>';
                    html += '<td id="retlistid-' + index + '">' + item.retail + '</td>';
                    html += '</tr >';

                    $("#modaltableitemgetlist").append(html);
                });

            },
            error: function (error) {
                //alert(error);
            }
        });
        var otherid = $("#otherid").val();
        if (otherid == "") {

            $("#otherid").val("0");
        }

        AppendAllMissions(event);
        var grosstotal = 0;
        $('.add-row').click(function () {
            if ($("#customerid").val() == "") {
                Swal.fire(
                    'Kindly Slect',
                    "Customer",
                    'error'
                )

                return false;
            }
            var count = 0;
            $("#saletable tr").each(function (index, value) {
                count++;
            });
            sernum = count;
            var customername = $("#customername").val();
            var customercode = $("#customercodeinfo").val();
            var CustomerID = $("#customerid").val();

            var GetSaleDiscount = $("#getsalediscount").is(':checked');
            var html = '';
            html += '<tr  id="rowid-' + sernum + '" class="">';
            html += '<td id="countser-' + sernum + '" style="width: 10px" class="counter" contenteditable="true">' + sernum + '</td>';
            html += '<td id="itemnumber-' + sernum + '" style="width: 10px" contenteditable="true" onkeyup="GetItemByItemNumber(event,' + sernum + ')"></td>';
            html += '<td class="Descca"  ondblclick="openinventory(' + sernum + ')"  id="description-' + sernum + '" style="width: 10px" contenteditable="true"  val"' + sernum + '"><input style="width: 100%;" class="descc"  id="DescriptionInput-' + sernum + '" type="text" name="city" list="productList-' + sernum + '" onkeyup="GetItemList(' + sernum + ')" autocomplete="off"><datalist class="dropt input-lg mx-auto dropdown w-100" id="productList-' + sernum + '" onclick="AppendItem(' + sernum + ')"></datalist></td>';
            html += '<td id="Quantity-' + sernum + '"  contenteditable="true" class="table-primary d-none" val"' + 1 + '" onkeyup="QuantityMultipyPrice(' + sernum + ')">1</td>';
            html += '<td id="amount-' + sernum + '" contenteditable="false"></td>';
            html += '<td id="discountin-' + sernum + '"  contenteditable="true" onclick="DiscountPer(' + sernum + ')" onkeyup="DiscuntChangePriceRate(' + sernum + ')">$0.00</td>';
            html += '<td id="discountout-' + sernum + '" contenteditable="true" onfocus="DiscountPerPerc(' + sernum + ')" onfocusout="DiscuntChangePrice(' + sernum + ')">0.00%</td>';
            html += '<td id="InUnits-' + sernum + '"  contenteditable="true" class="table-success"></td>';
            html += '<td id="OutUnits-' + sernum + '"  contenteditable="true" class="table-success"></td>';
            html += '<td id="price-' + sernum + '" contenteditable="false" class="table-warning"></td>';
            html += '<td id="total-' + sernum + '" contenteditable="false" class="table-warning"></td>';
            html += '<td id="customername-' + sernum + '" style="display:none;">' + customername + '</td>';
            html += '<td style="display:none" id="customercode-' + sernum + '" contenteditable="true" class="table-warning">' + customercode + '</td>';
            html += '<td style="display:none" id="customerid-' + sernum + '" contenteditable="true" class="table-warning">' + CustomerID + '</td>';
            html += '<td style="display:none" id="itemid-' + sernum + '" contenteditable="true" class="table-warning"></td>';
            html += '<td style="display:none" id="stockno-' + sernum + '" contenteditable="true" class="table-warning"></td>';
            /*html += '<td style="display:none" id="getsalediscount-' + sernum + '" contenteditable="true" class="table-warning">' + GetSaleDiscount +'</td>';*/
            html += '<td id="saleslimit-' + sernum + '" contenteditable="false" class="table-warning"></td>';
            //html += '<td id="ringerqty-' + sernum + '" contenteditable="true" class="table-warning" val"' + 1 + '" onfocusout="exceedlimitfunction(' + sernum + ')"  onkeyup="QuantityMultipyPrice(' + sernum + ')">1</td>';
            html += '<td id="ringerqty-' + sernum + '" contenteditable="true" class="table-warning" val"' + 1 + '"  onkeyup="QuantityMultipyPrice(' + sernum + ')">1</td>';
            html += '<td style="display:none" id="needhighotherization-' + sernum + '"></td>'
            html += '<td style="display:none" id="highlimiton-' + sernum + '"></td>'
            html += '<td id="delete-' + sernum + '"  onclick="RemoveRowPlusEmpty(' + sernum + ')"><span class="delete-row ti-close"></span></td>';
            html += '<td style="display:none" id="possaleid-' + sernum + '"></td>';
            html += '<input type="hidden" value="" id="productId"/>';
            html += '<input type="hidden" id="saleslimitexeeded-' + sernum + '" class="saleslimitexeeded" value="false" />';
            html += '</tr >';


            /// var $row = $('#mytable').find('tr.hidden').clone(true).removeClass('hidden');
            $('#appendnewrowforsale').append(html);
            //$("#countnum").text(sernum);
            sernum++;
            CountTotalOfAllTD();




            $(".descc").dblclick(function () {
                if (this.value == null || this.value == "") {
                    $("#VendorDesModal").modal('show');
                }


            });
            //$(".Descca").dblclick(function() {
            //    alert(23);

            //});

        });




        $("#btn").click(function () {
            InsertSaleDetails(false, false);
        });

        $("#invoicenumber").val('@ViewBag.InvoiceNumber');
        window.isSuperVisorCreditSuccess = false;

    });



    function Changerow(val, val2, val3) {
        event.preventDefault();
       // debugger;
        $("#Pcd").val(val3);
        var allrows = $(".itemnewtr").find('tr');
         $(allrows.prevObject).removeClass("selectedrow");
        $.each(allrows.prevObject, function (ind, it) {
            if ($(it).find('id').prevObject[0].id == ("rowlistid-" + val)) {
                //$('#itemquantitylabel').trigger('focus');
                $($(it).find('id').prevObject[0]).addClass("selectedrow");
                 return false;
            } 
            //else {
            //    $($(it).find('id').prevObject[0]).removeClass("selectedrow");
            //}
        });


        if (val2 != null && val2 != "" && val2 != "undefined") {
            shortaddvalue = val2;
        }

    };

    function closemodalDesc() {
        $("#VendorDesModal").modal('hide');
        $("#DescriptionInput").val("");
        $('#itemnumberModal').val("");
        $("#itemDescriptionM").val("");
        $("#itemNumM").html("");
        $("#itemRetailM").val("");
        $("#manufactureM").val("");
        $("#catagoryM").val("");
        $("#subCatagoryM").val("");
        $("#familyM").val("");
        $("#unitChargeM").val("");
        $("#unitPriceM").val("");
        $("#customQuantityM").val("");

    }



    /*  /to append list on posted open dropdown/*/
    $('.add-rowpayment').click(function () {
        var html = '';
        html += '<tr  id="rowidsalepayment-' + paymentserial + '" class="">';
        html += '<td class="txtCal" id="amountpayed-' + paymentserial + '" onfocusout="PaymentAdd(' + paymentserial + ')" contenteditable="true" class="table-warning" style="color: #020caf; background:#fff3cd;"></td>';
        html += '<td class="txtCal1" style="background:#fff3cd;" id="amountallocate-' + paymentserial + '" class="table-warning" readonly ></td>';
        html += '<td id="paymenttype-' + paymentserial + '"  contenteditable="true" class="table-primary"><select id="selectid-' + paymentserial + '" class="selectcash PaymentMethodP txtCalCredit" onchange="AddCreditTax(' + paymentserial + ')" name="D1">';
        $.each(PaymentTypeList, function (index, item) {
             html += '<option value = '+ item.paymentTypeId +' > '+ item.paymentTypeName +' </option >';
        });
        html += '</select ></td>';
        html += '<td id="cardnumber-' + paymentserial + '" contenteditable="true" class="table-warning"></td>';
        html += '<td id="holddate-' + paymentserial + '" contenteditable="true" class="table-warning " style="color: #c92d21;font-weight: 500;"><input type="text" id="DateP-' + paymentserial + '" style="background:#fff3cd; border:none;" disabled></td>';
        html += '<td id="paymentrowdelete-' + paymentserial + '"  onclick="RemoveRowPayment(' + paymentserial + ')"><span class="delete-row ti-close"></span></td>';
        html += '</tr >';

        $('#paymentmodaltable').append(html);


       // CountTotalOfAllTDOfPayment();
        //$("#DateP-" + paymentserial).datepicker({
        //    dateFormat: "dd/MM/yy"
        //});
        //SetDate(paymentserial);

        $("#DateP-" + paymentserial).datepicker();
        $("#DateP-" + paymentserial).datepicker("setDate", "10w+1");
        paymentserial++;
    });

    $('.add-generalpaymentrow').click(function () {
        var html = '';
        html += '<tr  id="rowidsalepayment-' + paymentserial + '" class="">';
        html += '<td class="txtCal" id="amountpayed-' + paymentserial + '" onfocusout="MultiPaymentAdd(' + paymentserial + ')" contenteditable="true" class="table-warning" style="color: #020caf; background:#fff3cd;"></td>';
        html += '<td class="txtCal1" style="background:#fff3cd;" id="amountallocate-' + paymentserial + '" class="table-warning" readonly ></td>';
        html += '<td id="paymenttype-' + paymentserial + '"  contenteditable="true" class="table-primary"><select id="selectid-' + paymentserial + '" class="selectcash PaymentMethodP txtCalCredit" onchange="AddCreditTax(' + paymentserial + ')" name="D1">';
        $.each(PaymentTypeList, function (index, item) {
            html += '<option value = ' + item.paymentTypeId + ' > ' + item.paymentTypeName + ' </option >';
        });
        html += '</select ></td>';
        html += '<td id="cardnumber-' + paymentserial + '" contenteditable="true" class="table-warning"></td>';
        html += '<td id="holddate-' + paymentserial + '" contenteditable="true" class="table-warning " style="color: #c92d21;font-weight: 500;"><input type="text" id="DateP-' + paymentserial + '" style="background:#fff3cd; border:none;" disabled></td>';
        html += '<td id="paymentrowdelete-' + paymentserial + '"  onclick="RemoveRowMultiPayment(' + paymentserial + ')"><span class="delete-row ti-close"></span></td>';
        html += '</tr >';

        $('#generalpaymentmodaltable').append(html);


       // CountTotalOfAllTDOfPayment();

        //$("#DateP-" + paymentserial).datepicker({
        //    dateFormat: "dd/MM/yy"
        //});
        //SetDate(paymentserial);

        $("#DateP-" + paymentserial).datepicker();
        $("#DateP-" + paymentserial).datepicker("setDate", "10w+1");
        paymentserial++;
    });



    function SetDate(val) {
        $("#DateP-" + val).datepicker();
        $("#DateP-" + val).datepicker("setDate", "10w+1");
    }

    function abcd() {
        var sd = this.value();
    };


    function exceedlimitfunction(val) {
        var booldata = Boolean($("#needhighotherization-" + val).text());
        var highlimiton = parseInt($("#highlimiton-" + val).text());
        var ringerquantity = parseInt($("#ringerqty-" + val).text());
        if (booldata == true) {
            var itemid = parseInt($("#itemid-" + val).text());
            $("#approvedetails").attr("data-itemId", itemid);
            $("#approvedetails").attr("data-ticketID", '@ViewBag.InvoiceNumber');

            if (ringerquantity >= highlimiton) {
                $("#input-delivery").modal('show');

            }
            else {
                return true;
            }
        }

        else {
            return true;
        }
    }


    function AddCreditTax(id) {
        //var aa = $("#PaymentMethodP").val();
        //if(aa == "check"){
        //    $("#cardnumber-1").
        //    $("#cardnumber-1").css(display, value);
        //}
        var amountvalue = 0;
        amountvalue = $("#amountpayed-" + id).text();

        var selectvalue = $("#paymenttype-"+id).find("select").val();
        if (selectvalue === "3") {
            var percentage = (amountvalue * 2) / 100;

            var tofixedvalue = percentage.toFixed(2);
            $("#cardnumber-" + id).text("@@2%=$" + tofixedvalue);
            $("#cardnumber-" + id).addClass("CreditC");

            var aa = $("#TotalPaidP").text();
            aa = aa.replace("$", "");

            var bb = (parseFloat(aa) + parseFloat(tofixedvalue));
            $("#TotalPaidP").text("$" + bb.toFixed(2));
            $("#totalpaidd").text("$" + bb.toFixed(2));
        } else {
            $("#cardnumber-" + id).removeClass("CreditC");
            $("#cardnumber-" + id).text("");
        }
    }
    // var openinvoices = $('#open-invoice');
    // $.ajax({
    //     type: "GET",
    //     url: '@Url.Action("GetOpensales", "Sale")',
    //     dataType: 'json',
    //     success: function (data) {

    //         $.each(data, function (val, text) {
    //             openinvoices.append(
    //                 /*  $('<option></option>').val(val).html("<div onclick=seletchdkjsa(" + text.currentInvoiceNumber + ")" + text.currentInvoiceNumber + "-" + text.customerNumber + "-" + text.customerName +"</div>")*/
    //                 $('<option></option>').val(text).html(text/* + "-" + text.customerNumber + "-" + text.customerName*/)
    //             );
    //         });
    //     },
    //     error: function (xhr, status, error) {
    //         var errorMessage = xhr.status + ': ' + xhr.statusText
    //     },
    // });

    // === function Open invoice Created By NOUMAN
   var openinvoices1 = $('#open-invoice');
    $.ajax({
        type: "GET",
        url: '@Url.Action("GetOpensales1", "Sale")',
        dataType: 'json',
        success: function (data) {
            $.each(data, function (val, text) {
             
                openinvoices1.append(
                    /*  $('<option></option>').val(val).html("<div onclick=seletchdkjsa(" + text.currentInvoiceNumber + ")" + text.currentInvoiceNumber + "-" + text.customerNumber + "-" + text.customerName +"</div>")*/
                    $('<option></option>').val(text.invoiceNumber).html(text.invoiceNumber + '  -  ' + text.customerCode + '  -  ' + text.customerName)
                );
            });
        },
        error: function (xhr, status, error) {
            var errorMessage = xhr.status + ': ' + xhr.statusText
        },
    });

    // var postedinvoices = $('#posted-invoice');
    // $.ajax({
    //     type: "GET",
    //     url: '@Url.Action("GetPostedsales", "Sale")',
    //     dataType: 'json',
    //     success: function (data) {
    //         console.log(data);
    //         $.each(data, function (val, text) {
    //             postedinvoices.append(
    //                 $('<option></option>').val(text).html(text /* + "-" + text.customerNumber + "-" + text.customerName*/)

    //             );
    //         });
    //     },
    //     error: function (xhr, status, error) {
    //         var errorMessage = xhr.status + ': ' + xhr.statusText
    //     },
    // });

    // === function Posted invoice Created By NOUMAN
     var postedinvoices1 = $('#posted-invoice');
    $.ajax({
        type: "GET",
        url: '@Url.Action("GetPostedsales1", "Sale")',
        dataType: 'json',
        success: function (data) {
            $.each(data, function (val, text) {
                postedinvoices1.append(
                    $('<option></option>').val(text.invoiceNumber).html(text.invoiceNumber + '  -  ' + text.customerCode + '  -  ' + text.customerName + '    -    ' + text.amount + '    -   ' + text.balance)

                );
            });
        },
        error: function (xhr, status, error) {
            var errorMessage = xhr.status + ': ' + xhr.statusText
        },
    });

    function CountTotalOfAllTD() {
        /* $("#subtotalauto").empty();*/
        var total = 0

        //   var alltr = $("#saletable").find('tr');
        $("#saletable tr").each(function () {
            var self = $(this);

            var col_11_value = self.find("td:eq(10)").text().trim();

            var result = col_11_value.replace(/\$/g, '');

            console.log(result + "result");
            var afterparsing = parseFloat(result);
            if (!isNaN(afterparsing)) {
                total += afterparsing;
            }

            console.log(total + "////");
            $("#subtotalauto").val("$" + total.toFixed(2));
        });
        CalculatetaxPlusDiscount()
    }

    function CountTotalOfAllTDOfPayment() {
        var total = 0

        $("#Custpaymenttable tr").each(function (index, val) {
            if(index > 0){
                var self = $(this);
                var col_11_value = self.find("td:eq(0)").text().trim();
                var result = col_11_value.replace(/\$/g, '');
                var afterparsing =  parseFloat(result);
                if (!isNaN(afterparsing)) {
                     total += afterparsing;
                 }
            }
        });
           $("#TotalPaidP").text(abc_general.dollarAdd(total));
        $("#totalpaidd").text(abc_general.dollarAdd(total));
           var cusPayBalance = parseFloat(abc_general.parenthRemove($("#BalanceDueP").text(), '('));
           $("#BalanceP").text(abc_general.parenthAdd((cusPayBalance - total).toFixed(2)));
           $("#ChangeP").val('');

        if (abc_general.parenthRemove($("#BalanceP").text(), "(") > 0){
             $("#myButton").hide();
             $("#rightButton").show();
             $("#rightButton").prop("disabled", true);
        }
        else {
            $("#rightButton").hide();
            $("#myButton").show();
            $("#myButton").prop("disabled", false);
        }
    }

    function CountTotalOfAllTDOfMultiPayment() {
        var total = 0

        $("#CusMultiPaymentsTable tr").each(function (index, val) {
            if(index > 0){
                var self = $(this);
                var col_0_value = self.find("td:eq(0)").text().trim();
                var result = col_0_value.replace(/\$/g, '');
                var afterparsing =  parseFloat(result);
                if (!isNaN(afterparsing)) {
                     total += afterparsing;
                 }
            }
        });
        $("#TotalPaidAmount").text(abc_general.dollarAdd(total));
        $("#totalAmountAllocation").text(abc_general.dollarAdd(total));
        var cusPayBalance = parseFloat(abc_general.parenthRemove($("#CustomerBalance").val(), '('));
        $("#CustomerBalanceDue").text(abc_general.parenthAdd((cusPayBalance - total).toFixed(2)));
        $("#ChangeAmount").val('');

        if (abc_general.parenthRemove($("#CustomerBalanceDue").text(), "(") > 0) {
            $("#thumbLeftButton").hide();
            $("#thumbRightButton").show();
            $("#thumbRightButton").prop("disabled", true);
        }
        else{
            $("#thumbRightButton").hide();
            $("#thumbLeftButton").show();
            $("#thumbLeftButton").prop("disabled", false);
        }
    }
   function RemoveRowPlusEmpty(val)
    {
       //debugger;
        RemoveRow(val);
         var addrow = false;
         var rowCount = 1;
        $('#saletable tr').each(function (index, tr) {
            var descriptionIndex = $('#description-' + rowCount).text();
           if (descriptionIndex == '') {
              RemoveRow(rowCount);
              addrow = true;
           } else {
               rowCount++;
               }
        });

         if(addrow)
         {
            $(".add-row").trigger("click");
         }          
    }
    function RemoveRow(val) {
        debugger;
        var ac = $("#rowid-" + val).find("td:eq(4)").text();
        if (ac != null && ac != "") {
            var xx = $("#rowid-" + val).find("td:eq(17)").text();
            var allitem = $("#countnum").text();
           if(allitem > 0){
                var zz = allitem - parseInt(xx);
                $("#countnum").text(zz);
            }
            else{
               $("#TotalItems").text(0);
            }
        }
        $("#rowid-" + val).remove();
        var alltr = $("#saletable").find('tr');

        $.each(alltr, function (i, t) {
            if (i > 0) {
                var TRid = $(t)[0].id.split('-');
                $(t).attr('id', TRid[0] + "-" + i);

                var alltd = $(t).find('td');
                $.each(alltd, function (f, it) {
                    var id = $(it)[0].id.split('-');
                    if (id[0] == "countser") {
                        $(it).attr('id', id[0] + "-" + i);
                        $(it).text(i);
                    }
                    if (id[0] == "itemnumber") {
                        $(it).attr('onkeyup', 'GetItemByItemNumber(event,' + i + ')');
                    }
                    if (id[0] == "Quantity") {
                        $(it).attr('onkeyup', 'QuantityMultipyPrice(' + i + ')');
                    }
                    if (id[0] == "delete") {
                        $(it).attr('onclick', 'RemoveRowPlusEmpty(' + i + ')');
                    }
                    $(it).attr('id', id[0] + "-" + i);

                });
            }
           // sernum = i;
        });
        var count = 1;
        var sernum = count;
        sernum--;
        CountTotalOfAllTD();
    }
    function RemoveRowPayment(val) {
        $("#rowidsalepayment-" + val).remove();
        var alltr = $("#Custpaymenttable").find('tr');

        $.each(alltr, function (i, t) {
            if (i > 0) {
                var TRid = $(t)[0].id.split('-');
                $(t).attr('id', TRid[0] + "-" + i);

                var alltd = $(t).find('td');
                $.each(alltd, function (f, it) {
                    var id = $(it)[0].id.split('-');


                    if (id[0] == "paymentrowdelete") {
                        $(it).attr('onclick', 'RemoveRowPayment(' + i + ')');
                    }
                    if (id[0] == "amountpayed") {
                        $(it).attr('onkeyup', 'AddCreditTax(' + i + ')');
                    }
                    if (id[0] == "paymenttype") {
                        $(it).find("select").attr('onchange', 'AddCreditTax(' + i + ')');
                    }
                    $(it).attr('id', id[0] + "-" + i);
                    var idselect = $(it).find("select").attr('id');
                    console.log(idselect + "selectmyid");
                    if (idselect != null && idselect != "undefined") {
                        var selectid = idselect.split('-');
                        if (selectid[0] != null && selectid[0] != "undefined") {
                            $(it).find("select").attr('id', selectid[0] + "-" + i);
                        }

                    }


                });
            }

        });

        paymentserial--;
        //  $("#countnum").text(sernum - 1);
        CountTotalOfAllTDOfPayment();

    }

    function RemoveRowMultiPayment(val) {
        $("#rowidsalepayment-" + val).remove();
        var alltr = $("#CusMultiPaymentsTable").find('tr');

        $.each(alltr, function (i, t) {
            if (i > 0) {
                var TRid = $(t)[0].id.split('-');
                $(t).attr('id', TRid[0] + "-" + i);

                var alltd = $(t).find('td');
                $.each(alltd, function (f, it) {
                    var id = $(it)[0].id.split('-');


                    if (id[0] == "paymentrowdelete") {
                        $(it).attr('onclick', 'RemoveRowMultiPayment(' + i + ')');
                    }
                    if (id[0] == "amountpayed") {
                        $(it).attr('onkeyup', 'AddCreditTax(' + i + ')');
                    }
                    if (id[0] == "paymenttype") {
                        $(it).find("select").attr('onchange', 'AddCreditTax(' + i + ')');
                    }
                    $(it).attr('id', id[0] + "-" + i);
                    var idselect = $(it).find("select").attr('id');
                    if (idselect != null && idselect != "undefined") {
                        var selectid = idselect.split('-');
                        if (selectid[0] != null && selectid[0] != "undefined") {
                            $(it).find("select").attr('id', selectid[0] + "-" + i);
                        }

                    }


                });
            }

        });

        paymentserial--;
        CountTotalOfAllTDOfMultiPayment();

    }


    function closemodal() {
        $("#payment").modal('hide');
    }
    function openmodal() {

        // var chksubTotal = $("#subtotalauto").val();
        // var chkinvTotal = $("#invoicetotal").val();
        // if(chksubTotal == "" && chkinvTotal == ""){
        //     $("#customerpayment").modal('hide');
        //     return;
        // }

        var invoicetotal = $("#invoicetotal").val();
        var invoiceBalance = $("#InvoiceBalance").val();

        $("#InvoiceTotalP").text(invoicetotal);
        $("#BalanceDueP").text(invoiceBalance);
        $("#BalanceP").text(invoiceBalance);
        var balanceText = $("#BalanceP").text().trim();
        var numericValue = parseFloat(balanceText.replace(/[^\d.-]/g, ""));
        var isNegative = balanceText.includes("(") && balanceText.includes(")");

        $("#customerpayment").modal('show');
    }
    function openmodalabcde() {
        $("#payment").modal('show');
    }
    function openmodalabcd() {
        $("#CustomerInfoModel").modal('show');
    }
    function closemodalabcd() {
        $("#CustomerInfoModel").modal('hide');
        $("#receivablesid").modal('hide');
        $("#customerpayment").modal('hide');
    }

  
    function openpaymentmodal2() {
        $("#paymentmodal2").modal('show');
    }
    function closepaymentmodal2() {
        $("#paymentmodal2").modal('hide');
       
    }

    function openemailmessagemodal(Type) {
        debugger;
        $("#emailmessagemodal").modal('show');
        $("#TypeEmailProtectedOrUnProtected").attr("id", Type);
      
    }
    function closeemailmessagemodal() {
        $("#emailmessagemodal").modal('hide');
    }



    function openSalePrintModal() {
        $("#SaleOrderPrintModal").modal('show');
        $("#CustomerInfoModel").modal('hide');
    }
    function closeSalePrintModal() {
        $("#SaleOrderPrintModal").modal('hide');
    }
    $('.add-row1').click(function () {

        var html = '';
        html += '<tr class="">';
        html += '<td style="width: 10px" class="counter" contenteditable="true"></td>';

        html += '<td style="width: 10px" contenteditable="true"></td>';
        html += '<td contenteditable="true" class="table-primary"></td>';
        html += '<td contenteditable="true"></td>';
        html += '<td contenteditable="true"></td>';
        html += '<td><span class="delete-row ti-close" onclick="RemoveRowPlusEmpty()"></span></td>';
        html += '</tr >';

        $('#appendnewrowforsalepayment').append(html);
    });
    function Increamenrgross(val) {

        //var idnum = sernum - 1;

        var totalamountgrossindex1 = $("#total-" + val).text();
        var ReplacedAmountgross1 = totalamountgrossindex1.replace(/\$/g, '');

        var existingValue = $("#subtotalauto").val().split('$');
        var existingvalueAmount = existingValue[1];
        if (existingvalueAmount > 0) {
            var newtotal = parseFloat(existingvalueAmount) + parseFloat(ReplacedAmountgross1);
            $("#subtotalauto").val("$" + newtotal.toFixed(2));
        } else {
            var newtotal1 = ReplacedAmountgross1;
            $("#subtotalauto").val("$" + parseFloat(newtotal1).toFixed(2));
        }
        CountTotalOfAllTD();
        //var totalamountgrossindex2 = $("#total" + val).text();
        //var ReplacedAmountgross2 = totalamountgrossindex1.replace(/\$/g, '');


        //alert(newtotal);
        /* var ReplacedAmountgross2 = totalamountgrossindex2.replace(/\$/g, '');*/

        //var newgrosstotalfinal = ReplacedAmountgross1 + ReplacedAmountgross2;


    }


    function InsertSaleDetails1(Isprint, Ispaid) {
        var customername = $("#searchname").val();
        var customercode = $("#customercodeinfo").val();
        var CustomerId = $("#customerid").val();
        var saleman = $("#salesmanid").text();
        var invoicenumber = $("#invoicenumber").val();
        var invoicetotal = abc_general.dollarRemove($("#invoicetotal").val());
        var discountidadd = $("#discountidadd").val();
        var subtotal = abc_general.dollarRemove($("#subtotalauto").val());
        var otherid = $("#otherid").val();
        var AccNum = $("#Accountnumber").val();
        var taxid = $("#taxid").val();
        var freightid = $("#freightid").val();
        var GetSaleDiscount = $("#getsalediscount").is(':checked');
        var CountNumber = $("#countnum").text();
        var drivingLicense = $("#drivingLicense").val();
        var plateNo = $("#plateNo").val();
        var PointOfSaleId = $("#PointOfSaleId").val();
        var phoneNumber = $("#PhoneNumber").val();
        var faxNumber = $("#faxNumber").val();

        $("#saletable TBODY TR").each(function () {
            if ($(this).find("#productId").val() == '') {
                RemoveRow(($(this).attr("id")).split("rowid-")[1]);
            }
        });

        var Sale = {};

       // Sale.drivingLicense = drivingLicense;
       // Sale.plateNo = plateNo;
       Sale.CustomerName = customername;
       // Sale.CustomerNumber = customercode;
        Sale.CustomerId = CustomerId;
       // Sale.SaleManName = saleman;
        Sale.InvoiceNumber = invoicenumber;
        Sale.InvoiceTotal = invoicetotal;
        Sale.Discount = discountidadd;
        Sale.Charges = discountidadd;
        Sale.SubTotal = subtotal;
        Sale.Other = otherid;
      //  Sale.CustomerAccountNumber = AccNum;
        Sale.Tax = taxid;
        Sale.Freight = freightid;
        Sale.PointOfSaleId = PointOfSaleId != "" ? PointOfSaleId : 0 ;
        Sale.Phone = phoneNumber;
        Sale.Fax = faxNumber;
        if (GetSaleDiscount == true) {
            Sale.GetSaleDiscount = true;
        } else {

            Sale.GetSaleDiscount = false;

        }

        // if (Isprint) {
        //     Sale.IsPrintinvoice = true;
        // }
      
        // if (Sale.IsPrintinvoice == true) {
        //     Sale.OnCredit = "true";
        // }
        Sale.BusinessAddress = $("#bussinessAddress").text();
       // if ($("#customerAddToMail").text() == "true") {
          //  Sale.AddToMailList = true;
      //  }
      //  else {
          //  Sale.AddToMailList = false;
        //}
       // Sale.CustomerEmail = $("#customerEmail").text();
        Sale.Count = CountNumber;
        Sale.SupervisorId = parseInt($("#supervisorId").text());


        var itemsdetails = new Array();
        var count1 = 1;
        $("#saletable TBODY TR").each(function () {

            var row = $(this);
            if (row.find("TD").eq(14).html() == '') {
                RemoveRow(count1);
                //count1--;
                return;
            }

            var itemDetail = {};

            itemDetail.Quantity = row.find("TD").eq(3).html();
            itemDetail.AmountRetail = abc_general.dollarRemove(row.find("TD").eq(4).html());
            itemDetail.InDiscount = abc_general.dollarRemove(row.find("TD").eq(5).html());    
            itemDetail.OutDiscount = abc_general.signRemove(row.find("TD").eq(6).html(), '%');
            itemDetail.InUnit = abc_general.dollarRemove(row.find("TD").eq(7).html());
            itemDetail.OutUnit = abc_general.dollarRemove(row.find("TD").eq(8).html());
            itemDetail.Price = abc_general.dollarRemove(row.find("TD").eq(9).html());  
            itemDetail.Total = abc_general.dollarRemove(row.find("TD").eq(10).html());
            itemDetail.RingerQty = row.find("TD").eq(17).html();    
            itemDetail.ItemId = row.find("TD").eq(14).html();
            itemDetail.ItemName = row.find("TD").eq(2).html();
            itemDetail.ItemNumber = row.find("TD").eq(1).html();

          if(PointOfSaleId != null || PointOfSaleId != ""){
                itemDetail.PointOfSaleId = PointOfSaleId;
          }

            itemsdetails.push(itemDetail);
            count1++;
        });

      Sale.PointOfSaleDetails = itemsdetails;
     

      if(PointOfSaleId == "" || PointOfSaleId == undefined){
        $.ajax({
            type: "POST",
            url: '@Url.Action("AddSalePos1", "Sale")',

            data: JSON.stringify(Sale),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            cache: false,
            success: function (data) {
                if(data == true){
                    if(Ispaid == true){
                        ChangePayment1(true,Isprint);
                       }
                    toastr.success('Invoice Saved Successfully');
                    location.reload();
                }
            }
        });
      }
      else{
            $.ajax({
                type: "POST",
                url: '@Url.Action("UpdateSalePos1", "Sale")',

                data: JSON.stringify(Sale),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                   
                        if (data == true) {
                            if(Ispaid == true){
                                ChangePayment1(true,Isprint);
                            }
                        // if (Isprint == true) {
                        //     var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                        //     window.open(actionUrl);
                        //     location.reload();
                        // }
                        location.reload();
                        // else {
                        //     location.reload();
                        // }
                    }
                }
            });
      }
    }

    //tosearchh
    function InsertSaleDetails(printorNot, update, Ispaid, IsInvoicePaid) {
        var customername = $("#searchname").val();
        var customercode = $("#customercodeinfo").val();
        var CustomerID = $("#customerid").val();
        var saleman = $("#salesmanid").text();
        var invoicenumber = $("#invoicenumber").val();
        var invoicetotal = $("#invoicetotal").val();
        var discountidadd = $("#discountidadd").val();
        var subtotal = $("#subtotalauto").val();
        var otherid = $("#otherid").val();
        var AccNum = $("#Accountnumber").val();
        var taxid = $("#taxid").val();
        var freightid = $("#freightid").val();
        var GetSaleDiscount = $("#getsalediscount").is(':checked');
        var CountNumber = $("#countnum").text();
        var drivingLicense = $("#drivingLicense").val();
        var plateNo = $("#plateNo").val();

        var SaleDetails = new Array();
        $("#saletable TBODY TR").each(function () {
            if ($(this).find("#productId").val() == '') {
                RemoveRow(($(this).attr("id")).split("rowid-")[1]);
            }
        });
        var count1 = 1;
        $("#saletable TBODY TR").each(function () {
            var row = $(this);
            var Sale = {};
            if (row.find("TD").eq(14).html() == '') {
                RemoveRow(count1);
                //count1--;
                return;
            }

            Sale.ItemNumber = row.find("TD").eq(1).html();
            Sale.ItemNumber = Sale.ItemNumber.replace('-', '');
            Sale.ItemDescription = row.find("TD").eq(2).html();
            Sale.Quantity = row.find("TD").eq(3).html();
            Sale.AmountRetail = row.find("TD").eq(4).html();
            Sale.InDiscount = row.find("TD").eq(5).html();
            Sale.OutDiscount = row.find("TD").eq(6).html();
            Sale.InUnits = row.find("TD").eq(7).html();
            Sale.OutUnits = row.find("TD").eq(8).html();
            Sale.Price = row.find("TD").eq(9).html();
            Sale.Total = row.find("TD").eq(10).html();
            Sale.RingerQuantity = row.find("TD").eq(17).html();
            Sale.CustomerName = customername;
            Sale.CustomerNumber = customercode;
            Sale.CustomerID = CustomerID;
            Sale.ItemId = row.find("TD").eq(14).html();
            Sale.SaleManName = saleman;
            Sale.InvoiceNumber = invoicenumber;
            Sale.InvoiceTotal = invoicetotal;
            // Sale.Discount = discountidadd;
            Sale.Charges = discountidadd;
            Sale.SubTotal = subtotal;
            Sale.Other = otherid;
            Sale.CustomerAccountNumber = AccNum;
            Sale.Tax = taxid;
            Sale.Freight = freightid;
            Sale.ItemName = row.find("TD").eq(2).html();
            Sale.plateNo = plateNo;
            Sale.drivingLicense = drivingLicense;
            Sale.PossaleId = row.find("TD").eq(21).text();
            if (GetSaleDiscount == true) {
                Sale.GetSaleDiscount = "true";
            } else {

                Sale.GetSaleDiscount = "false";

            }
            if (printorNot) {
                Sale.IsPrintinvoice = true;
                Sale.IsClose = true;
                Sale.IsOpen = false;

            }
            else {
                Sale.IsClose = false;
                Sale.IsOpen = true;
            }

            if (Sale.IsPrintinvoice == true) {
                Sale.OnCredit = "true";
            }
            Sale.BusinessAddress = $("#bussinessAddress").text();
            if ($("#customerAddToMail").text() == "true") {
                Sale.AddToMailList = true;
            }
            else {
                Sale.AddToMailList = false;
            }
            Sale.CustomerEmail = $("#customerEmail").text();
            Sale.Count = CountNumber;
            Sale.SupervisorID = $("#supervisorId").text();

            //debugger;
            // Sale.GetSaleDiscount = GetSaleDiscount;

            //   alert(Sale.GetSaleDiscount);

            SaleDetails.push(Sale);
            count1++;
        });
        console.log("NNN" + customername);


        if (customername != "" && customername != "undefined") {
            $("#ValCustomerName").hide();
            isValid = true;

        } else {
            $("#ValCustomerName").first().focus();
            $("#ValCustomerName").text("CustomerName Is Required.");
            $("#ValCustomerName").show();
            isValid = false;
        }
        if (customercode != "" && customercode != "undefined") {

            $("#ValCustomercode").hide();
            isValid = true;

        } else {
            $("#ValCustomercode").first().focus();
            $("#ValCustomercode").text("ValCustomercode Is Required.");
            $("#ValCustomercode").show();
            isValid = false;
        }
        var tablecount = $("#saletable TBODY TR").length;
        if (parseInt(tablecount) == 0) {
            isValid = false;
        }
        //debugger;
        if (window.isSuperVisorCreditSuccess == false) {
            isValid = false;
        }
        if (isValid == true) {
            if (update == false) {

                if (Ispaid) {
                    var isamountValid = true;
                    if ($("#isExclude").text() == "true") {
                        var amount = $("#remainingAmount").text();
                        if (amount != "") {
                            if (parseInt(amount) > 0) {
                                isamountValid = false;
                            }


                        }
                    }
                    if ($("#isBilltoBill").text() == "0" && $("#isBilltoBill").text() == 0 && amount != "" && amount != "0") {
                        Swal.fire(
                            'Customer Bill to Bill Is Set',
                            "Customer have to pay previous Balance of " + pendingAmount + "$ ",
                            'error'
                        )
                    } else {
                        if (isamountValid) {
                            if ($("#isPopupMessage").text() == "true") {
                                Swal.fire({
                                    title: $("#popupMessage").text(),
                                    confirmButtonText: 'OK',
                                    showCancelButton: true,
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        $.ajax({
                                            type: "POST",
                                            url: '@Url.Action("AddSalePos", "Sale")',
                                            data: JSON.stringify(SaleDetails),
                                            // data: { 'SaleDetails': SaleDetails},
                                            contentType: "application/json; charset=utf-8",
                                            dataType: "json",
                                            async: false,
                                            cache: false,
                                            success: function (data) {
                                                //debugger;
    @*if (data.success) {
                                                    var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                    window.open(actionUrl);
                                                    location.reload();
                                                    }*@
                                                                            if (data == true) {
                                                    if (IsInvoicePaid) {
                                                        ChangePayment(true);

                                                    } else {
                                                        ChangePayment(false);
                                                    }
                                                    //toastr.success('Invoice Saved Successfully');
                                                    //setTimeout(function() {
                                                    //    if (printorNot == true) {
                                                    //        var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                    //        window.open(actionUrl);
                                                    //        location.reload();
                                                    //    }
                                                    //    else {
                                                    //        location.reload();
                                                    //    }
                                                    //}, 2500);

                                                } else {
                                                    toastr.error('Invoice failed to save');

                                                }
                                            }
                                        });
                                    }
                                })
                            }
                            else {

                                $.ajax({
                                    type: "POST",
                                    url: '@Url.Action("AddSalePos", "Sale")',

                                    data: JSON.stringify(SaleDetails),
                                    contentType: "application/json; charset=utf-8",
                                    dataType: "json",
                                    async: false,
                                    cache: false,
                                    success: function (data) {
                                        if (data == true) {

                                            if (IsInvoicePaid) {
                                                ChangePayment(true);

                                            } else {
                                                ChangePayment(false);
                                            }
                                        }
                                        else {
                                            toastr.error('Invoice failed to save');

                                        }
                                    }
                                });
                            }
                        }
                        else {
                            var pendingAmount = $("#remainingAmount").text();
                            Swal.fire(
                                'Customer Amount Pending',
                                "Customer have to pay " + pendingAmount + "$ ",
                                'error'
                            )

                        }
                    }
                } else {
                    $.confirm({
                        title: 'Save New Sale Invoice!',
                        content: 'Are you sure to save new Sale Invoice?',
                        buttons: {
                            confirm: function () {
                                //debugger;
                                var isamountValid = true;
                                if ($("#isExclude").text() == "true") {
                                    var amount = $("#remainingAmount").text();
                                    if (amount != "") {
                                        if (parseInt(amount) > 0) {
                                            isamountValid = false;
                                        }


                                    }
                                }
                                if ($("#isBilltoBill").text() == "0" && $("#isBilltoBill").text() == 0 && amount != "" && amount != "0") {
                                    Swal.fire(
                                        'Customer Bill to Bill Is Set',
                                        "Customer have to pay previous Balance of " + pendingAmount + "$ ",
                                        'error'
                                    )
                                } else {
                                    if (isamountValid) {
                                        if ($("#isPopupMessage").text() == "true") {
                                            Swal.fire({
                                                title: $("#popupMessage").text(),
                                                confirmButtonText: 'OK',
                                                showCancelButton: true,
                                            }).then((result) => {
                                                /* Read more about isConfirmed, isDenied below */
                                                if (result.isConfirmed) {
                                                    $.ajax({
                                                        type: "POST",
                                                        url: '@Url.Action("AddSalePos", "Sale")',
                                                        data: JSON.stringify(SaleDetails),
                                                        // data: { 'SaleDetails': SaleDetails},
                                                        contentType: "application/json; charset=utf-8",
                                                        dataType: "json",
                                                        async: false,
                                                        cache: false,
                                                        success: function (data) {
                                                            //debugger;
    @*if (data.success) {
                                                                var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                                window.open(actionUrl);
                                                                location.reload();
                                                                }*@
                                                                            if (data == true) {

                                                                toastr.success('Invoice Saved Successfully');
                                                                setTimeout(function () {
                                                                    if (printorNot == true) {
                                                                        var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                                        window.open(actionUrl);
                                                                        location.reload();
                                                                    }
                                                                    else {
                                                                        location.reload();
                                                                    }
                                                                }, 2500);

                                                            } else {
                                                                toastr.error('Invoice failed to save');

                                                            }
                                                        }
                                                    });
                                                }
                                            })
                                        }
                                        else {

                                            $.ajax({
                                                type: "POST",
                                                url: '@Url.Action("AddSalePos", "Sale")',

                                                data: JSON.stringify(SaleDetails),
                                                contentType: "application/json; charset=utf-8",
                                                dataType: "json",
                                                async: false,
                                                cache: false,
                                                success: function (data) {
                                                    //debugger;
    @*if (data.success) {
                                                        window.location.href = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                        //window.open('Purchase/PurchaseInvoice','_blank');
                                                        }*@
                                                                    if (data == true) {
                                                        if (printorNot == true) {
                                                            var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                            window.open(actionUrl);
                                                            location.reload();
                                                        }
                                                        else {
                                                            location.reload();
                                                        }
                                                    }
                                                }
                                            });
                                        }
                                    }
                                    else {
                                        var pendingAmount = $("#remainingAmount").text();
                                        Swal.fire(
                                            'Customer Amount Pending',
                                            "Customer have to pay " + pendingAmount + "$ ",
                                            'error'
                                        )

                                    }
                                }

                            },
                            cancel: function () {
                            },
                        }
                    });
                }

            }
            else {
                $.confirm({
                    title: 'Update Sale Invoice!',
                    content: 'Are you sure to Update Invoice?',
                    buttons: {
                        confirm: function () {
                            //debugger;
                            var isamountValid = true;
                            if ($("#isExclude").text() == "true") {
                                var amount = $("#remainingAmount").text();
                                if (amount != "") {
                                    if (parseInt(amount) > 0) {
                                        isamountValid = false;
                                    }
                                }
                            }
                            if (isamountValid) {
                                if ($("#isPopupMessage").text() == "true") {
                                    Swal.fire({
                                        title: $("#popupMessage").text(),
                                        confirmButtonText: 'OK',
                                        showCancelButton: true,
                                    }).then((result) => {
                                        /* Read more about isConfirmed, isDenied below */
                                        if (result.isConfirmed) {
                                            $.ajax({
                                                type: "POST",
                                                url: '@Url.Action("UpdateSalePos", "Sale")',

                                                data: { 'SaleDetails': SaleDetails },
                                                //contentType: "application/json; charset=utf-8",
                                                dataType: "json",
                                                success: function (data) {
                                                    //debugger;
                                                 @*if (data.success) {
                                                        var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                        window.open(actionUrl);
                                                        location.reload();
                                                        }*@
                                                                            if (data == true) {
                                                        if (printorNot == true) {
                                                            var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                            window.open(actionUrl);
                                                            location.reload();
                                                        }
                                                        else {
                                                            location.reload();
                                                        }
                                                    }
                                                }
                                            });
                                        }
                                    })
                                }
                                else {
                                    $.ajax({
                                        type: "POST",
                                        url: '@Url.Action("UpdateSalePos", "Sale")',

                                        data: JSON.stringify(SaleDetails),
                                        contentType: "application/json; charset=utf-8",
                                        dataType: "json",
                                        success: function (data) {
                                            //debugger;
                                            @*if (data.success) {
                                                window.location.href = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                //window.open('Purchase/PurchaseInvoice','_blank');
                                                }*@
                                                                    if (data == true) {
                                                if (printorNot == true) {
                                                    var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                    window.open(actionUrl);
                                                    location.reload();
                                                }
                                                else {
                                                    location.reload();
                                                }
                                            }
                                        }
                                    });
                                }
                            }
                            else {
                                var pendingAmount = $("#remainingAmount").text();
                                Swal.fire(
                                    'Customer Amount Pending',
                                    "Customer have to pay " + pendingAmount + "$ ",
                                    'error'
                                )

                            }
                        },
                        cancel: function () {
                        },
                    }
                });
            }

        }
    }
    function SaveOnGoingSales() {
        var isValid = true;
        var customername = $("#searchname").val();
        var customercode = $("#customercodeinfo").val();
        var CustomerID = $("#customerid").val();
        var saleman = $("#salesmanid").text();
        var invoicenumber = $("#invoicenumber").val();
        var invoicetotal = $("#invoicetotal").val();
        var discountidadd = $("#discountidadd").val();
        var subtotal = $("#subtotalauto").val();
        var otherid = $("#otherid").val();
        var taxid = $("#taxid").val();
        var freightid = $("#freightid").val();
        var GetSaleDiscount = $("#getsalediscount").is(':checked');
        var CountNumber = $("#countnum").text();
        var desnam = $("#description-1").text();
        var SaleDetails = new Array();
        $("#saletable TBODY TR").each(function () {
            var row = $(this);
            var Sale = {};
            Sale.ItemNumber = row.find("TD").eq(1).html();
            Sale.ItemDescription = row.find("TD").eq(2).html();
            Sale.Quantity = row.find("TD").eq(3).html();
            Sale.AmountRetail = row.find("TD").eq(4).html();
            Sale.InDiscount = row.find("TD").eq(5).html();
            Sale.OutDiscount = row.find("TD").eq(6).html();
            Sale.InUnits = row.find("TD").eq(7).html();
            Sale.OutUnits = row.find("TD").eq(8).html();
            Sale.Price = row.find("TD").eq(9).html();
            Sale.Total = row.find("TD").eq(10).html();
            Sale.CustomerName = customername;
            Sale.CustomerNumber = customercode;
            Sale.CustomerID = CustomerID;
            Sale.ItemId = row.find("TD").eq(14).html();
            Sale.SaleManName = saleman;
            Sale.CurrentInvoiceNumber = invoicenumber;
            Sale.InvoiceTotal = invoicetotal;
            //Sale.Discount = discountidadd;
            Sale.Charges = discountidadd;
            Sale.SubTotal = subtotal;
            Sale.Other = otherid;
            Sale.Tax = taxid;
            Sale.Freight = freightid;
            Sale.ItemName = row.find("TD").eq(2).html();

            if (GetSaleDiscount == true) {
                Sale.GetSaleDiscount = "true";
            } else {

                Sale.GetSaleDiscount = "false";

            }

            Sale.Count = CountNumber;

            // Sale.GetSaleDiscount = GetSaleDiscount;

            //   alert(Sale.GetSaleDiscount);

            SaleDetails.push(Sale);
        });
        console.log(SaleDetails);


        console.log("NNN" + customername);
        if (customername != "" && customername != "undefined") {
            $("#ValMsgQuantity").hide();
            $("#ValCustomerName").hide();


        } else {
            $("#ValCustomerName").first().focus();
            $("#ValCustomerName").text("CustomerName Is Required.");
            $("#ValCustomerName").show();
            isValid = false;
        }
        if (customercode != "" && customercode != "undefined") {

            $("#ValCustomercode").hide();
            $("#ValCustomercode").hide();


        } else {
            $("#ValCustomercode").first().focus();
            $("#ValCustomercode").text("ValCustomercode Is Required.");
            $("#ValCustomercode").show();
            isValid = false;
        }
        if (desnam != "" && desnam != "undefined") {




        } else {

            isValid = false;
        }


        if (isValid == true) {

            $.ajax({
                type: "POST",
                url: '@Url.Action("OngoingSale", "Sale")',

                data: JSON.stringify(SaleDetails),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                cache: false,
                success: function (data) {

                }
            });

        }

    }

    
    

    function QuantityMultipyPrice(val) {
 
        $("#total-" + val).empty();

        //var i = 1;
        //var limit_exceeded = false;
        //$(".saleslimitexeeded").each(function () {
        //    var compare_quantity = 0;
        //    //if (parseInt($("#Quantity-" + i).text()) > parseInt($("#onlineLimit-" + i).text())) {
        //    //    compare_quantity = parseInt($("#onlineLimit-" + i).text());
        //    //}
        //    //else {
        //    //    compare_quantity = parseInt($("#Quantity-" + i).text());
        //    //}
        //    compare_quantity = parseInt($("#saleslimit-" + i).text());
        //    if (parseInt($("#ringerqty-" + i).text()) > compare_quantity) {
        //        limit_exceeded = true;
        //    }

        //    i++;
        //});

        //if (limit_exceeded == true) {

        //    $("#shield-icon").css("display", "inline-block");
        //}
        //else {
        //    $("#shield-icon").css("display", "none");
        //}

        var saleslimit = $("#saleslimit-" + val).text();
        var quantity = $("#ringerqty-" + val).text();
        if (quantity == "") {
            quantity = "1";
        }
        if (parseFloat(saleslimit) >= parseFloat(quantity)) {
            $("#ringerqty-" + val).css("background-color", "#fff3cd");
            $("#ringerqty-" + val).css("color", "black");
            $("#saleslimitexeeded-" + val).val("false");
        } else {
            $("#ringerqty-" + val).css("background-color", "red");
            $("#ringerqty-" + val).css("color", "white");
            $("#saleslimitexeeded-" + val).val("true");
        }

        var quantity = $("#ringerqty-" + val).text();

        var getStock = $("#stockno-" + val).text();
        //if (getStock == null || getStock == 0 || getStock == "" || getStock == "undefined") {
        //    // alert('you cannot sale product stock is not available');
        //    swal("Error!", "you cannot sale product stock is not available", "error");
        //    $("#delete-" + val).trigger("click");
        //}
        //if (parseInt(quantity) > parseInt(getStock)) {

        //    swal("Error!", "you cannot excede the existing stock", "error");
        //    $("#delete-" + val).trigger("click");
        //}
        var tootal = $("#price-" + val).text();
        //debugger;
        var ReplacedAmount = tootal.replace(/\$/g, '');
        var foundtotal = parseFloat(quantity) * parseFloat(ReplacedAmount);

        var ceilingvalue = foundtotal;

        ceilingvalue = ceilingvalue.toFixed(2);

        $("#total-" + val).text("$" + foundtotal);
        //var subtotalnew = $("#subtotalauto").val();
        //var finalsubtotalvalue = subtotalnew.split('$');
        //var subtotalsuplitednew = finalsubtotalvalue[1];
        //var additionoftotalquantitysub = parseFloat(subtotalsuplitednew) + parseFloat(foundtotal);

        //  $("#subtotalauto").val("$" + additionoftotalquantitysub);

         //hereis
        var allitem = 0;
        $("#saletable TBODY TR").each(function () {
            debugger;
            var currentRow = $(this);
             var check = currentRow.find("TD").eq(4).html();
             if (check != null && check != "") {
                var col_value = currentRow.find("TD").eq(17).html(); 
                if ($.isNumeric(col_value)) {
                    allitem += parseFloat(col_value);
                }
            }

        });
        $("#countnum").text(0);
        $("#countnum").text(allitem);

        CountTotalOfAllTD();
        DiscuntChangePrice(val);
    }



    function CalculateQrossTotal() {

        var freightid = $("#freightid").val();
        var taxidval = $("#taxid").val();
        var discountadd = $("#discountidadd").val();
        var otherval = $("#otherid").val();
        var subtotal = $("#subtotal").val();
        var previousbalance = $("#previousbalance").val();
        $("#amountdue").text("$" + foundtotal.toFixed(2));
    }

    function CalculatetaxPlusDiscount() {
        var subtotalInv = abc_general.dollarRemove($("#subtotalauto").val());
        var prevBalance = abc_general.parenthRemove($("#previousbalance").val(), "(");
        var discount = abc_general.dollarRemove($("#discountidadd").val());
        var otheridval = abc_general.dollarRemove($("#otherid").val());
        var taxidval = abc_general.dollarRemove($("#taxid").val());
        var freight = abc_general.dollarRemove($("#freightid").val());
        var dueAmount = abc_general.dollarRemove($("#amountdue").val());

        var discountAmount = 0;

        discount == "" ? (discount = 0) : discount;
        otheridval == "" ? (otheridval = 0) : otheridval;
        taxidval == "" ? (taxidval = 0) : taxidval;
        freight == "" ? (freight = 0) : freight;
        prevBalance == "" ? (prevBalance = 0) : prevBalance;

        var sumofallexpences = parseFloat(subtotalInv) + parseFloat(otheridval) + parseFloat(taxidval) + parseFloat(freight);

        if (discount > 100) {
            $("#discountidadd").val("");
            Swal.fire("Error", "Discount Not Be More Than 100%", 'error');
            return;
        }

        if (parseFloat(discount) > 0) {
            discountAmount = (parseFloat(discount) / 100) * parseFloat(sumofallexpences);
        }

        var subtotalInv = parseFloat(parseFloat(sumofallexpences) - discountAmount).toFixed(2);  //+ parseFloat(discount);

        if(isNaN(subtotalInv)) {

            $("#invoicetotal").val(abc_general.dollarAdd(0));
            if (parseFloat(prevBalance) > 0) {
                $("#amountdue").val(abc_general.dollarAdd(parseFloat(prevBalance).toFixed(2)));
            } else {
                $("#amountdue").val(abc_general.dollarAdd(0));
            }
        } 
        else {
            $("#invoicetotal").val(abc_general.dollarAdd(subtotalInv));
           // $('#InvoiceBalance').val(abc_general.dollarAdd(subtotalInv));
            var amountDue = parseFloat(subtotalInv) + parseFloat(prevBalance);
            var amountDueParse = parseFloat(amountDue).toFixed(2);
            amountDueParse = abc_general.parenthAdd(amountDueParse.toString());
            $("#amountdue").val(amountDueParse);
            $("#InvoiceBalance").val(amountDueParse);
        }

        //if (invoicetotal == "NaN") {

        //    $("#invoicetotal").val("$" + 0);
        //    $("#amountdue").val("$" + 0);
        //} else
        //{
        //    $("#invoicetotal").val("$" + invoicetotal);

        //    $("#amountdue").val("$" + invoicetotal);
        //}

    }
    function CalculateTaxFreight() {
        var val1 = $("#subtotal").val();
        var val2 = $("#discountidadd").val();
        var val3 = $("#taxid").val();
        var val4 = $("#freightid").val();
        //var val5 = parseInt(($("#otherid").val()).split("$")[1]);


        var invoicetotal1 = val3 + val4;
        //   alert(invoicetotal1);
        var invoicetotal2 = val1 + invoicetotal1;
        //   alert(invoicetotal2);
        $("#invoicetotal").val(parseFloat(invoicetotal2).toFixed(2));
        // alert(val);
    }
    function GetItemByItemNumber(event, val) {
        //   var blocker = $("#itemnumber" + ID).text();
        //debugger
        //if (event != null) {
        //    var keycode = (event.keyCode ? event.keyCode : event.which);
        //    if (keycode == '13') {

        //        /*alert('You pressed a "enter" key in textbox');*/
        //    }

        //    else {
        //        return false;   
        //    }
        //}   
        //else {
        //}
        debugger;
        var itemTotal = abc_general.dollarRemove($("#total-" + val).text());
        var subtotalInv = abc_general.dollarRemove($("#subtotalauto").val());

        // if (!abc_general.isNullOrEmpty(itemTotal) && !abc_general.isNullOrEmpty(subtotalInv) && subtotalInv != "NaN" ) {

        //         var subtractedtotal = parseFloat(subtotalInv) - parseFloat(itemTotal);
        //         $("#subtotalauto").val(abc_general.dollarAdd(subtractedtotal.toFixed(2)));
        //         $("#itemnumber-" + val).empty();
        //         $("#ringerqty-" + val).empty();
        //         $("#amount-" + val).empty();
        //         $("#discountin-" + val).empty();
        //         $("#discountout-" + val).empty();
        //         $("#InUnits-" + val).empty();
        //         $("#OutUnits-" + val).empty();
        //         $("#price-" + val).empty();
        //         $("#total-" + val).empty();
        //         $("#description-" + val).empty();
        // }

        var itemnumber = abc_general.signRemove($("#itemnumber-" + val).text(),"-");

        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockFinancialByItemNumber_1", "Sale")',
            data: { 'itemnumber': itemnumber },
            async: false,
            dataType: 'json',
            success: function (data) {
               // debugger;
                $("#rowid-" + val).find("#productId").val(data.id);
                var Id = data.id;
                var count = 0;
                var exist = 0;
                var notexist = true;
                $('#saletable tr').each(function (index, tr) {
                    if (count > 0) {

                        var Id = tr.attributes["id"].value.split("rowid-")[1];
                        var productId = parseInt($("#rowid-" + Id).find("#productId").val());

                        if (productId === data.id) {
                            exist++;
                        }

                        if (exist > 1) {
                            swal("Error!", "Item Already Added!", "error");
                            notexist = false;
                            RemoveRow(val);
                        }
                    }
                    count++;
                });

                if (notexist === true) {
                                // debugger;     
                        if (!abc_general.isNullOrEmpty(data.quantity)) {
                            $("#stockno-" + val).text(data.quantity);

                        } else {
                            $("#stockno-" + val).text(data.quantity);

                        }

                    if (!abc_general.isNullOrEmpty(data.itemName)) {
                        $("#description-" + val).text(data.itemName);
                        $("#description-" + val).attr('contenteditable', 'false');
                    }

                    if (!abc_general.isNullOrEmpty(data.salesLimit)) {
                        $("#saleslimit-" + val).text(data.salesLimit);
                        $("#saleslimit-" + val).attr('contenteditable', 'false');
                    }

                    if (!abc_general.isNullOrEmpty(data.needHighAuthorization)) {
                        $("#needhighotherization-" + val).text(data.needHighAuthorization);
                        $("#needhighotherization-" + val).attr('contenteditable', 'false');
                    }

                    if (!abc_general.isNullOrEmpty(data.itemNumber)) {
                        var string = data.itemNumber;
                        $("#itemnumber-" + val).text( string.substring(0, 2) + '-' + string.substring(2, string.length));
                        // $("#needhighotherization-" + val).attr('contenteditable', 'false');
                    }

                    if (!abc_general.isNullOrEmpty(data.highlimitOn)) {
                        $("#highlimiton-" + val).text(data.highlimitOn);
                        $("#highlimiton-" + val).attr('contenteditable', 'false');
                    }

                    if (!abc_general.isNullOrEmpty(data.cost)) {
                        $("#amount-" + val).text(abc_general.dollarAdd(data.cost));
                    }
                    
                    if (!abc_general.isNullOrEmpty(data.inUnits)) {
                        $("#InUnits-" + val).text(abc_general.dollarAdd(data.inUnits));
                    }

                    if (!abc_general.isNullOrEmpty(data.outUnits)) {
                        $("#OutUnits-" + val).text(abc_general.dollarAdd(data.outUnits));
                    }

                    if (!abc_general.isNullOrEmpty(data.cost)) {

                        var price = 0;
                        if (!abc_general.isNullOrEmpty(window.stTax)) {
                            $.each(window.stTax, function (index, value) {
                                var firstVal = (value.productId).toString();
                                var tax = parseInt(value.tax);
                                
                                if (data.id == firstVal) {
                                    data.cost = parseFloat(data.cost) + tax;
                                }
                            });
                        }

                        $("#price-" + val).text(abc_general.dollarAdd(data.cost));
                        $("#total-" + val).text(abc_general.dollarAdd(data.cost));
                        var existingvalueAmount = abc_general.dollarRemove($("#subtotalauto").val());

                        if (existingvalueAmount > 0) {
                            var newtotal = parseFloat(existingvalueAmount) + parseFloat(data.cost);
                            $("#subtotalauto").val(abc_general.dollarAdd(newtotal.toFixed(2)));
                        } else {
                            //var newtotal1 = ReplacedAmountgross1;
                            $("#subtotalauto").val(abc_general.dollarAdd(parseFloat(data.cost).toFixed(2)));
                        }

                        var quantityplus = $("#countnum").text();
                        quantityplus = quantityplus == "" ? 0 : quantityplus;
                        quantityplus = parseInt(quantityplus);
                        var quantityTotal = quantityplus + 1;
                        $("#countnum").text(quantityTotal);

                        $(".add-row").trigger("click")
                    }

                    if (data.id != null && data.id != "undefined") {
                        $("#itemid-" + val).text(data.id);

                    }
                    CalculatetaxPlusDiscount();
                }
            },
            error: function (xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });
    }
    function AppendAllMissions(event) {
        $.ajax({
            type: "GET",
            url: "@Url.Action("AutoCompleteSearchCustomerInfo1", "Sale")",
            async: false,
            dataType: 'json',
            cache: false,
            success: function (data) {
                var inner = '';
                var opts = jQuery.parseJSON(JSON.stringify(data));

                if (opts.length > 0) {
                    //$("#matchedCharityTemplate").show();
                }
                $("#listallmissions").empty();
                //$('#ddlAllMission').empty();
                $.each(opts, function (i, d) {
        
                    inner = '';
                    inner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetCompanyByID(' + d.id + ',true)";>';
                    if (i == 0) {
                        inner += '<div class="searchheader">Company Name</div></br>';
                    }
                    inner += '<span class="item_name di w-50" data-rel="' + d.id + '">' + d.company + '</span>';
                    inner += '<span class="item_name di w-50">' + d.customerCode + '</span>';
                    inner += '<span class="item_name di w-50">' + abc_general.parenthAdd(d.receivableBalance) + '</span>';
                    inner += '</div>';


                    // $("#listallmissions").modal('show');
                    $("#listallmissions").append(inner);


                });
            },
            error: function (xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });
    };
    function GetAllMatchedItems(event) {
        //debugger;
        //if (Increament != 0) {
        //    AppendAllMissions();
        //}
        var naming = $(".searchname").val();
            $(".item_name").parent().hide();
            $("#customerid").val("");     
            var text = naming;
            var items = $(".item_name");
            //first, hide all:
            items.parent().hide();
            $("#customerid").val("");
            //show only those matching user input:
            items.filter(function () {
                return $(this).text().toLowerCase().indexOf(text) >= 0;
            }).parent().show();
    };
    function GetCompanyByID(val, showReceivables) {
        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetCompanyByID", "Sale")',

            data: {
                id: id
            },
            dataType: 'json',
            success: function (data) {
                if (data != null || data !="") {
                    //if (showReceivables == true) {

                    //    ShowReceivables(data);
                    //}
                    //$("#CustomerCodeShort").html(data.customerCode);

                 
                   
                    //------ Open PopUp Tabs Start -------
                    $("#DivSP2").removeClass("di");
                    $("#DivSP2").css({ 'display': 'none' });

                    $("#DivSP").addClass("di");
                    $("#DivSP").css({ 'display': '' });
                     //------ Open PopUp Tabs End -------

                     //------ General Payment PopUp Binding Field Start -------
                    var p = $("#invoicenumber").val();
                    $("#InvoiceP").text("Print Invoice Dialog invoice#" + p);
                    $("#InvoiceNumber2P").text(p);
                    $("#CustomerNameP").text(data.company);
                    $('#CustomerCodeP').val((data.customerCode != null && data.customerCode != "undefined" ? data.customerCode : ''));
                    //------ General Payment PopUp Binding Field End -------

                    // ------- Customer's info PopUp Fields Bind Start ---------
                    $("#CompanyShort").html(data.company);
                     if (data.checkAddress == false) {  
                        $('#ChAdShort').prop('checked', false);
                    }
                    else {
                        $('#ChAdShort').prop('checked', true);
                    }
                   
                    $("#StreetShort").val(data.street);
                    $("#CityShort").val(data.city);
                    $("#StateShort").val(data.state);
                    if (data.zipCode != null && data.zipCode != "" && data.zipCode != "undefined") {
                        $("#ZipCodeShort").val(data.zipCode.code);
                    }
                    $("#CellShort").val(data.cell);
                    $("#PhoneNumber").val(data.phone);
                    $("#faxNumber").val(data.fax);
                    $("#ProviderShort").val(data.provider);
                    $("#TaxIdShort").val(data.taxIdfein);
                    $("#EmailShort").val(data.email);
                    if (data.taxExempt == false) {
                        $('#TxExeShort').prop('checked', false);
                    }
                    else {
                        $('#TxExeShort').prop('checked', true);
                    }
                    $("#CustomerShortModal").modal('show');
                    // ------- Customer's info PopUp Binding Fields  End ---------

                   // ------- Main Screen Binding Fields Start ----------
                    $("#searchname").val((data.company != null && data.company != "undefined" ? data.company : (data.firstName + data.lastName)));

                     if (data.viewInvoicePrevBalance) {
                          if (data.amount != null) {
                            if($("#posted-invoice").val() == "value" && $("#open-invoice").val() == "value"){
                                   var PreviousBalance = "";
                                   if(Math.sign(data.amount) == -1){
                                       PreviousBalance = Math.abs(data.amount);
                                       PreviousBalance = abc_general.dollarParenthAdd(PreviousBalance);
                                   }
                                   else{
                                       PreviousBalance = abc_general.dollarAdd(data.amount);
                                   }
                                   // ------- Customer Main Screen Previous Balance Binding Fields ------
                                    $("#previousbalance").val(PreviousBalance);
                                    $("#amountdue").val(PreviousBalance);
                                    // ------- Customer Main Screen Previous Balance Binding Fields ------

                                    // ------- Customer Multi Payment Tab Binding Fields ------
                                    $("#CustomerBalance").val(PreviousBalance);
                                    $("#CustomerBalanceDue").text(PreviousBalance);
                                    // ------- Customer Multi Payment Tab Binding Fields ------

                                    // ------- Validation Binding Field ------
                                    $("#remainingAmount").text(data.amount);
                                     // ------- Validation Binding Field ------

                                    //----- Previous Balance Popup Show Function Call ----
                                    ShowReceivables(data);
                                    //----- Previous Balance Popup Show Function Call ----
                                } 
                              } 
                              else {
                                        $("#previousbalance").val("");
                                        $("#amountdue").val("");
                                        $("#remainingAmount").text("");
                                        $("#CustomerBalance").val("");
                                        $("#CustomerBalanceDue").val("");
                                    }
                               
                        }
                   
                       if (data.isBillToBill != null) {
                            $("#isBilltoBill").text(data.isBillToBill);

                        } else {
                            $("#isBilltoBill").text("0");
                        }
                 
                        if (data.isCreditHold != null) {
                            $("#iscredithold").text(data.isCreditHold);

                        } else {
                            $("#iscredithold").text("0");
                        }

                        //-------------commented by nouman start---------------------
                        // if (data.additionalInvoiceCharge == "" || data.additionalInvoiceCharge == null) {
                        //     $("#otherid").val("0");
                        // }
                        // else {
                        //     $("#otherid").val(data.additionalInvoiceCharge);
                        // }
                         //-------------commented by nouman end---------------------
                        $("#isExclude").text(data.isExclude);
                        $("#isPopupMessage").text(data.isPopupMessage);
                        if (data.isPopupMessage) {
                            $("#popupMessage").text(data.popupMessage);
                            if (data.popupMessage == "" || data.popupMessage == null) {
                                $("#popupMessage").text("Default Message Not Set yet, but you can save invoice");

                            }
                        } 
                        else {
                            $("#popupMessage").text("Default Message Not Set yet, but you can save invoice");
                        }


                        //-------------commented by nouman start---------------------
                        // if (data.customerBillingInfo.isTaxExempt == false) {
                        //     $.ajax({
                        //         type: "GET",
                        //         async: false,
                        //         cache: false,
                        //         url: '@Url.Action("GetSttax", "Sale")',
                        //         dataType: 'json',
                        //         success: function (data) {
                        //             window.stTax = data;
                        //             $.each(data, function (index, value) {
                        //                 var firstVal = (value.productId).toString();
                        //                 var tax = parseInt(value.tax);
                        //                 $("#saletable tr").each(function (index, value) {

                        //                     if (index > 0) {
                        //                         var secondVal = $("#rowid-" + index).find("#productId").val();
                        //                         if (firstVal == secondVal) {
                        //                             var newValue = tax + parseFloat(($("#amount-" + index).text()).split("$")[1]);

                        //                             $("#price-" + index).text("$" + newValue);
                        //                             var qty = parseInt($("#ringerqty-" + index).text());
                        //                             var total = qty * newValue;
                        //                             $("#total-" + index).text("$" + total.toFixed(2));
                        //                         }
                        //                         CountTotalOfAllTD();
                        //                     }
                        //                 });
                        //             });

                        //         },
                        //         error: function (xhr, status, error) {
                        //             var errorMessage = xhr.status + ': ' + xhr.statusText
                        //         },
                        //     });
                        // }
                        // else {
                        //     $("#saletable tr").each(function (index, value) {
                        //         if (index > 0) {
                        //             var price = parseInt($("#ringerqty-" + index).text()) * parseFloat(($("#amount-" + index).text()).split("$")[1]);
                        //             $("#price-" + index).text($("#amount-" + index).text());
                        //             $("#total-" + index).text("$" + price.toFixed(2));
                        //             CountTotalOfAllTD();
                        //         }
                        //     });
                        //     window.stTax = null;
                        // }
                        //-------------commented by nouman end---------------------
  
                    if (data.customerCode != null && data.customerCode != "undefined") {

                        $("#customercodeinfo").val(data.customerCode);
                    } 

                    if (data.customerId != null && data.customerId != "undefined") {
                        $("#customerid").val(data.customerId);
                    }

                    if (data.company != null && data.company != "undefined") {
                        $("#customername").val(data.company);
                    }

                    if (data.accountId != null && data.accountId != "undefined") {
                        $("#Accountnumber").val(data.accountId);
                    }

                    //if (data.balance != null && data.balance != "undefined") {
                    //    $("#previousbalance").val(data.balance);

                    //} else {
                    //    $("#previousbalance").val("0");
                    //}

                    // ------------- Duplication Code -----------
                    // if (data.customerClassification != null && data.customerClassification != "undefined") {

                    //     if (data.customerClassification.salesman != null && data.customerClassification.salesman != "undefined") {

                    //         $("#salesmanid").text(data.customerClassification.salesman);
                    //     }
                    //     if (data.customerClassification.driverName != null && data.customerClassification.driverName != "undefined") {

                    //         $("#driverid").text(data.customerClassification.driverName);
                    //     }

                    // }
                    // ------------- Duplication Code -----------

                 //   if (data.customerBillingInfo != null && data.customerBillingInfo != "undefined") {
                        if (data.isGetSalesDiscounts == false) {

                            $("#discountidadd").attr("disabled", true);
                            $("#discountidadd").val("");
                            $('#getsalediscount').prop('checked', true);
                        } 
                        else {

                            $("#discountidadd").attr("disabled", false);
                            $('#getsalediscount').prop('checked', false);
                        }
                   // }
                    $('#salesmanid').empty();
                    $('#paymentTermsid').empty();
                    $('#shippedViaid').empty();
                    $('#driverid').empty();
                    $('#weightid').empty();
                   // if (data.customerClassification != null && data.customerClassification != "undefined") {
                        if (data.salesman != null && data.salesman != "undefined") {
                            $('#salesmanid').append(data.salesman);
                        }
                   // }
                    $('#paymentTermsid').append((data != null) ? data.paymentTerms : '');
                    $('#shippedViaid').append((data != null && data != "undefined" ? data.shippedVia : ''));
                    $('#driverid').append((data != null && data != "undefined" ? data.driverName : ''));
                   // CalculatetaxPlusDiscount();
                }
               

                $("#listallmissions").empty();
                // ---------- Display None Properties --------
                  $("#bussinessAddress").text(data.businessAddress);
             
                  $("#customerAddToMail").text(data.addtoMaillingList);
                  // ---------- Display None Properties --------

                  // --------------- Customer Email Binding Properties -----------
                  $("#customerEmail").text(data.email);
                  $("#customeremaillabel").text(data.email);
                  $("#customerEmailCusinfo").val(data.email);
                  $("#CustomerToEmailId").val(data.email);
                  //--------------- Customer Email Binding Properties -----------

                var amount = $("#remainingAmount").text();
                if ($("#isBilltoBill").text() == "0" && $("#isBilltoBill").text() == 0 && amount != "" && amount != "0") {
                    Swal.fire(
                        'Customer Bill to Bill Is Set',
                        "Customer have to pay previous Balance of " + amount + "$ ",
                        'error'
                    )
                } //else {
                   // SaveOnGoingSales();         //   Comment by Nouman

                //}

                // UnpaidInvoices Load Function
                LoadUnpaidInvoices();
            },
            error: function (xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }
    function CloseCustomerModal() {
        $("#CustomerShortModal").modal('hide');
    }
    function ReloadRefresh() {
        $("#searchname").val('');
        $("#customercodeinfo").val('');
        $("#previousbalance").val('');
        $("#subtotalauto").val('');
        $("#invoicetotal").val('');
        $("#amountdue").val('');
    }
    function ReloadPage() {
        ReloadRefresh();
        location.reload();
    }
    var isCtrl = false;
    $(document).keyup(function (e) {
        if (e.which == 17)
            isCtrl = false;
    }).keydown(function (e) {
        if (e.which == 17) isCtrl = true;
        if (e.which == 83 && isCtrl == true) {
            InsertSaleDetails(false, false);
            CountTotalOfAllTD();
            return false;
        }
    });
    $(document).keyup(function (e) {

        if (e.which == 17) isCtrl = false;
    }).keydown(function (e) {
        if (e.which == 17) isCtrl = true;
        if (e.which == 73 && isCtrl == true) {
            $(".add-row").trigger("click");
            event.stopPropagation();
            CountTotalOfAllTD();
            return false;
        }
    });
    $('body').keydown(function (event) {
        var letter = String.fromCharCode(event.which);

        if (event.keyCode == 46) {
            var id = $("#countnum").text();
            if (id > 0) {
                $("#rowid-" + id).remove();
                sernum--;
                $("#countnum").text(sernum - 1);
            }
            CountTotalOfAllTD();
        }
        //console.log(event);
        //console.log(event.keyCode);
    });
    //document.addEventListener('keydown', function (event) {
    //    const key = event.key; // const {key} = event; ES6+
    //    if (key === 46) {
    //        var id = $("#countnum").text();
    //        if (id>0) {
    //            $("#rowid-" + id).remove();
    //            sernum--;
    //            $("#countnum").text(sernum - 1);
    //        }


    //    }
    //    CountTotalOfAllTD();
    //});



    function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";

        // if(cityName == "UnPaidInvoices"){
        //     LoadUnpaidInvoices();
        // }

        if (cityName == "MoreInfo") {
            LoadInvoiceMoreInfo();
        }

    }

    function switchF9Tabs(event, TabName){
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent1");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks1");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace("active", "");
        }
        document.getElementById(TabName).style.display = "block";
        event.currentTarget.className += " active";

        // if (TabName == "UnPaidInvoicesTab") {
        //     LoadUnpaidInvoices();
        // }
    }


    function LoadUnpaidInvoices(){
        // for Clear Old Table Data
        var checktable =  $('#tblunpaidinv').dataTable();
        checktable.fnClearTable();
        checktable.fnDestroy();

        var checktable = $('#tblunpaidinvF9').dataTable();
        checktable.fnClearTable();
        checktable.fnDestroy();

        var customerId = $("#customerid").val();
        if(customerId !=""){
            $.ajax({
                url: '@Url.Action("LoadUnPaidInvoices", "Sale")',
                async: false,
                Type: 'GET',
                data: { CustomerId: customerId },
                dataType: "json",
                success: function (data) {
                      var inner = '';
                      $.each(data, function (val, text) {

                          // Invoice Date Formating
                          var d = new Date(text.date)
                          var day = d.getDate();
                          var month = d.getMonth() + 1;
                          var year = d.getFullYear();
                          var InvDate = day + '-' + month + '-' + year;
                          var radioName = 'payOrder' + val;
                        //Invoice Row
                        inner = '';
                        inner += '<tr>';
                        inner += '<td> ' + text.invoiceNumber + ' </td>';   
                        inner += '<td> ' + InvDate + ' </td>';
                        inner += '<td> ' + text.days + ' </td>';
                        inner += '<td> ' + text.invTotal + ' </td>';
                        inner += '<td> ' + text.totalPaid + ' </td>';
                        inner += '<td> ' + text.invBalance + ' </td>';
                        inner += '<td> <input type="radio" name="' + radioName + '" value="option1">   <input type="radio" name="' + radioName + '" value="option2"> </td>';
                        inner += '</tr>';
                       $('#tblunpaidinv > tbody:last-child').append(inner);

                       $('#tblunpaidinvF9 > tbody:last-child').append(inner);

                    }); 
                 
                    }   
                }); 
        }
    }

    function LoadInvoiceMoreInfo(){
        var PointOfSaleId = parseInt($("#PointOfSaleId").val());
        if(PointOfSaleId !=""){
            $.ajax({
                url: '@Url.Action("SaleOrderInvoiceMoreInfo", "Sale")',
                async: false,
                Type: 'GET',
                data: { PointOfSaleId: PointOfSaleId },
                dataType: "json",
                success: function (data) {
                    var d = new Date(data.invoiceDate)
                    var InvDate = d.getDate() + '-' + (d.getMonth() + 1) + '-' + d.getFullYear();

                    $("#moreInfoInvoiceNumber").val($("#invoicenumber").val());
                    $("#moreInfoPreBalance").val($("#previousbalance").val());
                    $("#moreInfoInvAmount").val($("#invoicetotal").val());
                    $("#moreInfoAmountDue").val($('#amountdue').val());
                    $("#moreInfoFinalBalance").val($('#amountdue').val());
                    $("#moreInfoPayment").val(data.invoiceBalance);
                    $("#moreInfoInvDate").val(InvDate);

                    }   
                }); 
        }
    }

        
    function ShowReceivables(data) {
        if (data != null && data != "undefined") {
            $(".forremovingmodel").empty();
            var PopupPreBalance = "";
            if(Math.sign(data.amount) == -1){
                PopupPreBalance = Math.abs(data.amount);
                PopupPreBalance = abc_general.dollarParenthAdd(PopupPreBalance);
            }
            else{
                PopupPreBalance = abc_general.dollarAdd(data.amount);
             }
            var html = "";

            html += '<div class="modal-content forremovingmodel">';
            html += '<div class="modal-header" style="padding:1rem!important;">';
            html += '<h5 class="modal-title" id="ModalLabel">Balance Overdue</h5>';
            html += '<button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodalabcd()">';
            html += '<span aria-hidden="true">×</span>';
            html += '</button>';
            html += '</div>';
            html += '<div class="modal-body" style="color: #0000ab; background-color: #ff99cc;padding-top:10px;">';
            html += '<div class="row">';
            html += '<div class="col-lg-12 col-md-12 col-sm-12 col">';
            html += '<label style="font-weight:700">Customer: <label id="customerNo">' + data.customerCode + '</label></label>';
            html += '</div>';
            html += '</div>';
            html += '<div class="row mt-1">';
            html += '<div class="col-lg-6 col-md-12 col-sm-12 col font-size">';
            html += '<label id="Storename">' + data.company + '</label>';
            html += '</div>';
            html += '</div>';
            html += '<div class="row mt-1">';
            html += '<div class="col-lg-6 col-md-12 col-sm-12 col font-size">';
            html += '<label>' + data.businessAddress !== null || data.businessAddress !== undefined || data.businessAddress !=="undefined" ? data.businessAddress : "" + '</label>';
            html += '</div>';
            html += '</div>';
            html += '<div class="row mt-1">';
            html += '<div class="col-lg-12 col-md-12 col-sm-12 col font-size">';
            html += '<label>Tel: <label id="telno">' + data.cell !==null || data.cell !==undefined ? data.cell : "" + '</label></label>';
            html += '</div>';
            html += '</div>';
            html += '<div class="row mt-2">';
            html += '<div class="col-lg-12 col-md-12 col-sm-12 col">';
            html += '<h2 class="text-center">Balance Overdue</h2>';
            html += '</div>';
            html += '</div>';
            html += '<div class="row mt-2">';
            html += '<div class="col-lg-12 col-md-12 col-sm-12 col text-center">';
            html += '<input type="text" class="text-center st-1" id="BlcDuePk" name="name" value="' + PopupPreBalance + '"  />';
            html += '</div>';
            html += '</div>';
            html += '<div class="row mt-2">';
            html += '<div class="col-lg-12 col-md-12 col-sm-12 col text-center">';
            html += '<label>DueDate: <label id="date"></label></label>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
            html += '</div>';

            $('#receivablesid').append(html);
            $('#receivablesid').modal('show');
            var d = $("#BlcDuePk").val();
            $("#BalanceDueP").text(d);

        }
        else {
            $(".forremovingmodel").empty();
            var html = "";
        }

        //html += '<div class="modal-content forremovingmodel">';
        //html += '<div class="modal-header" style="padding:1rem!important;">';
        //html += '<h5 class="modal-title" id="ModalLabel">Balance Overdue</h5>';
        //html += '<button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodalabcd()">';
        //html += '<span aria-hidden="true">×</span>';
        //html += '</button>';
        //html += '</div>';
        //html += '<div class="modal-body" style="color: #0000ab; background-color: #ff99cc;padding-top:10px;">';
        //html += '<div class="row">';
        //html += '<div class="col-lg-12 col-md-12 col-sm-12 col">';
        //html += '<label style="font-weight:700">Customer: <label id="customerNo">1011</label></label>';
        //html += '</div>';
        //html += '</div>';
        //html += '<div class="row mt-1">';
        //html += '<div class="col-lg-6 col-md-12 col-sm-12 col font-size">';
        //html += '<label id="Storename">lorem ipsum</label>';
        //html += '</div>';
        //html += '</div>';
        //html += '<div class="row mt-1">';
        //html += '<div class="col-lg-6 col-md-12 col-sm-12 col font-size">';
        //html += '< label > loremhvssa sakskdasd sad as d</label >';
        //html += '</div>';
        //html += '</div>';
        //html += '<div class="row mt-1">';
        //html += '<div class="col-lg-12 col-md-12 col-sm-12 col font-size">';
        //html += '<label>Tel: <label id="telno">+92832742398</label></label>';
        //html += '</div>';
        //html += '</div>';
        //html += '<div class="row mt-2">';
        //html += '<div class="col-lg-12 col-md-12 col-sm-12 col">';
        //html += '<h2 class="text-center">Balance Overdue</h2>';
        //html += '</div>';
        //html += '</div>';
        //html += '<div class="row mt-2">';
        //html += '<div class="col-lg-12 col-md-12 col-sm-12 col text-center">';
        //html += '<input type="text" class="text-center st-1" name="name" value="$64357"  />';
        //html += '</div>';
        //html += '</div>';
        //html += '<div class="row mt-2">';
        //html += '<div class="col-lg-12 col-md-12 col-sm-12 col text-center">';
        //html += '<label>DueDate: <label id="date"></label></label>';
        //html += '</div>';
        //html += '</div>';
        //html += '</div>';
        //html += '</div>';

        //$('#receivablesid').append(html);
        //$('#receivablesid').modal('show');

        //    console.log(html);
    }

    function closemodalfreight() {
        $("#freightmodal").modal('hide');
    }

    function taxfunc() {
        $("#freightmodal").modal('show');
    }


    function GetItemList(val) {
        var data_array = [];
        var search = $("#DescriptionInput-" + val).val();
        $("#productList-" + val).empty();
        var dropdown = '';

         $.each(AllItemsList, function (index, value) {
             if (search != "") {
                 if (value.text.toLowerCase().indexOf(search.toLowerCase()) >= 0) {
                     dropdown += '<option data-value="' + value.value + '" value="' + value.text + '"></option>';
                            
                     let my_object = {};
                      my_object.title = value.text;
                      my_object.value = value.value;
                      data_array.push(my_object);
                   }
                }
           });

        $("#productList-" + val).append(dropdown);

            $.each(data_array, function (index, value) {
            if (data_array[index].title == search) {
                var string = data_array[index].value;
                string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                $("#itemnumber-" + val).text(string);
                GetItemByItemNumber(null, val);
             }
          });

    }



    function GetItemListModal() {

        var data_array = [];
        var search = $("#DescriptionInput").val();
        $("#productList").empty();
        var dropdown = '';
        $.ajax({
            type: "GET",
            async: false,
            cache: false,
            url: '@Url.Action("GetAllItem", "Sale")',
            dataType: 'json',
            success: function (data) {

                $.each(data, function (index, value) {
                    if (search != "") {
                        if (value.text.toLowerCase().indexOf(search.toLowerCase()) >= 0) {
                            dropdown += '<option data-value="' + value.value + '" value="' + value.text + '"></option>';
                            let my_object = {};
                            my_object.title = value.text;
                            my_object.value = value.value;

                            data_array.push(my_object);
                        }
                    }
                });

            },
            error: function (xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });

        $("#productList").append(dropdown);
        $.each(data_array, function (index, value) {
            if (data_array[index].title == search) {
                var string = data_array[index].value;
                string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                $("#itemnumberModal").val(data_array[index].value);
                GetItemByItemNumberModal();
            }
        });
        //data_array.empty();

    }



    function GetItemListModal1() {
       // debugger;
        var data_array = [];
        var search = $("#DescriptionInput1").val();
        $("#productList1").empty();
        var dropdown = '';

                $.each(AllItemsList, function (index, value) {
                    if (search != "") {
                        if (value.text.toLowerCase().indexOf(search.toLowerCase()) >= 0) {
                            dropdown += '<option data-value="' + value.value + '" value="' + value.text + '"></option>';
                            let my_object = {};
                            my_object.title = value.text;
                            my_object.value = value.value;

                            data_array.push(my_object);
                        }
                    }
                });

        $("#productList1").append(dropdown);
        $.each(data_array, function (index, value) {
            if (data_array[index].title == search) {
                var string = data_array[index].value;
                string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                $("#itemnumberModal1").val(data_array[index].value);
                GetItemByItemNumberModal1();
            }
        });
        //data_array.empty();

    }


    $('#itemnumberModal1').keypress(function (event) {
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
            GetItemByItemNumberModal1();
        }
    });


    function GetItemByItemNumberModal1() {
        var itemno = $('#itemnumberModal1').val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("ItemWithUcpAndItemNo", "Purchase")',
            data: { itemno: itemno },
            dataType: 'json',
            success: function (data) {
                if (data != null && data != "" && data != "false") {
                    $("#productList1").empty();

                    $("#DescriptionInput1").val(data.name);
                    $('#itemDescription').val(data.name);
                    $('#itemNumber').val(data.itemNumber);
                    $('#itemRetail').val('$' + data.retail);
                    $('#itemPrice1').val('$' + data.retail);
                    if (data.quantityCase != null) {
                        $('#caseQTY').val('$' + data.quantityCase);
                    } else {
                        $('#caseQTY').val('$');
                    }
                    $('#unitRetail1').val('$' + data.unitCharge);
                    $("#qtyOnHand").val(data.itemQuantity);


                }
                else {

                    swal("Error!", "There is no record with this UCP/itemNo.", "error");
                    $('#itemnumberModal').val("");
                    $("#DescriptionInput").val("");
                    $("#productList").empty();
                }
            },
            error: function () {

            },
        });

    }

    function DiscountPer(val) {
        var quantity = $("#discountin-" + val).text();
        if (quantity == '$0.00') {
            $("#discountin-" + val).text('');
        }
        else if (quantity == '') {
            //$("#discountin-" + val).text('$0.00');
        }
    }

    function DiscuntChangePriceRate(val) {

        var quantity = $("#ringerqty-" + val).text();
        var tootal = $("#price-" + val).text();
        var check = $("#discountin-" + val).text();
        var discount = parseFloat(($("#discountin-" + val).text()));

        if (check == '' || check == "" || check == "$0.00" || check == "undefined" || check == "NaN" || check == NaN || check == undefined) {
            //  $("#discountin-" + val).text('$0.00');
            discount = parseFloat("0.00");
        }

        console.log(discount);
        //if(discount == '' || discount == "" || discount == "$0.00" || discount == "undefined" || discount == "NaN" || discount == NaN|| discount == undefined){
        //    $("#discountin-" + val).text('$0.00');
        //    discount = "0.00";
        //}
        var ReplacedAmount = tootal.replace(/\$/g, '');
        //var priceDiscount = (ReplacedAmount) - discount;
        //var foundtotalDiscount = parseFloat(quantity) * parseFloat(priceDiscount);
        var amount = parseFloat(quantity) * parseFloat(ReplacedAmount);
        amount = amount - discount;
        $("#total-" + val).empty();
        if (amount < 0) {
            $("#total-" + val).text("$0.00");

        } else {
            $("#total-" + val).text("$" + amount.toFixed(2));
        }
        CountTotalOfAllTD();
    }
    function DiscountPerPerc(val) {
        var quantity = $("#discountout-" + val).text();
        if (quantity == '0.00%') {
            $("#discountout-" + val).text('0.00');
        }
        else if (quantity == '') {
             $("#discountout-" + val).text('0.00');
        }else if(quantity != '')
        {
             $("#discountout-" + val).text(abc_general.signRemove(quantity ,'%'));
        }
    }


    $('#itemnumberModal').keypress(function (event) {
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
            GetItemByItemNumberModal();
        }
    });


    function GetItemByItemNumberModal() {

        var itemno = $('#itemnumberModal').val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("ItemWithUcpAndItemNo", "Purchase")',

            data: { itemno: itemno },
            dataType: 'json',
            success: function (data) {

                console.log(data);
                if (data != null && data != "" && data != "false") {
                    $("#productList").empty();
                    $("#itemDescriptionM").val(data.name);
                    $("#DescriptionInput").val(data.name);
                    $("#itemNumM").html(itemno);
                    $("#itemRetailM").val(data.unitRetail);
                    $("#manufactureM").val(data.brandName);
                    $("#catagoryM").val(data.categoryName);
                    $("#subCatagoryM").val(data.subCatName);
                    $("#familyM").val(data.family);
                    $("#unitChargeM").val(data.cost);
                    $("#unitPriceM").val(data.saleRetail);
                    $("#qtyOnHandM").val(data.itemQuantity);

                }
                else {

                    swal("Error!", "There is no record with this UCP/itemNo.", "error");
                    $('#itemnumberModal').val("");
                    $("#DescriptionInput").val("");
                    $("#productList").empty();
                }
            },
            error: function () {

            },
        });

    }


    $('#customQuantityM').keydown(function (e) {

        if (e.which == 13) {
            var customQty = $('#customQuantityM').val();
            var numberonly = new RegExp('^[0-9]*$');
            if (!numberonly.test(customQty)) {
                swal("Error!", "Kindly enter valid quantity");
                $('#customQuantityM').val('');
                isvalid = false;
                return false;
            }

            if (customQty != null && customQty != '') {
                var InStock = $("#qtyOnHandM").val();
                if (parseFloat(InStock) > 0) {
                    GetItemDataAppendForDesModal();

                } else {
                    swal("Error!", "Stock Not Available", "error");

                }
            } else {
                swal("Error!", "Please Enter Quantity!", "error");
            }
            return false;
        }
    });





    function DiscuntChangePrice(val) {
        debugger;
        var quantity = $("#ringerqty-" + val).text();
        var tootal = $("#price-" + val).text();
        tootal = tootal == "" ? "0" : tootal;
        var discount = parseFloat(abc_general.signRemove($("#discountout-" + val).text(), '%') );
        var check = $("#discountout-" + val).text();
        if (check == '' || check == "" || check == "$0.00" || check == "undefined" || check == "NaN" || check == NaN || check == undefined) {
            //  $("#discountin-" + val).text('$0.00');
            discount = parseFloat("0.00");
        }

        discount = discount/100;
        var ReplacedAmount = tootal.replace(/\$/g, '');
        var priceDiscount = (ReplacedAmount / 100) * discount;
        var foundtotalDiscount = parseFloat(quantity) * parseFloat(priceDiscount.toFixed(2));
        var amount = parseFloat(quantity) * parseFloat(ReplacedAmount);
        amount = amount - foundtotalDiscount;
        $("#total-" + val).empty();
        $("#total-" + val).text("$" + amount.toFixed(2));
        $("#discountout-"+val+"").text(discount.toFixed(2) + '%');
        CountTotalOfAllTD();
    }


    var printorNotStatus = false;
    var updatestatus = false;
    function creditCheck(printorNot, update, Ispaid, IsInvoicePaid) {
        //var customer = $("#searchname").val();
        //if(customer == "" || customer == null || customer == "undefined"){
        //    swal("Error!", "Please Select Customer", "error");
        //}

        var customerId = $("#customerid").val();

        if (customerId == "") {
            Swal.fire(
                "Message",
                "Kindly Select Customer",
                'error'
            );
            return false;
        }

        var tablecount = $("#saletable TBODY TR").length;
        if (parseInt(tablecount) == 0) {
            swal("Error!", "Please Complete Current Invoice", "error");
        } else {

            var Total = $("#invoicetotal").val();
            if (Total == "$0.00") {
                swal("Error!", "Please Complete Current Invoice", "error");
                return false;
            }
            printorNotStatus = printorNot;
            updatestatus = update;
            window.isSuperVisorCreditSuccess = false;
            GetCompanyByID($("#customerid").val());
            var CheckCreditAllow = $("#iscredithold").text();
            console.log(CheckCreditAllow);
            if (CheckCreditAllow != "" && CheckCreditAllow != null && CheckCreditAllow != "0" && CheckCreditAllow != 0 && CheckCreditAllow == false && Ispaid != null && Ispadi != true) {
                Swal.fire(
                    'Customer Credit is On Hold',
                    "Please Proceed with invoice payment",
                    'error'
                )

            } else {

                var i = 1;
                var issue = false;
                var productname = "";
                var exceedlimit = false;
                $(".saleslimitexeeded").each(function () {
                    var description = $("#description-" + i).text();
                    //console.log("hello" + description);

                    if (description == "") {
                        $("#delete-" + i).trigger("click");
                    }
                    i++;
                });
                i = 1;
                $(".saleslimitexeeded").each(function () {
                    //alert(1);
                    if (update == false) {
                        var quantity = $("#ringerqty-" + i).text();
                        if (quantity == "") {
                            quantity = "0";
                        }

                        var getStock = $("#stockno-" + i).text();
                        if (getStock == null || getStock == 0 || getStock == "" || getStock == "undefined") {
                            Swal.fire(
                                "Stock is not available",
                                "you cannot sale " + $("#description-" + i).text() + " because stock is not available.. Kindly Set it",
                                'error'
                            );
                            $("#delete-" + i).trigger("click");
                            issue = true;
                            return false;
                        }
                        if (parseInt(quantity) > parseInt(getStock)) {
                            /*alert('you cannot excede the existing stock');*/
                            Swal.fire(
                                'Invalid Quantity of ' + $("#description-" + i).text(),
                                "you cannot sale " + $("#description-" + i).text() + " because quantity is exceeded than stock.. Kindly Set it",
                                'error'
                            );
                            $("#delete-" + i).trigger("click");
                            issue = true;
                            return false;
                        }
                        if ($("#ringerqty-" + i).text() == "" || !/^[0-9]+$/.test($("#ringerqty-" + i).text()) || $("#ringerqty-" + i).text() == "0") {
                            Swal.fire(
                                'Invalid Quantity of ' + $("#description-" + i).text(),
                                "Invalid Quantity of " + $("#description-" + i).text() + " Kindly Set it",
                                'error'
                            );
                            issue = true;
                            return false;
                        }

                        if (parseInt($("#ringerqty-" + i).text()) > parseInt($("#saleslimit-" + i).text())) {
                            $("#saleslimitexeeded-" + i).val("true");
                        }
                        else {
                            $("#saleslimitexeeded-" + i).val("false");
                        }
    @*if ('@requestapprove' == 'False') {

                            if ($("#saleslimitexeeded-" + i).val() == "true") {
                            Swal.fire(
                            'Ringer Quantity Exceeded of ' + $("#description-" + i).text(),
                            /*"Ringer Quantity of " + $("#description-" + i).text() + " is Greater then Shipment Limit.. Kindly Set it",*/
                            "Kindy Send Request For Approval",
                            'error'
                            );
                            issue = true;
                            return false;
                            }

                            //if (parseInt($("#Quantity-" + i).text()) < parseInt($("#ringer-" + i).text())) {
                            //    Swal.fire(
                            //        'Ringer Quantity Exceeded of ' + $("#description-" + i).text(),
                            //       /* "Ringer Quantity is greater than  quantity of " + $("#description-" + i).text() + "",*/
                            //        "Kindy Send Request For Approval",
                            //        'error'
                            //    );
                            //    issue = true;
                            //    return false;
                            //    }
                            }*@



                                        if (parseInt($("#ringerqty-" + i).text()) > parseInt($("#saleslimit-" + i).text())) {
                            //issue = true;
                            $.confirm({
                                title: 'Message',
                                content: "You ringged up for " + $("#description-" + i).text() + " with greater quantity than Sales limit",
                                buttons: {
                                    confirm: function () {
                                        //window.isSuperVisorCreditSuccess = true;
                                        //InsertSaleDetails(printorNotStatus, updatestatus);
                                        $("#supervisorModal").modal("show");
                                    },
                                    //cancel: function () {
                                    //},

                                }
                            });

                            issue = true;


                            //Swal.fire(
                            //    "Message",
                            //    "You ringged up for " + $("#description-" + i).text() + " with greater quantity than Sales limit",
                            //    'error'
                            //);
                            //issue = true;
                            //return false;

                        }


                        var needhighotherizationstatus = $("#needhighotherization-" + i).text();
                        var booldata = needhighotherizationstatus;
                        var highlimiton = parseInt($("#highlimiton-" + i).text());
                        var ringerquantity = parseInt($("#ringerqty-" + i).text());
                        if (booldata == "true") {
                            var itemid = parseInt($("#itemid-" + i).text());
                            $("#approvedetails").attr("data-itemId", itemid);
                            $("#approvedetails").attr("data-ticketID", '@ViewBag.InvoiceNumber');

                            if (ringerquantity >= highlimiton) {
                                //$("#input-delivery").modal('show');
                                exceedlimit = true;
                                productname += $("#description-" + i).text() + ", ";

                            }
                            else {
                                return true;
                            }
                        }

                    }
                });
                i++;
                //alert(2);

                if (issue == true) {
                    return false;
                }
                //alert(3);
                if (i == 1) {
                    Swal.fire(
                        "Message",
                        "Kindly Select Any Item",
                        'error'
                    );
                    issue = true;
                    return false;
                }
                var customerId = $("#customerid").val();

                if (customerId == "") {
                    Swal.fire(
                        "Message",
                        "Kindly Select Customer",
                        'error'
                    );
                    issue = true;
                    return false;
                }

                if (issue == true) {
                    return false;
                }


                if (update == false) {
                    if (exceedlimit == true) {
                        $("#productnamE").html(productname);
                        $("#input-delivery").modal('show');
                    }
                }
                if (issue == true) {
                    return false;
                }


                if ($("#previousbalance").val() == "" || $("#previousbalance").val() == null || Ispaid == true) {

                    if (Ispaid != true) {
                        window.isSuperVisorCreditSuccess = true;
                        InsertSaleDetails(printorNotStatus, updatestatus, false, IsInvoicePaid);
                    } else {
                        window.isSuperVisorCreditSuccess = true;
                        InsertSaleDetails(printorNotStatus, updatestatus, true, IsInvoicePaid);
                    }
                }
                else {
                    var amount = $("#remainingamount").text();
                    if ($("#isBilltoBill").text() == "0" && $("#isBilltoBill").text() == 0 && amount != "" && amount != "0") {
                        Swal.fire(
                            'Customer Bill to Bill Is Set',
                            "Customer have to pay previous Balance of " + pendingAmount + "$ ",
                            'error'
                        )
                    } else {
                        $("#supervisorModal").modal("show");

                    }
                }

            }
        }

    }
    function authorizeSupervisor() {


        var pin = $("#superPin").val();
        var comment = $("#superComment").text();
        var customerId = $("#customerid").val();
        var Supervisor = {
            accessPin: pin,
            customerId: customerId,
        };
        var invoicenumber = $("#invoicenumber").val();
        //Supervisor.customerId = customerId.toString();
        var customer = JSON.stringify(customerId);
        var supper = JSON.stringify(Supervisor);
        var invoiceTotal = ($("#invoicetotal").val()).split("$")[1];
        //     invoiceTotal = JSON.stringify(invoiceTotal);
        var things = { "customerId": customerId, 'supervisor': Supervisor };
        //debugger;
        var url1 = '';
        var data1 = '';
        if (updatestatus == false) {
            url1 = '@Url.Action("PosCheckSupervisorCreditAmount", "Sale")';
            data1 = { 'customerId': customerId, 'accessPin': pin, 'creditAmount': invoiceTotal };
        }
        else {
            url1 = '@Url.Action("PosCheckSupervisorCreditAmountUpdate", "Sale")';
            data1 = { 'customerId': customerId, 'accessPin': pin, 'creditAmount': invoiceTotal, 'possaleinvoive': invoicenumber };
        }

        $.ajax({
            type: "POST",
            data: data1,
            dataType: 'json',
            url: url1,
            success: function (response) {
                //debugger;
                console.log("MESG" + response.message);
                if (response.message == "Success.") {
                    $("#supervisorId").text(response.data.supervisorId);
                    $("#supervisorComment").text($("#superComment").val());
                    window.isSuperVisorCreditSuccess = true;
                    $("#supervisorModal").modal("hide");
                    InsertSaleDetails(printorNotStatus, updatestatus);
                    Swal.fire(
                        'Autorized',
                        'Success',
                        'success'
                    );
                }
                if (response.message == "Cannot Exceed Credit Limit.") {
                    Swal.fire(
                        'Error',
                        'Your Credit limit exceeded!',
                        'error'
                    )
                }
                if (response.message == "This Supervisor Already Availed Credits.") {
                    Swal.fire(
                        'Call your manager',
                        'Your Credit limit for this customer is already availed!',
                        'error'
                    )
                }
                if (response.message == "This Manager Already Availed Credits.") {
                    Swal.fire(
                        'Clear Previous Balance',
                        'Your Credit limit for this customer is already availed, Please Clear Previous Balance!',
                        'error'
                    )
                }
                if (response.message == "You Do Not Have Much Limit.") {
                    Swal.fire(
                        'Error',
                        'Your Credit remaining limit is less for this customer!',
                        'error'
                    )
                }
                if (response.message == "Invalid Email or Password.") {
                    Swal.fire(
                        'Error',
                        'You entered Invalid pin!',
                        'error'
                    )
                }
            },
            error: function (err) {

            }

        });
    }
    function closemodalAuth() {
        $("#supervisorModal").modal("hide");
    }





    function ApproveItemQty() {
        //debugger;

        var valid = true;
        var itemId = parseInt($("#approvedetails").attr("data-itemId"));
        var ticketId = $("#approvedetails").attr("data-ticketID");
        var licenseNo = $("#drivingLicense").val();
        var customerid = $("#customerid").val();
        if (customerid == "" || customerid == null) {
            Swal.fire(
                "Error",
                "Kindly Select Any Customer",
                'error'
            );
            valid = false;
            return false;
        }
        var plateNo = $("#plateNo").val();
        if (plateNo == "") {
            Swal.fire(
                "Error",
                "enter plate number",
                'error'
            );

            valid = false;
            return false;
        }

        if (licenseNo == "") {
            Swal.fire(
                "Error",
                "enter licence number",
                'error'
            );
            valid = false;
            return false;
        }


        if (valid == true) {
    @*$.ajax({
                type: "POST",
                url: '@Url.Action("ApproveItemCustomQty", "sale")',
                data: {
                productId: itemId,
                plateNum: plateNo,
                licenseNo: licenseNo,
                ticketid: ticketId,

                },
                async: false,
                dataType: "json",
                success: function (result) {
                if (result == "true") {
                $("#drivingLicense").val("");
                $("#plateNo").val("");
                $("#input-delivery").modal('hide');
                return true;
                }
                else {
                $("#drivingLicense").val("");
                $("#plateNo").val("");
                $("#input-delivery").modal('hide');

                Swal.fire(
                "Error",
                "not otherized order limit added added",
                'error'
                );
                }
                }
                });*@


                $("#input-delivery").modal('hide');
        }

    }


    function closemodal() {
        $("#input-delivery").modal('hide');
    }


    function CloseInventoryLookupModal() {
        $("#InventoryLookupModal").modal('hide');
        $("#additemshort").modal('hide');
        $('#itemDescription').val('');
        $('#itemNumber').val('');
        $('#itemStockID').val('');
        $('#itemRetail').val('');
        $('#itemPrice1').val('');
        $('#qtyOnHand').val('');
        $('#caseQTY').val('');
        $('#customQuantity').val('');
        $('#unitRetail1').val('');
        $(".searchnamee").val('');
        $(".searchnameee").val('');
        $("#customerCode").val('');
        $('#itemnumberModal1').val('');
        $('#Pcd').val('');
        $('#itemquantitylabel').val('1');
        $('#searchPro').val('');
    }

    var showicon = function (method, selectedinvoicenumber) {
        $(".fa-eye").removeClass("d-none");
        $('.fa-eye').attr('onClick', 'nextinvoice("' + method + '","' + selectedinvoicenumber + '")');
    }


    // Function Load Data Created by Nouman


    var nextinvoice1 = function (method, selectedinvoicenumber, invoiceType) {
        if (selectedinvoicenumber != 'value') {

            var data = $("#txtInvoiceNumber").text();
            if (method == 'null') { data = selectedinvoicenumber }

            if (data != '') {

                $.ajax({
                    url: '@Url.Action("GetSaleInvoiceByInvoiceNumber1", "Sale")',
                    async: false,
                    Type: 'GET',
                    data: { InvoiceNumber: data, Method: method, invoiceType: invoiceType },
                    dataType: "json",
                    success: function (data) {

                        var sernum = 1;
                        // $("#salesmanid").text(data.saleManName);
                        $("#invoicetotal").val(data.invoiceTotal);
                        $("#discountidadd").val(data.discount);
                        $("#subtotalauto").val(abc_general.dollarAdd(data.subTotal));
                        $("#otherid").val(data.other);
                        $("#taxid").val(data.tax);
                        $("#freightid").val(data.freight);
                        $("#PointOfSaleId").val(data.pointOfSaleId);
                        if (data.GetSaleDiscount == true) {

                            $("#discountidadd").attr("disabled", true);
                            $("#discountidadd").val("");
                            $('#getsalediscount').prop('checked', true);
                        } else {

                            $("#discountidadd").attr("disabled", false);
                            $('#getsalediscount').prop('checked', false);
                        }
                        $("#countnum").text(data.count);
                        $("#invoicenumber").val(data.invoiceNumber);
                        //  $("#supervisorId").text(data.supervisorID);
                        if (data.pointOfSaleDetails.length > 0) {
                            if (data.isOpen == true) {

                                $(".Paid").addClass("d-none");
                                var customername = $("#customername").val();
                                var customercode = $("#customercodeinfo").val();
                                var CustomerID = $("#customerid").val();
                                $("#appendnewrowforsale").html("");
                                $("#open-invoices").val("true");


                                $.each(data.pointOfSaleDetails, function (index, value) {
                                    var inunit = (value.inUnit != null) ? value.inUnit : '';
                                    var outunit = (value.outUnit != null) ? value.outUnit : '';
                                    var itemnumber = value.itemNumber;

                                    var string = value.itemNumber;
                                    string = string.substring(0, 2) + '-' + string.substring(2, string.length);

                                    var html = '';
                                    html += '<tr  id="rowid-' + sernum + '" class="">';
                                    html += '<td id="countser-' + sernum + '" style="width: 10px" class="counter" contenteditable="true">' + sernum + '</td>';
                                    html += '<td id="itemnumber-' + sernum + '" style="width: 10px" contenteditable="true" onkeyup="GetItemByItemNumber(event,' + sernum + ')">' + string + '</td>';
                                    html += '<td  id="description-' + sernum + '" style="width: 10px" contenteditable="false"  val"' + sernum + '">' + value.description + '</td>';
                                    html += '<td id="Quantity-' + sernum + '"  contenteditable="true" class="table-primary d-none" val"' + 1 + '" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.quantity + '</td>';
                                    html += '<td id="amount-' + sernum + '" contenteditable="false">' + abc_general.dollarAdd(value.amountRetail) + '</td>';
                                    html += '<td id="discountin-' + sernum + '"  contenteditable="true" onkeyup="DiscuntChangePriceRate(' + sernum + ')">$' + value.inDiscount + '</td>';
                                    html += '<td id="discountout-' + sernum + '" contenteditable="true" onkeyup="DiscuntChangePrice(' + sernum + ')">' + value.outDiscount + '</td>';
                                    html += '<td id="InUnits-' + sernum + '"  contenteditable="true" class="table-success">' + inunit + '</td>';
                                    html += '<td id="OutUnits-' + sernum + '"  contenteditable="true" class="table-success">' + outunit + '</td>';
                                    html += '<td id="price-' + sernum + '" contenteditable="false" class="table-warning">' + abc_general.dollarAdd(value.price) + '</td>';
                                    html += '<td id="total-' + sernum + '" contenteditable="false" class="table-warning">' + abc_general.dollarAdd(value.total) + '</td>';
                                    html += '<td id="customername-' + sernum + '" style="display:none;">' + customername + '</td>';
                                    html += '<td style="display:none" id="customercode-' + sernum + '" contenteditable="true" class="table-warning">' + customercode + '</td>';
                                    html += '<td style="display:none" id="customerid-' + sernum + '" contenteditable="true" class="table-warning">' + CustomerID + '</td>';
                                    html += '<td style="display:none" id="itemid-' + sernum + '" contenteditable="true" class="table-warning">' + value.itemId + '</td>';
                                    html += '<td style="display:none" id="stockno-' + sernum + '" contenteditable="true" class="table-warning">' + value.stockQty + '</td>';
                                    html += '<td id="saleslimit-' + sernum + '" contenteditable="false" class="table-warning">' + value.salesLimit + '</td>';
                                    html += '<td id="ringerqty-' + sernum + '" contenteditable="true" class="table-warning" val"' + 1 + '"  onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.ringerQty + '</td>';
                                    html += '<td style="display:none" id="needhighotherization-' + sernum + '">' + value.needHighAuthorization + '</td>'
                                    html += '<td style="display:none" id="highlimiton-' + sernum + '">' + value.highLimitOn + '</td>'
                                    html += '<td id="delete-' + sernum + '"  onclick="RemoveRowPlusEmpty(' + sernum + ')"><span class="delete-row ti-close"></span></td>';
                                    html += '<td style="display:none" id="possaleid-' + sernum + '">' + value.pointOfSaleId + '</td>';
                                    html += '<input type="hidden" value="' + value.itemId + '" id="productId"/>';
                                    html += '<input type="hidden" id="saleslimitexeeded-' + sernum + '" class="saleslimitexeeded" value="false" />';
                                    html += '</tr >';
                                    $("#appendnewrowforsale").append(html);

                                    $(".add-row").css("pointer-events", "auto");
                                    // $("#addnewitem").css("pointer-events", "none");

                                    sernum++;

                                });
                                // var total = $("#total-" + sernum).text();
                                // var subtotalnew = $("#subtotalauto").val();
                                // var finalsubtotalvalue = subtotalnew.split('$');

                                // if (total != null && total != '') {
                                //     var newtotal = total.split('$');
                                //     var newtotalsuplitted = newtotal[1];
                                //     var subtotalsuplitednew = finalsubtotalvalue[1];
                                //     if (subtotalsuplitednew != null && subtotalsuplitednew != '' && subtotalsuplitednew != "$NaN") {
                                //       var subtractedtotal = parseFloat(subtotalsuplitednew) - parseFloat(newtotalsuplitted);
                                //       $("#subtotalauto").val("$" + subtractedtotal.toFixed(2));

                                //     }
                                // }


                                $('#previousbalance').attr("readonly", false);
                                $('#subtotalauto').attr("readonly", false);
                                $('#discountidadd').attr("readonly", false);
                                $('#otherid').attr("readonly", false);
                                $('#taxid').attr("readonly", false);
                                $('#freightid').attr("readonly", false);
                                $('#invoicetotal').attr("readonly", false);
                                $('#amountdue').attr("readonly", false);
                                $('#searchname').attr("readonly", false);
                                $('#previousbalance').val(abc_general.parenthAdd(data.preBalance.toString()));

                                GetCompanyByID(data.customerId, false);

                                CalculatetaxPlusDiscount();

                                //SaveOnGoingSales();

                                $(".saverecord").hide();
                                $(".printrecord").hide();
                                $(".editrecord").show();
                            }
                            else {
                                if (data.isPaid != null && data.isPaid != false && data.isPaid != "undefined") {
                                    $(".Paid").removeClass("d-none");
                                }
                                var customername = $("#customername").val();
                                var customercode = $("#customercodeinfo").val();
                                var CustomerID = $("#customerid").val();
                                $("#appendnewrowforsale").html("");
                                $("#open-invoices").val("false");
                                $.each(data.pointOfSaleDetails, function (index, value) {

                                    var inunit = (value.inUnit != null) ? value.inUnit : '';
                                    var outunit = (value.outUnit != null) ? value.outUnit : '';
                                    var itemnumber = value.itemNumber;

                                    var string = value.itemNumber;
                                    string = string.substring(0, 2) + '-' + string.substring(2, string.length);

                                    var html = '';
                                    html += '<tr  id="rowid-' + sernum + '" class="">';
                                    html += '<td id="countser-' + sernum + '" style="width: 10px" class="counter" contenteditable="true">' + sernum + '</td>';
                                    html += '<td id="itemnumber-' + sernum + '" style="width: 10px" contenteditable="true" onkeyup="GetItemByItemNumber(event,' + sernum + ')">' + string + '</td>';
                                    html += '<td  id="description-' + sernum + '" style="width: 10px" contenteditable="false"  val"' + sernum + '">' + value.description + '</td>';
                                    html += '<td id="Quantity-' + sernum + '"  contenteditable="true" class="table-primary d-none" val"' + 1 + '" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.quantity + '</td>';
                                    html += '<td id="amount-' + sernum + '" contenteditable="false">$' + value.amountRetail + '</td>';
                                    html += '<td id="discountin-' + sernum + '"  contenteditable="true" onkeyup="DiscuntChangePriceRate(' + sernum + ')">$' + value.inDiscount + '</td>';
                                    html += '<td id="discountout-' + sernum + '" contenteditable="true" onkeyup="DiscuntChangePrice(' + sernum + ')">' + value.outDiscount + '</td>';
                                    html += '<td id="InUnits-' + sernum + '"  contenteditable="true" class="table-success">' + inunit + '</td>';
                                    html += '<td id="OutUnits-' + sernum + '"  contenteditable="true" class="table-success">' + outunit + '</td>';
                                    html += '<td id="price-' + sernum + '" contenteditable="false" class="table-warning">$' + value.price + '</td>';
                                    html += '<td id="total-' + sernum + '" contenteditable="false" class="table-warning">$' + value.total + '</td>';
                                    html += '<td id="customername-' + sernum + '" style="display:none;">' + customername + '</td>';
                                    html += '<td style="display:none" id="customercode-' + sernum + '" contenteditable="true" class="table-warning">' + customercode + '</td>';
                                    html += '<td style="display:none" id="customerid-' + sernum + '" contenteditable="true" class="table-warning">' + CustomerID + '</td>';
                                    html += '<td style="display:none" id="itemid-' + sernum + '" contenteditable="true" class="table-warning">' + value.itemId + '</td>';
                                    html += '<td style="display:none" id="stockno-' + sernum + '" contenteditable="true" class="table-warning">' + value.stockQty + '</td>';
                                    html += '<td id="saleslimit-' + sernum + '" contenteditable="false" class="table-warning">' + value.salesLimit + '</td>';
                                    html += '<td id="ringerqty-' + sernum + '" contenteditable="true" class="table-warning" val"' + 1 + '"  onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.ringerQty + '</td>';
                                    html += '<td style="display:none" id="needhighotherization-' + sernum + '">' + value.needHighAuthorization + '</td>'
                                    html += '<td style="display:none" id="highlimiton-' + sernum + '">' + value.highLimitOn + '</td>'
                                    html += '<td id="delete-' + sernum + '"  onclick="RemoveRowPlusEmpty(' + sernum + ')"><span class="delete-row ti-close"></span></td>';
                                    html += '<td style="display:none" id="possaleid-' + sernum + '">' + value.pointOfSaleId + '</td>';
                                    html += '<input type="hidden" value="' + value.itemId + '" id="productId"/>';
                                    html += '<input type="hidden" id="saleslimitexeeded-' + sernum + '" class="saleslimitexeeded" value="false" />';
                                    html += '</tr >';
                                    $("#appendnewrowforsale").append(html);

                                    $(".add-row").css("pointer-events", "none");

                                    $("#delete-" + sernum).prop("onclick", null);

                                    sernum++;

                                });

                                var total = $("#total-" + sernum).text();
                                var subtotalnew = $("#subtotalauto").val();
                                var finalsubtotalvalue = subtotalnew.split('$');
                                $("#CustomerBalance").val(abc_general.parenthAdd(data.receiveablePreBalance));
                                $("#CustomerBalanceDue").text(abc_general.parenthAdd(data.receiveablePreBalance));

                                if (total != null && total != '') {
                                    var newtotal = total.split('$');
                                    var newtotalsuplitted = newtotal[1];
                                    var subtotalsuplitednew = finalsubtotalvalue[1];
                                    if (subtotalsuplitednew != null && subtotalsuplitednew != '' && subtotalsuplitednew != "$NaN") {

                                        var subtractedtotal = parseFloat(subtotalsuplitednew) - parseFloat(newtotalsuplitted);
                                        $("#subtotalauto").val("$" + subtractedtotal.toFixed(2));

                                    }
                                }

                                GetCompanyByID(data.customerId, false);

                                $('#previousbalance').val(abc_general.parenthAdd(data.preBalance.toString()));

                                CalculatetaxPlusDiscount();

                                // SaveOnGoingSales();



                                $('#previousbalance').attr("readonly", true);
                                $('#subtotalauto').attr("readonly", true);
                                $('#discountidadd').attr("readonly", true);
                                $('#otherid').attr("readonly", true);
                                $('#taxid').attr("readonly", true);
                                $('#freightid').attr("readonly", true);
                                $('#invoicetotal').attr("readonly", true);
                                $('#amountdue').attr("readonly", true);
                                $('#searchname').attr("readonly", true);

                                $('#InvoiceBalance').val(abc_general.parenthAdd(data.receiveablePreBalance));



                                $(".saverecord").hide();
                                $(".printrecord").hide();
                                $(".editrecord").hide();
                            }
                        }
                        else {
                            $('#appendnewrowforsale').html('');
                            $(".saverecord").show();
                            $(".printrecord").show();
                            $(".editrecord").show();

                        }

                    },
                    error: function (xhr, status, error) {
                        var errorMessage = xhr.status + ': ' + xhr.statusText
                    },
                });
            }
        }
        else{
            location.reload();
        }
    }

    var nextinvoice = function (method, selectedinvoicenumber) {
        $(".fa-eye").addClass("d-none");
        var data = $("#txtInvoiceNumber").text();

        if (method == 'null') { data = selectedinvoicenumber }
        if (data != '') {

            $.ajax({
                url: '@Url.Action("GetSaleInvoiceByInvoiceNumber", "Sale")',
                async: false,
                Type: 'GET',
                data: { InvoiceNumber: data, Method: method },
                dataType: "json",
                success: function (data) {

                    var sernum = 1;
                    // debugger;
                    $("#salesmanid").text(data[0].saleManName);
                    $("#invoicetotal").val(data[0].invoiceTotal);
                    $("#discountidadd").val(data[0].charges);
                    $("#subtotalauto").val(data[0].subTotal);
                    $("#otherid").val(data[0].other);
                    $("#taxid").val(data[0].tax);
                    $("#freightid").val(data[0].freight);
                    if (data[0].GetSaleDiscount == true) {

                        $("#discountidadd").attr("disabled", true);
                        $("#discountidadd").val("");
                        $('#getsalediscount').prop('checked', true);
                    } else {

                        $("#discountidadd").attr("disabled", false);
                        $('#getsalediscount').prop('checked', false);
                    }
                    $("#countnum").text(data[0].count);
                    $("#invoicenumber").val(data[0].invoiceNumber);
                    $("#supervisorId").text(data[0].supervisorID);
                    if (data.length > 0) {
                        if (data[0].isOpen == true) {

                            $(".Paid").addClass("d-none");
                            var customername = $("#customername").val();
                            var customercode = $("#customercodeinfo").val();
                            var CustomerID = $("#customerid").val();
                            $("#appendnewrowforsale").html("");
                            $("#open-invoices").val("true");
                            $.each(data, function (index, value) {

                                var inunit = (value.inUnits != null) ? value.inUnits : '';
                                var outunit = (value.outUnits != null) ? value.outUnits : '';
                                var itemnumber = value.itemNumber;

                                //var thirdcharacter = itemnumber.substring(2, 3);
                                //if (thirdcharacter == "-") {
                                //    itemnumber = itemnumber.replace('-', '');
                                //}
                                var string = value.itemNumber;
                                string = string.substring(0, 2) + '-' + string.substring(2, string.length);

                                var html = '';
                                html += '<tr  id="rowid-' + sernum + '" class="">';
                                html += '<td id="countser-' + sernum + '" style="width: 10px" class="counter" contenteditable="true">' + sernum + '</td>';
                                html += '<td id="itemnumber-' + sernum + '" style="width: 10px" contenteditable="true" onkeyup="GetItemByItemNumber(event,' + sernum + ')">' + string + '</td>';
                                html += '<td  id="description-' + sernum + '" style="width: 10px" contenteditable="false"  val"' + sernum + '">' + value.itemDescription + '</td>';
                                html += '<td id="Quantity-' + sernum + '"  contenteditable="true" class="table-primary d-none" val"' + 1 + '" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.quantity + '</td>';
                                html += '<td id="amount-' + sernum + '" contenteditable="false">$' + value.amountRetail + '</td>';
                                html += '<td id="discountin-' + sernum + '"  contenteditable="true" onkeyup="DiscuntChangePriceRate(' + sernum + ')">$' + value.inDiscount + '</td>';
                                html += '<td id="discountout-' + sernum + '" contenteditable="true" onkeyup="DiscuntChangePrice(' + sernum + ')">' + value.outDiscount + '</td>';
                                html += '<td id="InUnits-' + sernum + '"  contenteditable="true" class="table-success">' + inunit + '</td>';
                                html += '<td id="OutUnits-' + sernum + '"  contenteditable="true" class="table-success">' + outunit + '</td>';
                                html += '<td id="price-' + sernum + '" contenteditable="false" class="table-warning">$' + value.price + '</td>';
                                html += '<td id="total-' + sernum + '" contenteditable="false" class="table-warning">$' + value.total + '</td>';
                                html += '<td id="customername-' + sernum + '" style="display:none;">' + customername + '</td>';
                                html += '<td style="display:none" id="customercode-' + sernum + '" contenteditable="true" class="table-warning">' + customercode + '</td>';
                                html += '<td style="display:none" id="customerid-' + sernum + '" contenteditable="true" class="table-warning">' + CustomerID + '</td>';
                                html += '<td style="display:none" id="itemid-' + sernum + '" contenteditable="true" class="table-warning">' + value.itemId + '</td>';
                                html += '<td style="display:none" id="stockno-' + sernum + '" contenteditable="true" class="table-warning">' + value.stock.quantity + '</td>';
                                html += '<td id="saleslimit-' + sernum + '" contenteditable="false" class="table-warning">' + value.product.salesLimit + '</td>';
                                html += '<td id="ringerqty-' + sernum + '" contenteditable="true" class="table-warning" val"' + 1 + '"  onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.ringerQuantity + '</td>';
                                html += '<td style="display:none" id="needhighotherization-' + sernum + '">' + value.product.needHighAuthorization + '</td>'
                                html += '<td style="display:none" id="highlimiton-' + sernum + '">' + value.product.highlimitOn + '</td>'
                                html += '<td id="delete-' + sernum + '"  onclick="RemoveRowPlusEmpty(' + sernum + ')"><span class="delete-row ti-close"></span></td>';
                                html += '<td style="display:none" id="possaleid-' + sernum + '">' + value.possaleId + '</td>';
                                html += '<input type="hidden" value="' + value.itemId + '" id="productId"/>';
                                html += '<input type="hidden" id="saleslimitexeeded-' + sernum + '" class="saleslimitexeeded" value="false" />';
                                html += '</tr >';
                                $("#appendnewrowforsale").append(html);


                                var total = $("#total-" + sernum).text();
                                var subtotalnew = $("#subtotalauto").val();
                                var finalsubtotalvalue = subtotalnew.split('$');

                                if (total != null && total != '') {
                                    var newtotal = total.split('$');
                                    var newtotalsuplitted = newtotal[1];
                                    var subtotalsuplitednew = finalsubtotalvalue[1];
                                    if (subtotalsuplitednew != null && subtotalsuplitednew != '' && subtotalsuplitednew != "$NaN") {

                                        var subtractedtotal = parseFloat(subtotalsuplitednew) - parseFloat(newtotalsuplitted);
                                        $("#subtotalauto").val("$" + subtractedtotal.toFixed(2));

                                    }
                                }


                                GetCompanyByID(data[0].customerId, false);


                                $(".add-row").css("pointer-events", "auto");
                                // $("#addnewitem").css("pointer-events", "none");


                                sernum++;

                            });

                            CalculatetaxPlusDiscount();

                            $('#previousbalance').attr("readonly", false);
                            $('#subtotalauto').attr("readonly", false);
                            $('#discountidadd').attr("readonly", false);
                            $('#otherid').attr("readonly", false);
                            $('#taxid').attr("readonly", false);
                            $('#freightid').attr("readonly", false);
                            $('#invoicetotal').attr("readonly", false);
                            $('#amountdue').attr("readonly", false);
                            $('#searchname').attr("readonly", false);

                            SaveOnGoingSales();
                            $(".saverecord").hide();
                            $(".printrecord").hide();
                            $(".editrecord").show();
                        }
                        else {
                            if (data[0].isPaid != null && data[0].isPaid != false && data[0].isPaid != "undefined") {
                                $(".Paid").removeClass("d-none");
                            }
                            var customername = $("#customername").val();
                            var customercode = $("#customercodeinfo").val();
                            var CustomerID = $("#customerid").val();
                            $("#appendnewrowforsale").html("");
                            $("#open-invoices").val("false");
                            $.each(data, function (index, value) {

                                var inunit = (value.inUnits != null) ? value.inUnits : '';
                                var outunit = (value.outUnits != null) ? value.outUnits : '';
                                var itemnumber = value.itemNumber;

                                //var thirdcharacter = itemnumber.substring(2, 3);
                                //if (thirdcharacter == "-") {
                                //    itemnumber = itemnumber.replace('-', '');
                                //}
                                var string = value.itemNumber;
                                string = string.substring(0, 2) + '-' + string.substring(2, string.length);

                                var html = '';
                                html += '<tr  id="rowid-' + sernum + '" class="">';
                                html += '<td id="countser-' + sernum + '" style="width: 10px" class="counter" contenteditable="false">' + sernum + '</td>';
                                html += '<td id="itemnumber-' + sernum + '" style="width: 10px" contenteditable="false" onkeyup="GetItemByItemNumber(event,' + sernum + ')">' + string + '</td>';
                                html += '<td id="description-' + sernum + '"  style="width: 10px" contenteditable="false"  val"' + sernum + '">' + value.itemDescription + '</td>';
                                html += '<td id="Quantity-' + sernum + '"  contenteditable="false" class="table-primary d-none" val"' + 1 + '" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.quantity + '</td>';
                                html += '<td id="amount-' + sernum + '" contenteditable="false">$' + value.amountRetail + '</td>';
                                html += '<td id="discountin-' + sernum + '"  contenteditable="false" onkeyup="DiscuntChangePriceRate(' + sernum + ')">$' + value.inDiscount + '</td>';
                                html += '<td id="discountout-' + sernum + '" contenteditable="false" onkeyup="DiscuntChangePrice(' + sernum + ')">' + value.outDiscount + '</td>';
                                html += '<td id="InUnits-' + sernum + '"  contenteditable="false" class="table-success">' + inunit + '</td>';
                                html += '<td id="OutUnits-' + sernum + '"  contenteditable="false" class="table-success">' + outunit + '</td>';
                                html += '<td id="price-' + sernum + '" contenteditable="false" class="table-warning">$' + value.price + '</td>';
                                html += '<td id="total-' + sernum + '" contenteditable="false" class="table-warning">$' + value.total + '</td>';
                                html += '<td id="customername-' + sernum + '" style="display:none;">' + customername + '</td>';
                                html += '<td style="display:none" id="customercode-' + sernum + '" contenteditable="false" class="table-warning">' + customercode + '</td>';
                                html += '<td style="display:none" id="customerid-' + sernum + '" contenteditable="false" class="table-warning">' + CustomerID + '</td>';
                                html += '<td style="display:none" id="itemid-' + sernum + '" contenteditable="false" class="table-warning">' + value.itemId + '</td>';
                                html += '<td style="display:none" id="stockno-' + sernum + '" contenteditable="false" class="table-warning">' + value.stock.quantity + '</td>';
                                html += '<td id="saleslimit-' + sernum + '" contenteditable="false" class="table-warning">' + value.product.salesLimit + '</td>';
                                html += '<td id="ringerqty-' + sernum + '" contenteditable="false" class="table-warning" val"' + 1 + '"  onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.ringerQuantity + '</td>';
                                html += '<td style="display:none" id="needhighotherization-' + sernum + '">' + value.product.needHighAuthorization + '</td>'
                                html += '<td style="display:none" id="highlimiton-' + sernum + '">' + value.product.highlimitOn + '</td>'
                                html += '<td id="delete-' + sernum + '"  onclick="RemoveRowPlusEmpty(' + sernum + ')"><span class="delete-row ti-close"></span></td>';
                                html += '<td style="display:none" id="possaleid-' + sernum + '">' + value.possaleId + '</td>';
                                html += '<input type="hidden" value="' + value.itemId + '" id="productId"/>';
                                html += '<input type="hidden" id="saleslimitexeeded-' + sernum + '" class="saleslimitexeeded" value="false" />';
                                html += '</tr >';
                                $("#appendnewrowforsale").append(html);


                                var total = $("#total-" + sernum).text();
                                var subtotalnew = $("#subtotalauto").val();
                                var finalsubtotalvalue = subtotalnew.split('$');

                                if (total != null && total != '') {
                                    var newtotal = total.split('$');
                                    var newtotalsuplitted = newtotal[1];
                                    var subtotalsuplitednew = finalsubtotalvalue[1];
                                    if (subtotalsuplitednew != null && subtotalsuplitednew != '' && subtotalsuplitednew != "$NaN") {

                                        var subtractedtotal = parseFloat(subtotalsuplitednew) - parseFloat(newtotalsuplitted);
                                        $("#subtotalauto").val("$" + subtractedtotal.toFixed(2));

                                    }
                                }


                                GetCompanyByID(data[0].customerId, false);


                                $(".add-row").css("pointer-events", "none");

                                $("#delete-" + sernum).prop("onclick", null);

                                sernum++;

                            });

                            CalculatetaxPlusDiscount();

                            SaveOnGoingSales();

                            $('#previousbalance').attr("readonly", true);
                            $('#subtotalauto').attr("readonly", true);
                            $('#discountidadd').attr("readonly", true);
                            $('#otherid').attr("readonly", true);
                            $('#taxid').attr("readonly", true);
                            $('#freightid').attr("readonly", true);
                            $('#invoicetotal').attr("readonly", true);
                            $('#amountdue').attr("readonly", true);
                            $('#searchname').attr("readonly", true);

                            $(".saverecord").hide();
                            $(".printrecord").hide();
                            $(".editrecord").hide();
                        }
                        //$(".saverecord").hide();
                        //$(".printrecord").hide();
                        //$(".editrecord").hide();
                    }
                    else {
                        $('#appendnewrowforsale').html('');
                        $(".saverecord").show();
                        $(".printrecord").show();
                        $(".editrecord").show();

                    }

                },
                error: function (xhr, status, error) {
                    var errorMessage = xhr.status + ': ' + xhr.statusText
                },
            });
        }

    }



    $(document).keyup(function (e) {
        if (e.which == 17)
            isCtrl = false;
    }).keydown(function (e) {
        if (e.which == 17) isCtrl = true;
        if (e.which == 117 && isCtrl == true) {
            if ($("#open-invoices").val() == "true") {
                if ($("#customerid").val() == "") {
                    Swal.fire(
                        'Kindly Select',
                        "Customer",
                        'error'
                    )

                    return false;
                }

                $('#InventoryLookupModal').modal('show');
            }
            return false;
        }

        if (e.which == 14) isCtrl = true;
        if (e.which == 114 && isCtrl == true) {
            if ($("#open-invoices").val() == "true") {
                if ($("#customerid").val() == "") {
                    Swal.fire(
                        'Kindly Slect',
                        "Customer",
                        'error'
                    )

                    return false;
                }

                $('#additemshort').modal('show');
            }
            return false;
        }

       if(e.which == 120){
            $("#paymentmodal2").modal('show');
        }
    });

    $('#itemquantitylabel').on('keypress', function (event) {


        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
            //keycodeget();
            GetItemDataAppendForDesModal3();
        }
        else {
            var keypressed = String.fromCharCode(event.which);
            var numberonly = new RegExp('^[0-9]*$');
            if (!numberonly.test(keypressed)) {
                swal("Error!", "Kindly enter valid quantity");
                $('#itemquantitylabel').val('');
                isvalid = false;
                return false;
            }
            $('#itemquantitylabel').trigger('focus');

        }
    });

    $("#searchPro").on("keyup", function () {
        var value = $(this).val().toLowerCase();
        $("#proTable tr").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    function keycodeget() {

        //$(".add-row").trigger("click");


        var number = 0;
        $('#saletable tr').each(function (index, tr) {
            number++;

        });
        var index = number - 1;
        $('.modalTable tr').removeClass("selectedrow");
        var qustmQty = $('#itemquantitylabel').val();
        if (qustmQty == '') {
            qustmQty = 1;
        }
        if (shortaddvalue == 0) {
            swal("Error!", "Please Select Item!", "error");
            RemoveRow(index);
        }
        GetItemByIDaForShortModalF(shortaddvalue, index, qustmQty);
        $("#writecheque").prop('disabled', false);
        $(".add-row").trigger("click");
        $('#itemquantitylabel').val('');

        $("#additemshort").modal('hide');
    }
    $('#customerCode').keydown(function (e) {

        if (e.which == 13) {
            GetCustomerData();
            return false;
        }
    });

    function GetItemByIDaForShortModal(val, indexex, qustmQty) {

        var count = 0;
        $('#saletable tbody tr').each(function (index, tr) {


            count++;
        });
        var seqnum = indexex;
        var id = parseInt(val);
        console.log(id);
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockByID", "Items")',
            data: {
                id: id
            },
            dataType: 'json',
            success: function (data) {
                console.log("F###   " + data);
                //console.log("Hemlooooooooo",data);
                if (data != null && data != "" && data != "false") {
                    $("#itemid-" + indexex).text(data.id);
                    var count = 0;
                    var count1 = 0;
                    var exist = 0;
                    var notexist = true;
                    var count1 = 0;
                    $('#saletable tr').each(function (index, tr) {
                        if (count1 > 0) {
                            var Id = tr.attributes["id"].value.split("rowid-")[1];
                            /*var productId = parseInt($("#rowid-" + Id).find("#productId").val());*/
                            var productId = parseInt($("#itemid-" + Id).html());
                            if (productId === data.id) {
                                exist++;
                            }
                            if (exist > 1) {
                                swal("Error!", "Item Already Added!", "error");
                                notexist = false;
                                RemoveRow(Id);
                                return false;
                            }

                        }

                        count1++;

                    });
                    if (notexist == true) {

                        GetItemByItemNumber(null, count);
                        var itemquantity = $("#customQuantityM").val();
                        $("#ringerqty-" + count).text(itemquantity);
                        QuantityMultipyPrice(count);

                    }
                }
            },
            error: function (xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }


    function GetItemDataAppendForDesModal() {
        var count = 0;

        //  $(".add-row").trigger("click");
        $('#saletable tbody tr').each(function (index, tr) {


            count++;
        });

        // $("#itemnumber-" + count).text(itemnumnber);
        var string = $("#itemnumberModal").val();
        string = string.substring(0, 2) + '-' + string.substring(2, string.length);
        $("#itemnumber-" + count).text(string);

        var count1 = 0;
        var exist = 0;
        var notexist = true;
        $('#saletable tr').each(function (index, tr) {
            if (count1 > 0) {
                var Id = tr.attributes["id"].value.split("rowid-")[1];
                var productnumber = $("#itemnumber-" + Id).text();
                //debugger;
                if (productnumber === string) {
                    exist++;
                }
                if (exist > 1) {
                    swal("Error!", "Item Already Added!", "error");
                    notexist = false;
                    RemoveRow(Id);
                    return false;
                }

            }

            count1++;
        });
        if (notexist == true) {

            GetItemByItemNumber(null, count);
            var itemquantity = $("#customQuantityM").val();
            $("#ringerqty-" + count).text(itemquantity);
            QuantityMultipyPrice(count);

        }
        closemodalDesc();
    }
    function closeitemmodal() {
        $("#additemshort").modal('hide');
        $('.modalTable tr').removeClass("selectedrow");
        $('#itemquantitylabel').val('');
    }
    function GetCustomerData() {
        debugger;
        var id = $('#customerCode').val();
        $.ajax({

            url: '@Url.Action("GetCustomerBycustomerCode", "Purchase")',
            async: false,
            Type: 'GET',
            contentType: "application/json;",
            data: {
                id: id
            },
            dataType: "json",
            success: function (data) {
                $('#customerCode').val((data.customerCode != null && data.customerCode != "undefined" ? data.customerCode : ''));
                $(".searchnameee").val((data.company != null && data.company != "undefined" ? data.company : (data.firstName + data.lastName)));
            },

        });
    }




    function getCustomers(event) {
        debugger;
        var data_array = [];
        var search = $("#customerInput1").val();
        $("#customerNames").empty();
        var dropdown = '';
        $.ajax({
            type: "GET",
            url: "@Url.Action("AutoCompleteSearchCustomerInfo", "Sale")",
            async: false,
            dataType: 'json',
            cache: false,
            success: function (data) {

                $.each(data, function (index, value) {
                    if (search != "") {
                        if (value.company.toLowerCase().indexOf(search.toLowerCase()) >= 0) {
                            dropdown += '<option data-value="' + value.customerCode + '" value="' + value.company + '"></option>';
                            let my_object = {};
                            my_object.title = value.company;
                            my_object.value = value.customerCode;

                            data_array.push(my_object);
                        }
                    }
                });

            },
            error: function (xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });

        $("#customerNames").append(dropdown);
        $.each(data_array, function (index, value) {
            if (data_array[index].title == search) {
                //var string = data_array[index].value;
                //string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                $("#customerCode").val(data_array[index].value);
                GetCustomerData();

                $("#customerNames").empty();
            }
        });
        //data_array.empty();

    }

    function RemoveEmptyRows(Description) {
        var rowCount = 1;
        $('#saletable tbody tr').each(function (index, tr) {
            var descriptionIndex = $('#' + Description + '-' + rowCount).text();
            if (descriptionIndex == '') {
                RemoveRow(rowCount);
            } else {
                rowCount++;
            }
        });
    }



    $('#customQuantity').keydown(function (e) {

        if (e.which == 13) {
            var customQty = $('#customQuantity').val();
            var numberonly = new RegExp('^[0-9]*$');
            if (!numberonly.test(customQty)) {
                swal("Error!", "Kindly enter valid quantity");
                $('#customQuantity').val('');
                isvalid = false;
                return false;
            }

            if (customQty != null && customQty != '') {

                var InStock = $("#qtyOnHand").val();
                if (parseFloat(InStock) > 0) {
                    GetItemDataAppendForDesModal1();
                } else {
                    swal("Error!", "Stock Not Available!", "error");

                }
            } else {
                swal("Error!", "Please Enter Quantity!", "error");
            }
            return false;
        }
    });


    function checkboxChange(){
        //debugger;
        var checkbox = document.getElementById("customeremailcopy");   
            if (checkbox.checked) {
             $("#checkboxvalue").val(true);
             var CustomerEmail = $("#customerEmail").text();
   
             $("#CustomerEmailValue").val(CustomerEmail);
            } 
            else {
              $("#CustomerEmailValue").val(false);
            }
    }





    function GetItemDataAppendForDesModal1() {


        var jj = 1;
        $('#saletable tr').each(function () {
            // debugger;
            var currentRow = $(this).closest("tr");
            //var check=currentRow.find("td:eq(2)").val();
            var check = $("#rowid-" + jj).find("#itemnumber-" + jj).text();
            // alert(check);
            if (check[jj] == null || check[jj] == "") {
                // RemoveRow(jj);
            }
            jj++
        });
        RemoveEmptyRows('description');

        var count = 0;

        $('#saletable tr').each(function (index, tr) {

            count++;
        });

        $(".add-row").trigger("click");
        // $("#itemnumber-" + count).text(itemnumnber);
        var string = $("#itemnumberModal1").val();
        string = string.substring(0, 2) + '-' + string.substring(2, string.length);
        $("#itemnumber-" + count).text(string);
        var count1 = 0;
        var exist = 0;
        var notexist = true;
        $('#saletable tr').each(function (index, tr) {
            if (count1 > 0) {
                var Id = tr.attributes["id"].value.split("rowid-")[1];
                var productnumber = $("#itemnumber-" + Id).text();
                //debugger;
                if (productnumber === string) {
                    exist++;
                }
                if (exist > 1) {
                    swal("Error!", "Item Already Added!", "error");
                    notexist = false;
                    //RemoveRow(Id);
                    RemoveEmptyRows('description');
                    $(".add-row").trigger("click");
                    return false;
                }

            }

            count1++;
        });
        if (notexist == true) {
            GetItemByItemNumber(null, count);
            var itemquantity = $("#customQuantity").val();
            $("#ringerqty-" + count).text(itemquantity);
            QuantityMultipyPrice(count);

        }
        CloseInventoryLookupModal();

    };

    function CustomerPMOdalhide() {

        $("#customerpayment").modal('hide');
    }

    $("#Custpaymenttable").on('input', '.txtCal', function () {
        var calculated_total_sum = 0;
        $("#Custpaymenttable .txtCal").each(function () {
            var get_textbox_value = $(this).text();
            if ($.isNumeric(get_textbox_value)) {
                calculated_total_sum += parseFloat(get_textbox_value);
            }
        });


       // $("#TotalPaidP").text("$" + calculated_total_sum.toFixed(2));
    });

    $("#Custpaymenttable").on('input', '.txtCal1', function () {
        var calculated_total_sum = 0;

        $("#Custpaymenttable .txtCal1").each(function () {
            var get_textbox_value = $(this).text();
            if ($.isNumeric(get_textbox_value)) {
                calculated_total_sum += parseFloat(get_textbox_value);
            }
        });
      //  $("#totalpaidd").text("$" + calculated_total_sum);

        //var s = $("#TotalPaidP").text(); s = s.replace(/[^0-9\s]/gi, '');
        //var z = $("#totalpaidd").text(); z = z.replace(/[^0-9\s]/gi, '');

        var s = $("#TotalPaidP").text(); s = s.replace(/\$/g, '');
        var z = $("#totalpaidd").text(); z = z.replace(/\$/g, '');
        var v = s - z;
        v = v.toFixed(2);
        $("#ChangeP").val("$" + v);
    });


    $('#ChangeP').keyup(function () {
        var m = $("#TotalPaidP").text(); m = m.replace(/\$/g, '');
        var s = $("#ChangeP").val(); s = s.replace(/\$/g, '');
        var z = $("#totalpaidd").text(); z = z.replace(/\$/g, '');
        var x = m - z;
        var b = x - s;
        var b = b.toFixed(2);
        $("#BalanceP").text("$" + b);

    });


    $("#PrintInvoicef10").click(function () {
        var tablecount = $("#saletable TBODY TR").length;
        if (parseInt(tablecount) == 0) {

            var customerId = $("#customerid").val();

            if (customerId == "") {
                Swal.fire(
                    "Message",
                    "Kindly Select Customer",
                    'error'
                );
                return false;
            }
            swal("Error!", "Please Complete Current Invoice", "error");
        } else {

            var Total = $("#invoicetotal").val();
            if (Total == "$0.00") {
                swal("Error!", "Please Complete Current Invoice", "error");
                return false;
            }
           // creditCheck(true, false, true, false);
            InsertSaleDetails1(true, true);
        }

    });

    $("#PaymentSilentF4").click(function () {
        var tablecount = $("#saletable TBODY TR").length;
        if (parseInt(tablecount) == 0) {
            var customerId = $("#customerid").val();
            if (customerId == "") {
                Swal.fire(
                    "Message",
                    "Kindly Select Customer",
                    'error'
                );
                return false;
            }
            swal("Error!", "Please Complete Current Invoice", "error");
        } 
        else {
            var Total = $("#invoicetotal").val();
            if (Total == "$0.00") {
                swal("Error!", "Please Complete Current Invoice", "error");
                return false;
            }
            InsertSaleDetails1(false, true);
        }
    });

    $("#PrintInvoicef3").click(function () {

        var tablecount = $("#saletable TBODY TR").length;
        if (parseInt(tablecount) == 0) {

            var customerId = $("#customerid").val();

            if (customerId == "") {
                Swal.fire(
                    "Message",
                    "Kindly Select Customer",
                    'error'
                );
                return false;
            }
            swal("Error!", "Please Complete Current Invoice", "error");
        } else {
            creditCheck(true, false, true, true);
        }

    });

    function SaveMultiPayment(){
        var customerId = $("#customerid").val();
        var TotalPaidAmount = abc_general.dollarRemove($("#TotalPaidAmount").text());
        var totalAmountAllocation = abc_general.dollarRemove($("#totalAmountAllocation").text());
        var ChangeAmount = abc_general.dollarRemove($("#ChangeAmount").val());
        var CusBalanceDue = abc_general.dollarRemove($("#CustomerBalanceDue").text());

        var multiPayments = {}
        multiPayments.CustomerId = customerId;
        multiPayments.TotalPaidAmount = TotalPaidAmount;
        multiPayments.TotalAmountAllocation = totalAmountAllocation;
        multiPayments.ChangeAmount = ChangeAmount;
        multiPayments.CustomerBalanceDue = CusBalanceDue;


        var multiPaymentArray = new Array();
        var count1 = 1;
        $("#CusMultiPaymentsTable TBODY TR").each(function () {
            var row = $(this);
            var objmultipay = {};

            var xx = $("#selectid-" + count1).val();
            var zz = $("#DateP-" + count1).val();
            var dateNow = new Date(zz);
            dateNow.setHours(23);
            dateNow.setMinutes(59);
            dateNow.setSeconds(59);
            dateNow.setMilliseconds(999);

            var aa = row.find("TD").eq(0).text();
            var bb = row.find("TD").eq(1).text();
            var cc = row.find("TD").eq(2).html();
            var dd = row.find("TD").eq(3).text();
            var ee = row.find("TD").eq(4).val();

            if (!abc_general.isNullOrEmpty(aa)) {

                objmultipay.AmountPaid = aa;
            }
            if (!abc_general.isNullOrEmpty(bb)) {

                objmultipay.AmountAllocate = bb;
            }
            if (!abc_general.isNullOrEmpty(cc)) {

                objmultipay.PaymentType = xx;
            }
            if (!abc_general.isNullOrEmpty(dd)) {

                objmultipay.ChequeNumber = dd;
            }
            objmultipay.HoldDate = dateNow;
            multiPaymentArray.push(objmultipay);
            count1++;
        });
        multiPayments.multiInvoiceTransaction = multiPaymentArray;

          $.ajax({
            type: "POST",
            url: '@Url.Action("MultiPaymentInvoice", "Sale")',
            async: false,
            cache: false,
            data: JSON.stringify(multiPayments),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data == true) {
                   toastr.success('Multi Invoices Payment Received');
                   location.reload();
                }
                else {
                    swal("Error!", "Transaction Discard", "Error");
                }
            }
        });

    }

     function ChangePayment1(IsInvoicedPaid, IsPrint) {
         debugger;
        var OnlyPayment = false;
        var customername = $("#searchname").val();
        var customerId = $("#customerid").val();
        var saleman = $("#salesmanid").text();
        var invoicenumber = $("#invoicenumber").val();
        var AccountId = $("#Accountnumber").val();
        var invoicetotal = abc_general.dollarRemove($("#invoicetotal").val());
        var totalPaidP = abc_general.dollarRemove($("#TotalPaidP").text());
        var totalAllocation = abc_general.dollarRemove($("#totalpaidd").text());
 
        var change = abc_general.dollarRemove($("#ChangeP").val());
        var InvBalance = (abc_general.parenthRemove($("#BalanceP").text(), "(")).toString();
        var SubTotal = abc_general.dollarRemove($("#subtotalauto").val());
        var AmountDue = abc_general.dollarRemove($("#amountdue").val());
        var Other = abc_general.dollarRemove($("#otherid").val());
        var discount = abc_general.dollarRemove($("#discountidadd").val());
        var tax = abc_general.dollarRemove($("#taxid").val());
        var freight = abc_general.dollarRemove($("#freightid").val());
        var customerEmail = $("#CustomerEmailValue").val();
       
        //debugger;
        var Sale = {}   
        Sale.InvoiceNumber = invoicenumber;
        Sale.CustomerId = customerId;
        Sale.CustomerName = customername;
        Sale.AccountId = AccountId;
        Sale.SubTotal = SubTotal
        Sale.InvoiceTotal = invoicetotal;
        Sale.TotalPaid = totalPaidP;
        Sale.TotalAmount = totalAllocation;
        Sale.Change = change;
        Sale.InvBalance = InvBalance;
        Sale.IsInvoicedPaid = IsInvoicedPaid;
        Sale.Other = Other;
        Sale.Discount = discount;
        Sale.Tax = tax;
        Sale.Freight = freight;
        Sale.CustomerEmail = customerEmail;
        

        var SaleArray = new Array();

        var count1 = 1;

        $("#Custpaymenttable TBODY TR").each(function () {
            var row = $(this);
            var SaleDetail = {};

            var xx = $("#selectid-" + count1).val();
            var zz = $("#DateP-" + count1).val();
            var dateNow = new Date(zz);
                dateNow.setHours(23);
                dateNow.setMinutes(59);
                dateNow.setSeconds(59);
                dateNow.setMilliseconds(999);

            var aa = row.find("TD").eq(0).text();
            var bb = row.find("TD").eq(1).text();
            var cc = row.find("TD").eq(2).html();
            var dd = row.find("TD").eq(3).text();
            var ee = row.find("TD").eq(4).val();

            if (!abc_general.isNullOrEmpty(aa)) {

                SaleDetail.AmountPaid = aa;
            }
            if (!abc_general.isNullOrEmpty(bb)) {

                SaleDetail.AmountAllocate = bb;
            }
            if (!abc_general.isNullOrEmpty(cc)) {

                SaleDetail.PaymentType = xx;
            }
            if (!abc_general.isNullOrEmpty(dd)) {

                SaleDetail.ChequeNumber = dd;
            }
          
            SaleDetail.HoldDate = dateNow;
            SaleDetail.InvoiceNumber = invoicenumber;
            SaleArray.push(SaleDetail);
            count1++;
        });

         var count2 = 1;
          var itemsArray = new Array();
         $("#saletable TBODY TR").each(function () {
             var row = $(this);
            var itemDetail = {};
        
            itemDetail.Quantity = row.find("TD").eq(3).html();
            itemDetail.RingerQty = row.find("TD").eq(17).html();    
            itemDetail.ItemId = row.find("TD").eq(14).html();

            itemsArray.push(itemDetail);
            count2++;
        });

         Sale.saleInvoiceTransactionModel = SaleArray;
        Sale.itemsdetails = itemsArray;

        $.ajax({
            type: "POST",
            url: '@Url.Action("ChangePayment1", "Sale")',
            async: false,
            cache: false,
            data: JSON.stringify(Sale),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                debugger;
                if (data == true) {
                    CustomerPMOdalhide();
                    // creditCheckWithPayment(true, false);
                    toastr.success('Payment Received');

                    if(IsPrint == true){
                    window.open('@Url.Action("SaleInvoicePdf", "Sale")', '_blank');
                    }
                   

                }

                else {
                    swal("Error!", "Transaction Discard", "Error");
                }

            }
        });
    }
 
    function ChangePayment(IsInvoicedPaid) {
        var OnlyPayment = false;

        var customername = $("#searchname").val();
        var customercode = $("#customercodeinfo").val();
        var customerID = $("#customerid").val();
        var saleman = $("#salesmanid").text();
        var invoicenumber = $("#invoicenumber").val();
        var invoicetotal = $("#invoicetotal").val();
        var balanceDueP = $("#BalanceDueP").text();
        var totalPaidP = $("#TotalPaidP").text();
        var totalpaidd = $("#totalpaidd").text();
        var changeP = $("#ChangeP").val();
        var BalanceP = $("#BalanceP").text();

        var SaleDetails = new Array();
        var count1 = 1;
        $("#Custpaymenttable TBODY TR").each(function () {
            var row = $(this);
            var Sale = {};

            var xx = $("#selectid-" + count1).val();
            var zz = $("#DateP-" + count1).val();

            var aa = row.find("TD").eq(0).text();
            var bb = row.find("TD").eq(1).text();
            var cc = row.find("TD").eq(2).html();
            var dd = row.find("TD").eq(3).text();
            var ee = row.find("TD").eq(4).text();

            if (aa != null && aa != "" && aa != "undefined") {

                Sale.AmountPaid = row.find("TD").eq(0).text();
            }
            if (bb != null && bb != "" && bb != "undefined") {

                Sale.AmountAllocate = row.find("TD").eq(1).text();
            }
            if (cc != null && cc != "" && cc != "undefined") {

                //Sale.PaymentType = row.find("TD").eq(3).html();
                Sale.PaymentType = xx;
            }
            if (dd != null && dd != "" && dd != "undefined") {

                //Sale.ChequeNumber = row.find("TD").eq(4).html();
                Sale.ChequeNumber = dd;
            }
            if (ee != null && ee != "" && ee != "undefined") {

                //Sale.HoldDate = row.find("TD").eq(5).text();
                Sale.HoldDate = zz;
            }
            Sale.InvoiceNumber = invoicenumber;
            Sale.CustomerName = customername;
            Sale.CustomerCode = customercode;
            Sale.CustomerId = customerID;
            Sale.InvoiceBalance = invoicetotal;
            Sale.PreviousBalance = balanceDueP;
            Sale.TotalPaid = totalPaidP;
            var amc = $.trim(totalpaidd);
            Sale.TotalAmount = totalpaidd;
            Sale.Change = changeP;
            Sale.Balance = BalanceP;
            Sale.IsInvoicedPaid = IsInvoicedPaid;

            SaleDetails.push(Sale);
            count1++;
        });
        console.log(SaleDetails);

        $.ajax({
            type: "POST",
            url: '@Url.Action("ChangePayment", "Sale")',
            async: false,
            cache: false,
            data: JSON.stringify(SaleDetails),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                if (data == true) {
                    //swal("Success!", "Updated Successfully");
                    CustomerPMOdalhide();
                    // creditCheckWithPayment(true, false);
                    toastr.success('Payment Received');

                    //if(OnlyPayment){
                    var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                    window.open(actionUrl);
                    location.reload();
                    //}
                    // location.reload();
                }

                else {
                    swal("Error!", "Transaction Discard", "Error");
                }

            }
        });
    }



    //function ChangePayment() {

    //    var customername = $("#searchname").val();
    //    var customercode = $("#customercodeinfo").val();
    //    var customerID = $("#customerid").val();
    //    var saleman = $("#salesmanid").text();
    //    var invoicenumber = $("#invoicenumber").val();
    //    var invoicetotal = $("#invoicetotal").val();
    //    var balanceDueP = $("#BalanceDueP").text();
    //    var totalPaidP = $("#TotalPaidP").text();
    //    var totalpaidd = $("#totalpaidd").text();
    //    var changeP = $("#ChangeP").val();
    //    var BalanceP = $("#BalanceP").text();

    //    var SaleDetails = new Array();

    //    var count1 = 1;
    //    $("#Custpaymenttable TBODY TR").each(function () {
    //        var row = $(this);
    //        var Sale = {};

    //        Sale.AmountPaid = row.find("TD").eq(1).html();
    //        //Sale.AmountAllocate = row.find("TD").eq(2).text();
    //        Sale.PaymentType = row.find("TD").eq(3).html();
    //        //Sale.ChequeNumber = row.find("TD").eq(4).html();
    //        Sale.HoldDate = row.find("TD").eq(5).text();
    //        Sale.InvoiceNumber = invoicenumber;
    //        Sale.CustomerName = customername;
    //        Sale.CustomerCode = customercode;
    //        Sale.CustomerId = customerID;
    //        Sale.InvoiceBalance = invoicetotal;
    //        Sale.PreviousBalance = balanceDueP;
    //        Sale.TotalPaid = totalPaidP;
    //        Sale.TotalAmount = totalpaidd;
    //        Sale.Change = changeP;
    //        Sale.Change = BalanceP;


    //        SaleDetails.push(Sale);
    //        count1++;
    //    });
    //    console.log(SaleDetails);

    //     $.ajax({
    //         type: "POST",
    //         url: '@Url.Action("ChangePayment", "Sale")',

    //         data: { 'SaleDetails': SaleDetails},
    //         dataType: "json",
    //         success: function (data) {

    //             if (data == true) {


    //             },
    //         },
    //     });
    //}

    //Payment Work Changes
    function creditCheckWithPayment(printorNot, update) {

        printorNotStatus = printorNot;
        updatestatus = update;
        window.isSuperVisorCreditSuccess = false;
        GetCompanyByID($("#customerid").val());
        var CheckCreditAllow = $("#iscredithold").text();
        console.log(CheckCreditAllow);
        if (CheckCreditAllow != "" && CheckCreditAllow != null && CheckCreditAllow != "0" && CheckCreditAllow != 0 && CheckCreditAllow == false) {
            Swal.fire(
                'Customer Credit is On Hold',
                "Please Proceed with invoice payment",
                'error'
            )

        } else {

            var i = 1;
            var issue = false;
            var productname = "";
            var exceedlimit = false;
            $(".saleslimitexeeded").each(function () {
                var description = $("#description-" + i).text();
                //console.log("hello" + description);

                if (description == "") {
                    $("#delete-" + i).trigger("click");
                }
                i++;
            });
            i = 1;
            $(".saleslimitexeeded").each(function () {
                //alert(1);
                if (update == false) {
                    var quantity = $("#ringerqty-" + i).text();
                    if (quantity == "") {
                        quantity = "0";
                    }

                    var getStock = $("#stockno-" + i).text();
                    if (getStock == null || getStock == 0 || getStock == "" || getStock == "undefined") {
                        Swal.fire(
                            "Stock is not available",
                            "you cannot sale " + $("#description-" + i).text() + " because stock is not available.. Kindly Set it",
                            'error'
                        );
                        $("#delete-" + i).trigger("click");
                        issue = true;
                        return false;
                    }
                    if (parseInt(quantity) > parseInt(getStock)) {
                        /*alert('you cannot excede the existing stock');*/
                        Swal.fire(
                            'Invalid Quantity of ' + $("#description-" + i).text(),
                            "you cannot sale " + $("#description-" + i).text() + " because quantity is exceeded than stock.. Kindly Set it",
                            'error'
                        );
                        $("#delete-" + i).trigger("click");
                        issue = true;
                        return false;
                    }
                    if ($("#ringerqty-" + i).text() == "" || !/^[0-9]+$/.test($("#ringerqty-" + i).text()) || $("#ringerqty-" + i).text() == "0") {
                        Swal.fire(
                            'Invalid Quantity of ' + $("#description-" + i).text(),
                            "Invalid Quantity of " + $("#description-" + i).text() + " Kindly Set it",
                            'error'
                        );
                        issue = true;
                        return false;
                    }

                    if (parseInt($("#ringerqty-" + i).text()) > parseInt($("#saleslimit-" + i).text())) {
                        $("#saleslimitexeeded-" + i).val("true");
                    }
                    else {
                        $("#saleslimitexeeded-" + i).val("false");
                    }
    @*if ('@requestapprove' == 'False') {

                        if ($("#saleslimitexeeded-" + i).val() == "true") {
                        Swal.fire(
                        'Ringer Quantity Exceeded of ' + $("#description-" + i).text(),
                        /*"Ringer Quantity of " + $("#description-" + i).text() + " is Greater then Shipment Limit.. Kindly Set it",*/
                        "Kindy Send Request For Approval",
                        'error'
                        );
                        issue = true;
                        return false;
                        }

                        //if (parseInt($("#Quantity-" + i).text()) < parseInt($("#ringer-" + i).text())) {
                        //    Swal.fire(
                        //        'Ringer Quantity Exceeded of ' + $("#description-" + i).text(),
                        //       /* "Ringer Quantity is greater than  quantity of " + $("#description-" + i).text() + "",*/
                        //        "Kindy Send Request For Approval",
                        //        'error'
                        //    );
                        //    issue = true;
                        //    return false;
                        //    }
                        }*@



                       if (parseInt($("#ringerqty-" + i).text()) > parseInt($("#saleslimit-" + i).text())) {
                        //issue = true;
                        $.confirm({
                            title: 'Message',
                            content: "You ringged up for " + $("#description-" + i).text() + " with greater quantity than Sales limit",
                            buttons: {
                                confirm: function () {
                                    //window.isSuperVisorCreditSuccess = true;
                                    //InsertSaleDetails(printorNotStatus, updatestatus);
                                    $("#supervisorModal").modal("show");
                                },
                                //cancel: function () {
                                //},

                            }
                        });

                        issue = true;


                        //Swal.fire(
                        //    "Message",
                        //    "You ringged up for " + $("#description-" + i).text() + " with greater quantity than Sales limit",
                        //    'error'
                        //);
                        //issue = true;
                        //return false;

                    }


                    var needhighotherizationstatus = $("#needhighotherization-" + i).text();
                    var booldata = needhighotherizationstatus;
                    var highlimiton = parseInt($("#highlimiton-" + i).text());
                    var ringerquantity = parseInt($("#ringerqty-" + i).text());
                    if (booldata == "true") {
                        var itemid = parseInt($("#itemid-" + i).text());
                        $("#approvedetails").attr("data-itemId", itemid);
                        $("#approvedetails").attr("data-ticketID", '@ViewBag.InvoiceNumber');

                        if (ringerquantity >= highlimiton) {
                            //$("#input-delivery").modal('show');
                            exceedlimit = true;
                            productname += $("#description-" + i).text() + ", ";

                        }
                        else {
                            return true;
                        }
                    }

                }
            });
            i++;
            //alert(2);

            if (issue == true) {
                return false;
            }
            //alert(3);
            if (i == 1) {
                Swal.fire(
                    "Message",
                    "Kindly Select Any Item",
                    'error'
                );
                issue = true;
                return false;
            }
            var customerId = $("#customerid").val();

            if (customerId == "") {
                Swal.fire(
                    "Message",
                    "Kindly Select Customer",
                    'error'
                );
                issue = true;
                return false;
            }

            if (issue == true) {
                return false;
            }


            if (update == false) {
                if (exceedlimit == true) {
                    $("#productnamE").html(productname);
                    $("#input-delivery").modal('show');
                }
            }
            if (issue == true) {
                return false;
            }


            if ($("#previousbalance").val() == "" || $("#previousbalance").val() == null) {

                window.isSuperVisorCreditSuccess = true;
                InsertSaleDetailsWithPayment(printorNotStatus, updatestatus);
            }
            else {
                var amount = $("#remainingamount").text();
                if ($("#isBilltoBill").text() == "0" && $("#isBilltoBill").text() == 0 && amount != "" && amount != "0") {
                    Swal.fire(
                        'Customer Bill to Bill Is Set',
                        "Customer have to pay previous Balance of " + pendingAmount + "$ ",
                        'error'
                    )
                } else {
                    $("#receivablesid").modal("hide");
                    $("#CustomerShortModal").modal("hide");
                    $("#supervisorModal").modal("show");

                }
            }

        }
    }



    function InsertSaleDetailsWithPayment(printorNot, update) {

        var customername = $("#searchname").val();
        var customercode = $("#customercodeinfo").val();
        var CustomerID = $("#customerid").val();
        var saleman = $("#salesmanid").text();
        var invoicenumber = $("#invoicenumber").val();
        var invoicetotal = $("#invoicetotal").val();
        var discountidadd = $("#discountidadd").val();
        var subtotal = $("#subtotalauto").val();
        var otherid = $("#otherid").val();
        var taxid = $("#taxid").val();
        var freightid = $("#freightid").val();
        var GetSaleDiscount = $("#getsalediscount").is(':checked');
        var CountNumber = $("#countnum").text();
        var drivingLicense = $("#drivingLicense").val();
        var plateNo = $("#plateNo").val();

        var SaleDetails = new Array();
        $("#saletable TBODY TR").each(function () {
            if ($(this).find("#productId").val() == '') {
                RemoveRow(($(this).attr("id")).split("rowid-")[1]);
            }
        });
        var count1 = 1;
        $("#saletable TBODY TR").each(function () {
            var row = $(this);
            var Sale = {};
            if (row.find("TD").eq(14).html() == '') {
                RemoveRow(count1);
                //count1--;
                return;
            }
            Sale.ItemNumber = row.find("TD").eq(1).html();
            Sale.ItemNumber = Sale.ItemNumber.replace('-', '');
            Sale.ItemDescription = row.find("TD").eq(2).html();
            Sale.Quantity = row.find("TD").eq(3).html();
            Sale.AmountRetail = row.find("TD").eq(4).html();
            Sale.InDiscount = row.find("TD").eq(5).html();
            Sale.OutDiscount = row.find("TD").eq(6).html();
            Sale.InUnits = row.find("TD").eq(7).html();
            Sale.OutUnits = row.find("TD").eq(8).html();
            Sale.Price = row.find("TD").eq(9).html();
            Sale.Total = row.find("TD").eq(10).html();
            Sale.RingerQuantity = row.find("TD").eq(17).html();
            Sale.CustomerName = customername;
            Sale.CustomerNumber = customercode;
            Sale.CustomerID = CustomerID;
            Sale.ItemId = row.find("TD").eq(14).html();
            Sale.SaleManName = saleman;
            Sale.InvoiceNumber = invoicenumber;
            Sale.SubTotal = subtotal;
            Sale.InvoiceTotal = invoicetotal;
            //Sale.Discount = discountidadd;
            Sale.Charges = discountidadd;
            Sale.Other = otherid;
            Sale.Tax = taxid;
            Sale.Freight = freightid;
            Sale.ItemName = row.find("TD").eq(2).html();
            Sale.plateNo = plateNo;
            Sale.drivingLicense = drivingLicense;
            Sale.PossaleId = row.find("TD").eq(21).text();

            if (GetSaleDiscount == true) {
                Sale.GetSaleDiscount = "true";
            } else {

                Sale.GetSaleDiscount = "false";

            }
            if (printorNot) {
                Sale.IsPrintinvoice = true;
                Sale.IsClose = true;
                Sale.IsOpen = false;
            }
            else {
                Sale.IsClose = false;
                Sale.IsOpen = true;
            }
            if (Sale.IsPrintinvoice == true) {
                Sale.OnCredit = "true";
            }
            Sale.BusinessAddress = $("#bussinessAddress").text();
            if ($("#customerAddToMail").text() == "true") {
                Sale.AddToMailList = true;
            }
            else {
                Sale.AddToMailList = false;
            }
            Sale.CustomerEmail = $("#customerEmail").text();
            Sale.Count = CountNumber;
            Sale.SupervisorID = $("#supervisorId").text();

            //debugger;
            // Sale.GetSaleDiscount = GetSaleDiscount;

            //   alert(Sale.GetSaleDiscount);

            SaleDetails.push(Sale);
            count1++;
        });
        console.log(SaleDetails);


        if (customername != "" && customername != "undefined") {
            $("#ValCustomerName").hide();
            isValid = true;

        } else {
            $("#ValCustomerName").first().focus();
            $("#ValCustomerName").text("CustomerName Is Required.");
            $("#ValCustomerName").show();
            isValid = false;
        }
        if (customercode != "" && customercode != "undefined") {

            $("#ValCustomercode").hide();
            isValid = true;

        } else {
            $("#ValCustomercode").first().focus();
            $("#ValCustomercode").text("ValCustomercode Is Required.");
            $("#ValCustomercode").show();
            isValid = false;
        }
        var tablecount = $("#saletable TBODY TR").length;
        if (parseInt(tablecount) == 0) {
            isValid = false;
        }
        //debugger;
        if (window.isSuperVisorCreditSuccess == false) {
            isValid = false;
        }
        if (isValid == true) {
            if (update == false) {

                //debugger;
                var isamountValid = true;
                if ($("#isExclude").text() == "true") {
                    var amount = $("#remainingAmount").text();
                    if (amount != "") {
                        if (parseInt(amount) > 0) {
                            isamountValid = false;
                        }


                    }
                }
                if ($("#isBilltoBill").text() == "0" && $("#isBilltoBill").text() == 0 && amount != "" && amount != "0") {
                    Swal.fire(
                        'Customer Bill to Bill Is Set',
                        "Customer have to pay previous Balance of " + pendingAmount + "$ ",
                        'error'
                    )
                } else {
                    if (isamountValid) {
                        if ($("#isPopupMessage").text() == "true") {
                            Swal.fire({
                                title: $("#popupMessage").text(),
                                confirmButtonText: 'OK',
                                showCancelButton: true,
                            }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                    $.ajax({
                                        type: "POST",
                                        url: '@Url.Action("AddSalePos", "Sale")',
                                        data: JSON.stringify(SaleDetails),
                                        // data: { 'SaleDetails': SaleDetails},
                                        contentType: "application/json; charset=utf-8",
                                        dataType: "json",
                                        async: false,
                                        cache: false,
                                        success: function (data) {
                                            if (data == true) {

                                                toastr.success('Invoice Saved Successfully');
                                                setTimeout(function () {
                                                    if (printorNot == true) {
                                                        var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                        window.open(actionUrl);
                                                        location.reload();
                                                    }
                                                    else {
                                                        location.reload();
                                                    }
                                                }, 2500);

                                            } else {
                                                toastr.error('Invoice failed to save');

                                            }
                                        }
                                    });
                                }
                            })
                        }
                        else {

                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("AddSalePos", "Sale")',

                                data: JSON.stringify(SaleDetails),
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                async: false,
                                cache: false,
                                success: function (data) {
                                    if (data == true) {
                                        if (printorNot == true) {
                                            var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                            window.open(actionUrl);
                                            location.reload();
                                        }
                                        else {
                                            location.reload();
                                        }
                                    }
                                }
                            });
                        }
                    }
                    else {
                        var pendingAmount = $("#remainingAmount").text();
                        Swal.fire(
                            'Customer Amount Pending',
                            "Customer have to pay " + pendingAmount + "$ ",
                            'error'
                        )

                    }




                }

            }
            else {
                $.confirm({
                    title: 'Update Sale Invoice!',
                    content: 'Are you sure to Update Invoice?',
                    buttons: {
                        confirm: function () {
                            //debugger;
                            var isamountValid = true;
                            if ($("#isExclude").text() == "true") {
                                var amount = $("#remainingAmount").text();
                                if (amount != "") {
                                    if (parseInt(amount) > 0) {
                                        isamountValid = false;
                                    }
                                }
                            }
                            if (isamountValid) {
                                if ($("#isPopupMessage").text() == "true") {
                                    Swal.fire({
                                        title: $("#popupMessage").text(),
                                        confirmButtonText: 'OK',
                                        showCancelButton: true,
                                    }).then((result) => {
                                        /* Read more about isConfirmed, isDenied below */
                                        if (result.isConfirmed) {
                                            $.ajax({
                                                type: "POST",
                                                url: '@Url.Action("UpdateSalePos", "Sale")',

                                                data: { 'SaleDetails': SaleDetails },
                                                //contentType: "application/json; charset=utf-8",
                                                dataType: "json",
                                                success: function (data) {
                                                    if (data == true) {
                                                        if (printorNot == true) {
                                                            var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                            window.open(actionUrl);
                                                            location.reload();
                                                        }
                                                        else {
                                                            location.reload();
                                                        }
                                                    }
                                                }
                                            });
                                        }
                                    })
                                }
                                else {
                                    $.ajax({
                                        type: "POST",
                                        url: '@Url.Action("UpdateSalePos", "Sale")',

                                        data: JSON.stringify(SaleDetails),
                                        contentType: "application/json; charset=utf-8",
                                        dataType: "json",
                                        success: function (data) {
                                            if (data == true) {
                                                if (printorNot == true) {
                                                    var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                    window.open(actionUrl);
                                                    location.reload();
                                                }
                                                else {
                                                    location.reload();
                                                }
                                            }
                                        }
                                    });
                                }
                            }
                            else {
                                var pendingAmount = $("#remainingAmount").text();
                                Swal.fire(
                                    'Customer Amount Pending',
                                    "Customer have to pay " + pendingAmount + "$ ",
                                    'error'
                                )

                            }
                        },
                        cancel: function () {
                        },
                    }
                });
            }

        }
    }


    $(document).ready(function () {
        $('#myButton').hide();
        $('#myButton').click(function () {
            var balanceValue = $('#BalanceP').text();
            var invoiceBalance = $("#BalanceDueP").text();
            var cleanBalanceValue = balanceValue.replace(/\(|\)/g, '');

            $('#totalpaidd').text(invoiceBalance);
            $('#ChangeP').val(cleanBalanceValue);
            $('#rightButton').show();
            $("#rightButton").prop("disabled", false);
            $('#myButton').hide();
            $('#BalanceP').text('0');


        });
        $('#rightButton').click(function () {
            var changeValue = $('#ChangeP').val();
            changeValue = abc_general.dollarRemove(changeValue);
            changeValue = abc_general.dollarParenthAdd(changeValue);
            var totalPayAmount = $('#TotalPaidP').text();
            $('#totalpaidd').text(totalPayAmount);
            $('#BalanceP').text(changeValue);
            $('#ChangeP').val('0');
            $('#rightButton').hide();
            $('#myButton').show();
            $("#myButton").prop("disabled", false);
        });
    });


    $(document).ready(function () {
        
        $('#thumbLeftButton').hide();
        $('#thumbLeftButton').click(function () {  
            debugger;
            var balanceValue = $('#CustomerBalanceDue').text();
            var customerBalance = $("#CustomerBalance").val();
            var cleanBalanceValue = balanceValue.replace(/\(|\)/g, '');

            $("#totalAmountAllocation").text(customerBalance);
            $('#ChangeAmount').val(cleanBalanceValue);
            $('#thumbRightButton').show();
            $("#thumbRightButton").prop("disabled", false);
            $('#thumbLeftButton').hide();
            $('#CustomerBalanceDue').text('0');
 
        });
        $('#thumbRightButton').click(function () {
            debugger;
            var changeValue = $('#ChangeAmount').val();
            changeValue = abc_general.dollarRemove(changeValue);
            changeValue = abc_general.dollarParenthAdd(changeValue);
            var TotalPaidAmount = $("#TotalPaidAmount").text();
            $("#totalAmountAllocation").text(TotalPaidAmount);
            $('#CustomerBalanceDue').text(changeValue);
            $('#ChangeAmount').val('0');
            $('#thumbRightButton').hide();
            $('#thumbLeftButton').show();
            $("#thumbLeftButton").prop("disabled", false);
        });
    });


    function MultiPaymentAdd(val) {
        debugger;
        var paymentsSum = 0;
        $("#CusMultiPaymentsTable tr").each(function (index, value) {
            //debugger;
            if (index > 0) {
                var self = $(this);

                if (!abc_general.isNullOrEmpty(self.find("td:eq(0)").text())) {
                    var paidAmount = parseFloat(abc_general.dollarRemove(self.find("td:eq(0)").text()));
                    paymentsSum = paymentsSum + paidAmount;
                    paymentsSum = parseFloat(paymentsSum.toFixed(2));
                }
            }
        });

        var amountpayed =  abc_general.dollarRemove($("#amountpayed-" + val).text());
        var CusBalanceDue =  abc_general.parenthRemove($("#CustomerBalance").val(), '(');
        if (amountpayed != "" && isNaN(amountpayed) == false) {
            $("#TotalPaidAmount").text(abc_general.dollarAdd(paymentsSum));
            $('#thumbRightButton').show();
            $('#thumbLeftButton').hide();
                
            if (parseFloat(paymentsSum) > parseFloat(CusBalanceDue)) {
                $("#amountallocate-" + val).text(parseFloat(amountpayed).toFixed(2));
                $("#totalAmountAllocation").text(abc_general.dollarAdd(parseFloat(paymentsSum).toFixed(2)));
                $("#thumbLeftButton").prop("disabled", false);
                $('#thumbLeftButton').show();
                $('#thumbRightButton').hide();

                var change = parseFloat(paymentsSum) - parseFloat(CusBalanceDue);
                $("#ChangeAmount").val(abc_general.dollarAdd(0.00));
                $("#CustomerBalanceDue").text(abc_general.dollarParenthAdd(change.toFixed(2)));
            } else {
                $("#thumbRightButton").prop("disabled", true);
                $('#thumbLeftButton').hide();
                $('#thumbRightButton').show();
                $("#amountallocate-" + val).text(parseFloat(amountpayed).toFixed(2));
                $("#totalAmountAllocation").text(abc_general.dollarAdd(parseFloat(paymentsSum).toFixed(2)));

                var balance = parseFloat(CusBalanceDue) - parseFloat(paymentsSum);
                $("#ChangeAmount").val(abc_general.dollarAdd(0.00));
                $("#CustomerBalanceDue").text(abc_general.parenthAdd(balance.toFixed(2)));
            }
        } else if (amountpayed == "" || isNaN(amountpayed) == true) {

            $("#TotalPaidAmount").text('');
            $("#totalAmountAllocation").text('');
            $("#ChangeAmount").val('');
            $("#amountallocate-" + val).text('');
            $("#CustomerBalanceDue").text(abc_general.dollarAdd(CusBalanceDue));
            Swal.fire('Please Enter Numeric Value');
        }

    }


    function PaymentAdd(val) {
        var paymentsSum = 0;
        $("#Custpaymenttable tr").each(function (index, value) {
             //debugger;
             if(index > 0){
                 var self = $(this);
                 if(!abc_general.isNullOrEmpty(self.find("td:eq(0)").text())){
                    var paidAmount = parseFloat(abc_general.dollarRemove(self.find("td:eq(0)").text()));
                    paymentsSum = paymentsSum + paidAmount;
                    paymentsSum = parseFloat(paymentsSum.toFixed(2));
                 }
             }
        });


        var amountpayed = abc_general.dollarRemove($("#amountpayed-" + val).text());
        var Balanceduep = abc_general.parenthRemove($("#BalanceDueP").text(),'(');
        if (amountpayed != "" && isNaN(amountpayed) == false) {
            $("#TotalPaidP").text(abc_general.dollarAdd(paymentsSum));
            $('#rightButton').show();
            $('#myButton').hide();
                
            if (parseFloat(paymentsSum) > parseFloat(Balanceduep)) {
                $("#amountallocate-" + val).text(parseFloat(amountpayed).toFixed(2));
                $("#totalpaidd").text(abc_general.dollarAdd(parseFloat(paymentsSum).toFixed(2)));
                $("#myButton").prop("disabled", false);
                $('#myButton').show();
                $('#rightButton').hide();

                var change = parseFloat(paymentsSum) - parseFloat(Balanceduep);
                $("#ChangeP").val(abc_general.dollarAdd(0.00));
                $("#BalanceP").text(abc_general.dollarParenthAdd(change.toFixed(2)));
            } else {
                $("#myButton").prop("disabled", true);
                $('#myButton').hide();
                $('#rightButton').show();

                $("#amountallocate-" + val).text(parseFloat(amountpayed).toFixed(2));
                $("#totalpaidd").text(abc_general.dollarAdd(parseFloat(paymentsSum).toFixed(2)));

                var balance = parseFloat(Balanceduep) - parseFloat(paymentsSum);
                $("#ChangeP").val(abc_general.dollarAdd(0.00));
                $("#BalanceP").text(abc_general.dollarAdd(balance.toFixed(2)));
            }
        } else if (amountpayed == "" || isNaN(amountpayed) == true) {

            $("#TotalPaidP").text('');
            $("#totalpaidd").text('');
            $("#ChangeP").val('');
            $("#amountallocate-" + val).text('');
            $("#BalanceP").text(abc_general.dollarAdd(Balanceduep));
            Swal.fire('Please Enter Numeric Value');
        }

        // PaymentAdd2(val);
    }
    function PaymentAdd2(val) {

        var calculated_total_sum = 0;
        $("#Custpaymenttable .txtCal").each(function (id, value) {
            id = id + 1;
            var get_textbox_value = $(this).text();
            if ($("#cardnumber-" + id).hasClass("CreditC")) {
                if ($.isNumeric(get_textbox_value)) {

                    var amountvalue = 0;
                    amountvalue = $("#amountpayed-" + id).text();
                    var percentage = (amountvalue * 2) / 100;

                    var tofixedvalue = percentage.toFixed(2);

                    calculated_total_sum += parseFloat(tofixedvalue);
                }
            }
        });

        //var getamcValue = $("#TotalPaidP").text();
        //getamcValue = getamcValue.replace("$", "");
        //getamcValue = parseFloat(getamcValue);
        //var TotalAmountIs = getamcValue + calculated_total_sum;
        //console.log("hi" + calculated_total_sum);
        //console.log(getamcValue);
        //$("#TotalPaidP").text(TotalAmountIs.toFixed(2));
        //$("#totalpaidd").text(TotalAmountIs.toFixed(2));
    }


    // Invoice First Save

    function creditCheckOnlyInv(printorNot, update) {

        printorNotStatus = printorNot;
        updatestatus = update;
        window.isSuperVisorCreditSuccess = false;
        GetCompanyByID($("#customerid").val());
        var CheckCreditAllow = $("#iscredithold").text();
        console.log(CheckCreditAllow);
        if (CheckCreditAllow != "" && CheckCreditAllow != null && CheckCreditAllow != "0" && CheckCreditAllow != 0 && CheckCreditAllow == false) {
            Swal.fire(
                'Customer Credit is On Hold',
                "Please Proceed with invoice payment",
                'error'
            )

        } else {

            var i = 1;
            var issue = false;
            var productname = "";
            var exceedlimit = false;
            $(".saleslimitexeeded").each(function () {
                var description = $("#description-" + i).text();
                //console.log("hello" + description);

                if (description == "") {
                    $("#delete-" + i).trigger("click");
                }
                i++;
            });
            i = 1;
            $(".saleslimitexeeded").each(function () {
                //alert(1);
                if (update == false) {
                    var quantity = $("#ringerqty-" + i).text();
                    if (quantity == "") {
                        quantity = "0";
                    }

                    var getStock = $("#stockno-" + i).text();
                    if (getStock == null || getStock == 0 || getStock == "" || getStock == "undefined") {
                        Swal.fire(
                            "Stock is not available",
                            "you cannot sale " + $("#description-" + i).text() + " because stock is not available.. Kindly Set it",
                            'error'
                        );
                        $("#delete-" + i).trigger("click");
                        issue = true;
                        return false;
                    }
                    if (parseInt(quantity) > parseInt(getStock)) {
                        /*alert('you cannot excede the existing stock');*/
                        Swal.fire(
                            'Invalid Quantity of ' + $("#description-" + i).text(),
                            "you cannot sale " + $("#description-" + i).text() + " because quantity is exceeded than stock.. Kindly Set it",
                            'error'
                        );
                        $("#delete-" + i).trigger("click");
                        issue = true;
                        return false;
                    }
                    if ($("#ringerqty-" + i).text() == "" || !/^[0-9]+$/.test($("#ringerqty-" + i).text()) || $("#ringerqty-" + i).text() == "0") {
                        Swal.fire(
                            'Invalid Quantity of ' + $("#description-" + i).text(),
                            "Invalid Quantity of " + $("#description-" + i).text() + " Kindly Set it",
                            'error'
                        );
                        issue = true;
                        return false;
                    }

                    if (parseInt($("#ringerqty-" + i).text()) > parseInt($("#saleslimit-" + i).text())) {
                        $("#saleslimitexeeded-" + i).val("true");
                    }
                    else {
                        $("#saleslimitexeeded-" + i).val("false");
                    }
    @*if ('@requestapprove' == 'False') {

                        if ($("#saleslimitexeeded-" + i).val() == "true") {
                        Swal.fire(
                        'Ringer Quantity Exceeded of ' + $("#description-" + i).text(),
                        /*"Ringer Quantity of " + $("#description-" + i).text() + " is Greater then Shipment Limit.. Kindly Set it",*/
                        "Kindy Send Request For Approval",
                        'error'
                        );
                        issue = true;
                        return false;
                        }

                        //if (parseInt($("#Quantity-" + i).text()) < parseInt($("#ringer-" + i).text())) {
                        //    Swal.fire(
                        //        'Ringer Quantity Exceeded of ' + $("#description-" + i).text(),
                        //       /* "Ringer Quantity is greater than  quantity of " + $("#description-" + i).text() + "",*/
                        //        "Kindy Send Request For Approval",
                        //        'error'
                        //    );
                        //    issue = true;
                        //    return false;
                        //    }
                        }*@



                                if (parseInt($("#ringerqty-" + i).text()) > parseInt($("#saleslimit-" + i).text())) {
                        //issue = true;
                        $.confirm({
                            title: 'Message',
                            content: "You ringged up for " + $("#description-" + i).text() + " with greater quantity than Sales limit",
                            buttons: {
                                confirm: function () {
                                    //window.isSuperVisorCreditSuccess = true;
                                    //InsertSaleDetails(printorNotStatus, updatestatus);
                                    $("#supervisorModal").modal("show");
                                },
                                //cancel: function () {
                                //},

                            }
                        });

                        issue = true;


                        //Swal.fire(
                        //    "Message",
                        //    "You ringged up for " + $("#description-" + i).text() + " with greater quantity than Sales limit",
                        //    'error'
                        //);
                        //issue = true;
                        //return false;

                    }


                    var needhighotherizationstatus = $("#needhighotherization-" + i).text();
                    var booldata = needhighotherizationstatus;
                    var highlimiton = parseInt($("#highlimiton-" + i).text());
                    var ringerquantity = parseInt($("#ringerqty-" + i).text());
                    if (booldata == "true") {
                        var itemid = parseInt($("#itemid-" + i).text());
                        $("#approvedetails").attr("data-itemId", itemid);
                        $("#approvedetails").attr("data-ticketID", '@ViewBag.InvoiceNumber');

                        if (ringerquantity >= highlimiton) {
                            //$("#input-delivery").modal('show');
                            exceedlimit = true;
                            productname += $("#description-" + i).text() + ", ";

                        }
                        else {
                            return true;
                        }
                    }

                }
            });
            i++;
            //alert(2);

            if (issue == true) {
                return false;
            }
            //alert(3);
            if (i == 1) {
                Swal.fire(
                    "Message",
                    "Kindly Select Any Item",
                    'error'
                );
                issue = true;
                return false;
            }
            var customerId = $("#customerid").val();

            if (customerId == "") {
                Swal.fire(
                    "Message",
                    "Kindly Select Customer",
                    'error'
                );
                issue = true;
                return false;
            }

            if (issue == true) {
                return false;
            }


            if (update == false) {
                if (exceedlimit == true) {
                    $("#productnamE").html(productname);
                    $("#input-delivery").modal('show');
                }
            }
            if (issue == true) {
                return false;
            }


            if ($("#previousbalance").val() == "" || $("#previousbalance").val() == null) {

                window.isSuperVisorCreditSuccess = true;
                InsertSaleDetailsOnlyInv(printorNotStatus, updatestatus);
            }
            else {
                var amount = $("#remainingamount").text();
                if ($("#isBilltoBill").text() == "0" && $("#isBilltoBill").text() == 0 && amount != "" && amount != "0") {
                    Swal.fire(
                        'Customer Bill to Bill Is Set',
                        "Customer have to pay previous Balance of " + pendingAmount + "$ ",
                        'error'
                    )
                } else {
                    $("#supervisorModal").modal("show");

                }
            }

        }
    }




    function InsertSaleDetailsOnlyInv(printorNot, update) {

        var customername = $("#searchname").val();
        var customercode = $("#customercodeinfo").val();
        var CustomerID = $("#customerid").val();
        var saleman = $("#salesmanid").text();
        var invoicenumber = $("#invoicenumber").val();
        var invoicetotal = $("#invoicetotal").val();
        var discountidadd = $("#discountidadd").val();
        var subtotal = $("#subtotalauto").val();
        var otherid = $("#otherid").val();
        var AccNum = $("#Accountnumber").val();
        var taxid = $("#taxid").val();
        var freightid = $("#freightid").val();
        var GetSaleDiscount = $("#getsalediscount").is(':checked');
        var CountNumber = $("#countnum").text();
        var drivingLicense = $("#drivingLicense").val();
        var plateNo = $("#plateNo").val();

        var SaleDetails = new Array();
        $("#saletable TBODY TR").each(function () {
            if ($(this).find("#productId").val() == '') {
                RemoveRow(($(this).attr("id")).split("rowid-")[1]);
            }
        });
        var count1 = 1;
        $("#saletable TBODY TR").each(function () {
            var row = $(this);
            var Sale = {};
            if (row.find("TD").eq(14).html() == '') {
                RemoveRow(count1);
                //count1--;
                return;
            }
            Sale.ItemNumber = row.find("TD").eq(1).html();
            Sale.ItemNumber = Sale.ItemNumber.replace('-', '');
            Sale.ItemDescription = row.find("TD").eq(2).html();
            Sale.Quantity = row.find("TD").eq(3).html();
            Sale.AmountRetail = row.find("TD").eq(4).html();
            Sale.InDiscount = row.find("TD").eq(5).html();
            Sale.OutDiscount = row.find("TD").eq(6).html();
            Sale.InUnits = row.find("TD").eq(7).html();
            Sale.OutUnits = row.find("TD").eq(8).html();
            Sale.Price = row.find("TD").eq(9).html();
            Sale.Total = row.find("TD").eq(10).html();
            Sale.RingerQuantity = row.find("TD").eq(17).html();
            Sale.CustomerName = customername;
            Sale.CustomerNumber = customercode;
            Sale.CustomerID = CustomerID;
            Sale.ItemId = row.find("TD").eq(14).html();
            Sale.SaleManName = saleman;
            Sale.InvoiceNumber = invoicenumber;
            Sale.InvoiceTotal = invoicetotal;
            Sale.Charges = discountidadd;
            Sale.SubTotal = subtotal;
            Sale.Other = otherid;
            Sale.CustomerAccountNumber = AccNum;
            Sale.Tax = taxid;
            Sale.Freight = freightid;
            Sale.ItemName = row.find("TD").eq(2).html();
            Sale.plateNo = plateNo;
            Sale.drivingLicense = drivingLicense;
            Sale.PossaleId = row.find("TD").eq(21).text();
            if (GetSaleDiscount == true) {
                Sale.GetSaleDiscount = "true";
            } else {

                Sale.GetSaleDiscount = "false";

            }
            if (printorNot) {
                Sale.IsPrintinvoice = true;
                Sale.IsClose = true;
                Sale.IsOpen = false;

            }
            else {
                Sale.IsClose = false;
                Sale.IsOpen = true;
            }

            if (Sale.IsPrintinvoice == true) {
                Sale.OnCredit = "true";
            }
            Sale.BusinessAddress = $("#bussinessAddress").text();
            if ($("#customerAddToMail").text() == "true") {
                Sale.AddToMailList = true;
            }
            else {
                Sale.AddToMailList = false;
            }
            Sale.CustomerEmail = $("#customerEmail").text();
            Sale.Count = CountNumber;
            Sale.SupervisorID = $("#supervisorId").text();

            //debugger;
            // Sale.GetSaleDiscount = GetSaleDiscount;

            //   alert(Sale.GetSaleDiscount);

            SaleDetails.push(Sale);
            count1++;
        });
        console.log(SaleDetails);


        if (customername != "" && customername != "undefined") {
            $("#ValCustomerName").hide();
            isValid = true;

        } else {
            $("#ValCustomerName").first().focus();
            $("#ValCustomerName").text("CustomerName Is Required.");
            $("#ValCustomerName").show();
            isValid = false;
        }
        if (customercode != "" && customercode != "undefined") {

            $("#ValCustomercode").hide();
            isValid = true;

        } else {
            $("#ValCustomercode").first().focus();
            $("#ValCustomercode").text("ValCustomercode Is Required.");
            $("#ValCustomercode").show();
            isValid = false;
        }
        var tablecount = $("#saletable TBODY TR").length;
        if (parseInt(tablecount) == 0) {
            isValid = false;
        }
        //debugger;
        if (window.isSuperVisorCreditSuccess == false) {
            isValid = false;
        }
        if (isValid == true) {
            if (update == false) {
                $.confirm({
                    title: 'Save New Sale Invoice!',
                    content: 'Are you sure to save new Sale Invoice?',
                    buttons: {
                        confirm: function () {
                            //debugger;
                            var isamountValid = true;
                            if ($("#isExclude").text() == "true") {
                                var amount = $("#remainingAmount").text();
                                if (amount != "") {
                                    if (parseInt(amount) > 0) {
                                        isamountValid = false;
                                    }


                                }
                            }
                            if ($("#isBilltoBill").text() == "0" && $("#isBilltoBill").text() == 0 && amount != "" && amount != "0") {
                                Swal.fire(
                                    'Customer Bill to Bill Is Set',
                                    "Customer have to pay previous Balance of " + pendingAmount + "$ ",
                                    'error'
                                )
                            } else {
                                if (isamountValid) {
                                    if ($("#isPopupMessage").text() == "true") {
                                        Swal.fire({
                                            title: $("#popupMessage").text(),
                                            confirmButtonText: 'OK',
                                            showCancelButton: true,
                                        }).then((result) => {
                                            /* Read more about isConfirmed, isDenied below */
                                            if (result.isConfirmed) {
                                                $.ajax({
                                                    type: "POST",
                                                    url: '@Url.Action("AddSalePos", "Sale")',
                                                    data: JSON.stringify(SaleDetails),
                                                    // data: { 'SaleDetails': SaleDetails},
                                                    contentType: "application/json; charset=utf-8",
                                                    dataType: "json",
                                                    async: false,
                                                    cache: false,
                                                    success: function (data) {
                                                        //debugger;
    @*if (data.success) {
                                                            var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                            window.open(actionUrl);
                                                            location.reload();
                                                            }*@
                                                                    if (data == true) {

                                                            toastr.success('Invoice Saved Successfully');

                                                        }
                                                    }
                                                });
                                            }
                                        })
                                    }
                                    else {

                                        $.ajax({
                                            type: "POST",
                                            url: '@Url.Action("AddSalePos", "Sale")',

                                            data: JSON.stringify(SaleDetails),
                                            contentType: "application/json; charset=utf-8",
                                            dataType: "json",
                                            async: false,
                                            cache: false,
                                            success: function (data) {
                                                //debugger;
    @*if (data.success) {
                                                    window.location.href = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                    //window.open('Purchase/PurchaseInvoice','_blank');
                                                    }*@
                                                    toastr.success('Invoice Saved Successfully');
                                                window.location.reload();
                                            }
                                        });
                                    }
                                }
                                else {
                                    var pendingAmount = $("#remainingAmount").text();
                                    Swal.fire(
                                        'Customer Amount Pending',
                                        "Customer have to pay " + pendingAmount + "$ ",
                                        'error'
                                    )

                                }
                            }

                        },
                        cancel: function () {
                        },
                    }
                });
            }
            else {
                $.confirm({
                    title: 'Update Sale Invoice!',
                    content: 'Are you sure to Update Invoice?',
                    buttons: {
                        confirm: function () {
                            //debugger;
                            var isamountValid = true;
                            if ($("#isExclude").text() == "true") {
                                var amount = $("#remainingAmount").text();
                                if (amount != "") {
                                    if (parseInt(amount) > 0) {
                                        isamountValid = false;
                                    }
                                }
                            }
                            if (isamountValid) {
                                if ($("#isPopupMessage").text() == "true") {
                                    Swal.fire({
                                        title: $("#popupMessage").text(),
                                        confirmButtonText: 'OK',
                                        showCancelButton: true,
                                    }).then((result) => {
                                        /* Read more about isConfirmed, isDenied below */
                                        if (result.isConfirmed) {
                                            $.ajax({
                                                type: "POST",
                                                url: '@Url.Action("UpdateSalePos", "Sale")',

                                                data: { 'SaleDetails': SaleDetails },
                                                //contentType: "application/json; charset=utf-8",
                                                dataType: "json",
                                                success: function (data) {
                                                    //debugger;
    @*if (data.success) {
                                                        var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                        window.open(actionUrl);
                                                        location.reload();
                                                        }*@
                                                                    if (data == true) {
                                                        if (printorNot == true) {
                                                            var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                            window.open(actionUrl);
                                                            location.reload();
                                                        }
                                                        else {
                                                            location.reload();
                                                        }
                                                    }
                                                }
                                            });
                                        }
                                    })
                                }
                                else {
                                    $.ajax({
                                        type: "POST",
                                        url: '@Url.Action("UpdateSalePos", "Sale")',

                                        data: JSON.stringify(SaleDetails),
                                        contentType: "application/json; charset=utf-8",
                                        dataType: "json",
                                        success: function (data) {
                                            //debugger;
    @*if (data.success) {
                                                window.location.href = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                //window.open('Purchase/PurchaseInvoice','_blank');
                                                }*@
                                                            if (data == true) {
                                                if (printorNot == true) {
                                                    var actionUrl = '@Url.Action("SaleInvoicePdf", "Sale")';
                                                    window.open(actionUrl);
                                                    location.reload();
                                                }
                                                else {
                                                    location.reload();
                                                }
                                            }
                                        }
                                    });
                                }
                            }
                            else {
                                var pendingAmount = $("#remainingAmount").text();
                                Swal.fire(
                                    'Customer Amount Pending',
                                    "Customer have to pay " + pendingAmount + "$ ",
                                    'error'
                                )

                            }
                        },
                        cancel: function () {
                        },
                    }
                });
            }

        }
    }





    $("#InvFirst-1").click(function () {
        // creditCheckOnlyInv(true, false);

        var customername = $("#searchname").val();
        var customercode = $("#customercodeinfo").val();
        var customerID = $("#customerid").val();
        var saleman = $("#salesmanid").text();
        var invoicenumber = $("#invoicenumber").val();
        var invoicetotal = $("#invoicetotal").val();
        var balanceDueP = $("#BalanceDueP").text();
        var totalPaidP = $("#TotalPaidP").text();
        var totalpaidd = $("#totalpaidd").text();
        var changeP = $("#ChangeP").val();
        var BalanceP = $("#BalanceP").text();

        var SaleDetails = new Array();
        var count1 = 1;
        $("#Custpaymenttable TBODY TR").each(function () {
            var row = $(this);
            var Sale = {};

            var xx = $("#selectid-" + count1).val();
            var zz = $("#DateP-" + count1).val();

            var aa = row.find("TD").eq(0).text();
            var bb = row.find("TD").eq(1).text();
            var cc = row.find("TD").eq(2).html();
            var dd = row.find("TD").eq(3).text();
            var ee = row.find("TD").eq(4).text();

            if (aa != null && aa != "" && aa != "undefined") {

                Sale.AmountPaid = row.find("TD").eq(0).text();
            }
            if (bb != null && bb != "" && bb != "undefined") {

                Sale.AmountAllocate = row.find("TD").eq(1).text();
            }
            if (cc != null && cc != "" && cc != "undefined") {

                //Sale.PaymentType = row.find("TD").eq(3).html();
                Sale.PaymentType = xx;
            }
            if (dd != null && dd != "" && dd != "undefined") {

                //Sale.ChequeNumber = row.find("TD").eq(4).html();
                Sale.ChequeNumber = dd;
            }
            if (ee != null && ee != "" && ee != "undefined") {

                //Sale.HoldDate = row.find("TD").eq(5).text();
                Sale.HoldDate = zz;
            }

            Sale.InvoiceNumber = invoicenumber;
            Sale.CustomerName = customername;
            Sale.CustomerCode = customercode;
            Sale.CustomerId = customerID;
            Sale.InvoiceBalance = invoicetotal;
            Sale.PreviousBalance = balanceDueP;
            Sale.TotalPaid = totalPaidP;
            var amc = $.trim(totalpaidd);
            Sale.TotalAmount = totalpaidd;
            Sale.Change = changeP;
            Sale.Balance = BalanceP;
            Sale.IsInvoicedPaid = true;

            SaleDetails.push(Sale);
            count1++;
        });
        console.log(SaleDetails);

        $.ajax({
            type: "POST",
            url: '@Url.Action("ChangePayment", "Sale")',
            async: false,
            data: JSON.stringify(SaleDetails),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                if (data == true) {
                    //swal("Success!", "Updated Successfully");
                    CustomerPMOdalhide();
                    // creditCheckWithPayment(true, false);
                    toastr.success('Payment Received');
                }

                else {
                    swal("Error!", "Unable to Update");
                }

            }
        });
    })

    // Append F3

    function GetItemDataAppendForDesModal3() {
        debugger;

        var jj = 1;
        $('#saletable tr').each(function () {
            var currentRow = $(this).closest("tr");
            var check = $("#rowid-" + jj).find("#itemnumber-" + jj).text();
            if (check[jj] == null || check[jj] == "") {
                RemoveRow(jj);
            }
            jj++
        });

        var count = 0;
        $(".add-row").trigger("click");

        $('#saletable tbody tr').each(function (index, tr) {

            count++;
        });

        var string = $("#Pcd").val();
        string = string.substring(0, 2) + '-' + string.substring(2, string.length);
        $("#itemnumber-" + count).text(string);
        var count1 = 0;
        var exist = 0;
        var notexist = true;
        $('#saletable tr').each(function (index, tr) {
            if (count1 > 0) {
                var Id = tr.attributes["id"].value.split("rowid-")[1];
                var productnumber = $("#itemnumber-" + Id).text();
                if (productnumber === string) {
                    exist++;
                }
                if (exist > 1) {
                    swal("Error!", "Item Already Added!", "error");
                    notexist = false;
                    RemoveRow(Id);
                    return false;
                }

            }

            count1++;
        });
        if (notexist == true) {
            GetItemByItemNumber(null, count);
            var itemquantity = $("#itemquantitylabel").val();
            $("#ringerqty-" + count).text(itemquantity);
            QuantityMultipyPrice(count);

        }
        CloseInventoryLookupModal();

    };


    function GetItemByIDaForShortModalF(val, indexex, qustmQty) {

        var count = 0;
        $('#saletable tbody tr').each(function (index, tr) {


            count++;
        });
        var seqnum = indexex;
        var id = parseInt(val);
        alert(id);
        console.log(id);
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockByID", "Items")',
            data: {
                id: id
            },
            dataType: 'json',
            success: function (data) {
                console.log("F###   " + data);
                //console.log("Hemlooooooooo",data);
                if (data != null && data != "" && data != "false") {
                    $("#itemid-" + indexex).text(data.id);
                    var count = 0;
                    var count1 = 0;
                    var exist = 0;
                    var notexist = true;
                    var count1 = 0;
                    $('#saletable tr').each(function (index, tr) {
                        if (count1 > 0) {
                            var Id = tr.attributes["id"].value.split("rowid-")[1];
                            /*var productId = parseInt($("#rowid-" + Id).find("#productId").val());*/
                            var productId = parseInt($("#itemid-" + Id).html());
                            if (productId === data.id) {
                                exist++;
                            }
                            if (exist > 1) {
                                swal("Error!", "Item Already Added!", "error");
                                notexist = false;
                                RemoveRow(Id);
                                return false;
                            }

                        }

                        count1++;

                    });
                    if (notexist == true) {

                        GetItemByItemNumber(null, count);
                        var itemquantity = $("#itemquantitylabel").val();
                        $("#ringerqty-" + count).text(itemquantity);
                        QuantityMultipyPrice(count);

                    }
                }
            },
            error: function (xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }

    //shortInventoryView
    function openinventory(idu) {
        //var cd = $("#Description-" + idu ).text();
        //var min = idu - 1;
        //var cd = $("#Description-" + min ).text();
        //idm = idu - 1 ;
        idm = idu;
        var av = $("#description-" + idm).text();
        if (av != null && av != "" && av != "undefined") {
            var az = $("#StockItemNumber-" + idm).text();
            var val = $("#itemid-" + idm).text().replace(/-/g, '');

            ItemByIDIV(val);
            $("#InventoryPartial").modal('show');
        }
        else {
            //$("#VendorDesModal").modal('show');
            //alert("Not Found");
        }
    }
    function CloseInventoryPartial() {
        $("#InventoryPartial").modal('hide');
    }
    function ItemByIDIV(val) {

        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockFinancialByID", "Items")',
            data: {
                id: id
            },
            dataType: 'json',
            // Success start

            success: function (data) {
                console.log("Here is data " + data);
                $("#existingitemnumbers").empty();
                //$("#defaultlisticonss").empty();

                var itennumberhtml = '';
                itennumberhtml += '<h3>';
                itennumberhtml += '<label id="itemlabel">ItemNumber:</label><span id="itemnumberfounds" class="itemnumberbox di"></span></br>';
                itennumberhtml += '<label id="qtylabel" class="mg-t-2">Qty In Stock:</label><span id="itemqtys" class="itemnumberbox di ml-2"></span></br>';
                itennumberhtml += '<label id="adjusmentlabel" class="mg-t-3">Adjustment:</label><span id="itemqtyadjusment" class="itemnumberbox ml-3">0.00</span>';
                itennumberhtml += '<span style="display:none" id="productid"></span>';
                itennumberhtml += ' </h3>';
                $("#existingitemnumbers").append(itennumberhtml);

                $("#onelisticon").hide();
                $("#onsaveicon").hide();
                $(".hide-icon").show();
                if (data != null && data != "undefined") {
                    GetStockLevelListItems(id);
                    if (data.itemImageByPath != null && data.itemImageByPath != "undefined") {
                        $("#output1s").attr("src", data.itemImageByPath);
                        $("#output1s").css("display", "block");
                    }
                    if (data.name != null && data.name != "undefined") {
                        $("#names").val(data.name);
                        $("#Names").val(data.name);
                    }
                    if (data.shipmentLimit != null && data.shipmentLimit != "undefined") {
                        $("#updateonlinelimits").val(data.shipmentLimit);
                    }
                    if (data.needHighAuthorization != null && data.needHighAuthorization != "undefined") {
                        if (data.needHighAuthorization == true) {
                            $('#EditCheckBoxNHAs').prop('checked', true);
                            $("#EditHighlimitOns").css("display", "block")
                        }
                        else {
                            $('#EditCheckBoxNHAs').prop('checked', false);
                        }
                    }
                    else {
                        $('#EditCheckBoxNHAs').prop('checked', false);
                    }
                    if (data.highlimitOn != null && data.highlimitOn != "undefined") {
                        $("#edithighlimitons").val(data.highlimitOn);
                    }
                    else {
                        $("#edithighlimitons").val("");
                    }

                    if ($('#EditCheckBoxNHAs').is(":checked")) {
                        $("#EditHighlimitOns").css("display", "block");
                    }
                    else {
                        $("#EditHighlimitOns").css("display", "none");
                    }

                    if (data.itemCategoryId != null && data.itemCategoryId != "undefined") {
                        $("#categorys").val(data.categoryName);
                    }
                    if (data.brandId != null && data.brandId != "undefined") {
                        $("#manufactures").val(data.brandName);
                    }
                    if (data.groupId != null && data.groupId != "undefined") {
                        $("#groups").val(data.groupId);
                    }
                    if (data.colorId != null && data.colorId != "undefined") {
                        $("#colors").val(data.colorName);
                    }
                    if (data.groupId != null && data.groupId != "undefined") {
                        $("#groups").val(data.group);
                    }
                    if (data.misPickId != null && data.misPickId != "undefined") {
                        $("#mispicks").val(data.misPickName);
                    }
                    if (data.familyId != null && data.familyId != "undefined") {
                        $("#familys").val(data.family);
                    }
                    //if (data.itemSubCategoryId != null && data.itemSubCategoryId!="undefined") {
                    //    $("#sub-categorys").val(data.subCatName);
                    //}
                    if (data.salesLimit != null && data.salesLimit != "undefined") {
                        $("#saleslimitnews").val(data.salesLimit);
                    }
                    if (data.maintainStockForDays != null && data.maintainStockForDays != "undefined") {
                        $("#MaintainStockForDayss").val(data.maintainStockForDays);
                        $("#MaintainStockForDayss").css("color", "black");
                    }
                    if (data.itemSubCategoryId != null && data.itemSubCategoryId != "undefined") {
                        $("#sub-categorys").val(data.subCatName);
                    }
                    if (data.units != null && data.units != "undefined") {
                        $("#unitss").val(data.units);
                    }
                    if (data.retail != null && data.retail != "undefined") {
                        $(".retails").val(data.retail);
                    }
                    if (data.unitCharge != null && data.unitCharge != "undefined") {
                        $("#unit-charges").val(data.unitCharge);
                    }
                    if (data.unitRetail != null && data.unitRetail != "undefined") {
                        $("#unit-retails").val(data.unitRetail);
                    }
                    if (data.barCode != null && data.barCode != "undefined") {
                        $("#barcodes").val(data.barCode);
                    }
                    if (data.quantityCase != null && data.quantityCase != "undefined") {
                        $("#qtycases").val(data.quantityCase);
                    }
                    if (data.quantityPallet != null && data.quantityPallet != "undefined") {
                        $("#qtypallets").val(data.quantityPallet);
                    }
                    if (data.singleUnitMsa != null && data.singleUnitMsa != "undefined") {
                        $("#sunitmsas").val(data.singleUnitMsa);
                    }
                    if (data.location != null && data.location != "undefined") {
                        $("#locationslots").val(data.location);
                    }
                    if (data.groupName != null && data.groupName != "undefined") {
                        $("#groups").val(data.groupName);
                    }
                    if (data.locationTwo != null && data.locationTwo != "undefined") {
                        $("#location2s").val(data.locationTwo);
                    }
                    if (data.misPickName != null && data.misPickName != "undefined") {
                        $("#mispicks").val(data.misPickName);
                    }
                    if (data.locationTwo != null && data.locationTwo != "undefined") {
                        $("#location3s").val(data.locationTwo);
                    } if (data.colorid != null && data.colorid != "undefined") {
                        $("#colors").val(data.colorid);
                    }
                    if (data.locationFour != null && data.locationFour != "undefined") {
                        $("#location4s").val(data.locationFour);
                    }
                    if (data.weightLb != null && data.weightLb != "undefined") {
                        $("#weightlbs").val(data.weightLb);
                    }
                    if (data.weightOz != null && data.weightOz != "undefined") {
                        $("#weightozs").val(data.weightOz);
                    }
                    if (data.orderQuantity != null && data.orderQuantity != "undefined") {
                        $("#orderqtys").val(data.orderQuantity)
                    }
                    if (data.minOrderQty != null && data.minOrderQty != "undefined") {
                        $("#minqtys").val(data.minOrderQty);
                    } if (data.maxOrderQty != null && data.maxOrderQty != "undefined") {
                        $("#maxqtys").val(data.maxOrderQty);
                    } if (data.itemNumber != null && data.itemNumber != "undefined") {
                        $("#itemnumberfounds").text(data.itemNumber);
                    }
                    if (data.id != null && data.id != "undefined") {
                        $("#id").val(data.id);
                    }
                    if (data.id != null && data.id != "undefined") {
                        $("#productid").text(data.id);
                    }
                    if (data.isActive != null && data.id != false) {
                        $("#IsActives").prop("Checked", true);
                    } else {
                        $("#IsActives").prop("Checked", false);
                    }

                    if (data.stock != null) {
                        if (data.stock.quantity != null && data.stock.quantity != "undefined") {
                            $("#itemqtys").text(data.stock.quantity);
                            //$('#progressbarheight').css("height", data.stock.quantity+'%');
                            //$('#progressbarheight').text(data.stock.quantity+"%");
                        }
                        else {
                            $("#itemqtys").text(0);
                        }
                    } else {
                        $("#itemqtys").text(0);
                    }

                    //financial
                    if (data.financial != null) {
                        if (data.financial.cost != null && data.financial.cost != "undefined") {
                            $("#costs").val(data.financial.cost);
                        }
                        if (data.financial.retail != null && data.financial.retail != "undefined") {
                            $(".retails").val(data.financial.retail);
                        }
                        if (data.financial.profit != null && data.financial.profit != "undefined") {
                            $("#profitpercnts").val(data.financial.profit);
                        }
                        if (data.financial.msgPromotion != null && data.financial.msgPromotion != "undefined") {
                            $("#mfgpromotions").val(data.financial.msgPromotion);
                        }

                        if (data.financial.addToCost != null && data.financial.addToCost != "undefined") {
                            $("#addtocosts").val(data.financial.addToCost);
                        } if (data.financial.unitCharge != null && data.financial.unitCharge != "undefined") {
                            $("#unitcharges").val(data.financial.unitCharge);
                        }
                        if (data.financial.outOfStateCost != null && data.financial.outOfStateCost != "undefined") {
                            $("#outofstatecosts").val(data.financial.outOfStateCost);
                        } if (data.financial.outOfStateRetail != null && data.financial.outOfStateRetail != "undefined") {
                            $("#outofstateretails").val(data.financial.outOfStateRetail);
                        }


                        if (data.financial.askForPricing == true) {
                            $("#askforpricings").prop('checked', true);
                        } else {
                            $("#askforpricings").prop('checked', false);
                        }
                        if (data.financial.askForDescrip == true) {
                            $("#askfordescs").prop('checked', true);
                        } else {
                            $("#askfordescs").prop('checked', false);
                        }
                        if (data.financial.serialized == true) {
                            $("#serializeds").prop('checked', true);
                        } else {
                            $("#serializeds").prop('checked', false);
                        }
                        if (data.financial.taxOnSales == true) {
                            $("#taxonsaless").prop('checked', true);
                        } else {
                            $("#taxonsaless").prop('checked', false);
                        }
                        if (data.financial.purchase == true) {
                            $("#purchases").prop('checked', true);
                        } else {
                            $("#purchases").prop('checked', false);
                        }
                        if (data.financial.noSuchDiscount == true) {
                            $("#nosuchdiscounts").prop('checked', true);
                        } else {
                            $("#nosuchdiscounts").prop('checked', false);
                        }
                        if (data.financial.noReturns == true) {
                            $("#noreturnss").prop('checked', true);
                        } else {
                            $("#noreturnss").prop('checked', false);
                        }
                        if (data.financial.sellBelowCost == true) {
                            $("#sellbelowcosts").prop('checked', true);
                        } else {
                            $("#sellbelowcosts").prop('checked', false);
                        }
                        $("#sgtdretailprices").val();

                        if (data.financial.autoSetSrp == true) {
                            $("#autosetsrps").prop('checked', true);
                        } else {
                            $("#autosetsrps").prop('checked', false);
                        }
                        // $("#percntN").val();
                        $(".retails").val(data.financial.retail);
                        if (data.financial.codeA == true) {
                            $("#codeas").prop('checked', true);
                        } else {
                            $("#codeas").prop('checked', false);
                        }
                        if (data.financial.codeB == true) {
                            $("#codebs").prop('checked', true);
                        } else {
                            $("#codebs").prop('checked', false);
                        }
                        if (data.financial.codeC == true) {
                            $("#codecs").prop('checked', true);
                        } else {
                            $("#codecs").prop('checked', false);
                        }
                        if (data.financial.codeD == true) {
                            $("#codeds").prop('checked', true);
                        } else {
                            $("#codeds").prop('checked', false);
                        }
                        if (data.financial.addCustomersDiscount == true) {
                            $("#addcustomersdiscounts").prop('checked', true);
                        } else {
                            $("#addcustomersdiscounts").prop('checked', false);
                        }
                    }

                    if (data.vendors != null && data.vendors.length > 0) {
                        $("#appendsuppliersmains").empty();
                        $.each(data.vendors, function (index, item) {

                            // var myitem = item.invoiceNumber.toString();

                            // console.log(myitem);
                            var html = '';
                            html += '<tr onclick="SupplierPartialModalP(' + item.id + ')">';
                            //html += '<td id="num' + index + '" ondblclick="PurchaseOrderPModal(' + index + ')" class="grids-td">' + item.supplierItemNumber.supplierItemNum + '</td>';
                            html += '<td style="" id="" class="grids-td">' + item.company + '</td>';
                            if (item.supplierItemNumber != null && item.supplierItemNumber != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.supplierItemNumber.supplierItemNum + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.caseQty + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.discount + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            html += '</tr > ';


                            $("#appendsuppliersmains").append(html);

                        });
                    }

                    if (data.vendors != null && data.vendors.length > 0) {
                        $("#appendsuppliersmains").empty();
                        $.each(data.vendors, function (index, item) {

                            // var myitem = item.invoiceNumber.toString();


                            var html = '';
                            html += '<tr ondblclick="SupplierPartialModalPar(' + item.vendorId + ')">';
                            //html += '<td id="num' + index + '" ondblclick="PurchaseOrderPModal(' + index + ')" class="grids-td">' + item.supplierItemNumber.supplierItemNum + '</td>';
                            html += '<td style="" id="" class="grids-td">' + item.company + '</td>';
                            if (item.supplierItemNumber != null && item.supplierItemNumber != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.supplierItemNumber.supplierItemNum + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.caseQty + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.discount + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            html += '</tr > ';


                            $("#appendsuppliersmains").append(html);

                        });
                    }
                    if (data.purchaseOrders != null && data.purchaseOrders.length > 0) {
                        $("#appendpurchaseordersmains").empty();
                        $.each(data.purchaseOrders, function (index, item) {

                            // var myitem = item.invoiceNumber.toString();

                            // console.log(myitem);
                            var html = '';
                            html += '<tr>';
                            html += '<td style="width: 10px" id="" class="grids-td">' + (index + 1) + '</td>';
                            html += '<td id="num' + index + '" ondblclick="PurchaseOrderPModal(' + index + ')" class="grids-td">' + item.invoiceNumber + '</td>';
                            html += '<td class="grids-td">' + item.supplierName + '</td>';
                            if (item.receivedDate == null) {
                                html += '<td class="grids-td">Not Received</td>';
                            } else {
                                html += '<td class="grids-td">' + item.receivedDate + '</td>';
                            }
                            html += '<td class="grids-td">' + item.qty + '</td>';
                            html += '<td class="grids-td">' + item.caseQty + '</td>';
                            html += '<td class="grids-td">' + item.price + '</td>';
                            html += '<td class="grids-td">' + item.amount + '</td>';
                            html += '</tr > ';


                            $("#appendpurchaseordersmains").append(html);

                        });
                    }


                    if (data.saleOrders != null && data.saleOrders.length > 0) {

                        $('#appendsaleorders').empty();
                        $.each(data.saleOrders, function (index, item) {
                            var html = '';
                            html += '<tr>';
                            html += '<td style="width: 10px" id="" class="grids-td">' + (index + 1) + '</td>';
                            html += '<td id="abcdef' + index + '" ondblclick="SalesPartialModal(' + index + ')" class="grids-td">' + item.invoiceNumber + '</td>';
                            /*html += '<td class="grids-td">' + item.invoiceNumber + '</td>';*/
                            if (item.invoiceDate == null) {
                                html += '<td class="grids-td">N/A</td>';
                            } else {
                                html += '<td class="grids-td">' + item.invDate + '</td>';
                            }
                            html += '<td class="grids-td">' + item.customerName + '</td>';
                            html += '<td class="grids-td">' + item.quantity + '</td>';
                            html += '<td></td>';
                            html += '<td></td>';
                            html += '<td style="color:darkred">' + item.cost + '</td>';
                            html += '<td style="color:darkred">' + item.price + '</td>';
                            html += '<td style="color:darkred">' + item.total + '</td>';
                            html += '</tr > ';
                            $("#appendsaleorders").append(html);
                        });
                    }

                }

                $("#itemlabel").show();
                $("#createnew").hide();
                $("#qtylabel").show();
                $("#adjusmentlabel").show();
                $("#itemqtyadjusment").addClass("di");
                $("#itemqtyadjusment").show();
                $("#listallmissions").empty();

                GetCheapestValue(id);
                setTimeout(function () {
                    $.unblockUI();
                }, 2500);

            },
            error: function (xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },

            // Success end
        });
    }
    function GetStockLevelListItems(val) {

        if (val != null && val != "undefined") {
            var id = val;

        }
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetStockItemDataByItemID", "Items")',
            data: {
                id: id
            },
            dataType: "json",

            success: function (data) {

                if (data != null && data != "undefined") {
                    $.each(data, function (key, val) {

                        $('#progressbarheights').css("height", val.quantity + '%');
                        $('#progressbarheights').text(val.quantity + "%");
                        if (val.items != null && val.items != "undefined") {

                            if (val.items.orderQuantity != null && val.items.orderQuantity != "undefined") {
                                $("#orderqntynews").val(val.items.orderQuantity)
                            }
                            if (val.items.minOrderQty != null && val.items.minOrderQty != "undefined") {
                                $("#minqntynews").val(val.items.minOrderQty);
                            }
                            if (val.items.maxOrderQty != null && val.items.maxOrderQty != "undefined") {
                                $("#maxqntynews").val(val.items.maxOrderQty);
                            }
                            if (val.items.salesLimit != null && val.items.salesLimit != "undefined") {
                                $("#saleslimitnews").val(val.items.salesLimit);

                            }
                        }

                    })
                }
            },
            error: function (xhr, status, error) {

                var errorMessage = xhr.status + ': ' + xhr.statusText

            },

        });
    }

    function generatePdf(Type){ 
        debugger;
        var CustmerID = $("#customerid").val();
         var url = '@Url.Action("MultiInvGeneratePdf", "Sale")?CustomerId=' + CustmerID;
         if(Type == "PrintPDF"){
              var newWindow = window.open(url, '_blank');
                newWindow.onload = function () {
                newWindow.print();
               }
         }
         else if(Type == "Preview"){
              window.open(url, '_blank');
         }
         else if(Type == "PDFUnProtected"){
            var link = document.createElement('a');
            link.href = url;
            link.download = 'SalesInvoices.pdf';
            link.click();
         }
    }

    function generatePdfwithProtected(Type){ 
        debugger;
        var CustomerEmail = $("#customerEmailCusinfo").val();
        var PdfProtectedPassword = $("#PdfProtectedPassword").val();
        var CustmerID = $("#customerid").val();
        if(abc_general.isNullOrEmpty(PdfProtectedPassword)){
            Swal.fire("Please Enter Password to Protect PDF");
            return;
        }
        var url = '@Url.Action("MultiInvGeneratePdfProtected", "Sale")?CustomerId=' + CustmerID + "&Password=" + PdfProtectedPassword + "&CustomerEmail=" + CustomerEmail + "&Type=" + Type;
        window.open(url, '_blank');
    }

    function EmailSendwithProtected(Type) {
        debugger;
        var CustomerEmail = $("#CustomerToEmailId").val();
        var CustomerCCEmailId = $("#CustomerCCEmailId").val();
        var CustomerBCCEmailId = $("#CustomerBCCEmailId").val();
        var CustomerSubjectId = $("#CustomerSubjectId").val();
        var emailBodyId = $("#emailBodyId").val();
        var PdfProtectedPassword = $("#PdfProtectedPassword").val();
        var CustmerID = $("#customerid").val();

        if(Type == "EmailProtected"){
            if(abc_general.isNullOrEmpty(PdfProtectedPassword)){
                Swal.fire("Please Enter Password to Protect PDF");
                return;
             }
        }

        if (abc_general.isNullOrEmpty(CustomerEmail)) {
            Swal.fire("Please Enter Email");
            return;
        }

       var userEmailPDFOptions = {
            ToEmails : CustomerEmail,
            CCEmails : CustomerCCEmailId,
            BCCEmails : CustomerBCCEmailId,
            Subject : CustomerSubjectId,
            Body : emailBodyId
        }

        $.ajax({
            type: "GET",
            url: '@Url.Action("MultiInvGeneratePdfProtected", "Sale")',
            data: {
               CustomerId : CustmerID, 
               Password: PdfProtectedPassword, 
               Type:Type, 
               userEmailPDFOptions : JSON.stringify(userEmailPDFOptions)
            },
            dataType: "json",
            success: function (data) {
                debugger;
               if(data == true){
                   Swal.fire("Email Send SuccessFully");
                   location.reload();
               }
               else{
                    Swal.fire("Email Not Sent");
               }
            },
        });

    }
</script>

<script>
  function sortTable(n) {
    var table, rows, switching, i, x, y, shouldSwitch, dir,
    switchcount = 0;
    table = document.getElementById("saletable");
    switching = true;
    dir = "asc";
    while (switching) {
      switching = false;
      rows = table.getElementsByTagName("TR");

      for (i = 1; i < rows.length - 1; i++) {
        shouldSwitch = false;
        x = rows[i].getElementsByTagName("TD")[n];
        y = rows[i + 1].getElementsByTagName("TD")[n];

        if (dir == "asc") {
          if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
            shouldSwitch = true;
            break;
          }
        } else if (dir == "desc") {
          if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
            shouldSwitch = true;
            break;
          }
        }
      }
      if (shouldSwitch) {
        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
        switching = true;
        switchcount++;
      } else {
        if (switchcount == 0 && dir == "asc") {
          dir = "desc";
          switching = true;
        }
      }
    }
  }
</script>

<script>

   $(document).ready(function (){
        $.ajax({
            url: '@Url.Action("GetVendorsSaleOrderInvoiceEmails", "Sale")',
                async: false,
                contentType: "application/json;",
                dataType: "json",
                success: function(data) {
                    $.each(data, function(index, item) {
                        var dropdown = '<option value='+item.vendorId+' data-email='+item.vendorEmail+'>'+item.companyName+'</option>'
                        $("#vendorDropDown").append(dropdown);
                    });

                },
                error: function(error) {
                    alert(error);
                }
            });

         $.ajax({
            url: '@Url.Action("GetCustomersSaleOrderInvoiceEmails", "Sale")',
                async: false,
                contentType: "application/json;",
                dataType: "json",
                success: function(data) {
                    $.each(data, function(index, item) {
                        var dropdown = '<option value='+item.customerId+' data-email='+item.customerEmail+'>'+item.companyName+'</option>'
                        $("#customerDropDown").append(dropdown);
                    });

                },
                error: function(error) {
                    alert(error);
                }
            });
   
   })


    // Add an on VendorDropdown onChange event handler to the dropdown
    $("#vendorDropDown").on('change', function () {
        debugger;
        var selectedOption = $(this).find('option:selected');
        var selectedEmail = selectedOption.data('email');
        var selectedId = selectedOption.val();
        $("#VendorEmailCopyForToCC").val(selectedEmail);
    });

    // Add an on CustomerDropdown onChange event handler to the dropdown
    $("#customerDropDown").on('change', function () {
        debugger;
        var selectedOption = $(this).find('option:selected');
        var selectedEmail = selectedOption.data('email');
        var selectedId = selectedOption.val();
        $("#CustomerEmailCopyForToCC").val(selectedEmail);
    });

    function CustomerSelectToCCEmail(value){
        debugger;
        var CustomerEmail = $("#CustomerEmailCopyForToCC").val();
        if(abc_general.isNullOrEmpty(CustomerEmail) == true || CustomerEmail == "null"){
            Swal.fire('Their is No Email Against The Customer Select');
            return;
        }

        if(value == "To"){
            $("#CustomerToEmailId").val(CustomerEmail);
            if(CustomerEmail ==  $("#CustomerCCEmailId").val()){
               $("#CustomerCCEmailId").val(""); 
            }
        }

        if(value == "CC"){
            $("#CustomerCCEmailId").val(CustomerEmail);
            if (CustomerEmail == $("#CustomerToEmailId").val()) {
                $("#CustomerToEmailId").val("");
            }
        }
    }

    function VendorSelectToCCEmail(value){
        debugger;
        var VendorEmail = $("#VendorEmailCopyForToCC").val();
        if(abc_general.isNullOrEmpty(VendorEmail) == true || VendorEmail == "null"){
            Swal.fire('Their is No Email Against The Vendor Select');
            return;
        }

        if(value == "To"){
            $("#CustomerToEmailId").val(VendorEmail);
            if(VendorEmail ==  $("#CustomerCCEmailId").val()){
               $("#CustomerCCEmailId").val(""); 
            }
        }

        if(value == "CC"){
            $("#CustomerCCEmailId").val(VendorEmail);
             if(VendorEmail ==  $("#CustomerToEmailId").val()){
                $("#CustomerToEmailId").val("");
            }
        }
    }

</script>



