@using ABC.EFCore.Repository.Edmx
@model ABC.EFCore.Repository.Edmx.PurchaseOrder
@{
    ViewData["Title"] = "NewPurchaseOrderGet";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="https://site-assets.fontawesome.com/releases/v6.1.2/css/all.css" rel="stylesheet" />
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>


<style>
    .bar-styles {
        border-radius: 20px;
        height: 40px;
        margin-bottom: 10px;
    }

    .labelreds {
        color: red;
    }

    .panel-head {
        padding: 10px 15px;
        border-bottom: 1px solid transparent;
        border-top-left-radius: 3px;
        border-top-right-radius: 3px;
    }

    label {
        color: #00008B;
    }

    .add-style {
        color: red;
    }

    .dropadditemCategory {
        background: #e9ecef;
        opacity: 1;
        border: 0;
        outline: 1px solid #dee2e6;
        font-weight: 400;
        font-size: 0.875rem;
        border-radius: 4px;
        height: 2rem;
    }

    .progress-bar-vertical {
        width: 20px;
        min-height: 200px;
        margin-right: 20px;
        background: #d0cece;
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        align-items: flex-end;
        -webkit-align-items: flex-end
    }

        .progress-bar-vertical .progress-bar {
            width: 100%;
            height: 0;
            -webkit-transition: height 0.6s ease;
            -o-transition: height 0.6s ease;
            transition: height 0.6s ease
        }

    .actionbox {
        background: white;
        box-sizing: border-box;
        margin-bottom: 2%;
        border-radius: 20px;
    }

    .setsearchbox {
        position: relative;
        margin-top: 0%;
        width: auto;
        background-color: antiquewhite;
        border-radius: 0px;
    }

    .searchheader {
        font-size: 16px;
        text-align: center;
        font-weight: bold;
        display: inline-block;
        width: 50%;
        text-align: start;
        border-bottom: 1px solid #dee2e6;
        border-right: 1px solid #dee2e6;
    }

    .di {
        display: inline-block;
    }

    .itemnumberbox {
        border: 1px solid #989a9d;
        background: #80808047;
    }

    .fr {
        float: right !important;
    }


    .checkcheapitems {
        margin-top: 50%;
        position: relative;
        left: 110%;
        width: 20%;
    }

    .emptygrid {
        height: 300px;
        background-color: antiquewhite;
    }
</style>
<style>
    .aqua {
        background: #c1e4e4;
    }

        .aqua:focus {
            background-color: #c1e4e4;
        }

    .brdr-right {
        border-right: 0.2px solid;
    }

    .rowst {
        background-color: blue;
    }

    .table td, .table th {
        padding: 5px !important;
        width: 100%;
    }

    .tablest thead th {
        font-size: 1.2rem;
        font-weight: 400;
        color: #2587c3;
        border: 1px solid #000100;
        border-bottom: 1px solid #000100 !important;
    }

    .tablest td {
        font-size: 1.2rem;
        font-weight: 400;
        color: #2587c3;
        border-bottom: none;
    }


    .wd-5 {
        width: 5rem;
    }

    .wd-8 {
        width: 10rem;
    }

    .wd-3 {
        margin-left: 3rem;
    }

    .wd-7 {
        width: 2rem;
        margin-left: 7rem;
        /*position: relative;
                                        left: 15%;
                                        border:0px solid;*/
    }

    .wd-10 {
        margin: 0px;
        width: 70px;
        padding: 0px;
        /* border: 0px;*/
    }

    .mw-125 {
        width: 160% !important;
        margin-left: -27%;
    }

    input[type=checkbox] {
        transform: scale(0.9);
    }

    label {
        font-size: 14px !important;
    }

    .table td, .table th {
        padding: 5px !important;
        width: 100%;
    }

    .classtop {
        margin-top: 31px;
    }

    .TotalItem {
        margin-bottom: 31px;
    }

    .receivedtext {
        margin-top: 80px;
        width: 110px;
    }

    .OverHeadalign {
        margin-left: 150px;
    }

    .borderdiv {
        border-right: 1px solid;
        border-right-color: black;
    }

    /*.tablesize {
                                            width: 1180px;
                                        }*/


    .ti-close {
        font-size: 20px;
    }

    .add-row {
        color: #32CD32;
    }

        .add-row:hover {
            color: #228B22;
        }

    .delete-row {
        color: #FF0000;
    }

        .delete-row:hover {
            color: #B22222;
        }

    .textboxwidth {
        width: 175px;
    }

    .overheadwidth {
        width: 80px;
    }

    /*        media query by gulzar*/

    @@media (min-width: 750px) and (max-width: 1365px) {
        .tableset {
            margin-left: 40px;
        }

        .btnop {
            margin-left: -19px;
            width: 90px;
            height: 40px;
        }

        .btncheck {
            height: 41px;
        }

        .lbsupplier {
            width: 135px;
        }

        .uposcost {
            width: 84px;
            font-size: 71%;
        }

        .txtboxwidth {
            width: 70px;
        }
        /*.tablesize1 {
                                            width: 970px;
                                        }*/
        .spname {
            margin-left: -11px;
            margin-top: -9px;
            width: 130px;
        }

        .texttotal {
            font-size: 0.8em;
        }
    }

    @@media (min-width: 1366px) and (max-width: 1700px) {
        .tableset {
            margin-left: 40px;
        }

        .btnop {
            margin-left: 27px;
            height: 41px;
        }

        .txtboxwidth {
            width: 85px;
        }

        .spname {
            margin-left: -11px;
            margin-top: -9px;
            width: 250px;
        }
    }

    .fontcolor {
        color: #A63831;
        opacity: 1;
    }

    /*-------------------AUTO COMPLETE CSS -----------*/

    /*the container must be positioned relative:*/
    .autocomplete {
        position: relative;
        display: inline-block;
    }

    .autocomplete-items {
        position: absolute;
        border: 1px solid #d4d4d4;
        border-bottom: none;
        border-top: none;
        z-index: 99;
        /*position the autocomplete items to be the same width as the container:*/
        top: 100%;
        left: 0;
        right: 0;
    }

        .autocomplete-items div {
            padding: 10px;
            cursor: pointer;
            background-color: #fff;
            border-bottom: 1px solid #d4d4d4;
        }

            /*when hovering an item:*/
            .autocomplete-items div:hover {
                background-color: #e9e9e9;
            }

    /*when navigating through the items using the arrow keys:*/
    .autocomplete-active {
        background-color: DodgerBlue !important;
        color: #ffffff;
    }

    .setsearchbox {
        position: relative;
        margin-top: 0%;
        width: auto;
        background-color: antiquewhite;
        border-radius: 0px;
    }

    .searchheader {
        font-size: 16px;
        text-align: center;
        font-weight: bold;
        display: inline-block;
        width: 50%;
        text-align: start;
        border-bottom: 1px solid #dee2e6;
        border-right: 1px solid #dee2e6;
    }

    .di {
        display: inline-block;
    }

    .itemnumberbox {
        border: 1px solid #989a9d;
        background: #80808047;
    }

    .fr {
        float: right !important;
    }

    .mg-t-5 {
        margin-top: 5%;
    }

    .ml-2 {
        margin-left: 2%;
    }

    .mg-t-2 {
        margin-top: 2%;
    }

    .ml-3 {
        margin-left: 3%;
    }

    .mg-t-3 {
        margin-top: 3%;
    }

    .dn {
        display: none;
    }

    .w-50 {
        width: 50% !important;
    }

    .alertstyle {
        display: inline-block;
    }

    .alertposi {
        position: relative;
        left: 20%;
    }

    .modalstyling {
        width: 57%;
        left: 25%;
    }

    .db {
        font-size: 10px !important;
    }

    .fas {
        color: #1F3BB3;
        border-right: 2px solid black;
        padding: 3px;
    }

    .customBorderUp {
        border-top: 3px solid #bfbebe;
        border-left: 3px solid #bfbebe;
        border-right: 3px solid #bfbebe;
    }

    .cutomdownBorder {
        border-bottom: 3px solid #bfbebe;
        border-left: 3px solid #bfbebe;
        border-right: 3px solid #bfbebe;
    }

    .textBlue {
        color: #1515b7;
    }

    .textRed {
        color: red;
    }

    .txtBold {
        font-weight: bolder;
    }

    .borderCustom {
        border-top: 1px solid gray;
        border-left: 1px solid grey;
        border-bottom: 1px solid #ededed;
        border-right: 1px solid #ededed;
    }

    .SizeKustom {
        width: 20rem;
        margin-left: -4rem;
        position: relative;
        margin-top: 0%;
        background-color: antiquewhite;
        border-radius: 0px;
    }

    button#caret {
        border: none;
        background: none;
        position: absolute;
        top: 0px;
        right: 0px;
    }

    .input-wrap {
        position: relative;
        display: inline;
    }

    input::-webkit-calendar-picker-indicator {
        display: none;
    }

    .hide {
        display: none;
    }

    .show {
        display: block;
    }

    .selectedrow {
        background-color: #5e5e5e;
        color: red !important;
    }

        .selectedrow td {
            color: #ebb82f !important;
        }
</style>

<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

<script>

    var AllItemsList = [];
    var AllAutoItemsList = [];
    var AllSuppliersList = [];
    var AllSupplieritemsList = [];
    var AllReturnitemsList = [];
    var AllitemsModelList = [];
    var AllopenPurchaseOrdersList = [];
    var AllpostPurchaseOrdersList = [];
    $(document).ready(function() {
        $("#Deletebtn").hide();
        $("#AddnewUpdatebtn ").hide();
        $("#Savebtn").show();
        $("#Printbtn").show();
        $("#Attachmentbtn ").hide();
        $("#Listbtn ").hide();
        $("#Addnewbtn ").hide();
        $("#Refreshbtn").show();
        $("#documentuploadresponse").text("");
        $("#documentuploadresponse").hide();
        $("#gifalert").hide();

        //$("#alertdiv").hide();

        //Disable Recevied Checkbox
        //$("#Received").prop('disabled', true);
        //    $("#otherpayment").prop('disabled', true);
        if (AllItemsList.length < 1) {
            AllItemsList = ABCPOSWebsite.init();
        }

        if (AllAutoItemsList.length < 1) {
            AllAutoItemsList = ABCPOSWebsite.AutoItems();
        }

        if (AllSuppliersList.length < 1) {
            AllSuppliersList = ABCPOSWebsite.AllSuppliers();
        }



        if (AllSupplieritemsList.length < 1) {
            AllSupplieritemsList = ABCPOSWebsite.AllSupplierItems();
        }

        if (AllReturnitemsList.length < 1) {
            AllReturnitemsList = ABCPOSWebsite.AllItemsReturnByID();
        }

        if (AllitemsModelList.length < 1) {
            AllitemsModelList = ABCPOSWebsite.AllItem4Model();
        }

        if (AllopenPurchaseOrdersList.length < 1) {
            AllopenPurchaseOrdersList = ABCPOSWebsite.AllOpenPurchaseOrders();
        }

        if (AllpostPurchaseOrdersList.length < 1) {
            AllpostPurchaseOrdersList = ABCPOSWebsite.AllClosePurchaseOrders();
        }
        AppendAllMissions();
    });
</script>


@{
    var itemId = 0;
    var shortaddvalue = 0;
}

<div id="addstore" class="modal fade bd-example-modal-lg" role="dialog">
    <div class="modal-dialog modal-lg">
    </div>
</div>

<div class="col-12 grid-margin">
    <div class="card" style="background-color: #EAE8EA">
        <div class="card-body">


            <div id="LoadPage " class="alertstyle">
                <a href="#" id="Savebtn" onclick="SaveItemSupplierNumber(false,false,false)"><img src="../images/save.png" style="width:50px" title="Save" /></a>
                <a href="#" id="Editbtn" onclick="SaveItemSupplierNumber(false,true,false)" style="display: none"><img src="../images/edit.png" style="width:50px;" title="Edit" /></a>
                <a href="#" id="Refreshbtn" onclick="onRefresh()"> <img src="../images/refresh.png" style="width:50px" title="Refresh " /></a>
                <img class="hide-icon" src="../images/delete.png" style="width:50px" title="Delete" onclick="" />
                <img class="hide-icon" src="../images/Inventory.png" style="width:50px" title="Inventory" onclick="OpenInventorySecondModal()" />
                <a href="#" id="Printbtn" onclick="SaveItemSupplierNumber(true,false,false)"> <img src="../images/printer.png" style="width: 50px;" title="Print" /></a>
                <img class="hide-icon" src="../images/dollersign.png" style="width:50px" title="pricedifference" onclick="showItemCostChange()" />

            </div>
            <div id="LoadPage " class="alertstyle" style="display: inline-block; border: 1px solid unset; margin: 3px; box-shadow: 2px 2px #888888; background-color: #dbd6d2; ">


                <i class="fas fa-backward-step" style="font-size:20px; cursor:pointer" onclick="nextinvoice('first','')"></i>
                <i class="fas fa-caret-left" style="font-size:20px; cursor:pointer" onclick="nextinvoice('previous','')"></i>
                <i class="fas fa-caret-right" style="font-size:20px; cursor:pointer" onclick="nextinvoice('next','')"></i>
                <i class="fas fa-forward-step" style="font-size:20px; cursor:pointer" onclick="nextinvoice('last','')"></i>
            </div>

            <div id="LoadPage " class="alertstyle" style=" margin: 3px;">
                <select onchange="nextinvoice('null',this.value)" id="posted-invoice" style="border:none; background-color:#dbd6d2">
                    <option value="value">Received</option>
                </select>

                <select onchange="nextinvoice('null',this.value)" id="open-invoice" style="border:none; background-color:#dbd6d2">
                    <option value="value">Pending</option>
                </select>
            </div>
            <div id="alertdiv" onclick="GetListToCheckCheapestProduct();" class="alertposi alertstyle">
                <a href="#" id="gifalert"> <img src="../images/gif-alert.gif" style="width:150px;" title="Alert" /></a>
            </div>

            <br />
            <br />
            <div class="panel panel-primary ">
                <div class="panel-heading">Purchase Order</div>
                <div class="panel-body">
                    <h4 class="card-title"></h4>
                    <form asp-action="AddVendor" class="form-sample" method="post" enctype="multipart/form-data" autocomplete="off">
                        <div class="col-lg-12 col-sm-12">
                            <div class="row">
                                <div class="col-lg-12 col-sm-12">
                                    @*<h4 class="text-primary">
                                    <label id="txtInvoiceNumber">@ViewBag.Invoicenumber</label>
                                    @Html.HiddenFor(model => model.InvoiceNumber, new { @class = "form-control", id = "" })
                                    @Html.CheckBox("Report", false, new { @id = "Report", @class = "" })
                                    <label class="dim col-sm-4" for="LocalTextPaidBySupplier">
                                    Report
                                    </label>
                                    </h4>*@
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-lg-8 col-sm-8 m-0 p-0">
                                    <div class="row m-0 p-0">
                                        <div class="col-4 col-lg-4 col-sm-4 m-0 p-0">
                                            <label class="dim col-sm-12 text-primary">Supplier No</label>
                                            <div class="datalist-wrap autocomplete">
                                                <div class="input-wrap">
                                                    @*@Html.EditorFor(model => model.SupplierNumber, new { htmlAttributes = new { @class = "form-control textboxcolor ", placeholder = "Supplier No", id = "txtSupplierNo", @readonly = "readonly", @style = "width:40%;padding:0;" } })*@
                                                    <input class="form-control searchname spname " style="width:65%;padding:0;margin-top:1px; border:2px solid black; border-radius:none; font-weight:bold;" name="supplierNo" list="supplierNo" id="txtSupplierNo" type="text" ondblclick="VendorDetailModal(1)" placeholder="Supplier No" />
                                                </div>
                                                <datalist class="searchdropdownn" id="supplierNo">
                                                </datalist>
                                                <span hidden id="pp">Click</span>
                                            </div>
                                            @Html.ValidationMessageFor(model => model.SupplierNumber, "", new { @class = "text-danger db" })
                                        </div>
                                        <div class="col-4 col-lg-4 col-sm-4" style="margin-top: 4%;margin-left: -7rem;margin-right:5rem;">
                                            <div class="form-group">

                                                <div class="datalist-wrap autocomplete">
                                                    <div class="input-wrap">
                                                        @*<input id="myInput" type="text" name="movies" list="movies"/>*@
                                                        <input class="form-control searchname spname" style="width:20rem;margin-left:-3rem; border:2px solid black; border-radius:none; font-weight:bold;" name="supplierName" list="supplierName" id="myInput" type="text" ondblclick="VendorDetailModal(1)" placeholder="Enter supplier name to search" />
                                                        @*<button id="caret"> &#9660;</button>*@
                                                    </div>
                                                    <div class="input-lg mx-auto dropdown w-100" id="searchdropdown" data-vendorID=""></div>
                                                    <span style="display:none" id="setvendorid"></span>
                                                    <label class="text-danger field-validation-error db" id="ValVendorName" style="font-size:12px;"></label>
                                                    <datalist class="searchdropdown" id="supplierName" data-vendorID="" style="width:300px;">
                                                    </datalist>
                                                    <span hidden id="p">Click</span>
                                                </div>



                                                @*<div class="autocomplete " style="width:100%;">
                                                <input class="form-control searchname spname" list="select" id="myInput" type="text" ondblclick="VendorDetailModal(1)" name="myCountry" placeholder="Enter supllier name to search" onkeyup="GetAllMatchedMissionsText(event)" />
                                                <div class="input-lg mx-auto dropdown w-100" id="searchdropdown" data-vendorID=""></div>
                                                <span style="display:none" id="setvendorid"></span>
                                                <label class="text-danger field-validation-error db" id="ValVendorName" style="font-size:12px;"></label>
                                                </div>*@
                                                @Html.HiddenFor(model => model.SupplierName, new { htmlAttributes = new { @class = "form-control textboxcolor ", placeholder = "Supplier Name", id = "txtSupplierName" } })
                                                @Html.ValidationMessageFor(model => model.SupplierName, "", new { @class = "text-danger db" })
                                            </div>
                                        </div>
                                        <div class="col-4 col-lg-4 col-sm-4">
                                            <div class="row">
                                                <div class="col-lg-6 col-sm-6">
                                                    <label class="dim col-sm-10 text-primary"></label>
                                                    <button type="button" class="btn btn-primary text-secondary btnop" id="otherpayment">Other Payment</button>
                                                </div>
                                                <div class="col-lg-6 col-sm-6">
                                                    <label class="dim col-sm-10 text-primary"></label>
                                                    <button type="button" class="btn btn-primary text-secondary btncheck" id="writecheque" onclick="opencheque()">Write Check</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-3 col-sm-3 m-0 p-0 customBorderUp me-2" style="width:18%">
                                            @*<div class="customBorderUp">*@
                                            @Html.CheckBox("ShowAllItems", true, new { @id = "ShowAllitem" })
                                            <label class="dim col-sm-10" for="ShowAllitem">
                                                Show All Items
                                            </label>
                                            @*</div>*@

                                        </div>
                                        <div class="col-2 col-sm-2 m-0 p-0 customBorderUp me-2" style="width:12%">
                                            @*<div class="customBorderUp" style="width:72%">*@

                                            <label class=" col-sm-10 text-primary texttotal txtBold textBlue">Total Items</label>
                                            @*</div>*@
                                        </div>

                                        <div class="col-3 col-sm-3 p-0 me-2 customBorderUp" style="width:20%">
                                            @Html.CheckBox("UpdateCost", new { @id = "UpdateCost", })
                                            <label class="dim col-sm-10 upcost" for="UpateCost">
                                                Update Cost
                                            </label>
                                        </div>
                                        <div class="col-3 col-sm-3 m-0 p-0  txtBold textBlue">
                                            @Html.CheckBox("Received", false, new { @id = "Received", })
                                            <label class="dim col-sm-10 upcost " for="Received">
                                                Received
                                            </label>
                                            <input class="d-none" id="received-invoice" value="true" />
                                        </div>
                                        <div class="col-lg-1 col-sm-1 m-0 p-0 cutomdownBorder customBorderUp  txtBold textBlue cp" style="width: 12%;">
                                            <label class=" col-sm-12 text-primary" style="padding-left:12px;padding-bottom:10px">Overhead</label>
                                            @*@Html.EditorFor(model => model.OverHead, new { htmlAttributes = new { @class = "form-control", id = "OverHead" } })
                                            @Html.ValidationMessageFor(model => model.OverHead, "", new { @class = "text-danger db" })*@
                                        </div>
                                    </div>
                                    <div class="row ">
                                        <div class="col-lg-4 col-sm-4 m-0 p-0 cutomdownBorder me-2" style="width:18%">
                                            @*<div class="">*@
                                            @Html.CheckBox("Supplieritems", false, new { @id = "SupplierItemOnly", })
                                            <label class="lbsupplier">Supplier Item Only</label>
                                            @*</div>*@

                                        </div>
                                        <div class="col-lg-2 col-sm-2 p-0 cutomdownBorder " style="width:12%;margin-right:0.4rem">
                                            @Html.EditorFor(model => model.TotalItems, new { htmlAttributes = new { @class = "form-control textboxcolor txtboxwidth totalitemtextbox txtBold textBlue", id = "TotalItems", style="width:89px;", @readonly=true } })
                                            @Html.ValidationMessageFor(model => model.TotalItems, "", new { @class = "text-danger db" })
                                        </div>
                                        <div class="col-lg-3 col-sm-3 me-2 p-0 cutomdownBorder" style="width: 19.9%;margin-left:2px;">
                                            @Html.CheckBox("UpdateOscost", false, new { @id = "UpateOscost" })
                                            <label class="dim col-sm-10 uposcost" for="UpateOscost">
                                                Update OS Cost
                                            </label>
                                        </div>
                                        <div class="col-lg-1 col-sm-1 me-2 p-0" style="margin-left:2px;">
                                            <img id="imgRecieved" class="hide" style="position: absolute; width:7%" src="../images/received-removebg-preview.png">
                                        </div>
                                        <div class="col-lg-1 col-sm-1 me-2 p-0" style="margin-left:2px;">
                                            <img id="imgPaid" class="hide" style="position: absolute; width:7%" src="../images/Paid-removebg-preview.png">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-sm-4">
                                    <div class=" txtBold textBlue" style="text-align:center"><h3 id="txtInvoiceNumber" style="font-weight:bold;display:inline">@ViewBag.Invoicenumber</h3></div>
                                    <h4 class=" textRed" style="display:inline; margin-left:61%">
                                        @Html.HiddenFor(model => model.InvoiceNumber, new { @class = "form-control", id = "" })
                                        @Html.CheckBox("Report", false, new { @id = "Report", @class = "" })
                                        <label class="dim col-sm-4 " for="LocalTextPaidBySupplier">
                                            Report
                                        </label>
                                    </h4>

                                    <table class="table-bordered border-dark tableset">
                                        <tr>
                                            <th class=" txtBold textBlue">SubTotal</th>
                                            <td>
                                                @Html.EditorFor(model => model.SubTotal, new { htmlAttributes = new { @class = "form-control", id = "SubTotal" } })
                                                @Html.ValidationMessageFor(model => model.SubTotal, "", new { @class = "text-danger db" })
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class=" txtBold textBlue">Freight</th>
                                            <td>
                                                @Html.EditorFor(model => model.Freight, new { htmlAttributes = new { @class = "form-control", id = "Freight", onkeyup = "CalculatetaxPlusDiscount()" } })
                                                @Html.ValidationMessageFor(model => model.Freight, "", new { @class = "text-danger db" })
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class=" txtBold textBlue">Tax @Html.CheckBox("IsTax", false, new { @id = "IsTax", })</th>
                                            <td>
                                                @Html.EditorFor(model => model.Tax, new { htmlAttributes = new { @class = "form-control", id = "Tax", onkeyup = "CalculatetaxPlusDiscount()" } })
                                                @Html.ValidationMessageFor(model => model.Tax, "", new { @class = "text-danger db" })
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class=" txtBold textBlue">Other</th>
                                            <td>
                                                @Html.EditorFor(model => model.Other, new { htmlAttributes = new { @class = "form-control", id = "Other", onkeyup = "CalculatetaxPlusDiscount()" } })
                                                @Html.ValidationMessageFor(model => model.Other, "", new { @class = "text-danger db" })
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class=" txtBold textBlue">Total</th>
                                            <td>
                                                @Html.EditorFor(model => model.Total, new { htmlAttributes = new { @class = "form-control", id = "Total", onkeyup = "CalculatetaxPlusDiscount()" } })
                                                @Html.ValidationMessageFor(model => model.Total, "", new { @class = "text-danger db" })
                                            </td>
                                        </tr>
                                    </table>
                                </div>


                            </div>
                        </div>
                        <br />
                        <div class="row m-0 p-0" style="">
                            <div class="col-lg-12 col-sm-12  m-0 p-0">
                                <div class="table-responsive" style="margin-right:-40px;margin-left:-40px;margin-bottom:-21px">
                                    <table class="table border-dark" style="background-color: #c3c3d3;">
                                        <thead>
                                            <tr>
                                                <th style="width:10px" class=" txtBold textBlue">Invoice#</th>
                                                <th style="width:10px" class="txtBold textBlue">PO Date</th>
                                                <th style="width:10px" class="txtBold textBlue">Payment Terms</th>
                                                <th style="width:10px" class="txtBold textBlue">Total Tabacco</th>
                                                <th style="width:10px" class="txtBold textBlue">Total Cigar</th>
                                                <th style="width:10px" class="txtBold textBlue">Total Cigarette</th>
                                                <th style="width:10px" class="txtBold textBlue">Cigarette Stick</th>
                                                <th style="width:10px" class="txtBold textBlue">Date Received</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="width:10px">
                                                    @Html.EditorFor(model => model.ManualInvoiceNumber, new { htmlAttributes = new { @class = "form-control p-0 brd", id = "ManualInvoiceNo", @style = "width: 9rem;" } })
                                                    @Html.ValidationMessageFor(model => model.ManualInvoiceNumber, "", new { @class = "text-danger db" })
                                                </td>
                                                <td style="width:10px">
                                                    @Html.EditorFor(model => model.Podate, new { htmlAttributes = new { @class = "form-control textboxwidth p-0 brd", id = "Podate", type = "text", @style = "width: 8rem;" } })
                                                    @Html.ValidationMessageFor(model => model.Podate, "", new { @class = "text-danger db" })
                                                </td>
                                                <td style="width:10px">
                                                    @*Html.EditorFor(model => model.PaymentTerms, new { htmlAttributes = new { @class = "form-control p-0", id = "PaymentTerms" } })*@
                                                    @*@Html.DropDownListFor(model => model.PaymentTerms, (IEnumerable<SelectListItem>)ViewBag.PaymentTerm, "--Choose Payment Term--", new { @class = "form-control textboxcolor brd", id = "PaymentTerms" })*@
                                                    @Html.EditorFor(model => model.PaymentTerms, new { htmlAttributes = new { @class = "form-control p-0 brd", id = "PaymentTerms", placeholder = "Payment Term", @readonly = "readonly", @style = "width: 9rem;" } })
                                                    @Html.ValidationMessageFor(model => model.PaymentTerms, "", new { @class = "text-danger db" })
                                                </td>
                                                <td style="width:10px">
                                                    @Html.EditorFor(model => model.TotalTobacco, new { htmlAttributes = new { @class = "form-control p-0 brd", id = "TotalTobacco", @style = "width: 9rem;",@readonly = "readonly" } })
                                                    @Html.ValidationMessageFor(model => model.TotalTobacco, "", new { @class = "text-danger db" })
                                                </td>
                                                <td style="width:10px">
                                                    @Html.EditorFor(model => model.TotalCigar, new { htmlAttributes = new { @class = "form-control p-0 brd", id = "TotalCigar", @style = "width: 9rem;",@readonly = "readonly" } })
                                                    @Html.ValidationMessageFor(model => model.TotalCigar, "", new { @class = "text-danger db" })
                                                </td>
                                                <td style="width:10px">
                                                    @Html.EditorFor(model => model.TotalCigarette, new { htmlAttributes = new { @class = "form-control p-0 brd", id = "TotalCigarette", @style = "width: 9rem;",@readonly = "readonly" } })
                                                    @Html.ValidationMessageFor(model => model.TotalCigarette, "", new { @class = "text-danger db" })
                                                </td>
                                                <td style="width:10px">
                                                    @Html.EditorFor(model => model.CigaretteStick, new { htmlAttributes = new { @class = "form-control p-0 brd", id = "CigaretteStock", @style = "width: 9rem;",@readonly = "readonly" } })
                                                    @Html.ValidationMessageFor(model => model.CigaretteStick, "", new { @class = "text-danger db" })
                                                </td>
                                                <td style="width:10px">

                                                    @Html.EditorFor(model => model.ReceivedDate, new { htmlAttributes = new { @class = "form-control p-0 brd", id = "DateReceived", type = "text", @style = "width: 8rem;" } })
                                                    @Html.ValidationMessageFor(model => model.ReceivedDate, "", new { @class = "text-danger db" })

                                                </td>

                                            </tr>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <br />

                        <div class="row m-0 p-0">
                            <div class="col-lg-12 col-sm-12">
                                <div class="row" style="margin-left:-5%;margin-right:-6%">
                                    <div class="col-lg-1 col-sm-1" style="background-color:#c3c3d3">
                                        <label>Notes</label>
                                    </div>
                                    <div class="col-lg-11 col-sm-11" style="padding-left: 0px;padding-right:11px">
                                        @Html.EditorFor(model => model.Notes, new { htmlAttributes = new { @class = "form-control aqua brd", id = "Notes" } })
                                        @Html.ValidationMessageFor(model => model.Notes, "", new { @class = "text-danger db" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br />
                        <div style="background-color: blue !important; cursor: pointer; width: 56%; margin-left: 27%;" id="listallmissions"></div>
                        <label class="d-none" id="addnewitem">add new item</label>
                        <div class="row" style="margin-top: -1.4rem">

                            <div class="col-lg-12 col-sm-12">
                                <div class="table-responsive" id="mytable" style="margin-left:-3.5%;margin-right:-3.5%;">
                                    <table class="table" id="mytable" style="border: 1px solid #000000; border-bottom: 1px solid #000000; ">
                                        <thead style="border-bottom: 1.2px solid #000000; ">
                                            <tr>
                                                @*
                                                <th class="brdr-right" style="width:10px;">Sr#.</th>*@
                                                <th class="brdr-right" style="width:10px;"><span class="add-row ti-plus"></span></th>
                                                <th class="brdr-right" style="width:10px;">Supplier Item#</th>
                                                <th class="text-primary brdr-right" style="width:10px;">Stock Item#</th>
                                                <th class="text-primary brdr-right">Description</th>
                                                <th class="text-primary brdr-right">Retail</th>
                                                <th class="brdr-right"> @Html.CheckBox("IsPrice", false, new { @id = "IsPrice", }) Price</th>
                                                <th class="brdr-right"> @Html.CheckBox("IsQty", false, new { @id = "IsQty", }) Qty</th>
                                                <th class="brdr-right"> @Html.CheckBox("IsCaseQty", false, new { @id = "IsCaseQty", }) Case Qty</th>
                                                <th class="brdr-right"> @Html.CheckBox("IsDiscount", false, new { @id = "IsDiscount", }) Disc</th>
                                                <th class="brdr-right">Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody id="appendnewrowforsale">
                                            <!-- hidden row -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-dark text-white mx-auto col-md-3 hidden" id="btnSaveSubmit"><p style="color:white">Save</p></button>
    </div>
</div>
@*</div>*@




<div class="modal fade" id="modalPayment" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width:450px!important;">
        <div class="modal-content">
            <div class="modal-header text-center p-1">
                <div class="row ml-1 w-100" @*style="min-width:100% !important"*@>
                    <div class="col-2 p-0 m-0 text-left">
                        <i class='fa fa-credit-card' style="color:darkgoldenrod;font-size:30px;"></i>
                    </div>
                    <div class="col-8 pl-0 ml-0">
                        <h6 class="modal-title w-100 font-weight-bold" style="text-align:left;margin-top:3px!important;">PO # <label id="poNumber"></label></h6>
                    </div>
                    <div class="col-2">
                        <button type="button" id="close2" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-body pb-0" style="background-color: #f2f0f2;width:100%;">
                <div class="row">
                    <p id="companyName" style="color:darkblue;font-weight:bolder;font-size:20px;"></p>
                </div>
                <div class="row pb-1 mb-2">
                    <div class="col-4 pr-0">
                        <label data-error="wrong" data-success="right" for="form3" style="float: right; color: darkblue; font-weight: bold; font-size: 15px;">PO Amount</label>
                    </div>
                    <div class="col-6">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>

                            <input disabled type="text" id="PoAmount" name="PoAmount" value="0.00" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;">
                        </div>
                    </div>
                    <div class="col-2">
                    </div>
                </div>
                <div class="row pb-1 mb-2">
                    <div class="col-4 pr-0">
                        <label data-error="wrong" data-success="right" for="form3" style="float: right; color: darkblue; font-weight: bold; font-size: 15px;">Checks Paid</label>
                    </div>
                    <div class="col-6">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input type="text" id="checkPaid" readonly name="checkPaid" value="0.00" onkeyup="totalPoBalance()" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; height: 30px !important;">
                        </div>
                    </div>
                    <div class="col-2">
                    </div>
                </div>

                <div class="row pb-1 mb-2">
                    <div class="col-4 pr-0">
                        <label data-error="wrong" data-success="right" for="form3" style="float: right; color: darkblue; font-weight: bold; font-size: 15px;">Other Payments</label>
                    </div>
                    <div class="col-6">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input type="text" id="otherPaid" name="otherPaid" value="0.00" onkeyup="totalPoBalance()" readonly class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; height: 30px !important;">
                        </div>
                    </div>
                    <div class="col-2">
                        <i class="fa fa-pencil" id="paymentmodaloneOpen" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="row pb-1 mb-2">
                    <div class="col-4 pr-0">
                        <label data-error="wrong" data-success="right" for="creditVendor" style="position:absolute; float: right; color: green; font-weight: bold; font-size: 15px;">Credit Vendor</label>
                    </div>
                    <div class="col-6">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input disabled type="text" value="0.00" id="creditvendor" name="creditVendor" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;">
                        </div>
                    </div>
                    <div class="col-2">
                        <i class="fa fa-pencil" id="paymentmodalonecredit" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="row pb-1 mb-2">
                    <div class="col-4 pr-0">
                        <label data-error="wrong" data-success="right" for="previousBalance" style="position:absolute; float: right; color: green; font-weight: bold; font-size: 15px;">Previous Balance</label>
                    </div>
                    <div class="col-6">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input disabled type="text" value="0.00" id="previousBalance" name="previousBalance" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;">
                        </div>
                    </div>
                </div>
                <div class="row pb-1 mb-2">
                    <div class="col-4 pr-0">
                        <label data-error="wrong" data-success="right" for="form3" style="float: right; color: darkblue; font-weight: bold; font-size: 15px;">Total Paid</label>
                    </div>
                    <div class="col-6">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input type="text" disabled id="totalPaid" name="totalPaid" value="0.00" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; height: 30px !important; height: 30px !important;">
                        </div>
                    </div>
                    <div class="col-2">
                    </div>
                </div>
                <div class="row pb-1 mb-2">
                    <div class="col-4 pr-0">
                        <label data-error="wrong" data-success="right" for="form3" style="float: right; color: red; font-weight: bold; font-size: 15px;">PO Balance</label>
                    </div>
                    <div class="col-6">

                        <input disabled type="text" id="poBalance" name="poBalance" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; height: 30px !important;">
                    </div>
                    <div class="col-2">
                    </div>
                </div>
                <div class="row pb-1 mb-2">
                    <div class="col-10">
                        <textarea class="col-12" style="text-align: left;" name="txtpraydesc1" placeholder="Enter Description Here" id="descriptionPo"></textarea>
                    </div>
                    <div class="col-2">
                        <i class='fa fa-power-off red-color' style="color:red;font-size:50px;"></i>
                    </div>
                </div>
                <div class="row pb-1 mb-0">
                    <div class="row">
                        <div class="col-8">
                        </div>
                        <div class="col-3">
                            <button type="button" class="btn btn-primary text-secondary btnop" id="payment">Payment</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


<div class="modal fade" id="modalPaymentone" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width:32rem!important;">
        <div class="modal-content">
            <div class="modal-header text-center p-1">
                <div class="row ml-1 w-100" @*style="min-width:100% !important"*@>
                    <div class="col-2 p-0 m-0 text-left">
                        <i class='fa fa-credit-card' style="color:darkgoldenrod;font-size:30px;"></i>
                    </div>
                    <div class="col-8 pl-0 ml-0">
                        <h6 class="modal-title w-100 font-weight-bold" style="text-align:left;margin-top:3px!important;">PO # <label id="poNumberone"></label></h6>
                    </div>
                    <div class="col-2">
                        <button type="button" id="paymentonemodalclose" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-body pb-0" style="background-color: #f2f0f2;width:100%;">
                <div class="row">
                    <p id="companyNameone" style="color:darkblue;font-weight:bolder;font-size:20px;"></p>
                </div>




                <div class="row pb-1 mb-0">
                    <div class="col-2 pr-0"></div>
                    <div class="col-3 pr-0">
                        <label style="color: red; font-weight: bold; font-size: 15px;">PO Balance</label>
                    </div>
                    <div class="col-5">
                        <div class="input-group">
                            <input type="text" disabled hidden id="ispartialPaid" class="form-control" value="not">
                            <input type="text" disabled hidden id="preorderPaid" class="form-control" value="0">
                            <input type="text" disabled id="poBalancee" name="creditVendor" class="form-control validate" style="color:red;min-width: 14rem;max-width: 100%; text-align:right; max-width: 100%; height: 30px !important;">
                        </div>
                    </div>
                </div>
                <div class="row pb-1 mb-0">
                    <div class="col-2 pr-0"></div>
                    <div class="col-3 pr-0">
                        <label style="color: blue; font-weight: bold; font-size: 15px;">Amount</label>
                    </div>
                    <div class="col-5">
                        <div class="input-group">
                            <input type="text" id="poAmountt" name="creditVendor" class="form-control validate" style="color:blue;min-width: 14rem;max-width: 100%; text-align:right; max-width: 100%; height: 30px !important;">
                        </div>
                    </div>
                </div>
                <div class="row pb-1 mb-0">
                    <div class="col-2 pr-0"></div>
                    <div class="col-3">
                        <label style="color: darkblue; font-weight: bold; font-size: 15px;">Date</label>
                    </div>
                    <div class="col-5">
                        <div class="input-group">
                            <input type="text" id="datepickerPO" autocomplete="off" name="creditVendor" class="form-control validate" style="color:darkblue;min-width: 14rem;max-width: 100%; text-align:right; height: 30px !important;">
                        </div>
                    </div>
                </div>



                <div class="row pb-1 mb-0">
                    <div class="col-12">
                        <label style="color: darkblue; font-weight: bold; font-size: 15px;">Comments</label>
                        <textarea class="col-12" style="text-align: left;height:5rem" name="commentPO" placeholder="Enter Comments Here" id="commentsPO"></textarea>
                    </div>
                </div>
                <div class="row mt-2 pb-1 mb-0">
                    <div class="col-3">
                        <button type="button" style="padding-left: 30px;padding-right: 30px;" class="btn btn-primary text-secondary" id="wire">Wire</button>
                    </div>
                    <div class="col-3">
                        <button type="button" style="padding-left: 30px;padding-right: 30px;" class="btn btn-primary text-secondary" id="cashout">Cashout</button>
                    </div>
                    <div class="col-3" style="margin-left: 20px;">
                        <button type="button" style="padding-left: 30px;padding-right: 30px;" class="btn btn-primary text-secondary" id="other">Other</button>
                    </div>
                    <div class="col-2">
                        <i class='fa fa-power-off red-color' style="color:red;font-size:35px;"></i>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>



<div class="modal fade" id="modalPaymentcreditone" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width:32rem!important;">
        <div class="modal-content">
            <div class="modal-header text-center p-1">
                <div class="row ml-1 w-100" @*style="min-width:100% !important"*@>
                    <div class="col-2 p-0 m-0 text-left">
                        <i class='fa fa-credit-card' style="color:darkgoldenrod;font-size:30px;"></i>
                    </div>
                    <input hidden id="HiddenDiscount" />
                    <div class="col-8 pl-0 ml-0">
                        <h6 class="modal-title w-100 font-weight-bold" style="text-align:left;margin-top:3px!important;">PO # <label id="poNumbercreditone"></label></h6>
                    </div>
                    <div class="col-2">
                        <button type="button" id="paymentonecreditmodalclose" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-body pb-0" style="background-color: #f2f0f2;width:100%;">
                <div class="row">
                    <p id="companyNamecreditone" style="color:darkblue;font-weight:bolder;font-size:20px;"></p>
                </div>




                <div class="row pb-1 mb-0">
                    <div class="col-3 pr-0">
                        <label style="color: red; font-weight: bold; font-size: 15px;">PO Balance</label>
                    </div>
                    <div class="col-5">
                        <div class="input-group">
                            <input type="text" disabled id="poBalanceecredit" name="creditVendor" class="form-control validate" style="color:red;min-width: 14rem;max-width: 100%; text-align:right; max-width: 100%; height: 30px !important;">
                        </div>
                    </div>
                </div>
                <div class="row pb-1 mb-0">
                    <div class="col-3 pr-0">
                        <label style="color: red; font-weight: bold; font-size: 15px;">Total Credit</label>
                    </div>
                    <div class="col-5">
                        <div class="input-group">
                            <input type="text" disabled id="totalcredit" name="totalcredit" class="form-control validate" style="color:red;min-width: 14rem;max-width: 100%; text-align:right; max-width: 100%; height: 30px !important;">
                        </div>
                    </div>
                </div>
                <div class="row pb-1 mb-0">
                    <label class="dim col-sm-12 text-primary">Supplier</label>
                </div>
                <div class="row pb-1 ms-2 mb-0">

                    <div class="col-9 col-lg-9 col-sm-9 p-0 mb-0" style="margin-top: 0.1rem;">
                        <input class="form-control" disabled style="width:21rem; border:2px solid black; border-radius:none; font-weight:bold;" id="creditInput" />
                        @*<div class="datalist-wrap autocomplete">
                        <div class="input-wrap">
                        <input class="form-control searchname spname" style="width:21rem; border:2px solid black; border-radius:none; font-weight:bold;" name="supplierName" list="supplierName" id="myInputmodal" type="text" placeholder="Enter supllier name to search" />
                        </div>
                        <div class="input-lg mx-auto dropdown w-100" id="searchdropdownmodal" data-vendorID=""></div>
                        <span style="display:none" id="setvendorid"></span>
                        <datalist class="searchdropdownmodal" id="supplierNamemodal" data-vendorID="">
                        </datalist>
                        <span hidden id="pppp">Click</span>
                        </div>*@
                    </div>

                    @*<div class="col-3 col-lg-3 col-sm-3"></div>*@

                    <div class="col-3 col-lg-3 col-sm-3 m-0 p-0">
                        <div class="datalist-wrap autocomplete">
                            <div class="input-wrap">
                                <input class="form-control searchname spname " disabled style="width:90%;padding:0;margin-top:1px; border:2px solid black; border-radius:none; font-weight:bold;" name="supplierNoo" list="supplierNoo" id="txtSupplierNoo" type="text" placeholder="Supplier No" />
                            </div>
                            <datalist class="searchdropdownnn" id="supplierNoo">
                            </datalist>
                            <span hidden id="ppp">Click</span>
                        </div>
                    </div>



                </div>
                <div class="row pb-1 ms-2 mb-0">
                    <div class="col-4 pr-0 mr-0">
                        <label style="color: blue; font-weight: bold; font-size: 15px;">Credit Amount</label>
                    </div>
                    <div class="col-5">
                        <div class="input-group" style="width:17rem">
                            <input type="text" id="creditAmountmodal" name="creditAmount" class="form-control validate" style="color:blue;text-align:right;">
                        </div>
                    </div>
                </div>

                <div class="row pb-1 mb-0 mt-2">
                    <div class="col-12">
                        <textarea class="col-12" style="text-align: left;height:5rem" name="commentsmodal" id="commentsmodal"></textarea>
                    </div>
                </div>

                <div class="row mt-2 pb-1 mb-0">
                    <div class="col-1"></div>
                    <div class="col-5">
                        <button type="button" style="padding-left: 40%;padding-right: 40%;" data-userName="" data-company="" data-userId="" class="btn btn-primary text-secondary" onclick="SaveCreditSilent()" id="silentModal">Silent</button>
                    </div>

                    <div class="col-5">
                        <button type="button" style="padding-left: 40%;padding-right: 40%;" class="btn btn-primary text-secondary" id="printModal">Print</button>
                    </div>
                    <div class="col-1"></div>
                </div>
                <div class="row pb-1 mb-2 mt-2">
                    <div class="col-12">
                        <div class="table-responsive">
                            <table class="table" style="background-color:white">
                                <thead style="background-color:#cccbcb">
                                    <tr>
                                        <th scope="col">CustomerName</th>
                                        <th scope="col">Company</th>
                                        <th scope="col">InvoiceNo</th>
                                        <th scope="col">Credit Date</th>
                                        <th scope="col">Amount</th>
                                    </tr>
                                </thead>
                                <tbody id="creditBodytble">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="modalNewItem" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width:450px!important;">
        <div class="modal-content">
            <div class="modal-header text-center p-1">
                <div class="row ml-1 w-100" @*style="min-width:100% !important"*@>
                    <div class="col-2 p-0 m-0 text-left">
                        <i class='fa fa-credit-card' style="color:darkgoldenrod;font-size:30px;"></i>
                    </div>
                    <div class="col-8 pl-0 ml-0">
                        <h6 class="modal-title w-100 font-weight-bold" style="text-align:left;margin-top:3px!important;">Add New Item<label id="poNumber"></label></h6>
                    </div>
                    <div class="col-2">
                        <button type="button" class="close1" style="border: none; background: transparent;" id="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-body" style="background-color: #f2f0f2;width:100%;">

                <div class="row pb-1">
                    <div class="col-12 pr-0">
                        <label data-error="wrong" data-success="right" for="form3" style=" color: darkblue; font-weight: bold; font-size: 15px;">Description</label>
                    </div>
                    <div class="col-12">
                        <div class="input-group">
                            <input type="text" id="description" name="description" value="" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;">
                        </div>
                        <label class="text-danger db" id="namevalidation"></label>
                    </div>
                    <div class="col-8 pr-0">
                        <div class="row">
                            <div class="col-12 pr-0">
                                <label data-error="wrong" data-success="right" for="form3" style=" color: darkblue; font-weight: bold; font-size: 15px;">Category</label>
                            </div>
                            <div class="col-12">
                                <div class="input-group">
                                    @*<input type="text" id="PoAmount" name="PoAmount" value="" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;">*@
                                    @Html.DropDownList("ItemCategoryId", (IEnumerable<SelectListItem>)ViewBag.ItemCategory, "--Choose Item Category--", new { @class = "form-control validate", id = "category", style = "padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;" })

                                </div>
                                <label class="text-danger db" id="categoryvalidation"></label>
                            </div>
                        </div>
                    </div>
                    <div class="col-4 pr-0">
                        <div class="row">
                            <div class="col-12 pr-0">
                                <label data-error="wrong" data-success="right" for="form3" style=" color: darkblue; font-weight: bold; font-size: 15px;">Cost</label>
                            </div>
                            <div class="col-12">
                                <div class="input-group">
                                    <input type="number" id="productcost" name="productcost" min="1" value="" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;">

                                </div>
                                <label class="text-danger db" id="productcostyvalidation"></label>
                            </div>
                        </div>
                    </div>
                    <div class="col-8 pr-0">
                        <div class="row">
                            <div class="col-12 pr-0">
                                <label data-error="wrong" data-success="right" for="form3" style=" color: darkblue; font-weight: bold; font-size: 15px;">Supplier Item #</label>
                            </div>
                            <div class="col-12">
                                <div class="input-group">
                                    <input type="text" id="supplieritem" name="supplieritem" value="" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;">

                                </div>
                                <label class="text-danger db" id="supplieritemvalidation"></label>
                            </div>
                        </div>
                    </div>
                    <div class="col-4 pr-0">
                        <div class="row">
                            <div class="col-12 pr-0">
                                <label data-error="wrong" data-success="right" for="form3" style=" color: darkblue; font-weight: bold; font-size: 15px;">Retail</label>
                            </div>
                            <div class="col-12">
                                <div class="input-group">
                                    <input type="number" max="1" id="productretail" name="productretail" value="" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;">

                                </div>
                                <label class="text-danger db" id="productretailvalidation"></label>

                            </div>
                        </div>
                    </div>
                    <div class="col-8 pr-0">
                        <div class="row">
                            <div class="col-12 pr-0">
                                <label data-error="wrong" data-success="right" for="form3" style=" color: darkblue; font-weight: bold; font-size: 15px;">Barcode</label>
                            </div>
                            <div class="col-12">
                                <div class="input-group">
                                    <input type="text" id="productbarcode" name="productbarcode" value="" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;">

                                </div>
                                <label class="text-danger db" id="productbarcodevalidation"></label>

                            </div>
                        </div>
                    </div>
                    <div class="col-4 pr-0">
                        <div class="row">
                            <div class="col-12 pr-0">
                                <label data-error="wrong" data-success="right" for="form3" style=" color: darkblue; font-weight: bold; font-size: 15px;">Case Qty</label>
                            </div>
                            <div class="col-12">
                                <div class="input-group">
                                    <input type="number" max="1" id="productcaseqty" name="productcaseqty" value="" class="form-control validate" style="padding-left: 0px !important; padding-right: 0px !important; max-width: 100%; padding-bottom: 5px; height: 30px !important;">

                                </div>
                                <label class="text-danger db" id="productcaseqtyvalidation"></label>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <div class="row">
                    <div class="col-10">
                    </div>
                    <div class="col-2">
                        <button type="button" class="btn btn-primary text-secondary btnop" onclick="SaveItems()">Create</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>





<div class="modal fade" id="CostChangeTable" tabindex="-1" aria-labelledby="ModalLabel" style="display: none;" aria-hidden="true">
    <div class="modal-dialog" style="max-width:max-content" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalLabel">Cost Detail</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <table class="table table-bordered table-condensed" id="saletable" style="border:0.7px solid;">
                    <thead>
                        <tr style="border-bottom:1.4px solid" class="grids-head">
                            <th class="text-center">Item</th>
                            <th class="text-center">Old Price</th>
                            <th class="text-center">New Price</th>
                            <th class="text-center">Price Difference</th>
                            <th class="text-center">Change Percent</th>
                            <th class="text-center">Change Date</th>
                            <th class="text-center">Changed by</th>

                        </tr>
                    </thead>

                    <tbody id="cart_body">
                    </tbody>
                </table>

            </div>
            <div class="modal-footer">
                @*<button type="button" class="btn btn-success" id="registeremployee" onclick="approveregister()">Register</button>*@
            </div>
        </div>
    </div>
</div>



<div id="VendorParModal" class="modal fade" z-index="-1" role="dialog">
    <div class="modal-dialog modal-lg" style="">
        @* style="width:1250px;"*@
        <div class="modal-content">
            <div class="modal-header" style="padding:0.5rem!important;">
                <h5 class="modal-title" id="ModalLabel">Supplier's Detail</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="CloseVendorParModal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="color: #0000ab; padding-top: 20px;padding-bottom:10px;">
                <div class="row">
                    @{
                        Html.RenderPartialAsync("VendorDetailPartialView", new Vendor());
                    }

                </div>
            </div>
        </div>
    </div>
</div>

@*Modal for item appending*@
<div id="InventoryLookupModal" class="modal fade" z-index="-1" role="dialog">
    <div class="modal-dialog" style="min-width: 43%;">
        <div class="modal-content" style="background-color:#e1e1e1">
            <div class="modal-header" style="padding:0.5rem!important;">
                <h5 class="modal-title" id="ModalLabel">Inventory Lookup</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="CloseInventoryLookupModal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="color: #0000ab; padding-top: 20px;padding-bottom:10px;">
                <div class="row">
                    <div class="col-lg-10">
                        <div class="row ">
                            <div class="col-lg-2" style="margin-right: -10px;">
                                <label style="width: 62px;color: #810101;font-weight: bolder;">Find Item</label>
                            </div>
                            <div class="col-lg-2">
                                <input id="itemStockID" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);margin-left:6px;background-color:#e1e1e1">
                            </div>
                            <div class="col-lg-8 " style="margin-left: 10px;">
                                @* <input type="text" class="searchnamee" onkeyup="GetAllMatchedItemF6(event)" autocomplete="off" style="min-width:100%">
                                <div style="background-color: blue !important;cursor:pointer;position:absolute;" id="listallmissionss"></div>*@
                                <input type="text" class="searchnamee" onkeyup="GetItemListModalF6()" id="DescriptionInput1" list="productList1" autocomplete="off" style="min-width:100%">
                                <datalist class="dropt input-lg mx-auto dropdown w-100" id="productList1" style="background-color: blue !important;cursor:pointer;position:absolute;"></datalist>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-lg-2" style="margin-right: -10px;">
                                <label style="width: 62px;color: #810101;font-weight: bolder;">Customer</label>
                            </div>
                            <div class="col-lg-2">
                                <input id="customerCode" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);margin-left:6px;background-color:#e1e1e1;">
                            </div>
                            <div class="col-lg-8 " style="margin-left: 10px;">
                                <input type="text" class="searchnamecust" autocomplete="off" style="min-width:100%">
                                <div style="background-color: blue !important;cursor:pointer;position:absolute;" id="listallcust"></div>
                            </div>
                        </div>


                    </div>
                    <div class="col-lg-2">
                        <img onclick="CloseInventoryLookupModal()" src="../images/cancel.png">
                    </div>
                </div>

                <hr style="height: 2px;width:112%;margin-left:-26px;">
                <div class="row">
                    <div class="col-lg-2">
                        <input id="itemNumber" type="text" style="max-width:80px;border:none;background-color:transparent" disabled>
                    </div>
                    <div class="col-lg-5">
                        <label style="display:inline">Quantity on Hand:</label>
                        <input id="qtyOnHand" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1" disabled>
                    </div>
                    <div class="col-lg-5">
                        <label style="display:inline">Buy Quantity:</label>
                        <input id="customQuantity" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1">
                    </div>
                </div>
                <div class="row mt-2">
                    <input id="itemDescription" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#f1f181">
                </div>
                <div class="row mt-2">
                    <div class="col-lg-6">
                        <div class="row">
                            <div class="col-lg-6 text-center">
                                <label>Retail</label>
                                <input id="itemRetail" type="text" style="max-width:130px; border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1">
                            </div>
                            <div class="col-lg-6 text-center" style="margin-left:-15px">
                                <label style="min-width:100px">Customer Price</label>
                                <input id="itemPrice" type="text" style="max-width:130px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#f1f181">
                            </div>
                        </div>

                        <br>

                        <br>
                        <br>
                        <div class="row">
                            <div class="col-lg-4 text-center">
                                <label style="min-width:60px">Case Qty</label>
                                <input type="text" style="max-width:70px; border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2">
                            </div>
                            <div class="col-lg-4 text-center" style="margin-left:-5px">
                                <label style="min-width:67px">Case Pack</label>
                                <input id="caseQTY" type="text" style="max-width:70px; border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2">
                            </div>
                            <div class="col-lg-4 text-center" style="margin-left:-5px">
                                <label style="min-width:63px">Unit Price</label>
                                <input id="unitRetail" type="text" style="max-width:70px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2">
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="col">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th scope="col">Code</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Qty</th>
                                        <th scope="col">Qty Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @*style="border: 2px solid rgb(0 0 0/0.5)"*@
                                    <tr style="">
                                        <th scope="row">A</th>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">B</th>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">C</th>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">D</th>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Out of State</th>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                        <td style="border: 2px solid rgb(0 0 0/0.5);" contenteditable='true'></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>

@*VendorDesModal*@
<div id="VendorDesModal" class="modal fade" z-index="-1" role="dialog">
    <div class="modal-dialog" style="min-width: 43%;">
        <div class="modal-content" style="background-color:#e1e1e1" id="VDMC">
            <div class="modal-header" style="padding:0.5rem!important;">
                <h5 class="modal-title" id="ModalLabel">Inventory Lookup</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closemodalDesc()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" style="color: #0000AB; padding-top: 20px;padding-bottom:10px;">
                <div class="row">
                    <div class="col-lg-10">
                        <div class="row ">
                            <div class="col-lg-2" style="margin-right: -10px;">
                                <label style="width: 62px;color: #810101;font-weight: bolder;">Description</label>
                            </div>
                            <div class="col-lg-8 " style="margin-left: 10px;">
                                @*  <input type="text" class="searchnameee" onkeydown="GetAllMatchedItemsss(event)" autocomplete="off" style="min-width:100%" id="descM">
                                <div style="background-color: blue !important;cursor:pointer;position:absolute;" id="listallmissionsss"></div>*@
                                <input type="text" class="desccM" autocomplete="off" style="min-width:100%" id="DescriptionInput" list="productList" onkeyup="GetItemListModal()">
                                <datalist class="dropt input-lg mx-auto dropdown w-100" id="productList" style="background-color: blue !important;cursor:pointer;position:absolute;"></datalist>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-lg-2" style="margin-right: -10px;">
                                <label style="width: 62px;color: #810101;font-weight: bolder;">UCP/item#</label>
                            </div>
                            <div class="col-lg-8 " style="margin-left: 10px;">
                                <input type="text" class="" autocomplete="off" style="min-width:100%" id="ucpnitem">
                                <div style="background-color: blue !important;cursor:pointer;position:absolute;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-2">
                        <img onclick="closemodalDesc()" src="../images/cancel.png">
                    </div>
                </div>
                <hr style="height: 2px;margin-left:-26px; margin-right:-26px;">
                <div class="row">
                    <div class="col-lg-2" style="display:inline-flex;">
                        @*<input id="itemNumber" type="text" style="max-width:80px;border:none;background-color:transparent" disabled>*@
                        <i class="icon-book-open" style="padding:5px; border-right:1px solid gray; border-bottom:1px solid gray; float:left"></i>
                        <span style="font-weight:bold; color:black; margin-left:15px;" id="itemNumM"></span>
                    </div>
                    <div class="col-lg-5">
                        <label style="display:inline">Quantity On Hand:</label>
                        <input id="qtyOnHandM" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1" disabled>
                    </div>
                    <div class="col-lg-5">
                        <label style="display:inline">Buy Quantity:</label>
                        <input id="customQuantityM" type="text" style="max-width:80px;border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1">
                    </div>
                </div>
                <div class="row mt-2">
                    <input id="itemDescriptionM" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#f1f181">
                </div>
                <div class="row mt-2" style="--bs-gutter-x:0x;">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-3 text-center">
                                <label>Retail</label>
                                <input id="itemRetailM" type="text" style="max-width:130px; border: 2px solid rgb(0 0 0 / 0.2);background-color:#e1e1e1">
                            </div>
                            <div class="col-lg-3 text-center" style="margin-left:-15px">
                                <label style="min-width:100px">Promotion</label>
                                <input id="itemPrice" type="text" style="max-width:130px;border: 2px solid rgb(0 0 0 / 0.2);background-color:lightcyan">
                            </div>
                            <div class="col-lg-2 text-center" style="margin-left:-15px">
                                <label style="min-width:100px">Unit</label>
                                <input id="itemPrice" type="text" style="max-width:130px;border: 2px solid rgb(0 0 0 / 0.2); background-color:#d3d2d2">
                            </div>
                            <div class="col-lg-2 text-center" style="margin-left:-15px">
                                <label style="min-width:100px">Unit Charge</label>
                                <input id="unitChargeM" type="text" style="max-width:130px;border: 2px solid rgb(0 0 0 / 0.2); background-color:#d3d2d2">
                            </div>
                            <div class="col-lg-2 text-center" style="margin-left:-15px">
                                <label style="min-width:100px">Unit Price</label>
                                <input id="unitPriceM" type="text" style="max-width:130px;border: 2px solid rgb(0 0 0 / 0.2); background-color:#d3d2d2">
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>
                    <br>
                    <div class="row">
                        <div class="col-lg-6">
                            <label style="min-width:60px; font-weight:bold; margin-bottom:5px; margin-top:5px;">Barcode</label>
                            <br />
                            <input type="text" style=" border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2">
                            <br />

                            <label style="min-width:67px; font-weight:bold; margin-bottom:5px; margin-top:5px;">Manufacture</label>
                            <br />
                            <input id="manufactureM" type="text" style=" border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2">
                            <br />

                            <label style="min-width:63px; font-weight:bold; margin-bottom:5px; margin-top:5px;">Catagory</label>
                            <br />
                            <input id="catagoryM" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2">
                            <br />

                            <label style="min-width:63px; font-weight:bold; margin-bottom:5px; margin-top:5px;">Sub Catagory</label>
                            <br />
                            <input id="subCatagoryM" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2">
                            <br />

                            <label style="min-width:63px; font-weight:bold; margin-bottom:5px; margin-top:5px;">Family</label>
                            <br />
                            <input id="familyM" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2">
                            <br />

                        </div>

                        <div class="col-lg-6">
                            <div class="row">
                                <p style="color:black; text-align:end; font-size:20px">Code <span style="margin-left:10px; color:blue;">Price</span></p>
                            </div>
                            <div class="row" style="float:right;">
                                <div class="col">

                                    <label style="font-size:22px !important; margin-right:10px;">A</label>
                                    <input id="unitRetail" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2; width:65px; margin-left:10px; height:35px;">
                                    <br />
                                    <label style="font-size:22px !important; margin-right:10px;">B</label>
                                    <input id="unitRetail" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2; width:65px; margin-left:10px; margin-top:5px; height:35px;">
                                    <br />
                                    <label style="font-size:22px !important; margin-right:10px;">C</label>
                                    <input id="unitRetail" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2; width:65px; margin-left:7px; margin-top:5px; height:35px;">
                                    <br />
                                    <label style="font-size:22px !important; margin-right:10px;">D</label>
                                    <input id="unitRetail" type="text" style="border: 2px solid rgb(0 0 0 / 0.2);background-color:#d3d2d2; width:65px; margin-left:8px; margin-top:5px; height:35px;">
                                    <br />
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>
</div>


@*Modalitemshort*@
<div id="additemshort" class="modal fade" role="dialog">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content mw-125" style="height:90%">
            <div class="modal-header m-0 p-0">
                <h5 class="modal-title mx-auto" id="ModalLabel">Select Inventory Items</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closeitemmodal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body m-0 pt-0" style="padding-left:1%;padding-right:1%">
                <div class="row">
                    <div class="w-100 h-100 w-100 d-inline-block actionbox" id="listbtns" style="margin-bottom:-7px;">
                        <div id="onlisticon" class="di">
                            <div class="col di div-style wd-8">
                                <label class="textBlue txtBold">Search</label>
                                <input class="textBlue txtBold borderCustom" type="text" id="searchPro" name="name" value="" style="width:80%;" />
                            </div>
                            <div class="col di div-style wd-5">
                                <input type="checkbox" name="name" value="" />
                                <label class="textBlue txtBold">Any Part</label>
                            </div>
                            <div class="col di div-style wd-7">
                                <input style="color:#1515b7;font-weight:bolder;border:none;" type="text" class="wd-10" id="itemquantitylabel" name="name" value="" />
                            </div>
                            <div class="col di div-style wd-3">
                                <button id="slctbtn" onclick="keycodeget()" class="btn btn-outline-primary btn-icon-text mt-2 pt-2 pb-2">Select</button>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive m-0 p-0" style="background-color:#b0b0b3">
                        <table class="table tablest table-condensed modalTable" id="proTable" style="overflow-x:scroll;overflow-y:scroll;cursor:pointer;">
                            <thead>
                                <tr>
                                    <th scope="col">Description</th>
                                    <th style="width:10px;" scope="col">Retail</th>
                                </tr>
                            </thead>
                            <tbody id="modaltableitemgetlist">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@*Inventory Professional Partial Modal*@
<div id="InventoryPartial" class="modal fade" role="dialog">
    <div class="modal-dialog modal-dialog-scrollable" style="max-width:1100px;">
        <div class="modal-content" style="height:90%">
            <div class="modal-header m-0 p-0">
                <h5 class="modal-title mx-auto" id="ModalLabel">Item Detail</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="CloseInventoryPartial()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body m-0 pt-0" style="padding-left:1%;padding-right:1%">
                <div class="row">

                    <div class="col-lg-12 col-sm-12">
                        <div class="tab-content">
                            <div class="w-100 p-3 h-100 d-inline-block actionbox" id="listbtnss">
                                <div class="row fr" id="existingitemnumbers" style="width:25%">
                                </div>
                                @*<img class="saverecord hide-icon" src="../images/save1.png" style="width:50px" title="Save" />*@&ensp;&ensp;&ensp;
                                <div class="row fr">
                                    <div id="cheapmodalls" class="checkcheapitems">
                                        <div class="form-group">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="ListappenedTabss" class="tab-content">
                                <div class="tab-pane fade show active" id="details" role="tabpanel" aria-labelledby="Details-tab">
                                    <div id="exitingitemss">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading" style="">Items</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6 ;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link active Details-tab" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Financial-tab" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Suppliers-tab" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Purchase-tab" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Saless-tab" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Features-tab" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link Tools-tab" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>

                                                    <div class="panel-body">
                                                    </div>


                                                    <div class="row">
                                                        <div class="col-lg-8 col-md-8 col-sm-8 col-8">
                                                            <div class="row">
                                                                <div class="col-lg-8 col-sm-8">
                                                                    <div class="form-group">
                                                                        <label>Image</label>

                                                                        <img id="output1s" style="width:100px; height:100px; display:none;" />
                                                                        <br />
                                                                        <input autocomplete="off" class="imginput" id="productImage1s" type="file" accept="image/*" onchange="loadFile1(event)" name="ProfileImage">

                                                                        <script>
                                                                            var loadFile1 = function(event) {
                                                                                var output = document.getElementById('output1');
                                                                                output.src = URL.createObjectURL(event.target.files[0]);
                                                                                output.onload = function() {
                                                                                    URL.revokeObjectURL(output.src) // free memory
                                                                                }
                                                                                output.style.display = "block";
                                                                                $("#defaultoutput").hide();
                                                                            };
                                                                        </script>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4 col-sm-4">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-8 col-sm-8">
                                                                    <div class="form-group">
                                                                        <label class="">Name</label>
                                                                        <input type="text" class="form-control" placeholder="Name" id="names" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4 col-sm-4">
                                                                    <div class="form-group">
                                                                        <label class="">Shipment Limit</label>
                                                                        <input type="text" class="form-control" placeholder="Shipment Limit" id="updateonlinelimitss" readonly>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="fba-r label-max-width" for="exampleFormControlSelect3">
                                                                            Category
                                                                        </label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="categorys" readonly>
                                                                        @*<input type="text" class="form-control" placeholder="Shipment Limit" id = "updateonlinelimits">*@
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="col-sm-5">Manufacture</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="manufactures" readonly>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="col-sm-5">Sub Category</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="sub-categorys" readonly>

                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="col-sm-5">Family</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="familys" readonly>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="row">
                                                                <div class="col-lg-3 col-md-3 col-sm-3 col-3">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-5">Retail</label>
                                                                        <input type="text" class="form-control" placeholder="Retail" id="retails" onkeyup="calculateupdate()" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-9 col-md-9 col-sm-9 col-9">
                                                                    <div class="row">
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Units</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" placeholder="Retail" id="unitss" onkeyup="calculateupdate()" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Unit Charge</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="unit-charges" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Unit Retail</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="unit-retails" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-3 col-md-3 col-sm-3 col-3">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12 col-12">BarCode</label>
                                                                        <input type="text" class="form-control" id="barcodes" placeholder="BarCode" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-9 col-md-9 col-sm-9 col-9">
                                                                    <div class="row">
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">QtyCase</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="qtycases" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Qty:Pallet</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="qtypallets" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">SingleUnitMSA</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="sunitmsas" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>

                                                            <div class="row mb-0">
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Location(Slot)</label>
                                                                        <input type="text" class="form-control" id="locationslos" placeholder="Location" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Group</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="groups" readonly>


                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Location 2</label>
                                                                        <input type="text" class="form-control" id="location2s" placeholder="Location" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Mispick</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="mispicks" readonly>


                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Location 3</label>
                                                                        <input type="text" class="form-control" id="location3s" placeholder="Location">
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Color</label>
                                                                        <input type="text" class="form-control dropadditemCategory" id="colors" readonly>


                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-5 col-sm-5">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Location 4</label>
                                                                        <input type="text" class="form-control" id="location4s" placeholder="Location" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-7">
                                                                    <div class="row">
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Weight(lb)</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="weightlbs" readonly>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col-sm-4">
                                                                            <div class="form-group">
                                                                                <label class="dim col-sm-12">Weight(Oz)</label>
                                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                    <input type="text" class="form-control" id="weightozs" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                </div>

                                                            </div>


                                                        </div>
                                                        <div class="col-lg-3 col-md-3 col-sm-3 col-3">
                                                            <div class="row">
                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                    <div class="form-group">
                                                                        <label class="">SalesLimit</label>
                                                                        @*Html.EditorFor(model => model.SalesLimit, new { htmlAttributes = new { @class = "form-control", placeholder = "SalesLimit", id = "saleslimitnew" } })*@
                                                                        <input type="text" placeholder="" id="saleslimitnewss" class="form-control" readonly>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                    <div class="form-group">
                                                                        <label class="col-sm-12">MSAReportAs (00001)</label>
                                                                        <select class="form-control">
                                                                            <option>----Select----</option>


                                                                        </select>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-sm-12">State Report As</label>
                                                                        <input type="text" class="form-control dropadditemCategory" readonly>


                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">

                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                    <br />
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Reporting Weight:</label>
                                                                        <input type="text" class="form-control" placeholder="ReportingWeight" readonly>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-8">Unit:</label>
                                                                        <select class="form-control">
                                                                            <option>------Select---------</option>
                                                                            <option>LB</option>
                                                                            <option>OZ</option>


                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <br /><br /><br /><br />
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-12 col-md-12 col-sm-12 col-12" style=" border: 1px solid; height:50%;">
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Order Quantity</label>
                                                                        <input type="text" class="form-control" id="orderqntynews" placeholder="Order qnty" readonly>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Max Quantity</label>
                                                                        <input type="text" class="form-control" id="maxqntynews" placeholder="Max Quantity" readonly>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="dim col-sm-12">Min Quantity</label>
                                                                        <input type="text" class="form-control" id="minqntynews" placeholder="Min Quantity" readonly>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-1 col-md-1 col-sm-1 col-1">
                                                            <div class="form-group">
                                                                <label>
                                                                    On/Off
                                                                </label>
                                                                @*@Html.CheckBox("IsActive", Model.IsActive)*@
                                                                <input type="checkbox" class="">
                                                            </div>
                                                            <div class="progress progress-bar-vertical" style="height: 40%;width:80%;">
                                                                @*<div class="progress-bar" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="height: @Model.MaxOrderQty%">@Model.MaxOrderQty%</div><div class="progress-bar" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="height: @Model.MaxOrderQty%">@Model.MaxOrderQty%</div>*@
                                                                <div id="progressbarheights" class="progress-bar" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                                            </div>
                                                            <span class="add-style">Stock Level</span>

                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-bottom:15px">
                                                        @*<div class="col-lg-2 col-md-2 col-sm-2 col-2">

                                                        </div>*@
                                                        <div class="col-lg-4 col-md-4 col-sm-4 col-4">
                                                            <label class="dim col-sm-12">SalesLimitAges</label>
                                                            @*@Html.DropDownList("MaintainStockForDays", (IEnumerable<SelectListItem>)ViewBag.NoOfDays, "--Choose Age--", new { @class = "form-control" })*@
                                                            <input type="text" class="form-control dropadditemCategory" id="" readonly>

                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-4 col-4">
                                                            <label class="dim col-sm-12">Need High Authorization</label>
                                                            <input type="checkbox" class="" id="EditCheckBoxNHAs" readonly>
                                                        </div>


                                                    </div>
                                                    <div class="row" id="EditHighlimitOns" style="display:none">
                                                        <div class="col-lg-4 col-md-4 col-sm-4 col-4">
                                                            <label class="dim col-sm-12">High limit On</label>
                                                            <input type="checkbox" class=" txtinput" id="edithighlimitons" placeholder="High limit On" readonly>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="financial" role="tabpanel" aria-labelledby="Financial-tab">
                                    <div id="financial-mains">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                        <div class="panel panel-primary panel-head ">
                                                            <div class="panel-heading">Financial</div>

                                                            <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                                <li class="nav-item">
                                                                    <a class="nav-link Details-tab" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Financial-tab active" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Suppliers-tab" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Purchase-tab" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Saless-tab" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Features-tab" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link Tools-tab" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                                </li>
                                                            </ul>




                                                            <div class="row">
                                                                @*<div class="col-lg-8 col-sm-8">
                                                                <div class="form-group">
                                                                <label class="">Search Item</label>
                                                                @Html.EditorFor(model => model.Financial.ItemName, new { htmlAttributes = new { @class = "form-control", placeholder = "Search Item", id = "searchnamee" } })
                                                                @Html.ValidationMessageFor(model => model.Financial.ItemName, "", new { @class = "text-danger db" })
                                                                </div>
                                                                </div>*@
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label class="">Item No</label>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row ">
                                                                <div class="col">
                                                                    <div class="row">
                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">Cost</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class="txtinput" id="costs" onkeypress="calculateupdateF()" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">Retail</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class="txtinput" id="retails" onkeypress="calculateupdateF()" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">Profit%</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="profitpercnts" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">

                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">MfgPromotion</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="mfgpromotions" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">AddToCost%</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="addtocosts" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="col-md-4 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">Unit Charge</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="unitcharges" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-md-5 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">OutofstateCost</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="outofstatecosts" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-5 padding-lr">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">OutOfStateRetail</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class=" txtinput" id="outofstateretails" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-3 padding-lr">
                                                                            <div class="form-group">
                                                                                <label>.</label>
                                                                                <div class="col-sm-12">
                                                                                    @*@Html.EditorFor(model => model.OutofstateRetail, new { htmlAttributes = new { @class = "form-control", type = "number", id = "dotfield" } })
                                                                                    @Html.ValidationMessageFor(model => model.OutofstateRetail, "", new { @class = "text-danger db" })*@
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col">
                                                                    <table class="table table-bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th scope="col">Code</th>
                                                                                <th scope="col">Price</th>
                                                                                <th scope="col">Qty</th>
                                                                                <th scope="col">Qty Price</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr>
                                                                                <th scope="row">A</th>
                                                                                <td>Mark</td>
                                                                                <td>Otto</td>
                                                                                <td>mdo</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <th scope="row">B</th>
                                                                                <td>Jacob</td>
                                                                                <td>Thornton</td>
                                                                                <td>fat</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <th scope="row">C</th>
                                                                                <td>Larry</td>
                                                                                <td>the Bird</td>
                                                                                <td>twitter</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <th scope="row">D</th>
                                                                                <td>Larry</td>
                                                                                <td>the Bird</td>
                                                                                <td>twitter</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <th scope="row">Out of State</th>
                                                                                <td>Larry</td>
                                                                                <td>the Bird</td>
                                                                                <td>twitter</td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                                <div class="col">
                                                                    <div style="border:1px solid">
                                                                        <div class="form-group mb-0 ms-2">

                                                                            <input type="checkbox" class=" " id="askforpricings" readonly>
                                                                            <label class="form-check-label">
                                                                                AskForPricing
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class="" id="askfordescs" readonly>
                                                                            <label class="form-check-label">
                                                                                AskForDesc
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class=" " id="serializeds" readonly>
                                                                            <label class="form-check-label">
                                                                                Serialized
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class=" " id="taxonsaless" readonly>
                                                                            <label class="form-check-label">
                                                                                TaxOnSales
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class=" " id="purchases" readonly>
                                                                            <label class="form-check-label">
                                                                                Purchase
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class=" " id="nosuchdiscounts" readonly>
                                                                            <label class="form-check-label">
                                                                                NoSuchDiscount
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group mb-0 ms-2">
                                                                            <input type="checkbox" class=" " id="noreturnss" readonly>
                                                                            <label class="form-check-label labelreds">
                                                                                NoReturns
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-group ms-2">
                                                                            <label class="form-check-label labelreds" readonly>
                                                                                SellBelowCost
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-4 col-md-4 col-sm-4 col-4">
                                                                    <table class="table table-borderless" style="border:1px solid;">
                                                                        <thead class="thead-light">
                                                                            <tr>
                                                                                <th scope="col">ST</th>
                                                                                <th scope="col">Tax</th>
                                                                                <th scope="col">Cost</th>
                                                                                <th scope="col">Retail</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr>
                                                                                <td>Larry</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>Larry</td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>Larry</td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                    <button class="btn btn-lg mt-2" style="width:17.5rem;" type="button"><span style="color:red;">Special Customer Price</span></button>
                                                                    <div class="row ms-1" style="border: 1px solid; width: 100%;">
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group">
                                                                                <label class="col-sm-12">SgstdRetailPrice</label>
                                                                                <div class="col-sm-12">
                                                                                    <input type="checkbox" class="txtinput" id="sgtdretailprices" readonly>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group " style="margin-top:30%;">
                                                                                <input type="checkbox" class=" txtinput" id="autosetsrps" readonly>
                                                                                <label class="form-check-label">
                                                                                    Auto Set SRP
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-7 col-md-7 col-sm-7 col-7">
                                                                    <div class="row" style="border:1px solid">
                                                                        <div class="row">
                                                                            <div class="col">

                                                                                <button class="btn-info btn-qty">Qty Price</button>

                                                                            </div>
                                                                            <div class="col">

                                                                                <label>Price</label>
                                                                                <input type="number" class="form-control">
                                                                            </div>
                                                                            <div class="col">
                                                                                <label>Quantity</label>
                                                                                <input type="text" class="form-control" placeholder="Last name" readonly>
                                                                            </div>
                                                                            <div class="col">
                                                                                <label>Qty Price</label>
                                                                                <input type="text" class="form-control" placeholder="Last name" readonly>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row mt-3">
                                                                            <div class="col">

                                                                                <label class="mt-2">Out of State Sale</label>

                                                                            </div>
                                                                            <div class="col">

                                                                                <input type="number" class="form-control" readonly>
                                                                            </div>
                                                                            <div class="col">

                                                                                <input type="text" class="form-control" placeholder="Last name" readonly>
                                                                            </div>
                                                                            <div class="col">
                                                                                <input type="text" class="form-control" placeholder="Last name" readonly>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row mb-2 mt-2" style="border:1px solid">
                                                                        <div class="row pt-1">
                                                                            <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                                <label class="me-1"> Discount</label>
                                                                                <div class="col-lg-7 col-md-7 col-sm-7 col-7">
                                                                                    @*@Html.EditorFor(model => model., new { htmlAttributes = new { @class = "form-control", type = "number", id = "discount" } })*@
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                                <div class="">
                                                                                    <input type="checkbox" class=" txtinput" id="percnts" readonly>
                                                                                </div>
                                                                                <label class="me-1">%</label>
                                                                            </div>
                                                                            <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                                <label class="me-1"> From</label>
                                                                                <div class="">
                                                                                    @*@Html.EditorFor(model => model.From, new { htmlAttributes = new { @class = "form-control", type = "number", id = "from" } })*@
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                                <label class="me-1"> To</label>
                                                                                <div class="">
                                                                                    @*@Html.EditorFor(model => model., new { htmlAttributes = new { @class = "form-control", type = "number", id = "to" } })*@
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="form-group mb-0 mt-1 ms-2" style=" text-align-last: justify;">
                                                                                <label class="form-check-label me-1">
                                                                                    Apply to All
                                                                                </label>
                                                                                @*@Html.EditorFor(model => model.Aa, new { @class = "form-check-input", type = "checkbox", id = "applytoall" })*@
                                                                                <input type="checkbox" class="txtinput" id="purchases" readonly>
                                                                                <label class="form-check-label">
                                                                                    Retail
                                                                                </label>

                                                                                <input type="checkbox" class="txtinput" id="codeas" readonly>
                                                                                <label class="form-check-label">
                                                                                    Code A
                                                                                </label>

                                                                                <input type="checkbox" class=" txtinput" id="codebs" readonly>
                                                                                <label class="form-check-label">
                                                                                    Code B
                                                                                </label>

                                                                                <input type="checkbox" class="form-control txtinput" id="codecs" readonly>
                                                                                <label class="form-check-label">
                                                                                    Code C
                                                                                </label>

                                                                                <input type="checkbox" class=" txtinput" id="codeds" readonly>
                                                                                <label class="form-check-label">
                                                                                    Code D
                                                                                </label>
                                                                            </div>
                                                                            <div class="form-group mb-0 mt-1 ms-2">
                                                                                <input type="checkbox" class=" txtinput" id="addcustomersdiscounts" readonly>
                                                                                <label class="form-check-label">
                                                                                    Add Customer's Discount
                                                                                </label>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                    <div class="row pt-1 pb-1" style="border:1px solid">
                                                                        <div class="col-lg-2 col-md-2 col-sm-2 col-2" style="display:inline-flex">
                                                                            <label class="me-1"> Buy</label>
                                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                @*@Html.EditorFor(model => model.Buy, new { htmlAttributes = new { @class = "form-control", type = "number", id = "buy" } })*@
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-2 col-md-2 col-sm-2 col-2" style="display:inline-flex">
                                                                            <label class="me-1 ms-1"> Get</label>
                                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                @*@Html.EditorFor(model => model.Get, new { htmlAttributes = new { @class = "form-control", type = "number", id = "get" } })*@
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-2 col-md-2 col-sm-2 col-2" style="display:inline-flex">
                                                                            <label class="me-1 ms-1"> @@</label>
                                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                                                                                <input type="checkbox" class=" txtinput" id="attsigns" readonly>
                                                                            </div>
                                                                            <label> %</label>
                                                                        </div>
                                                                        <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                            <label class="me-1 ms-2"> From</label>
                                                                            <div class="">
                                                                                @*@Html.EditorFor(model => model.From, new { htmlAttributes = new { @class = "form-control", type = "number", id = "fromm" } })*@
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-3 col-md-3 col-sm-3 col-3" style="display:inline-flex">
                                                                            <label class="me-1"> To</label>
                                                                            <div class="">
                                                                                @*@Html.EditorFor(model => model.To, new { htmlAttributes = new { @class = "form-control", type = "number", id = "too" } })*@
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            @*<div class="col-lg-4 col-sm-4 fr" style="margin-right:-17%">
                                                            <button type="submit" class="btn btn-lg btn-dark me-3 wd-50"><p style="color:white">Save</p></button>
                                                            </div>*@

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="suppliers" role="tabpanel" aria-labelledby="Suppliers-tab">
                                    <div id="supplier-mains">
                                        <div class="card">
                                            <div class="card-body" style="width:100%;height:100%;">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading bar-styles">Supplier</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Details-tabs" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Financial-tabs" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link active" id="Suppliers-tabs" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Purchase-tabs" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Saless-tabs" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Features-tabs" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Tools-tabs  " data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>

                                                    <div class="row mt-3">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive" id="supplierTables">
                                                            <table class="table table-bordered table-condensed" id="supplierTables" style="border:0.7px solid;">
                                                                <thead>
                                                                    <tr style="border-bottom:1.4px solid" class="grids-head">
                                                                        <th style="width: 10px">Supplier</th>
                                                                        <th>Supplier Item #</th>
                                                                        <th>Case Qty</th>
                                                                        <th>Cost</th>
                                                                        <th>Discount</th>
                                                                        <th>Single Cost</th>
                                                                        <th>Net Cost</th>

                                                                    </tr>
                                                                </thead>
                                                                <tbody id="appendsuppliersmains">
                                                                </tbody>
                                                            </table>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="purchasetab" role="tabpanel" aria-labelledby="Purchase-tab">
                                    <div id="purchase-mains">
                                        <div class="card">
                                            <div class="card-body" style="width:100%;height:100%;">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading bar-styles">Purchase</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Details-tabs" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Financial-tabs" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Suppliers-tabs" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link active" id="Purchase-tabs" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Saless-tabs" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Features-tabs" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Tools-tabs" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>

                                                    <div class="row mt-3">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive" id="">
                                                            <table class="table table-bordered table-condensed" id="saletables" style="border:0.7px solid;">
                                                                <thead>
                                                                    <tr style="border-bottom:1.4px solid" class="grids-head">
                                                                        <th style="width: 10px">Sr#</th>
                                                                        <th>P.O. Number</th>
                                                                        <th>Supplier Name</th>
                                                                        <th>Date Received</th>
                                                                        <th>Quantity</th>
                                                                        <th>Case Qty</th>
                                                                        <th>Cost</th>
                                                                        <th>Total</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="appendpurchaseordersmains">
                                                                </tbody>
                                                            </table>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="sales" role="tabpanel" aria-labelledby="Saless-tab">
                                    <div id="sale-mains">
                                        <div class="card">
                                            <div class="card-body" style="width:100%;height:100%;">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading bar-styles">Sales</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Details-tabs" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Financial-tabs" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Suppliers-tabs" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Purchase-tabs" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link active" id="Saless-tabs" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Features-tabs" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Tools-tabs" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>
                                                    <div class="row mt-3">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-12 table-responsive" id="">
                                                            <table class="table table-bordered table-condensed" id="saletables" style="border:0.7px solid;">
                                                                <thead>
                                                                    <tr style="border-bottom:1.4px solid" class="grids-head">
                                                                        <th style="width: 10px">Sr#</th>
                                                                        <th>Invoice #</th>
                                                                        <th>Date</th>
                                                                        <th>Customer Name</th>
                                                                        <th>Sales</th>
                                                                        <th style="color:red">Return</th>
                                                                        <th style="color:saddlebrown">Damage</th>
                                                                        <th style="color:darkred">Cost</th>
                                                                        <th style="color:darkred">Price</th>
                                                                        <th style="color:darkred">Total</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="appendsaleorderss">
                                                                </tbody>
                                                            </table>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="features" role="tabpanel" aria-labelledby="Features-tab">
                                    <div id="feature-mains">
                                        <div class="card">
                                            <div class="card-body" style="width:100%;height:100%;">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading bar-styles">Features</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Details-tabs" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Financial-tabs" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Suppliers-tabs" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Purchase-tabs" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Saless-tabs" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link active" id="Features-tabs" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Tools-tabs" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>
                                                    <h1>Features</h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="tools" role="tabpanel" aria-labelledby="Tools-tab">
                                    <div id="tool-mains">
                                        <div class="card">
                                            <div class="card-body" style="width:100%;height:100%;">
                                                <div class="panel panel-primary panel-head ">
                                                    <div class="panel-heading bar-styles">Tools</div>
                                                    <ul class="nav nav-tabs mt-2" style="border:1px solid #dee2e6;" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Details-tabs" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link " id="Financial-tabs" data-bs-toggle="tab" href="#financial" role="tab" aria-controls="financial" aria-selected="false">Financial</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Suppliers-tabs" data-bs-toggle="tab" href="#suppliers" role="tab" aria-controls="suppliers" aria-selected="false">Suppliers</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Purchase-tabs" data-bs-toggle="tab" href="#purchasetab" role="tab" aria-controls="purchasetab" aria-selected="false">Purchases</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Saless-tabs" data-bs-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="false">Sales</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" id="Features-tabs" data-bs-toggle="tab" href="#features" role="tab" aria-controls="features" aria-selected="false">Features</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link active" id="Tools-tabs" data-bs-toggle="tab" href="#tools" role="tab" aria-controls="tools" aria-selected="false">Tools</a>
                                                        </li>
                                                    </ul>
                                                    <h1>Tools</h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                    @*End*@
                </div>
            </div>
        </div>
    </div>
</div>



@*Inventory Second Modal*@
<div id="InventorySecondModal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content mw-125" style="height:90%">
            <div class="modal-header m-0 p-0">
                <h5 class="modal-title mx-auto" id="ModalLabel">Inventory reporting on PO#  </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="CloseInventorySecondModal()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body m-0 pt-0" style="padding-left:1%;padding-right:1%">
                <div class="row" style="padding:0px 5px 0px 5px">
                    <div class="col-lg-3">
                        <label class="dim" style=" font-weight:600; ">Item No/Description</label>
                        <input id="" type="text" class="form-control" style="width:100%; height:27px;" />
                    </div>
                    <div class="col-lg-3">
                        <label class="dim" style=" font-weight:600;"> Manufacturer </label>
                        <input id="" type="text" class="form-control" style="width:100%; height:27px; " />
                    </div>
                    <div class="col-lg-3">
                        <label class="dim" style=" font-weight:600;"> Category </label>
                        <input id="" type="text" class="form-control" style="width:100%; height:27px; " />
                    </div>
                    <div class="col-lg-3" style="padding-top:22px">
                        <input type="checkbox" />
                        <label id="" style="font-weight:bold;">Cigrette</label>
                        <input type="checkbox" />
                        <label id="" style="font-weight:bold;">Tobacco</label>
                    </div>
                </div>
                <div class="row" style="padding:0px 5px 0px 5px">
                    <div class="col-lg-3">
                        <label class="dim" style=" font-weight:600; ">Group Code</label>
                        <input id="" type="text" class="form-control" style="width:100%; height:27px;" />
                    </div>
                    <div class="col-lg-3">
                        <label class="dim" style=" font-weight:600;"> Family </label>
                        <input id="" type="text" class="form-control" style="width:100%; height:27px; " />
                    </div>
                    <div class="col-lg-3">
                        <label class="dim" style=" font-weight:600;"> Sub Category </label>
                        <input id="" type="text" class="form-control" style="width:100%; height:27px; " />
                    </div>
                    <div class="col-lg-3">
                        <label class="dim" style=" font-weight:600; margin-left:-20px">State Report As </label>
                        <input id="" type="text" class="form-control" style="width:85%; height:27px; margin-left:-20px " />
                        @*<a href="#" id=""> <img src="../images/printer.png" style="width: 50px;" title="Print" /></a>*@
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="table-responsive" style="margin-left:-3.5%;margin-right:-3.5%;">
                            <table class="table" style="border: 1px solid #000000; border-bottom: 1px solid #000000; ">
                                <thead style="border-bottom: 1.2px solid #000000; ">
                                    <tr>
                                        <th>Description</th>
                                        <th>Item #</th>
                                        <th>QTY</th>
                                        <th>MSA Report</th>
                                        <th>State Report</th>
                                        <th>Single Unit</th>
                                        <th>Taxed Weight</th>
                                        <th>Taxed Weight</th>
                                    </tr>
                                </thead>
                                <tbody id="appendnewrowforSecond">
                                    <!-- hidden row -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@*Cheque Modal*@
<div id="VendorChequeModal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content " style="height:90%; width:212% !important; margin-left:-50%;">
            <div class="modal-header m-0 p-0">
                <h5 class="modal-title mx-auto" id="ModalLabel">Bank Transactions</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="closecheque()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body m-0 pt-0" style="padding-left:1%;padding-right:1%">
                <div class="row" style="padding:0px 5px 0px 5px">
                    <div class="col-lg-6">
                        <div class="row" style="padding-top:8px;">
                            <div class="col-lg-12">
                                <label class="dim" style=" font-weight:bold; color:blue; ">Balance:<span id="chequeBalance" style="color:gray;"></span></label>
                            </div>
                        </div>
                        <div class="row" style="padding-top:8px;">
                            <div class="col-lg-12">
                                <label class="dim" style=" font-weight:bold; color:blue; ">As of Date: <span id="chequeDate"></span></label>
                            </div>
                        </div>
                        <div class="row" style="padding-top:8px;">
                            <div class="col-lg-12">
                                <label class="dim" style=" font-weight:bold; color:blue; ">Last Cheque #<span id="LastCheque"></span></label>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <select class="form-control" id="BanksDropdown" style="Color:red; font-weight:bold; text-align:center; border-radius:0px; margin-top:28px; background:white;">
                            <option value="1">First National Bank</option>
                            <option value="2">American Bank</option>
                        </select>
                    </div>
                </div>
                <div class="row" style="background:rgb(234, 232, 235); padding:10px;">
                    <div class="col-lg-12" style="background:white; padding:0px;">
                        <div class="tab-content" id="ListappenedTabs" style="padding:0px">
                            <ul class="nav nav-tabs" role="tablist" style="background:rgb(198, 202, 206); justify-content:space-around;">
                                <li class="nav-item" style=" background-color:rgb(199 202 205);">
                                    <a class="nav-link" id="checkBooktab" data-bs-toggle="tab" href="#CheckBookData" role="tab" aria-controls="CheckBookData" aria-selected="false">Check Book</a>
                                </li>
                                <li class="nav-item" style=" background-color:rgb(199 202 205);">
                                    <a class="nav-link" id="payrollCheckotab" data-bs-toggle="tab" href="#PayrollCheckData" role="tab" aria-controls="PayrollCheckData" aria-selected="false">PayRoll Check</a>
                                </li>
                                <li class="nav-item" style=" background-color:rgb(199 202 205);">
                                    <a class="nav-link" id="Adjustmenttab" data-bs-toggle="tab" href="#AdjustmentData" role="tab" aria-controls="AdjustmentData" aria-selected="false">Adjustment</a>
                                </li>
                                <li class="nav-item" style=" background-color:rgb(199 202 205);">
                                    <a class="nav-link " id="depositeBooktab" data-bs-toggle="tab" href="#DepositeBookData" role="tab" aria-controls="DepositeBookData" aria-selected="false">Deposite Book</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-10">
                        <div class="tab-pane fade active show row" id="CheckBookData">
                            <div id="CheckBookDiv" style="background:#00e5ff; border-right:3px solid blue; border-bottom:3px solid blue;">
                                <div class="row">
                                    <div class="col-lg-8">
                                        <label style="font-weight:bold; margin-top: 3%;">ABC DISCOUNTS, LLC</label><br />
                                        <label style="font-weight:bold; margin-top: 20%;">Pay</label>

                                        <span id="word" style=" color:blue; font-weight:bold; margin-left:20px;"></span>
                                        <span id="DecimalPart" style=" color:blue; font-weight:bold; margin-left:40px;"></span>
                                        <br />
                                        <label style="font-weight:bold; position:absolute">To the Order of</label>
                                        <input type="text" readonly id="chequeName" class="form-control" style="border-radius: 0px;width: 70%; margin-left: 27%; background:#00e5ff;  border:2px solid blue;  height:5px;">

                                        <label style="font-weight:bold; position:absolute; margin-left:40px;">Address</label>
                                        <input type="text" readonly id="chequeStreet" class="form-control" style="border-radius: 0px;width: 70%; margin-left: 27%; margin-top: 2px; background:#00e5ff; border:2px solid blue;  height:5px;">

                                        <input type="text" readonly id="chequeCity" class="form-control" style="border-radius: 0px;width: 148px; position:absolute; margin-left: 37%; margin-top: 2px; background:#00e5ff; border:1px solid gray; height:5px;">
                                        <input type="text" readonly id="chequeCountry" class="form-control" style="border-radius: 0px;width: 44%;  margin-top: 2px; background:#00e5ff; border:1px solid gray; height:5px; margin-left:148px;">

                                        <label style="font-weight:bold; position:absolute; margin-left:39px; margin-top:5px">Memo</label>
                                        <input type="text" class="form-control" style="border-radius: 0px;width: 70%; margin-left: 27%; margin-top: 2px; background:#00e5ff; border:2px solid blue; height:5px;">

                                        <div class="row" style="margin-top:10px; margin-bottom:10px">
                                            <div class="col-lg-12">
                                                <span style="margin-left:150px; font-weight:400; color:blue; font-family:'Material Design Icons';">|:043318092|: <span id="AutoCode"></span></span>
                                            </div>
                                        </div>


                                    </div>
                                    <div class="col-lg-4" style=" padding-top:5px; margin-left:-5px;">
                                        <div class="row">
                                            <div class="col-lg-9" style="margin-left:-15px;">
                                                <label style="font-weight:bold; position:absolute">ACH #</label>
                                                <input type="text" id="achNum" class="form-control" style="border-radius: 0px; text-align:center; width: 94%; margin-left: 36%; background:#00e5ff;  border:2px solid blue;  height:5px;">
                                            </div>
                                            <div class="col-lg-3">
                                                <i class="icon-book-open" style="padding:7px; margin-left:16px; border:1px solid gray; background:rgb(234, 232, 235);"></i>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-top:2px;">
                                            <div class="col-lg-9" style="margin-left:-15px;">
                                                <label style="font-weight:bold; position:absolute">Date </label>
                                                <input type="text" id="chequeTill" class="form-control" style="border-radius: 0px;width: 94%; margin-left: 36%; background:#00e5ff;  border:2px solid blue;  height:5px;">
                                            </div>
                                            <div class="col-lg-3">
                                                <i class="icon-book-open" id="TillDateUpdate" style="padding:7px; margin-left:16px; border:1px solid gray; background:rgb(234, 232, 235);"></i>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div style="height:30px;  text-align:center; padding-left:40px; padding-right:37px; text-align:center;">
                                                <input type="text" id="ToTalInDollar" onkeyup="word.innerHTML=convertNumberToWords(this.value)" style="width:90%; border:0px; background:rgb(0, 229, 255); text-align:center;font-weight:bold; color:blue">
                                            </div>

                                            <i class="fa fa-pencil" aria-hidden="true" style="margin-left:-17px; margin-top:63px; width:32px; padding:7px; border:1px solid gray; background:rgb(234, 232, 235);"></i>
                                        </div>
                                        <div class="row" style="margin-top:2px;">
                                            <div class="col-lg-3" style="margin-left:-15px;">
                                                <i class="fa fa-pencil" aria-hidden="true" style="margin-left:-17px; width:32px; padding:7px; border:1px solid gray; background:rgb(234, 232, 235);"></i>
                                            </div>
                                            <div class="col-lg-3" style="-32px;">
                                                <button class="btn" style="    background: rgb(234, 232, 235); border-radius: 0px;color: blue;font-weight: bold;">Memo</button>
                                            </div>
                                            <div class="col-lg-3">
                                                <button class="btn" style="    background: rgb(234, 232, 235); border-radius: 0px;color: blue;font-weight: bold; margin-left:20px;">History</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-3" style="text-align:center">
                                    <label style="font-weight:bold; margin-top:5px; color:black">Category</label>
                                    <select id="CategoryDropdown" style="border-radius: 0px;width: 113%; margin-top: 2px;  border:1px solid black; height:24px;">
                                        <option value="CategoryOne">Category One</option>
                                        <option value="CategoryTwo">Category Two</option>
                                    </select>
                                </div>
                                <div class="col-2" style="text-align:center; padding-left:0px; padding-right:0px">
                                    <label style="font-weight:bold; margin-top:5px; color:black">Invoice #</label>
                                    <input type="text" id="CheqeInvoiceNumber" style="border-radius: 0px;width: 113%; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                                <div class="col-2" style="text-align:center; padding-left:0px; padding-right:0px">
                                    <label style="font-weight:bold; margin-top:5px; color:black">job code</label>
                                    <input type="text" style="border-radius: 0px;width: 113%; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                                <div class="col-2" style="text-align:center; padding-left:0px; padding-right:0px">
                                    <label style="font-weight:bold; margin-top:5px; color:black">Amount</label>
                                    <input type="text" id="chequeInvoiceTotal" style="border-radius: 0px;width: 113%; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                                <div class="col-2" style="text-align:center; padding-left:0px; padding-right:0px">
                                    <label style="font-weight:bold; margin-top:5px; color:black">Discount</label>
                                    <input type="text" style="border-radius: 0px;width: 113%; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                                <div class="col-1" style="text-align:center; padding-left:0px; padding-right:0px">
                                    <label style="font-weight:bold; margin-top:5px; color:black">Calculate</label>
                                    <input type="text" style="border-radius: 0px;width: 150%; background:#c9f3f8; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-3" style="text-align:center">
                                    <input type="text" style="border-radius: 0px;width: 113%; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                                <div class="col-2" style="text-align:center; padding-left:0px; padding-right:0px">
                                    <input type="text" style="border-radius: 0px;width: 113%; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                                <div class="col-2" style="text-align:center; padding-left:0px; padding-right:0px">
                                    <input type="text" style="border-radius: 0px;width: 113%; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                                <div class="col-2" style="text-align:center; padding-left:0px; padding-right:0px">
                                    <input type="text" style="border-radius: 0px;width: 113%; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                                <div class="col-2" style="text-align:center; padding-left:0px; padding-right:0px">
                                    <input type="text" style="border-radius: 0px;width: 113%; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                                <div class="col-1" style="text-align:center; padding-left:0px; padding-right:0px">
                                    <input type="text" style="border-radius: 0px;width:150%; background:#c9f3f8; margin-top: 2px;  border:1px solid black; height:24px;">
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade row" id="PayrollCheckData">
                        </div>
                        <div class="tab-pane fade row" id="AdjustmentData">
                        </div>
                        <div class="tab-pane fade row" id="DepositeBookData">
                        </div>
                    </div>
                    <div class="col-lg-2" style="display:revert; text-align:center">
                        <div id="ChequeIcons" style="display:inline-grid;">
                            <a href="#" onclick="SaveItemForCheque(false,false)"><img src="../images/save.png" style="width:65px" title="Save" /></a>
                            <a href="#"><img src="../images/edit.png" style="width:60px;" title="Edit" /></a>
                            <a href="#" id="Refreshbtn" onclick="onRefresh()"> <img src="../images/refresh.png" style="width:65px" title="Refresh " /></a>
                            <img class="hide-icon" src="../images/delete.png" style="width:65px" title="Delete" onclick="" />
                            <a href="#"> <img src="../images/printer.png" style="width: 65px;" title="Print" /></a>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-10">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="~/vendors/jquery-validation/jquery.validate.min.js"></script>



<script>



    //for supplier credit


    function SaveCreditSilent() {
        var getCompany = $("#silentModal").attr("data-company");
        var getSupplierId = $("#silentModal").attr("data-userId");
        var getSupplierName = $("#silentModal").attr("data-userName");
        var getinvoiceNo = $("#poNumbercreditone").text();
        var getPoBalance = $("#PoAmount").val();
        var getcreditAmount = $("#creditAmountmodal").val();
        var getcomments = $("#commentsmodal").val();

        //yahan
        var record = {};
        record = new FormData();
        record.append("CompanyName", getCompany);
        record.append("UserId", getSupplierId);
        record.append("UserName", getSupplierName);
        record.append("InvoiceNo", getinvoiceNo);
        record.append("RemainingAmount", getPoBalance);
        record.append("CreditAmount", getcreditAmount);
        record.append("Comments", getcomments);


        $.ajax({
            type: "POST",
            url: '@Url.Action("AddCreditSupplier", "Purchase")',

            data: record,
            async: false,
            dataType: "json",
            processData: false,
            contentType: false,
            success: function(result) {
                $('#creditBodytble').empty();
                $('#creditAmountmodal').val("");
                $('#commentsmodal').val("");

                getCreditSupplier();
            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }


    function getCreditSupplier() {
        var id = $("#silentModal").attr("data-userId");
        var invoiceNo = $("#txtInvoiceNumber").text();
        var html = ""
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetCreditSupplierById", "Purchase")',

            data: {
                id: id,
                invNo: invoiceNo
            },
            dataType: 'json',
            success: function(data) {
                var total = 0;
                $.each(data, function(index, item) {
                    html += '<tr class="odd" style="background-color: #f89898 !important;">';
                    html += ' <td class="brdr-right" style = "width:10px;">' + item.userName + '</td>';
                    html += ' <td class="brdr-right" style = "width:10px;">' + item.companyName + '</td>';
                    html += ' <td class="brdr-right">' + item.invoiceNo + '</td>';
                    html += ' <td class="brdr-right">' + item.createdDateonly + '</td>';
                    html += ' <td class="brdr-right">' + item.creditAmount + '</td>';
                    html += '</tr>';

                    total = total + item.amount;
                });

                $('#creditBodytble').append(html);
                $("#creditvendor").val(total);
                $("#totalcredit").val(total);
                // totalPoBalance();
            },

        });
    }



    function OpenInventorySecondModal() {
        $("#InventorySecondModal").modal('show');
    }

    function CloseInventorySecondModal() {
        $("#InventorySecondModal").modal('hide');
    }
    function CloseInventoryPartial() {
        $("#InventoryPartial").modal('hide');
    }
    function AppendAllMissionsss(event) {


        //var getList = sessionStorage.getItem("customerspur");
        //if (getList != null) {

        //    $("#listallcust").empty();
        //    $.each(jQuery.parseJSON(getList), function(i, d) {
        //        inner = '';
        //        inner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByIDdd(' + d.id + ')";>';
        //        if (i == 0) {
        //            inner += '<div class="searchheader">Company Name</div><div class="searchheader">Account Title</div></br>';
        //        }
        //        if (d.company != null) {
        //            inner += '<div class="item_namecust di w-50" data-rel="' + d.id + '">' + d.company + '</div><div class="di">' + d.accountTitle + '</div></br>';

        //        } else {
        //            inner += '<div class="item_namecust di w-50" data-rel="' + d.id + '">' + d.company + '</div><div class="di">' + d.accountTitle + '</div></br>';
        //        }
        //        inner += '</div>';
        //        // $("#listallmissions").modal('show');
        //        $("#listallcustomer").append(inner);


        //    });
        //} else {
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetCustomerauto", "Purchase")',
            async: false,
            dataType: 'json',
            cache: false,
            success: function(data) {
                var inner = '';
                //  sessionStorage.setItem("customerspur", JSON.stringify(data));
                var opts = jQuery.parseJSON(JSON.stringify(data));
                if (opts.length > 0) {
                    //$("#matchedCharityTemplate").show();
                }
                $("#listallcust").empty();
                $.each(opts, function(i, d) {
                    inner = '';
                    inner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByNameForModel(' + d.id + ')";>';
                    if (i == 0) {
                        inner += '<div class="searchheader">Company Name</div><div class="searchheader">Account Title</div></br>';
                    }
                    if (d.company != null) {
                        inner += '<div class="item_namecust di w-50" data-rel="' + d.id + '">' + d.company + '</div><div class="di">' + d.accountTitle + '</div></br>';

                    } else {
                        inner += '<div class="item_namecust di w-50" data-rel="' + d.id + '">' + d.company + '</div><div class="di">' + d.accountTitle + '</div></br>';
                    }
                    inner += '</div>';
                    // $("#listallmissions").modal('show');
                    $("#listallcustomer").append(inner);


                });
            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });
        // }

    };
    var Increament = 0;
    function GetAllMatchedItemsss(event) {
        if (Increament != 0) {
            AppendAllMissions();
        }
        var naminggg = $("#descM").val();
        console.log(naminggg);
        if (naminggg == "") {
            $(".item_dbl").parent().hide();
        }
        else {
            var text = naminggg;
            var items = $(".item_dbl");
            //first, hide all:
            items.parent().hide();

            //show only those matching user input:
            items.filter(function() {
                return $(this).text().toLowerCase().indexOf(text) >= 0;
            }).parent().show();
        }
        Increament++;
    };

    function GetItemByIDdd(val) {

        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetCustomerByID", "Purchase")',

            data: {
                id: id
            },
            dataType: 'json',
            success: function(data) {
                $('#customerCode').val(data.customerCode);
                // $(".searchnameee").val(data.company);
                $("#listallcust").empty();

            },

        });
    }
    //for item
    function AppendAllMissionss(event) {




        $("#listallmissions").empty();
        $("#listallmissionss").empty();
        $("#listallmissionsss").empty();
        $.each(AllAutoItemsList, function(i, d) {
            firstinner = '';
            inner = '';
            innouterinnerer = '';

            firstinner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByID(' + d[i].id + ')" ;>';
            inner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByNameForModelF6(' + d[i].id + ')";>';
            outerinner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByNameForModel(' + d[i].id + ')";>';
            if (i == 0) {
                firstinner += '<div class="searchheader">Description</div><div class="searchheader">Qty</div></br>';
                inner += '<div class="searchheader">Description</div><div class="searchheader">Qty</div></br>';
                outerinner += '<div class="searchheader">Description</div><div class="searchheader">Qty</div></br>';
            }
            if (d[i].stock != null) {
                firstinner += '<div  class="item_namee di w-50" data-rel="' + d[i].id + '">' + d[i].name + '</div><div class="di">' + d[i].stock.quantity + '</div></br>';
                inner += '<div  class="item_namee di w-50" data-rel="' + d[i].id + '">' + d[i].name + '</div><div class="di">' + d[i].stock.quantity + '</div></br>';
                outerinner += '<div  class="item_nameee di w-50" data-rel="' + d[i].id + '">' + d[i].name + '</div><div class="di">' + d[i].stock.quantity + '</div></br>';

            } else {
                firstinner += '<div class="item_namee di w-50" data-rel="' + d[i].id + '">' + d[i].name + '</div><div class="di">' + 0 + '</div></br>';
                inner += '<div class="item_namee di w-50" data-rel="' + d[i].id + '">' + d[i].name + '</div><div class="di">' + 0 + '</div></br>';
                outerinner += '<div  class="item_nameee di w-50" data-rel="' + d[i].id + '">' + d[i].name + '</div><div class="di">' + 0 + '</div></br>';
            }
            firstinner += '</div>';
            inner += '</div>';
            outerinner += '</div>';


            $("#listallmissions").append(firstinner);
            $("#listallmissionss").append(inner);
            $("#listallmissionsss").append(outerinner);
            //$("#listallmissions").modal('show');


        });
        //closed code
        //$.ajax({
        //    type: "GET",
        //    url: '@Url.Action("AutoCompleteSearchItem", "Items")',
        //    async: false,
        //    dataType: 'json',
        //    cache: false,
        //    success: function(data) {
        //        //  sessionStorage.setItem("itemspur",JSON.stringify(data));
        //        var firstinner = '';
        //        var inner = '';
        //        var outerinner = '';
        //        var opts = jQuery.parseJSON(JSON.stringify(data));
        //        if (opts.length > 0) {
        //            //$("#matchedCharityTemplate").show();
        //        }
        //        $("#listallmissions").empty();
        //        $("#listallmissionss").empty();
        //        $("#listallmissionsss").empty();
        //        $.each(opts, function(i, d) {
        //            firstinner = '';
        //            inner = '';
        //            innouterinnerer = '';

        //            firstinner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByID('+d.id+')" ;>';
        //            inner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByNameForModelF6('+d.id+')";>';
        //            outerinner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByNameForModel('+d.id+')";>';
        //            if (i == 0) {
        //                firstinner += '<div class="searchheader">Description</div><div class="searchheader">Qty</div></br>';
        //                inner += '<div class="searchheader">Description</div><div class="searchheader">Qty</div></br>';
        //                outerinner += '<div class="searchheader">Description</div><div class="searchheader">Qty</div></br>';
        //            }
        //            if (d.stock != null) {
        //                firstinner += '<div  class="item_namee di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + d.stock.quantity + '</div></br>';
        //                inner += '<div  class="item_namee di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + d.stock.quantity + '</div></br>';
        //                outerinner += '<div  class="item_nameee di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + d.stock.quantity + '</div></br>';

        //            } else {
        //                firstinner += '<div class="item_namee di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + 0 + '</div></br>';
        //                inner += '<div class="item_namee di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + 0 + '</div></br>';
        //                outerinner += '<div  class="item_nameee di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + 0 + '</div></br>';
        //            }
        //            firstinner += '</div>';
        //            inner += '</div>';
        //            outerinner += '</div>';


        //            $("#listallmissions").append(firstinner);
        //            $("#listallmissionss").append(inner);
        //            $("#listallmissionsss").append(outerinner);
        //            //$("#listallmissions").modal('show');


        //        });
        //    },
        //    error: function(xhr, status, error) {
        //        var errorMessage = xhr.status + ': ' + xhr.statusText
        //    },
        //});
    };
    var Increament = 0;
    function GetAllMatchedItemF6(event) {
        if (Increament != 0) {
            AppendAllMissions();
        }
        var namingg = $(".searchnamee").val();

        if (namingg == "") {
            $(".item_namesF6").parent().hide();
            // $(".item_names").parent().hide();
        }
        else {
            var text = namingg;
            //var items = $(".item_names");
            var items = $(".item_namesF6");
            //first, hide all:
            items.parent().hide();

            //show only those matching user input:
            items.filter(function() {
                return $(this).text().toLowerCase().indexOf(text) >= 0;
            }).parent().show();
        }
        Increament++;
    };

    function GetItemByIDd(val) {
        itemId = val;
        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemsFetch", "Purchase")',

            data: {
                id: id
            },
            dataType: 'json',
            success: function(data) {
                $('#itemDescription').val(data.name);
                $('#itemNumber').val(data.itemNumber);
                $('#itemRetail').val('$' + data.retail);
                $('#itemPrice').val('$' + data.retail);
                if (data.quantityCase != null) {
                    $('#caseQTY').val('$' + data.quantityCase);
                } else {
                    $('#caseQTY').val('$');
                }
                $('#unitRetail').val('$' + data.unitCharge);
                //$("#listallmissionss").empty();

                $(".searchnamee").val('');
            },

        });
    }




    $('#itemStockID').keydown(function(e) {

        if (e.which == 13) {
            GetItemData();
            return false;
        }
    });
    $('#customerCode').keydown(function(e) {

        if (e.which == 13) {
            GetCustomerData();
            return false;
        }
    });

    $('#customQuantity').keydown(function(e) {

        if (e.which == 13) {
            var customQty = $('#customQuantity').val();
            var numberonly = new RegExp('^[0-9]*$');
            if (!numberonly.test(customQty)) {
                swal("Error!", "Kindly enter valid quantity");
                $('#customQuantity').val('');
                isvalid = false;
                return false;
            }

            if (customQty != null && customQty != '') {
                GetItemDataAppend();
            } else {
                swal("Error!", "Please Add Quantity!", "error");
            }
            return false;
        }
    });
    function GetItemDataAppend() {

        var number = 0;
        var tablecount = $("#mytable TBODY TR").length;
        if (parseInt(tablecount) == 0) {
            $(".add-row").trigger("click");
        }

        //$('#mytable tbody tr').each(function(index, tr) {

        //    number++;
        //});
        var itemstockNo = $('#itemNumber').val();
        if (itemstockNo != null && itemstockNo != '') {
            $.ajax({

                url: '@Url.Action("GetProductDataWithStockItemNo", "Purchase")',
                async: false,
                Type: 'GET',
                contentType: "application/json;",
                data: {
                    id: itemstockNo
                },
                dataType: "json",
                success: function(data) {
                    // $(".add-row").trigger("click");
                    //var number = 0;
                    $('#mytable tr').each(function(index, tr) {
                        number++;
                    });
                    var index = number - 1;
                    var qustmQty = $('#customQuantity').val();
                    if (data.id != null) {
                        GetItemByIDa(data.id, index, qustmQty);
                        $("#writecheque").prop('disabled', false);
                    }
                    else {
                        var iddata = itemId;
                        GetItemByIDa(iddata, index, qustmQty);
                    }
                    $('#InventoryLookupModal').modal('hide');
                    $("#writecheque").prop('disabled', false);
                    $('#itemDescription').val('');
                    $('#itemNumber').val('');
                    $('#itemStockID').val('');
                    $('#itemRetail').val('');
                    $('#itemPrice').val('');
                    $('#caseQTY').val('');
                    $('#customQuantity').val('');
                    $('#unitRetail').val('');
                    $(".searchnamee").val('');
                    $(".searchnameee").val('');
                    $("#customerCode").val('');
                    $("#qtyOnHand").val('');

                    //$(".add-row").trigger("click");
                },

            });
        }
        else {
            swal("Error!", "Please Select Item!", "error");
        }

    }

    function GetItemDataAppendForDesModal() {

        var itemDataid = $('#itemNumM').html();
        if (itemDataid != null && itemDataid != '') {
            var itemstockNo = $('#ucpnitem').val();
            if (itemstockNo == null || itemstockNo == "undefined" || itemstockNo == "") {
                itemstockNo = $("#itemNumM").html();
            }
            $.ajax({

                url: '@Url.Action("GetProductDataWithStockItemNo", "Purchase")',
                async: false,
                Type: 'GET',
                contentType: "application/json;",
                data: {
                    id: itemstockNo
                },
                dataType: "json",
                success: function(data) {
                    //$(".add-row").trigger("click");

                    var number = 0;
                    $('#mytable tr').each(function(index, tr) {
                        number++;

                    });
                    var index = number - 1;

                    var qustmQty = $('#customQuantityM').val();
                    GetItemByIDaForDesModal(data.id, index, qustmQty);
                    $("#writecheque").prop('disabled', false);
                    $('#VendorDesModal').modal('hide');
                    $('#ucpnitem').val("");
                    $("#itemDescriptionM").val("");
                    $("#descM").val("");
                    $("#itemNumM").html("");
                    $("#itemRetailM").val("");
                    $("#manufactureM").val("");
                    $("#catagoryM").val("");
                    $("#subCatagoryM").val("");
                    $("#familyM").val("");
                    $("#unitChargeM").val("");
                    $("#unitPriceM").val("");
                    $("#customQuantityM").val("");
                    $("#qtyOnHandM").val("");

                    $(".add-row").trigger("click");


                },

            });
        } else {
            swal("Error!", "Please Select Item", "error");
        }

    }

    function GetItemByIDaForDesModal(val, indexex, qustmQty) {
        var seqnum = indexex;
        console.log(seqnum);
        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockFinancialByID", "Items")',

            data: {
                id: id
            },
            dataType: 'json',
            success: function(data) {
                if (data != null && data != "") {
                    $("#itemid-" + indexex).text(data.id);
                    var count = 0;
                    var exist = 0;
                    var notexist = true;
                    $('#mytable tr').each(function(index, tr) {
                        if (count > 0) {
                            var Id = tr.attributes["id"].value.split("rowid-")[1];
                            /*   var productId = parseInt($("#rowid-" + Id).find("#productId").val());*/
                            var productId = parseInt($("#itemid-" + Id).html());
                            if (productId === data.id) {
                                exist++;
                            }
                            if (exist > 1) {
                                swal("Error!", "Item Already Added!", "error");
                                //$(this).parents('tr').detach();
                                RemoveRow(index);
                                //$(".add-row").trigger("click");
                                notexist = false;

                            }

                        }

                        count++;
                    });



                    if (notexist === true) {
                        $("#rowid-" + seqnum).find("#productId").val(data.id);
                        $("#Description-" + seqnum).text(data.name);
                        $("#Description-" + seqnum).addClass("openinv-" + seqnum);
                        $("#Description-" + seqnum).attr('contenteditable', 'false');
                        $("#Discount-" + seqnum).text("0.00" + "%");
                        $("#Qty-" + seqnum).text(qustmQty);

                        var tr = $("#rowid-" + seqnum).closest("tr");
                        tr.attr('data-itemcode', data.itemNumber);
                        //Add isOutStateTax
                        var vendorid = $("#setvendorid").text();
                        if (vendorid != "") {
                            var Tax = window.outStateTax;
                            var taxPrice = [parseFloat(data.retail)] * [(parseFloat(Tax) / 100)];
                            var newPrice = parseFloat(data.retail) + parseFloat(taxPrice);
                            newPrice = parseFloat(newPrice).toFixed(2);
                            var newcostPrice = parseFloat(data.cost) + parseFloat(taxPrice);
                            newcostPrice = parseFloat(newcostPrice).toFixed(2);
                            $("#Retail-" + seqnum).text("$" + newPrice);
                            $("#Price-" + seqnum).text("$" + newcostPrice);
                            $("#Amount-" + seqnum).text("$" + newcostPrice);
                        }
                        else {
                            $("#Retail-" + seqnum).text("$" + data.retail);
                            $("#Price-" + seqnum).text("$" + data.cost);
                            $("#Amount-" + seqnum).text("$" + data.cost);
                        }

                        $("#itemid-" + seqnum).text(data.id);


                        var string = data.itemNumber;
                        string = string.substring(0, 2) + '-' + string.substring(2, string.length);

                        if (data.stock != null && data.stock != "") {
                            $("#StockItemNumber-" + seqnum).text(string);
                        }

                        QuantityMultipyPrice(indexex);
                        CountTotalOfAllTD();
                        $("#listallmissions").empty();



                        var jj = 1;
                        $('#mytable tr').each(function() {

                            var currentRow = $(this).closest("tr");
                            var check = $("#rowid-" + jj).find("#StockItemNumber-" + jj).text();
                            if (check[jj] == null || check[jj] == "") {
                                // RemoveRow(jj);
                            }
                            jj++
                        });
                        //$(".add-row").trigger("click");
                    }
                    else {
                        swal("Error!", "Item Already Added!", "error");
                        RemoveRow(index);
                    }


                }


            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }


    function GetItemByIDa(val, indexes, qustmQty) {
        var seqnum = indexes;
        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockFinancialByID", "Items")',

            data: {
                id: id
            },
            dataType: 'json',
            success: function(data) {
                //$("#rowid-" + index).find("#productId").val(data.id);
                if (data != null && data != "") {

                    $("#itemid-" + indexes).text(data.id);
                    var count = 0;
                    var exist = 0;
                    var notexist = true;
                    $('#mytable tr').each(function(index, tr) {
                        if (count > 0) {
                            var Id = tr.attributes["id"].value.split("rowid-")[1];
                            /*   var productId = parseInt($("#rowid-" + Id).find("#productId").val());*/
                            var productId = parseInt($("#itemid-" + Id).html());
                            if (productId === data.id) {
                                exist++;

                            }
                            if (exist > 1) {
                                swal("Error!", "Item Already Added!", "error");
                                //$(this).parents('tr').detach();
                                RemoveRow(index);
                                notexist = false;

                            }

                        }

                        count++;
                    });

                    if (notexist === true) {
                        $("#rowid-" + seqnum).find("#productId").val(data.id);
                        $("#Description-" + seqnum).text(data.name);
                        $("#Description-" + seqnum).addClass("openinv-" + seqnum);
                        $("#Description-" + seqnum).attr('contenteditable', 'false');
                        $("#Discount-" + seqnum).text("0.00" + "%");
                        $("#Qty-" + seqnum).text(qustmQty);

                        var tr = $("#rowid-" + seqnum).closest("tr");
                        tr.attr('data-itemcode', data.itemNumber);
                        //Add isOutStateTax
                        var vendorid = $("#setvendorid").text();
                        if (vendorid != "") {
                            var Tax = window.outStateTax;
                            var taxPrice = [parseFloat(data.retail)] * [(parseFloat(Tax) / 100)];
                            var newPrice = parseFloat(data.retail) + parseFloat(taxPrice);
                            newPrice = parseFloat(newPrice).toFixed(2);
                            var newcostPrice = parseFloat(data.cost) + parseFloat(taxPrice);
                            newcostPrice = parseFloat(newcostPrice).toFixed(2);
                            $("#Retail-" + seqnum).text("$" + newPrice);
                            $("#Price-" + seqnum).text("$" + newcostPrice);
                            $("#Amount-" + seqnum).text("$" + newcostPrice);
                        }
                        else {
                            $("#Retail-" + seqnum).text("$" + data.retail);
                            $("#Price-" + seqnum).text("$" + data.cost);
                            $("#Amount-" + seqnum).text("$" + data.cost);
                        }

                        $("#itemid-" + seqnum).text(data.id);


                        var string = data.itemNumber;
                        string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                        $("#StockItemNumber-" + seqnum).text(string);
                        QuantityMultipyPrice(indexes);
                        CountTotalOfAllTD();
                        $("#listallmissions").empty();



                        var jj = 1;
                        $('#mytable tr').each(function() {

                            var currentRow = $(this).closest("tr");
                            var check = $("#rowid-" + jj).find("#StockItemNumber-" + jj).text();
                            console.log(check);
                            if (check[jj] == null || check[jj] == "") {
                                //RemoveRow(jj);
                            }
                            jj++
                        });
                        $(".add-row").trigger("click");
                    }
                    else {
                        swal("Error!", "Item Already Added!", "error");
                        RemoveRow(index);
                    }
                }


            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }



    function GetCustomerData() {
        var id = $('#customerCode').val();
        $.ajax({

            url: '@Url.Action("GetCustomerBycustomerCode", "Purchase")',
            async: false,
            Type: 'GET',
            contentType: "application/json;",
            data: {
                id: id
            },
            dataType: "json",
            success: function(data) {
                $('#customerCode').val(data.customerCode);
                // $(".searchnameee").val(data.company);
            },

        });
    }
    function GetItemData() {
        var itemstockNo = $('#itemStockID').val();
        $.ajax({

            url: '@Url.Action("GetProductDataWithStockItemNo", "Purchase")',
            async: false,
            Type: 'GET',
            contentType: "application/json;",
            data: {
                id: itemstockNo
            },
            dataType: "json",
            success: function(data) {


                $('#itemDescription').val(data.name);
                $('#itemNumber').val(data.itemNumber);
                $('#qtyOnHand').val(data.itemQuantity);
                $('#itemRetail').val('$' + data.retail);
                $('#itemPrice').val('$' + data.retail);
                if (data.quantityCase != null) {
                    $('#caseQTY').val('$' + data.quantityCase);
                } else {
                    $('#caseQTY').val('$');
                }
                $('#unitRetail').val('$' + data.unitRetail);
            },

        });
    }

    function GetItemByNameForModelF6(val, indexex) {

        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockFinancialByIDForModels", "Items")',

            data: {
                id: id
            },
            dataType: 'json',
            success: function(data) {
                $('#itemDescription').val(data.name);
                $('#itemNumber').val(data.itemNumber);
                $('#qtyOnHand').val(data.itemQuantity);
                $('#itemRetail').val('$' + data.retail);
                $('#itemPrice').val('$' + data.retail);
                if (data.quantityCase != null) {
                    $('#caseQTY').val('$' + data.quantityCase);
                } else {
                    $('#caseQTY').val('$');
                }
                $('#unitRetail').val('$' + data.unitRetail);
                $("#listallmissionss").hide();
            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }

    function GetItemByNameForModelF3(val, indexex) {

        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockFinancialByIDForModels", "Items")',

            data: {
                id: id
            },
            dataType: 'json',
            success: function(data) {
                $("#itemDescriptionM").val(data.name);
                $("#itemNumM").html(data.itemNumber);
                $("#itemRetailM").val(data.unitRetail);
                $("#manufactureM").val(data.brandName);
                $("#catagoryM").val(data.categoryName);
                $("#subCatagoryM").val(data.subCatName);
                $("#familyM").val(data.family);
                $("#unitChargeM").val(data.cost);
                $("#unitPriceM").val(data.saleRetail);
                $("#qtyOnHandM").val(data.itemQuantity);
                $("#listallmissionsss").hide();
            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }
</script>




<script type="text/javascript">
    $(document).ready(function() {
        // function to add row
        $('.add-row').click(function() {

            var $row = $('#mytable').find('tr.hidden').clone(true).removeClass('hidden');
            $('#mytable').find('table').append($row);
        });

        // function to remove row
        $('.delete-row').click(function() {

            $(this).parents('tr').detach();

        });



        $('#myInput').attr('autocomplete', 'off');
        $("#payment").attr('disabled', true);
        window.paymentInProcess = false;
        window.isValidSave = false;

    });

    function onSaveTrigger() {

        $("#btnSaveSubmit").trigger("click");
    }





</script>

@*SEARCH WITH APPENDING*@
<script>
    $(document).ready(function() {

        $("#txtInvoiceNumber").text('@ViewBag.Invoicenumber');
        $("#Podate").datepicker({
            dateFormat: "dd/MM/yy"
        }).datepicker('setDate', new Date());

        $("#DateReceived").datepicker({
            dateFormat: "dd/MM/yy"
        }).datepicker('setDate', new Date());

        var cgd = $("#Podate").val();
        $("#chequeDate").html(cgd);

        //var myDate=new Date();
        //myDate.setDate(myDate.getDate()+1);
        //var dt = myDate.getDate() + '/' + ("0" + (myDate.getMonth() + 1)).slice(-2) + '/' + myDate.getFullYear();
        //$("#chequeTill").val(dt);

        $("#chequeTill").datepicker({
            dateFormat: "dd/MM/yyyy"
        }).datepicker('setDate', new Date().toISOString());

        $("#TillDateUpdate").datepicker({
            dateFormat: "dd/MM/yy"
        }).datepicker('setDate', new Date());

        //for supplier No


        $(".searchdropdownn").hide();


        $.each(AllSuppliersList, function(index, item) {
            var html = '';
            html += '<option class="setsearchbox anitem dropdown-menu searchitems cp" data-code=' + item.vendorId + ' onclick="ItemSelect(' + item.vendorId + ')" value="' + item.vendorCode + '" >';
            html += '</option>';
            $(".searchdropdownn").append(html);
        });
        //closed code
        //$.ajax({
        //    url: '@Url.Action("GetSupplierJson", "Purchase")',
        //    async: false,
        //    contentType: "application/json;",
        //    dataType: "json",
        //    success: function(data) {
        //        $.each(data, function(index, item) {
        //            var html = '';
        //            html += '<option class="setsearchbox anitem dropdown-menu searchitems cp" data-code=' + item.vendorId + ' onclick="ItemSelect(' + item.vendorId + ')" value="' + item.vendorCode + '" >';
        //            //html += '<span class="item_name di w-50"  >' + item.fullName + '</span>';
        //            html += '</option>';
        //            $(".searchdropdownn").append(html);
        //            //$(".searchdropdownnn").append(html);
        //        });

        //    },
        //    error: function(error) {
        //        //alert(error);
        //    }
        //});

        $("#txtSupplierNo").bind('input', function() {

            if (checkExistss($('#txtSupplierNo').val()) === true) {
                $("#pp").trigger("click");
            }
        });

        function checkExistss(inputValue) {

            var x = document.getElementById("supplierNo");
            var i;
            var flag;
            for (i = 0; i < x.options.length; i++) {
                if (inputValue == x.options[i].value) {
                    flag = true;
                }
            }
            return flag;
        }


        $(function() {
            $('#pp').click(function() {

                var data = $('#txtSupplierNo').val();
                var getcustomerDataByCode = ($("#supplierNo option[value='" + data + "']").attr('data-code'));

                ItemSelectt(getcustomerDataByCode);
            });
        });


        //for payment modal
        $("#txtSupplierNoo").bind('input', function() {

            if (checkExistsss($('#txtSupplierNoo').val()) === true) {
                $("#ppp").trigger("click");
            }
        });

        function checkExistsss(inputValue) {

            var x = document.getElementById("supplierNoo");
            var i;
            var flag;
            for (i = 0; i < x.options.length; i++) {
                if (inputValue == x.options[i].value) {
                    flag = true;
                }
            }
            return flag;
        }


        $(function() {
            $('#ppp').click(function() {

                var data = $('#txtSupplierNoo').val();
                var getcustomerDataByCode = ($("#supplierNoo option[value='" + data + "']").attr('data-code'));

                ItemSelectt(getcustomerDataByCode);
            });
        });



        function ItemSelectt(id) {
            //var id=$('#txtSupplierNo').val();


            var id = id;
            $.ajax({
                url: '@Url.Action("GetJsonVendorDetailByCode", "Purchase")',
                Type: 'GET',
                contentType: "application/json;",
                data: { id: id },
                dataType: "json",
                async: false,
                success: function(data) {


                    $.ajax({
                        url: '@Url.Action("GetpayablesByAccountId", "Purchase")',
                        async: false,
                        Type: 'GET',
                        contentType: "application/json;",
                        data: { id: data.accountNumber },
                        dataType: "json",
                        success: function(data) {
                            if (data != null) {

                                var resultsAmount = parseFloat(data.amount).toFixed(2);
                                $("#previousBalance").val(resultsAmount);
                                // $("#creditvendor").val(data.amount);
                            }
                        },

                    });
                    $('#txtSupplierNo').val(data.vendorCode);
                    $('#PaymentTerms').val(data.payTerms);
                    $("#myInput").val(data.fullName);
                    $('#txtSupplierName').text(data.fullName);
                    $('#setvendorid').text(data.vendorId);
                    $("#searchdropdown").hide();
                    //recwork
                    $("#Received").prop('disabled', false);
                    var Vendorid = data.vendorId;
                    $("#searchdropdown").attr("data-vendorID", Vendorid);



                },

            });
            //Get Vendor Out of State Tax
            $.ajax({

                url: '@Url.Action("GetVendorOutStateTax", "Purchase")',
                async: false,
                Type: 'GET',
                contentType: "application/json;",
                data: { vendorId: id },
                dataType: "json",
                success: function(data) {
                    window.outStateTax = parseFloat(data);
                },

            });

            //Add isOutStateTax
            var vendorid = $("#setvendorid").text();
            if (vendorid != "") {
                //Change Price Based on Tax
                var Tax = window.outStateTax;
                var count = 0
                $("#mytable tr").each(function(index, tr) {
                    if (count > 0) {
                        var rowId = (tr.attributes.id.value).split("rowid-")[1];
                        var taxPrice = [parseFloat((($("#Price-" + rowId).text()).split("$")[1]))] * [(parseFloat(Tax) / 100)];
                        var newPrice = parseFloat((($("#Price-" + rowId).text()).split("$")[1])) + parseFloat(taxPrice);
                        newPrice = parseFloat(newPrice).toFixed(2);

                        $("#Price-" + rowId).text("");
                        $("#Price-" + rowId).text(newPrice);
                        $("#Retail-" + rowId).text("");
                        $("#Retail-" + rowId).text(newPrice);
                        $("#Amount-" + rowId).text("");
                        $("#Amount-" + rowId).text(newPrice);
                    }
                    ChangeAmountonDiscount(rowId);
                    count++;
                });
                CountTotalOfAllTD();
            }

        };



        //$("#otherpayment").attr("disabled", true);
        //$("#writecheque").attr("disabled", true);

        ////for supplier names

        $(".searchdropdown").hide();

        //var getList = sessionStorage.getItem("supplierspur");
        //           if (getList != null) {
        //               $.each(jQuery.parseJSON(getList), function(index, item) {
        //           var html = '';
        //           html += '<option class="setsearchbox anitem dropdown-menu searchitems cp" data-id=' + item.vendorId + ' onclick="ItemSelect(' + item.vendorId + ')" value="' + item.fullName + '" >';
        //           html += '</option>';
        //           //html += '<option class="setsearchbox anitem dropdown-menu searchitems cp" data-id='+item.vendorId+' onclick="ItemSelect(' + item.vendorId + ')" value="' + item.vendorCode + '" >';
        //           //html += '</option>';
        //           $(".searchdropdown").append(html);
        //       });
        //   }else{
        $.ajax({
            url: '@Url.Action("GetSupplierJson", "Purchase")',
            async: false,
            contentType: "application/json;",
            dataType: "json",
            success: function(data) {

                //sessionStorage.setItem("supplierspur",JSON.stringify(data));
                $.each(data, function(index, item) {
                    var html = '';
                    html += '<option class="setsearchbox anitem dropdown-menu searchitems cp" data-id=' + item.vendorId + ' onclick="ItemSelect(' + item.vendorId + ')" value="' + item.company + '" >';
                    html += '</option>';
                    //html += '<option class="setsearchbox anitem dropdown-menu searchitems cp" data-id='+item.vendorId+' onclick="ItemSelect(' + item.vendorId + ')" value="' + item.vendorCode + '" >';
                    //html += '</option>';
                    $(".searchdropdown").append(html);
                });

            },
            error: function(error) {
                //alert(error);
            }
        });
        //   }


        $(function() {
            $('#p').click(function() {
                var data = $('#myInput').val();
                var getcustomerData = ($("#supplierName option[value='" + data + "']").attr('data-id'));

                ItemSelect(getcustomerData);
            });
        });

        $("#myInput").bind('input', function() {
            if (checkExists($('#myInput').val()) === true) {
                $("#p").trigger("click");
            }
        });

        function checkExists(inputValue) {

            var x = document.getElementById("supplierName");
            var i;
            var flag;
            for (i = 0; i < x.options.length; i++) {
                if (inputValue == x.options[i].value) {
                    flag = true;
                }
            }
            return flag;
        }

        AppendAllMissions(event);


        $.each(AllitemsModelList, function(index, item) {

            console.log(item);
            var html = '';
            html += '<tr id="rowlistid-' + index + '" onclick ="Changerow(' + index + ',' + item.id + ')"  class="itemnewtr">';
            html += '<td id="deslistid-' + index + '">' + item.description + '</td>';
            html += '<td id="retlistid-' + index + '">' + item.retail + '</td>';
            html += '</tr >';

            $("#modaltableitemgetlist").append(html);
        });
        //closed code
        //$.ajax({
        //    url: '@Url.Action("GetItemListformodal", "Purchase")',
        //    async: false,
        //    contentType: "application/json;",
        //    dataType: "json",
        //    success: function(data) {

        //        // localStorage.setItem("ItemsPurModal",JSON.stringify(data));
        //        $.each(data, function(index, item) {

        //            var html = '';
        //            html += '<tr id="rowlistid-' + index + '" onclick ="Changerow(' + index + ',' + item.id + ')"  class="itemnewtr">';
        //            html += '<td id="deslistid-' + index + '">' + item.description + '</td>';
        //            html += '<td id="retlistid-' + index + '">' + item.retail + '</td>';
        //            html += '</tr >';

        //            $("#modaltableitemgetlist").append(html);
        //        });

        //    },
        //    error: function(error) {
        //        //alert(error);
        //    }
        //});
        //}



        getopeninvoicelist();
        getpostinvoicelist();


    });




    function getopeninvoicelist() {
        var openinvoices = $('#open-invoice');
        openinvoices.html("");
        openinvoices.append(
            $('<option></option>').val("value").html("Pending")
        );

        $.each(AllopenPurchaseOrdersList, function(val, text) {
            openinvoices.append(
                $('<option></option>').val(text).html(text /* + "-" + text.customerNumber + "-" + text.customerName*/)
            );
        });


        //close code
        //$.ajax({
        //    type: "GET",
        //    url: '@Url.Action("GetOpenPurchase", "Purchase")',
        //    async: false,
        //    dataType: 'json',
        //    success: function(data) {

        //        $.each(data, function(val, text) {
        //            openinvoices.append(
        //                /*  $('<option></option>').val(val).html("<div onclick=seletchdkjsa(" + text.currentInvoiceNumber + ")" + text.currentInvoiceNumber + "-" + text.customerNumber + "-" + text.customerName +"</div>")*/
        //                $('<option></option>').val(text).html(text /* + "-" + text.customerNumber + "-" + text.customerName*/)
        //            );
        //        });
        //    },
        //    error: function(xhr, status, error) {
        //        var errorMessage = xhr.status + ': ' + xhr.statusText
        //    },
        //});
    }
    function getpostinvoicelist() {
        var postedinvoices = $('#posted-invoice');
        postedinvoices.html("");
        postedinvoices.append(
            $('<option></option>').val("value").html("Received")
        );


        $.each(AllpostPurchaseOrdersList, function(val, text) {
            postedinvoices.append(
                $('<option></option>').val(text).html(text/* + "-" + text.customerNumber + "-" + text.customerName*/)

            );
        });

        //close code
        //$.ajax({
        //    type: "GET",
        //    url: '@Url.Action("GetPostPurchase", "Purchase")',
        //    async: false,
        //    dataType: 'json',
        //    success: function(data) {
        //        $.each(data, function(val, text) {
        //            postedinvoices.append(
        //                $('<option></option>').val(text).html(text/* + "-" + text.customerNumber + "-" + text.customerName*/)

        //            );
        //        });
        //    },
        //    error: function(xhr, status, error) {
        //        var errorMessage = xhr.status + ': ' + xhr.statusText
        //    },
        //});
    }


    function Changerow(val, val2) {

        var allrows = $(".itemnewtr").find('tr');
        $.each(allrows.prevObject, function(ind, it) {
            if ($(it).find('id').prevObject[0].id == ("rowlistid-" + val)) {
                $('#itemquantitylabel').trigger('focus');
                $($(it).find('id').prevObject[0]).addClass("selectedrow");

            } else {
                $($(it).find('id').prevObject[0]).removeClass("selectedrow");
            }
        });


        if (val2 != null && val2 != "" && val2 != "undefined") {
            shortaddvalue = val2;
        }

    };

    function keycodeget() {

        //$(".add-row").trigger("click");

        $(".add-row").trigger("click");
        var number = 0;
        $('#mytable tr').each(function(index, tr) {
            number++;

        });
        var index = number - 1;
        $('.modalTable tr').removeClass("selectedrow");
        var qustmQty = $('#itemquantitylabel').val();
        if (qustmQty == '') {
            qustmQty = 1;
        }
        if (shortaddvalue == 0) {
            swal("Error!", "Please Select Item!", "error");
            RemoveRow(index);
        }
        GetItemByIDaForShortModal(shortaddvalue, index, qustmQty);
        $("#writecheque").prop('disabled', false);
        $(".add-row").trigger("click");
        $('#itemquantitylabel').val('');

        $("#additemshort").modal('hide');
        $('#searchPro').val('');
    }


    $('#itemquantitylabel').on('keypress', function(event) {


        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
            keycodeget();
        }
        else {
            var keypressed = String.fromCharCode(event.which);
            var numberonly = new RegExp('^[0-9]*$');
            if (!numberonly.test(keypressed)) {
                swal("Error!", "Kindly enter valid quantity");
                $('#itemquantitylabel').val('');
                isvalid = false;
                return false;
            }
            $('#itemquantitylabel').trigger('focus');
        }
    });
    $("#searchPro").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("#proTable tr").filter(function() {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    function GetItemWithIDForSlectItemList(val2) {

        if (window.newseq != "" && window.newseq != "undefined") {
            var mynewseqnum = window.newseq;
            /alert(mynewseqnum);/
        }
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockmodallist", "Items")',

            data: { val2: val2 },
            dataType: 'json',
            success: function(data) {

                if (data != null && data != "") {
                    $("#Description-" + mynewseqnum).text(data.name);
                    $("#Description-" + mynewseqnum).addClass("openinv-" + mynewseqnum);
                    $("#Retail-" + mynewseqnum).text("$" + data.retail);
                    $("#Price-" + mynewseqnum).text("$" + data.cost);
                    $("#Amount-" + mynewseqnum).text("$" + data.cost);
                    $("#itemid-" + mynewseqnum).text(data.id);
                    var string = data.itemNumber;
                    string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                    $("#StockItemNumber-" + mynewseqnum).text(string);


                    if (data.stock != null && data.stock != "") {
                        /*$("#StockItemNumber-" + mynewseqnum).text(data.stock.stockItemNumber);*/
                    }
                    CountTotalOfAllTD();
                    /* alert("item selected");*/
                    $("#listallmissions").empty();

                }
                QuantityMultipyPrice(mynewseqnum);


            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });

    }


    function GetItemByIDaForShortModal(val, indexex, qustmQty) {

        var seqnum = indexex;
        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockFinancialByID", "Items")',

            data: {
                id: id
            },
            dataType: 'json',
            success: function(data) {
                //console.log("Hemlooooooooo",data);
                if (data != null && data != "") {
                    $("#itemid-" + indexex).text(data.id);
                    var count = 0;
                    var exist = 0;
                    var notexist = true;
                    $('#mytable tr').each(function(index, tr) {
                        if (count > 0) {
                            var Id = tr.attributes["id"].value.split("rowid-")[1];
                            /*var productId = parseInt($("#rowid-" + Id).find("#productId").val());*/
                            var productId = parseInt($("#itemid-" + Id).html());
                            if (productId === data.id) {
                                exist++;
                            }
                            if (exist > 1) {
                                swal("Error!", "Item Already Added!", "error");
                                RemoveRow(index);
                                notexist = false;

                            }

                        }

                        count++;
                    });

                    if (notexist === true) {
                        $("#rowid-" + seqnum).find("#productId").val(data.id);
                        $("#Description-" + seqnum).text(data.name);
                        $("#Description-" + seqnum).addClass("openinv-" + seqnum);
                        $("#Description-" + seqnum).attr('contenteditable', 'false');
                        $("#Discount-" + seqnum).text("0.00" + "%");
                        $("#Qty-" + seqnum).text(qustmQty);

                        var tr = $("#rowid-" + seqnum).closest("tr");
                        tr.attr('data-itemcode', data.itemNumber);
                        //Add isOutStateTax
                        var vendorid = $("#setvendorid").text();
                        if (vendorid != "") {
                            var Tax = window.outStateTax;
                            var taxPrice = [parseFloat(data.retail)] * [(parseFloat(Tax) / 100)];
                            var newPrice = parseFloat(data.retail) + parseFloat(taxPrice);
                            newPrice = parseFloat(newPrice).toFixed(2);
                            var newcostPrice = parseFloat(data.cost) + parseFloat(taxPrice);
                            newcostPrice = parseFloat(newcostPrice).toFixed(2);
                            $("#Retail-" + seqnum).text("$" + newPrice);
                            $("#Price-" + seqnum).text("$" + newcostPrice);
                            $("#Amount-" + seqnum).text("$" + newcostPrice);
                        }
                        else {
                            $("#Retail-" + seqnum).text("$" + data.retail);
                            $("#Price-" + seqnum).text("$" + data.cost);
                            $("#Amount-" + seqnum).text("$" + data.cost);
                        }

                        $("#itemid-" + seqnum).text(data.id);


                        var string = data.itemNumber;
                        string = string.substring(0, 2) + '-' + string.substring(2, string.length);

                        if (data.stock != null && data.stock != "") {
                            $("#StockItemNumber-" + seqnum).text(string);
                        }
                        QuantityMultipyPrice(indexex);
                        CountTotalOfAllTD();
                        $("#listallmissions").empty();


                        var jj = 1;
                        $('#mytable tr').each(function() {

                            var currentRow = $(this).closest("tr");
                            //var check=currentRow.find("td:eq(2)").val();
                            var check = $("#rowid-" + jj).find("#StockItemNumber-" + jj).text();
                            // alert(check);
                            if (check[jj] == null || check[jj] == "") {
                                RemoveRow(jj);
                            }
                            jj++
                        });
                        $(".add-row").trigger("click");
                    }
                    else {
                        swal("Error!", "Item Already Added!", "error");
                        RemoveRow(index);
                    }


                }


            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }



    function GetAllMatchedMissionsText(event) {
        $("#setvendorid").text(0);
        var naming = $("#myInput").val();
        if (naming == "") {
            $(".item_name").parent().hide();
            $("#searchdropdown").hide();
        }
        else {

            var text = naming;
            var items = $(".item_name");
            //first, hide all:
            items.parent().hide();

            //show only those matching user input:
            items.filter(function() {
                return $(this).text().toLowerCase().indexOf(text) >= 0;
            }).parent().show();
            $("#searchdropdown").show();
        }
    };





    // Check Function
    $('#ucpnitem').keypress(function(event) {
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
            var itemno = $('#ucpnitem').val();
            $.ajax({
                type: "GET",
                url: '@Url.Action("ItemWithUcpAndItemNo", "Purchase")',

                data: { itemno: itemno },
                dataType: 'json',
                success: function(data) {

                    if (data != null && data != "" && data != "false") {
                        $("#itemDescriptionM").val(data.name);
                        $("#itemNumM").html(itemno);
                        $("#itemRetailM").val(data.unitRetail);
                        $("#manufactureM").val(data.brandName);
                        $("#catagoryM").val(data.categoryName);
                        $("#subCatagoryM").val(data.subCatName);
                        $("#familyM").val(data.family);
                        $("#unitChargeM").val(data.cost);
                        $("#unitPriceM").val(data.saleRetail);
                        $("#qtyOnHandM").val(data.itemQuantity);

                    }
                    else {

                        swal("Error!", "There is no record with this UCP/itemNo.", "error");
                        $('#ucpnitem').val("");
                    }
                },
                error: function() {

                },
            });

        }
    });



    // Check Function Second
    $('#descM').keypress(function(event) {
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {

            var Name = $('#descM').val();
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetProductDataWithDesc", "Purchase")',

                data: { Name: Name },
                dataType: 'json',
                success: function(data) {

                    if (data != null && data != "" && data != "false") {
                        $("#itemDescriptionM").val(data.name);
                        $("#itemNumM").html(data.itemNumber);
                        $("#ucpnitem").val(data.itemNumber);
                        $("#itemRetailM").val(data.unitRetail);
                        $("#manufactureM").val(data.brandName);
                        $("#catagoryM").val(data.categoryName);
                        $("#subCatagoryM").val(data.subCatName);
                        $("#familyM").val(data.family);
                        $("#unitChargeM").val(data.cost);
                        $("#unitPriceM").val(data.saleRetail);
                        $("#qtyOnHandM").val(data.itemQuantity);

                    }
                    else {

                        swal("Error!", "There is no record with this Description/Product Name", "error");
                        $('#descM').val("");
                    }
                },
                error: function() {

                },
            });

        }
    });


    $('#customQuantityM').keydown(function(e) {

        if (e.which == 13) {
            var customQty = $('#customQuantityM').val();
            var numberonly = new RegExp('^[0-9]*$');
            if (!numberonly.test(customQty)) {
                swal("Error!", "Kindly enter valid quantity");
                $('#customQuantityM').val('');
                isvalid = false;
                return false;
            }

            if (customQty != null && customQty != '') {
                GetItemDataAppendForDesModal();
            } else {
                swal("Error!", "Please Enter Quantity!", "error");
            }
            return false;
        }
    });

    function ItemSelect(id) {

        var Data = id;

        $.ajax({
            url: '@Url.Action("GetJsonVendorDetail", "Purchase")',
            async: false,
            Type: 'GET',
            contentType: "application/json;",
            data: { id: Data },
            dataType: "json",
            success: function(data) {

                $.ajax({
                    url: '@Url.Action("GetpayablesByAccountId", "Purchase")',
                    async: false,
                    Type: 'GET',
                    contentType: "application/json;",
                    data: { id: data.accountNumber },
                    dataType: "json",
                    success: function(data) {
                        console.log(data);
                        if (data != null) {

                            var resultsAmount = parseFloat(data.amount).toFixed(2);
                            $("#previousBalance").val(resultsAmount);
                            $("#creditvendor").val(resultsAmount);
                        }
                    },
                });
                //hereis
                $('#txtSupplierNo').val(data.vendorCode);
                $('#HiddenDiscount').val(data.stateDiscount);
                $('#txtSupplierNoo').val(data.vendorCode);
                $('#PaymentTerms').val(data.payTerms);
                $("#myInput").val(data.fullName);
                $("#creditInput").val(data.fullName);
                $('#txtSupplierName').text(data.fullName);
                $('#setvendorid').text(data.vendorId);
                $("#searchdropdown").hide();
                var DropDownValue = $("#BanksDropdown").val();
                $("#achNum").val(DropDownValue);
                $("#chequeName").val(data.fullName);
                $("#chequeStreet").val(data.street);
                $("#chequeCity").val(data.city);
                $("#chequeCountry").val(data.country);

                var gcb = $("#Total").val();
                //$("#chequeBalance").html(gcb);
                $("#LastCheque").text(data.lastChequeNum);
                var str = data.lastChequeNum;
                if (str != null || str != '' || str != undefined) {
                    str = str.replace(/([-,.€~!#$%^&*()_+=`{}\[\]\|\\:;'<>])+/g, '');
                    console.log(str);

                }
                $("#LastCheque").text(str);

                var Vendorid = data.vendorId;
                $("#searchdropdown").attr("data-vendorID", Vendorid);

                var Vendorid = data.vendorId;
                $("#silentModal").attr("data-userId", Vendorid);
                var CompanyName = data.company;
                $("#silentModal").attr("data-company", CompanyName);
                var userName = data.fullName;
                $("#silentModal").attr("data-userName", userName);
            },
        });
        //Get Vendor Out of State Tax
        $.ajax({

            url: '@Url.Action("GetVendorOutStateTax", "Purchase")',
            async: false,
            Type: 'GET',
            contentType: "application/json;",
            data: { vendorId: Data },
            dataType: "json",
            success: function(data) {
                window.outStateTax = parseFloat(data);
            },
        });

        //Add isOutStateTax
        var vendorid = $("#setvendorid").text();
        if (vendorid != "") {
            //Change Price Based on Tax
            var Tax = window.outStateTax;
            var count = 0
            $("#mytable tr").each(function(index, tr) {
                if (count > 0) {
                    var rowId = (tr.attributes.id.value).split("rowid-")[1];
                    var taxPrice = [parseFloat((($("#Price-" + rowId).text()).split("$")[1]))] * [(parseFloat(Tax) / 100)];
                    var newPrice = parseFloat((($("#Price-" + rowId).text()).split("$")[1])) + parseFloat(taxPrice);
                    newPrice = parseFloat(newPrice).toFixed(2);

                    $("#Price-" + rowId).text("");
                    $("#Price-" + rowId).text(newPrice);
                    $("#Retail-" + rowId).text("");
                    $("#Retail-" + rowId).text(newPrice);
                    $("#Amount-" + rowId).text("");
                    $("#Amount-" + rowId).text(newPrice);
                }
                ChangeAmountonDiscount(rowId);
                count++;
            });
            CountTotalOfAllTD();
        }
    };



</script>

@*TABLE APPENDING*@
<script>
    $("#BanksDropdown").change(function() {
        var DropDownValue = $("#BanksDropdown").val();
        $("#achNum").val(DropDownValue);

        $.ajax({
            type: "GET",
            url: '@Url.Action("GenerateAutoCodeForCheque", "Purchase")',
            async: false,
            dataType: 'json',
            cache: false,
            success: function(data) {
                var code = data;
                $("#AutoCode").text(code + "||'");
            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });

    });



    $("#UpdateCost").click(function() {
        var number = 0;

        $('#mytable tr').each(function(index, tr) {
            number++;
            if ($("#UpdateCost").is(':checked')) {
                $("#Price-" + number).attr('contenteditable', 'true');
            }
            else {
                $("#Price-" + number).attr('contenteditable', 'false');
            }
        });

    })

    var str = 1;
    var sernum = 0;
    $('.add-row').click(function() {

        //var aa = $("#TotalItems").val();
        //if(aa == "" || aa == NaN){
        //    aa = 0;
        //}
        //console.log("///" + aa);
        //var bb = (parseFloat(aa) + 1) ;
        ////var cc = bb - 1;
        //console.log("bb" + bb);
        //$("#TotalItems").val(bb);

        var number = 0;
        $('#mytable tr').each(function(index, tr) {
            console.log(number);
            number++;

        });

        sernum = number;
        //var sernum = 1;
        var valid = true;
        if ($("#setvendorid").text() == 0) {
            swal("Error!", "Kindly Select Vendor!", "error");
            valid = false;
        }
        if (valid) {
            var newqty = $("#itemquantitylabel").val();
            if (newqty != null && newqty != "undefined" && newqty != "") {
                str = newqty
            }

            var suppliername = $("#txtSupplierName").text();
            var suppliercode = $("#txtSupplierNo").text();
            var isreportstatus = $("#Report").is(':checked');
            var showAllitem = $("#ShowAllitem").is(':checked');
            var supplierItemOnly = $("#SupplierItemOnly").is(':checked');
            var UpdateCost = $("#UpdateCost").is(':checked');
            var UpdateOscost = $("#UpateOscost").is(':checked');
            var Received = $("#Received").is(':checked');
            var IsTax = $("#IsTax").is(':checked');
            var IsPrice = $("#IsPrice").is(':checked');
            var IsQty = $("#IsQty").is(':checked');
            var IsCaseQty = $("#IsCaseQty").is(':checked');
            var IsDiscount = $("#IsDiscount").is(':checked');
            var html = '';
            html += '<tr  id="rowid-' + sernum + '" class="tableRow" data-itemcode="">';
            html += '<td id="countser-' + sernum + '" style="width: 10px; display:none" class="counter brd" contenteditable="true">' + sernum + '</td>';
            html += '<td style="width: 10px" id="delete-' + sernum + '"  onclick="RemoveRow(' + sernum + ')"><span class="delete-row ti-close"></span></td>';
            html += '<td  id="SupplierItemNumber-' + sernum + '" style="width: 10px"  class="brd" contenteditable="true" onkeyup="SaveSupplierItemName(event,' + sernum + ')"></td>';
            html += '<td id="StockItemNumber-' + sernum + '" style="width: 10px" class="brd" contenteditable="true" onkeyup ="GetItemByItemNumber(event,' + sernum + ')"></td>';
            //html += '<td id="Description-' + sernum + '" contenteditable="true" class="searchdescname brd' + sernum +'"  onkeyup = "GetAllMatched(' + sernum + ')"></td>';
            html += '<td class="classDesc" ondblclick="openinventory(' + sernum + ')" id="Description-' + sernum + '" contenteditable="false" class="searchdescname brd' + sernum + '"><input style="width: 100%;" class="descc" id="DescriptionInput-' + sernum + '" type="text" name="city" list="productList-' + sernum + '" onkeyup="GetItemList(' + sernum + ')" autocomplete="off"><datalist class="dropt input-lg mx-auto dropdown w-100" id="productList-' + sernum + '" onclick="AppendItem(' + sernum + ')"></datalist></td>';
            html += '<td id="Retail-' + sernum + '" contenteditable="false" class="table-secondary brd"></td>';
            html += '<td id="Price-' + sernum + '" class="brd" contenteditable="true" onkeyup = "GetCountToCheckCheapestProduct(' + sernum + ')">$0.00</td>';
            html += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + str + '</td>';
            html += '<td id="CaseQty-' + sernum + '" class="brd" contenteditable="true">1</td>';
            html += '<td id="Discount-' + sernum + '" class="brd" contenteditable="true" onclick="DiscountPer(' + sernum + ')" onkeyup="DiscuntChangePrice(' + sernum + ')">0.00%</td>';
            html += '<td id="Amount-' + sernum + '" contenteditable="false" class="table-primary brd">$0.00</td>';

            html += '<td id="suppliername-' + sernum + '" style="display:none;">' + suppliername + '</td>';
            html += '<td style="display:none" id="suppliercode-' + sernum + '" contenteditable="true">' + suppliercode + '</td>';
            html += '<td  id="reportid-' + sernum + '" style="display:none;">' + isreportstatus + '</td>';
            html += '<td  id="showAllitemid-' + sernum + '" style="display:none;">' + showAllitem + '</td>';
            html += '<td  id="supplierItemOnlyid-' + sernum + '" style="display:none;">' + supplierItemOnly + '</td>';
            html += '<td  id="UpdateCostid-' + sernum + '" style="display:none;">' + UpdateCost + '</td>';
            html += '<td  id="UpdateOscostid-' + sernum + '" style="display:none;">' + UpdateOscost + '</td>';
            html += '<td  id="Receivedid-' + sernum + '" style="display:none;">' + Received + '</td>';
            html += '<td  id="IsTaxid-' + sernum + '" style="display:none;">' + IsTax + '</td>';
            html += '<td  id="IsPriceid-' + sernum + '" style="display:none;">' + IsPrice + '</td>';
            html += '<td  id="IsQtyid-' + sernum + '" style="display:none;">' + IsQty + '</td>';
            html += '<td  id="IsCaseQtyid-' + sernum + '" style="display:none;">' + IsCaseQty + '</td>';
            html += '<td  id="IsDiscountid-' + sernum + '" style="display:none;">' + IsDiscount + '</td>';
            html += '<td  style="display:none" id="itemid-' + sernum + '" style="display:none;"></td>';
            html += '<input type="hidden" value="" id="productId"/>';
            html += '<input type="hidden" value="" id="purchaseId"/>';
            html += '<input type="hidden" value="" id="simpleinvoicenumber"/>';
            html += '</tr >';


            //hereis
            $('#appendnewrowforsale').append(html);



            //if('StockItemNumber-' + sernum == null && 'StockItemNumber-' + sernum == "" ){
            //    var aa = $("#TotalItems").val();
            //    if(aa == NaN && aa == ""){
            //        aa = 0;
            //    }
            //var bb = parseFloat(aa) + 1 ;
            //$("#TotalItems").val(bb);
            //}
            var a = $("rowid-" + sernum)
            if ("rowid-" + sernum == "rowid-1") {
                $("#TotalItems").val(1);
            }
            //else{
            //    var aa = $("#TotalItems").val();
            //    console.log("///" + aa);
            //    var bb = parseFloat(aa) + 1 ;
            //    console.log("bb" + bb);
            //    $("#TotalItems").val(bb);
            //}
            //$("#TotalItems").val(zz + sernum);
            // window.newseq = sernum;
            sernum++;
            CountTotalOfAllTD();
            str = 1;

        }


        //$(".descc").dblclick(function()
        // {
        //     var dc = $(".Descc").val();
        //     if(dc == null || dc == "" || dc == "undefined"){
        //         $("#VendorDesModal").modal('show');
        //     }
        //     else{
        //         alert("check");
        //     }
        // });
        //Inventory Professioal partial view



    });

    function openinventory(idu) {

        //var cd = $("#Description-" + idu ).text();
        //var min = idu - 1;
        //var cd = $("#Description-" + min ).text();
        //idm = idu - 1 ;
        idm = idu;
        var av = $("#Description-" + idm).text();
        if (av != null && av != "" && av != "undefined") {
            var az = $("#StockItemNumber-" + idm).text();
            var val = $("#itemid-" + idm).text().replace(/-/g, '');

            ItemByIDIV(val);
            $("#InventoryPartial").modal('show');
        }
        else {
            $("#VendorDesModal").modal('show');
        }
    }

    function ItemByIDIV(val) {

        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockFinancialByID", "Items")',
            data: {
                id: id
            },
            dataType: 'json',
            // Success start

            success: function(data) {
                console.log("Here i Data" + +data);
                $("#existingitemnumbers").empty();
                //$("#defaultlisticonss").empty();

                var itennumberhtml = '';
                itennumberhtml += '<h3>';
                itennumberhtml += '<label id="itemlabel">ItemNumber:</label><span id="itemnumberfounds" class="itemnumberbox di"></span></br>';
                itennumberhtml += '<label id="qtylabel" class="mg-t-2">Qty In Stock:</label><span id="itemqtys" class="itemnumberbox di ml-2"></span></br>';
                itennumberhtml += '<label id="adjusmentlabel" class="mg-t-3">Adjustment:</label><span id="itemqtyadjusment" class="itemnumberbox ml-3">0.00</span>';
                itennumberhtml += '<span style="display:none" id="productid"></span>';
                itennumberhtml += ' </h3>';
                $("#existingitemnumbers").append(itennumberhtml);

                $("#onelisticon").hide();
                $("#onsaveicon").hide();
                $(".hide-icon").show();
                if (data != null && data != "undefined") {
                    GetStockLevelListItems(id);
                    if (data.itemImageByPath != null && data.itemImageByPath != "undefined") {
                        $("#output1s").attr("src", data.itemImageByPath);
                        $("#output1s").css("display", "block");
                    }
                    if (data.name != null && data.name != "undefined") {
                        $("#names").val(data.name);
                        $("#Names").val(data.name);
                    }
                    if (data.shipmentLimit != null && data.shipmentLimit != "undefined") {
                        $("#updateonlinelimits").val(data.shipmentLimit);
                    }
                    if (data.needHighAuthorization != null && data.needHighAuthorization != "undefined") {
                        if (data.needHighAuthorization == true) {
                            $('#EditCheckBoxNHAs').prop('checked', true);
                            $("#EditHighlimitOns").css("display", "block")
                        }
                        else {
                            $('#EditCheckBoxNHAs').prop('checked', false);
                        }
                    }
                    else {
                        $('#EditCheckBoxNHAs').prop('checked', false);
                    }
                    if (data.highlimitOn != null && data.highlimitOn != "undefined") {
                        $("#edithighlimitons").val(data.highlimitOn);
                    }
                    else {
                        $("#edithighlimitons").val("");
                    }

                    if ($('#EditCheckBoxNHAs').is(":checked")) {
                        $("#EditHighlimitOns").css("display", "block");
                    }
                    else {
                        $("#EditHighlimitOns").css("display", "none");
                    }

                    if (data.itemCategoryId != null && data.itemCategoryId != "undefined") {
                        $("#categorys").val(data.categoryName);
                    }
                    if (data.brandId != null && data.brandId != "undefined") {
                        $("#manufactures").val(data.brandName);
                    }
                    if (data.groupId != null && data.groupId != "undefined") {
                        $("#groups").val(data.groupId);
                    }
                    if (data.colorId != null && data.colorId != "undefined") {
                        $("#colors").val(data.colorName);
                    }
                    if (data.groupId != null && data.groupId != "undefined") {
                        $("#groups").val(data.group);
                    }
                    if (data.misPickId != null && data.misPickId != "undefined") {
                        $("#mispicks").val(data.misPickName);
                    }
                    if (data.familyId != null && data.familyId != "undefined") {
                        $("#familys").val(data.family);
                    }
                    //if (data.itemSubCategoryId != null && data.itemSubCategoryId!="undefined") {
                    //    $("#sub-categorys").val(data.subCatName);
                    //}
                    if (data.salesLimit != null && data.salesLimit != "undefined") {
                        $("#saleslimitnews").val(data.salesLimit);
                    }
                    if (data.maintainStockForDays != null && data.maintainStockForDays != "undefined") {
                        $("#MaintainStockForDayss").val(data.maintainStockForDays);
                        $("#MaintainStockForDayss").css("color", "black");
                    }
                    if (data.itemSubCategoryId != null && data.itemSubCategoryId != "undefined") {
                        $("#sub-categorys").val(data.subCatName);
                    }
                    if (data.units != null && data.units != "undefined") {
                        $("#unitss").val(data.units);
                    }
                    if (data.retail != null && data.retail != "undefined") {
                        $(".retails").val(data.retail);
                    }
                    if (data.unitCharge != null && data.unitCharge != "undefined") {
                        $("#unit-charges").val(data.unitCharge);
                    }
                    if (data.unitRetail != null && data.unitRetail != "undefined") {
                        $("#unit-retails").val(data.unitRetail);
                    }
                    if (data.barCode != null && data.barCode != "undefined") {
                        $("#barcodes").val(data.barCode);
                    }
                    if (data.quantityCase != null && data.quantityCase != "undefined") {
                        $("#qtycases").val(data.quantityCase);
                    }
                    if (data.quantityPallet != null && data.quantityPallet != "undefined") {
                        $("#qtypallets").val(data.quantityPallet);
                    }
                    if (data.singleUnitMsa != null && data.singleUnitMsa != "undefined") {
                        $("#sunitmsas").val(data.singleUnitMsa);
                    }
                    if (data.location != null && data.location != "undefined") {
                        $("#locationslots").val(data.location);
                    }
                    if (data.groupName != null && data.groupName != "undefined") {
                        $("#groups").val(data.groupName);
                    }
                    if (data.locationTwo != null && data.locationTwo != "undefined") {
                        $("#location2s").val(data.locationTwo);
                    }
                    if (data.misPickName != null && data.misPickName != "undefined") {
                        $("#mispicks").val(data.misPickName);
                    }
                    if (data.locationTwo != null && data.locationTwo != "undefined") {
                        $("#location3s").val(data.locationTwo);
                    } if (data.colorid != null && data.colorid != "undefined") {
                        $("#colors").val(data.colorid);
                    }
                    if (data.locationFour != null && data.locationFour != "undefined") {
                        $("#location4s").val(data.locationFour);
                    }
                    if (data.weightLb != null && data.weightLb != "undefined") {
                        $("#weightlbs").val(data.weightLb);
                    }
                    if (data.weightOz != null && data.weightOz != "undefined") {
                        $("#weightozs").val(data.weightOz);
                    }
                    if (data.orderQuantity != null && data.orderQuantity != "undefined") {
                        $("#orderqtys").val(data.orderQuantity)
                    }
                    if (data.minOrderQty != null && data.minOrderQty != "undefined") {
                        $("#minqtys").val(data.minOrderQty);
                    } if (data.maxOrderQty != null && data.maxOrderQty != "undefined") {
                        $("#maxqtys").val(data.maxOrderQty);
                    } if (data.itemNumber != null && data.itemNumber != "undefined") {
                        $("#itemnumberfounds").text(data.itemNumber);
                    }
                    if (data.id != null && data.id != "undefined") {
                        $("#id").val(data.id);
                    }
                    if (data.id != null && data.id != "undefined") {
                        $("#productid").text(data.id);
                    }
                    if (data.isActive != null && data.id != false) {
                        $("#IsActives").prop("Checked", true);
                    } else {
                        $("#IsActives").prop("Checked", false);
                    }

                    if (data.stock != null) {
                        if (data.stock.quantity != null && data.stock.quantity != "undefined") {
                            $("#itemqtys").text(data.stock.quantity);
                            //$('#progressbarheight').css("height", data.stock.quantity+'%');
                            //$('#progressbarheight').text(data.stock.quantity+"%");
                        }
                        else {
                            $("#itemqtys").text(0);
                        }
                    } else {
                        $("#itemqtys").text(0);
                    }

                    //financial
                    if (data.financial != null) {
                        if (data.financial.cost != null && data.financial.cost != "undefined") {
                            $("#costs").val(data.financial.cost);
                        }
                        if (data.financial.retail != null && data.financial.retail != "undefined") {
                            $(".retails").val(data.financial.retail);
                        }
                        if (data.financial.profit != null && data.financial.profit != "undefined") {
                            $("#profitpercnts").val(data.financial.profit);
                        }
                        if (data.financial.msgPromotion != null && data.financial.msgPromotion != "undefined") {
                            $("#mfgpromotions").val(data.financial.msgPromotion);
                        }

                        if (data.financial.addToCost != null && data.financial.addToCost != "undefined") {
                            $("#addtocosts").val(data.financial.addToCost);
                        } if (data.financial.unitCharge != null && data.financial.unitCharge != "undefined") {
                            $("#unitcharges").val(data.financial.unitCharge);
                        }
                        if (data.financial.outOfStateCost != null && data.financial.outOfStateCost != "undefined") {
                            $("#outofstatecosts").val(data.financial.outOfStateCost);
                        } if (data.financial.outOfStateRetail != null && data.financial.outOfStateRetail != "undefined") {
                            $("#outofstateretails").val(data.financial.outOfStateRetail);
                        }


                        if (data.financial.askForPricing == true) {
                            $("#askforpricings").prop('checked', true);
                        } else {
                            $("#askforpricings").prop('checked', false);
                        }
                        if (data.financial.askForDescrip == true) {
                            $("#askfordescs").prop('checked', true);
                        } else {
                            $("#askfordescs").prop('checked', false);
                        }
                        if (data.financial.serialized == true) {
                            $("#serializeds").prop('checked', true);
                        } else {
                            $("#serializeds").prop('checked', false);
                        }
                        if (data.financial.taxOnSales == true) {
                            $("#taxonsaless").prop('checked', true);
                        } else {
                            $("#taxonsaless").prop('checked', false);
                        }
                        if (data.financial.purchase == true) {
                            $("#purchases").prop('checked', true);
                        } else {
                            $("#purchases").prop('checked', false);
                        }
                        if (data.financial.noSuchDiscount == true) {
                            $("#nosuchdiscounts").prop('checked', true);
                        } else {
                            $("#nosuchdiscounts").prop('checked', false);
                        }
                        if (data.financial.noReturns == true) {
                            $("#noreturnss").prop('checked', true);
                        } else {
                            $("#noreturnss").prop('checked', false);
                        }
                        if (data.financial.sellBelowCost == true) {
                            $("#sellbelowcosts").prop('checked', true);
                        } else {
                            $("#sellbelowcosts").prop('checked', false);
                        }
                        $("#sgtdretailprices").val();

                        if (data.financial.autoSetSrp == true) {
                            $("#autosetsrps").prop('checked', true);
                        } else {
                            $("#autosetsrps").prop('checked', false);
                        }
                        // $("#percntN").val();
                        $(".retails").val(data.financial.retail);
                        if (data.financial.codeA == true) {
                            $("#codeas").prop('checked', true);
                        } else {
                            $("#codeas").prop('checked', false);
                        }
                        if (data.financial.codeB == true) {
                            $("#codebs").prop('checked', true);
                        } else {
                            $("#codebs").prop('checked', false);
                        }
                        if (data.financial.codeC == true) {
                            $("#codecs").prop('checked', true);
                        } else {
                            $("#codecs").prop('checked', false);
                        }
                        if (data.financial.codeD == true) {
                            $("#codeds").prop('checked', true);
                        } else {
                            $("#codeds").prop('checked', false);
                        }
                        if (data.financial.addCustomersDiscount == true) {
                            $("#addcustomersdiscounts").prop('checked', true);
                        } else {
                            $("#addcustomersdiscounts").prop('checked', false);
                        }
                    }

                    if (data.vendors != null && data.vendors.length > 0) {
                        $("#appendsuppliersmains").empty();
                        $.each(data.vendors, function(index, item) {

                            // var myitem = item.invoiceNumber.toString();

                            // console.log(myitem);
                            var html = '';
                            html += '<tr onclick="SupplierPartialModalP(' + item.id + ')">';
                            //html += '<td id="num' + index + '" ondblclick="PurchaseOrderPModal(' + index + ')" class="grids-td">' + item.supplierItemNumber.supplierItemNum + '</td>';
                            html += '<td style="" id="" class="grids-td">' + item.company + '</td>';
                            if (item.supplierItemNumber != null && item.supplierItemNumber != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.supplierItemNumber.supplierItemNum + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.caseQty + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.discount + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            html += '</tr > ';


                            $("#appendsuppliersmains").append(html);

                        });
                    }

                    if (data.vendors != null && data.vendors.length > 0) {
                        $("#appendsuppliersmains").empty();
                        $.each(data.vendors, function(index, item) {

                            // var myitem = item.invoiceNumber.toString();


                            var html = '';
                            html += '<tr ondblclick="SupplierPartialModalPar(' + item.vendorId + ')">';
                            //html += '<td id="num' + index + '" ondblclick="PurchaseOrderPModal(' + index + ')" class="grids-td">' + item.supplierItemNumber.supplierItemNum + '</td>';
                            html += '<td style="" id="" class="grids-td">' + item.company + '</td>';
                            if (item.supplierItemNumber != null && item.supplierItemNumber != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.supplierItemNumber.supplierItemNum + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.caseQty + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.discount + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            if (item.purchaseOrder != null && item.purchaseOrder != "undefined") {
                                html += '<td style="" id="" class="grids-td">' + item.purchaseOrder.price + '</td>';

                            } else {
                                html += '<td style="" id="" class="grids-td">' + "N/A" + '</td>';
                            }
                            html += '</tr > ';


                            $("#appendsuppliersmains").append(html);

                        });
                    }
                    if (data.purchaseOrders != null && data.purchaseOrders.length > 0) {
                        $("#appendpurchaseordersmains").empty();
                        $.each(data.purchaseOrders, function(index, item) {

                            // var myitem = item.invoiceNumber.toString();

                            // console.log(myitem);
                            var html = '';
                            html += '<tr>';
                            html += '<td style="width: 10px" id="" class="grids-td">' + (index + 1) + '</td>';
                            html += '<td id="num' + index + '" ondblclick="PurchaseOrderPModal(' + index + ')" class="grids-td">' + item.invoiceNumber + '</td>';
                            html += '<td class="grids-td">' + item.supplierName + '</td>';
                            if (item.receivedDate == null) {
                                html += '<td class="grids-td">Not Received</td>';
                            } else {
                                html += '<td class="grids-td">' + item.receivedDate + '</td>';
                            }
                            html += '<td class="grids-td">' + item.qty + '</td>';
                            html += '<td class="grids-td">' + item.caseQty + '</td>';
                            html += '<td class="grids-td">' + item.price + '</td>';
                            html += '<td class="grids-td">' + item.amount + '</td>';
                            html += '</tr > ';


                            $("#appendpurchaseordersmains").append(html);

                        });
                    }


                    if (data.saleOrders != null && data.saleOrders.length > 0) {

                        $('#appendsaleorders').empty();
                        $.each(data.saleOrders, function(index, item) {
                            var html = '';
                            html += '<tr>';
                            html += '<td style="width: 10px" id="" class="grids-td">' + (index + 1) + '</td>';
                            html += '<td id="abcdef' + index + '" ondblclick="SalesPartialModal(' + index + ')" class="grids-td">' + item.invoiceNumber + '</td>';
                            /*html += '<td class="grids-td">' + item.invoiceNumber + '</td>';*/
                            if (item.invoiceDate == null) {
                                html += '<td class="grids-td">N/A</td>';
                            } else {
                                html += '<td class="grids-td">' + item.invDate + '</td>';
                            }
                            html += '<td class="grids-td">' + item.customerName + '</td>';
                            html += '<td class="grids-td">' + item.quantity + '</td>';
                            html += '<td></td>';
                            html += '<td></td>';
                            html += '<td style="color:darkred">' + item.cost + '</td>';
                            html += '<td style="color:darkred">' + item.price + '</td>';
                            html += '<td style="color:darkred">' + item.total + '</td>';
                            html += '</tr > ';
                            $("#appendsaleorders").append(html);
                        });
                    }

                }

                $("#itemlabel").show();
                $("#createnew").hide();
                $("#qtylabel").show();
                $("#adjusmentlabel").show();
                $("#itemqtyadjusment").addClass("di");
                $("#itemqtyadjusment").show();
                $("#listallmissions").empty();

                GetCheapestValue(id);
                setTimeout(function() {
                    $.unblockUI();
                }, 2500);

            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },

            // Success end
        });
    }

    //Start

    function GetStockLevelListItems(val) {

        if (val != null && val != "undefined") {
            var id = val;

        }
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetStockItemDataByItemID", "Items")',
            data: {
                id: id
            },
            dataType: "json",

            success: function(data) {

                if (data != null && data != "undefined") {
                    $.each(data, function(key, val) {

                        $('#progressbarheights').css("height", val.quantity + '%');
                        $('#progressbarheights').text(val.quantity + "%");
                        if (val.items != null && val.items != "undefined") {

                            if (val.items.orderQuantity != null && val.items.orderQuantity != "undefined") {
                                $("#orderqntynews").val(val.items.orderQuantity)
                            }
                            if (val.items.minOrderQty != null && val.items.minOrderQty != "undefined") {
                                $("#minqntynews").val(val.items.minOrderQty);
                            }
                            if (val.items.maxOrderQty != null && val.items.maxOrderQty != "undefined") {
                                $("#maxqntynews").val(val.items.maxOrderQty);
                            }
                            if (val.items.salesLimit != null && val.items.salesLimit != "undefined") {
                                $("#saleslimitnews").val(val.items.salesLimit);

                            }
                        }

                    })
                }
            },
            error: function(xhr, status, error) {

                var errorMessage = xhr.status + ': ' + xhr.statusText

            },

        });
    }

    //end


    function closemodalDesc() {
        $("#VendorDesModal").modal('hide');
        $('#ucpnitem').val("");
        $("#itemDescriptionM").val("");
        $("#itemNumM").html("");
        $("#itemRetailM").val("");
        $("#manufactureM").val("");
        $("#catagoryM").val("");
        $("#subCatagoryM").val("");
        $("#familyM").val("");
        $("#unitChargeM").val("");
        $("#unitPriceM").val("");
        $("#customQuantityM").val("");

    }


    function onRefresh() {
        location.reload();
    }
    function CountTotalOfAllTD() {

        var total = 0
        var count = 0;
        $("#mytable tr").each(function() {
            var self = $(this);
            var col_9_value = self.find("td:eq(10)").text().trim();
            var result = col_9_value.replace(/\$/g, '');
            var afterparsing = parseFloat(result);
            if (!isNaN(afterparsing)) {
                total += afterparsing;
            }
            var ceilingvalue;
            ceilingvalue = total.toFixed(2);


            var getdis = $('#HiddenDiscount').val();
            if (getdis != NaN && getdis != "") {
                if (ceilingvalue > 0) {
                    var getDisAmc = (ceilingvalue / 100) * parseFloat(getdis);
                    var count = ceilingvalue - getDisAmc;
                    var countt = count.toFixed(2);
                    $("#SubTotal").val("$" + countt);
                }
                else {
                    $("#SubTotal").val("$" + ceilingvalue);
                }
            }
            else {
                $("#SubTotal").val("$" + ceilingvalue);
            }

            $("#Total").val("$" + ceilingvalue);
            $("#PoAmount").val(ceilingvalue);
            count++;
        });
        //Click-able Recevied CheckBox
        if (count > 1) {
            $("#Received").prop('disabled', false);
            //    $("#otherpayment").prop('disabled', false);
        }
        CalculatetaxPlusDiscount();
    }
    function CalculatetaxPlusDiscount() {

        var totalitems = $("#TotalItems").val();
        var subtotal = $("#SubTotal").val().split('$');
        var freight = $("#Freight").val();
        var taxidval = $("#Tax").val();
        var otheridval = $("#Other").val();
        var total = $("#Total").val();

        if (otheridval == "") {
            otheridval = 0;

        }
        if (taxidval == "") {
            taxidval = 0;

        } if (freight == "") {
            freight = 0;

        }
        if (total == "") {
            total = 0;

        }

        var newsubtotal = subtotal[1];

        var sumofallexpences = parseFloat(newsubtotal) + parseFloat(otheridval) + parseFloat(taxidval) + parseFloat(freight);

        var invoicetotal = parseFloat(sumofallexpences);


        if (isNaN(invoicetotal)) {
            $("#Total").val("$" + 0);

        } else {
            var ceilingvalue;
            ceilingvalue = invoicetotal.toFixed(2);
            console.log("3333" + ceilingvalue);
           // $("#Total").val("$" + ceilingvalue);
           // $("#PoAmount").val(ceilingvalue);
           //// $("#poBalancee").val("$" + ceilingvalue);
           // $("#ToTalInDollar").val(ceilingvalue);
           // $("#chequeBalance").html("$(" + ceilingvalue + ")");
            // var kk = $("#chequeBalance").text();
            // console.log(kk);
            //var btw = toWords(ceilingvalue);
            //console.log(btw);
        }



    }
    function RemoveRow(val) {
        var ac = $("#rowid-" + val).find("td:eq(4)").text();
        if (ac != null && ac != "") {
            var xx = $("#rowid-" + val).find("td:eq(7)").text();
            var allitem = $("#TotalItems").val();
            var zz = allitem - parseFloat(xx);
            $("#TotalItems").val(zz);
        }


        $("#rowid-" + val).remove();
        var alltr = $("#mytable").find('tr');
        $.each(alltr, function(i, t) {
            if (i > 0) {
                var TRid = $(t)[0].id.split('-');
                $(t).attr('id', TRid[0] + "-" + i);

                var alltd = $(t).find('td');
                $.each(alltd, function(f, it) {
                    var id = $(it)[0].id.split('-');
                    if (id[0] == "countser") {
                        $(it).attr('id', id[0] + "-" + i);
                        $(it).text(i);
                    }
                    if (id[0] == "Description") {
                        $(it).attr('onkeyup', 'GetItemByName(' + i + ')');
                    }
                    if (id[0] == "Qty") {
                        $(it).attr('onkeyup', 'QuantityMultipyPrice(' + i + ')');
                    }
                    if (id[0] == "delete") {
                        $(it).attr('onclick', 'RemoveRow(' + i + ')');
                    }
                    if (id[0] == "SupplierItemNumber") {
                        $(it).attr('onkeyup', 'SaveSupplierItemName(event,' + i + ')');
                    }
                    if (id[0] == "StockItemNumber") {
                        $(it).attr('onkeyup', 'GetItemByItemNumber(event,' + i + ')');
                    }
                    $(it).attr('id', id[0] + "-" + i);

                });
                //var col_value = alltr.find("td:eq(3)").text();
                //alert(col_value);
            }


        });
        var count = 0;
        var allitem = $("#TotalItems").val();
        $("#mytable tr").each(function() {
            //var currentRow=$(this);
            //var col_value = currentRow.find("td:eq(7)").text();
            //alert(col_value);
            //var zz = allitem - parseFloat(col_value);
            //alert(zz);
            //$("#TotalItems").val(zz);
            count++;
        });
        //Click-able Recevied CheckBox
        if (count <= 1) {
            $("#Received").prop('disabled', true);
            //$("#otherpayment").prop('disabled', true);
            $("#Received").prop('checked', false);
        }
        var sernum = count;
        sernum--;
        //$("#TotalItems").val(sernum);
        CountTotalOfAllTD();
        //alert(101);


    }
    function SaveItemSupplierNumber(printorNot, updateorNot, Ispaid) {
        //

        var isValid = false;
        var vendorid = $("#setvendorid").text();
        var suppliername = $("#myInput").val();
        var suppliercode = $("#txtSupplierNo").val();
        var invoicenum = $("#txtInvoiceNumber").text();
        var totalitems = $("#TotalItems").val();
        var subTotal = $("#SubTotal").val();
        var freight = $("#Freight").val();
        var tax = $("#Tax").val();
        var other = $("#Other").val();
        var total = $("#Total").val();
        var manualInvoice = $("#ManualInvoiceNo").val();
        var poDate = $("#Podate").val();
        var paymentTerms = $("#PaymentTerms").val();
        var totalTobacco = $("#TotalTobacco").val();
        var totalCigar = $("#TotalCigar").val();
        var totalCigarette = $("#TotalCigarette").val();
        var cigaretteStock = $("#CigaretteStock").val();
        var dateReceived = $("#DateReceived").val();
        var Notes = $("#Notes").val();
        var vendoridabc = $('#setvendorid').text();
        var characterandnumers = new RegExp('^[a-zA-Z0-9]+$');

        if (manualInvoice == "") {
            swal("Error!", "Kindly enter Invoice #");
            isvalid = false;
            return false;
        }
        //var numberonly = new RegExp('^[0-9]*$');
        if (!characterandnumers.test(manualInvoice)) {
            swal("Error!", "Kindly enter valid invoice #");
            isvalid = false;
            return false;
        }
        var SaleDetails = new Array();
        var count1 = 1;
        $("#mytable TBODY TR").each(function() {
            var row = $(this);
            var Sale = {};
            if (row.find("TD").eq(24).html() == '') {
                RemoveRow(count1);
                //count1--;
                return;
            }
            Sale.SupplierItemNumber = row.find("TD").eq(2).text();
            Sale.StockItemNumber = row.find("TD").eq(3).html();
            Sale.StockItemNumber = Sale.StockItemNumber.replace('-', '');
            Sale.Description = row.find("TD").eq(4).html();
            Sale.Retail = row.find("TD").eq(5).html();
            Sale.Price = row.find("TD").eq(6).html();
            Sale.Qty = row.find("TD").eq(7).html();
            Sale.CaseQty = row.find("TD").eq(8).html();
            Sale.Discount = row.find("TD").eq(9).html();
            Sale.Amount = row.find("TD").eq(10).html();
            Sale.IsReport = row.find("TD").eq(13).html();
            Sale.ShowAllItems = row.find("TD").eq(14).html();
            Sale.Supplieritems = row.find("TD").eq(15).html();
            Sale.UpdateCost = row.find("TD").eq(16).html();
            Sale.UpdateOscost = row.find("TD").eq(17).html();
            Sale.Received = row.find("TD").eq(18).html();
            Sale.IsTax = row.find("TD").eq(19).html();
            Sale.IsPrice = row.find("TD").eq(20).html();
            Sale.IsQty = row.find("TD").eq(21).html();
            Sale.IsCaseQty = row.find("TD").eq(22).html();
            Sale.IsDiscount = row.find("TD").eq(23).html();
            Sale.ItemId = row.find("TD").eq(24).html();
            Sale.SupplierName = suppliername;
            Sale.SupplierNumber = suppliercode;
            Sale.InvoiceNumber = invoicenum;
            Sale.TotalItems = totalitems;
            Sale.SubTotal = subTotal;
            Sale.Freight = freight;
            Sale.Tax = tax;
            Sale.Other = other;
            Sale.Total = total;
            Sale.ManualInvoiceNumber = manualInvoice;
            Sale.Podate = poDate;
            Sale.PaymentTerms = paymentTerms;
            Sale.TotalTobacco = totalTobacco;
            Sale.TotalCigar = totalCigar;
            Sale.TotalCigarette = totalCigarette;
            Sale.CigaretteStick = cigaretteStock;
            Sale.Notes = Notes;
            Sale.SupplierId = vendoridabc;
            if (updateorNot == true) {
                Sale.PurchaseorderId = row.find("#purchaseId").val();
                Sale.SimpleInvoiceNumber = row.find("#simpleinvoicenumber").val();
            }
            //
            var isreportstatus = $("#Report").is(':checked');
            if (isreportstatus == true) {
                Sale.isreportstatus = "true";
            } else {

                Sale.isreportstatus = "false";

            }
            var showAllitem = $("#ShowAllitem").is(':checked');
            if (showAllitem == true) {
                Sale.showAllitem = "true";
            } else {

                Sale.showAllitem = "false";

            }
            var supplierItemOnly = $("#SupplierItemOnly").is(':checked');
            if (supplierItemOnly == true) {
                Sale.supplierItemOnly = "true";
            } else {

                Sale.supplierItemOnly = "false";

            }
            var UpdateCost = $("#UpdateCost").is(':checked');
            if (UpdateCost == true) {
                Sale.UpdateCost = "true";
            } else {

                Sale.UpdateCost = "false";

            }
            var UpdateOscost = $("#UpateOscost").is(':checked');
            if (UpdateOscost == true) {
                Sale.UpdateOscost = "true";
            } else {

                Sale.UpdateOscost = "false";

            }
            var Received = $("#Received").is(':checked');
            if (Received == true) {
                Sale.Received = "true";
            } else {

                Sale.Received = "false";

            }
            var IsTax = $("#IsTax").is(':checked');
            if (IsTax == true) {
                Sale.IsTax = "true";
            } else {

                Sale.IsTax = "false";

            }
            var IsPrice = $("#IsPrice").is(':checked');
            if (IsPrice == true) {
                Sale.IsPrice = "true";
            } else {

                Sale.IsPrice = "false";

            }
            var IsQty = $("#IsQty").is(':checked');
            if (IsQty == true) {
                Sale.IsQty = "true";
            } else {

                Sale.IsQty = "false";

            }
            var IsCaseQty = $("#IsCaseQty").is(':checked');
            if (IsCaseQty == true) {
                Sale.IsCaseQty = "true";
            } else {

                Sale.IsCaseQty = "false";

            }
            var IsDiscount = $("#IsDiscount").is(':checked');
            if (IsDiscount == true) {
                Sale.IsDiscount = "true";
            } else {

                Sale.IsDiscount = "false";

            }

            Sale.IsPrintinvoice = false;
            if (printorNot) {
                Sale.IsPrintinvoice = true;
            }
            Sale.ItemNumber = $(this).attr("data-itemcode");
            SaleDetails.push(Sale);
            count1++;
        });



        if (vendorid != "" && vendorid != "undefined") {
            isValid = true;
            window.isValidSave = true;
        } else {
            swal("Error!", "Kindly select Vendor");
            isvalid = false;
            window.isValidSave = false;
            return false;

        }
        var tablecount = $("#mytable TBODY TR").length;
        if (parseInt(tablecount) == 0) {
            swal("Error!", "Kindly select Any Product");
            isvalid = false;
            return false;
        }
        if (isValid == true) {
            if (updateorNot == false) {

                if (Ispaid) {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("CreatePurchaseOrder", "Purchase")',
                        data: JSON.stringify(SaleDetails),
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        async: false,
                        cache: false,
                        success: function(data) {
                            if (data.success == "Justpay") {
                                SavePaymentWhileInvoice(true);

                            } else {
                                var model = data.responseData;

                                //}
                                //else if (data.success == "notprint") {

                                var count = 0;

                                $("#mytable TBODY TR").each(function(index, tr) {
                                    var count2 = count + 1;
                                    var row = $(this);
                                    for (var i = 0; i < data.data.length; i++) {
                                        var gg = $("#itemid-" + count2).text();
                                        if ($("#itemid-" + count2).text() == data.data[i].itemId) {
                                            row.find("#purchaseId").val(data.data[i].purchaseorderId);
                                            row.find("#simpleinvoicenumber").val(data.data[i].simpleInvoiceNumber);

                                        }
                                    }

                                    count++;
                                });

                                //$("#Payment").trigger("click");
                                SavePaymentWhileInvoice(false);
                                //setTimeout(function() {
                                //    /*   alert("Supplier Item Number Save Successfully.");*/
                                //    swal("Success!", "Purchsase Order Create & Paid Successfully.", "success");
                                //}, 2000);
                                if (data.success == "print") {
                                    window.open('@Url.Action("PurchaseInvoice", "Purchase")', '_blank');
                                }

                                //}

                                location.reload();
                            }
                        }
                    });
                    //$("#payment")
                } else {
                    $.confirm({
                        title: 'Save New Purchase Invoice!',
                        content: 'Are you sure to save new Purchase Invoice?',
                        buttons: {
                            confirm: function() {
                                $.ajax({
                                    type: "POST",
                                    url: '@Url.Action("CreatePurchaseOrder", "Purchase")',
                                    data: JSON.stringify(SaleDetails),
                                    contentType: "application/json; charset=utf-8",
                                    dataType: "json",
                                    success: function(data) {
                                        //if (data.success=="print") {
                                        var model = data.responseData;

                                        //}
                                        //else if (data.success == "notprint") {

                                        var count = 0;

                                        $("#mytable TBODY TR").each(function(index, tr) {
                                            var count2 = count + 1;
                                            var row = $(this);
                                            for (var i = 0; i < data.data.length; i++) {
                                                var gg = $("#itemid-" + count2).text();
                                                if ($("#itemid-" + count2).text() == data.data[i].itemId) {
                                                    row.find("#purchaseId").val(data.data[i].purchaseorderId);
                                                    row.find("#simpleinvoicenumber").val(data.data[i].simpleInvoiceNumber);

                                                }
                                            }

                                            count++;
                                        });

                                        if (window.paymentInProcess == false) {
                                            if ($("#Received").is(':checked')) {
                                                //$( "p" ).addClass( "myClass yourClass" );
                                                //$( "#foo" ).removeClass( 'className');
                                                $("#Editbtn").hide();
                                                // $("#imgPaid").addClass("show");
                                                //$("#imgPaid").removeClass("hide");
                                                $("#imgRecieved").removeClass("hide");
                                                $("#imgRecieved").addClass("show");
                                            }
                                            else {
                                                $("#Editbtn").show();
                                            }
                                            $("#Savebtn").hide();
                                            $("#Printbtn").hide();
                                            setTimeout(function() {
                                                /*   alert("Supplier Item Number Save Successfully.");*/
                                                swal("Success!", "Purchsase Order Create Successfully.", "success");
                                            }, 2000);

                                            /*location.reload();*/
                                        }
                                        else {
                                            var isupdated = false;
                                            savePayment(isupdated);
                                        }
                                        if (data.success == "print") {
                                            window.open('@Url.Action("PurchaseInvoice", "Purchase")', '_blank');
                                        }

                                        //}

                                        location.reload();
                                    }
                                });
                            },
                            cancel: function() {
                            },
                        }
                    });
                }

            }
            else {
                $.confirm({
                    title: 'Edit Purchase Invoice!',
                    content: 'Are you sure to edit Purchase Invoice?',
                    buttons: {
                        confirm: function() {
                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("UpdatePurchaseOrder", "Purchase")',
                                data: JSON.stringify(SaleDetails),
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function(data) {
                                    // if (data.success=="print") {
                                    var model = data.responseData;
                                    var count = 0;

                                    $("#mytable TBODY TR").each(function(index, tr) {
                                        var count2 = count + 1;
                                        var row = $(this);
                                        for (var i = 0; i < data.data.length; i++) {
                                            var gg = $("#itemid-" + count2).text();
                                            if ($("#itemid-" + count2).text() == data.data[i].itemId) {
                                                row.find("#purchaseId").val(data.data[i].purchaseorderId);
                                                row.find("#simpleinvoicenumber").val(data.data[i].simpleInvoiceNumber);

                                            }
                                        }

                                        count++;
                                    });
                                    if (window.paymentInProcess == false) {
                                        if ($("#Received").is(':checked')) {
                                            $("#Editbtn").hide();
                                            $("#imgPaid").addClass("show");
                                            $("#imgPaid").removeClass("hide");
                                            $("#imgRecieved").removeClass("hide");
                                            $("#imgRecieved").addClass("show");

                                        }
                                        else {
                                            $("#Editbtn").show();
                                        }
                                        $("#Savebtn").hide();
                                        $("#Printbtn").hide();
                                        getopeninvoicelist();
                                        getpostinvoicelist();
                                        setTimeout(function() {
                                            /*   alert("Supplier Item Number Save Successfully.");*/
                                            swal("Success!", "Purchsase Order Update Successfully.", "success");
                                        }, 2000);
                                    }



                                    if (data.success == "print") {
                                        window.open('@Url.Action("PurchaseInvoice", "Purchase")', '_blank');
                                    }

                                    else if (data.success == "notprint") {
                                        //getopeninvoicelist();
                                        //getpostinvoicelist();
                                        var isupdated = true;
                                        savePayment(isupdated);
                                    }
                                }
                            });
                        },
                        cancel: function() {
                        },
                    }
                });
            }

        }


    };
    function AppendAllMissions(event) {


        $("#listallmissions").empty();
        $("#listallmissionss").empty();
        $("#listallmissionsss").empty();
        $.each(AllAutoItemsList, function(i, d) {
            firstinner = '';
            inner = '';
            outerinner = '';
            firstinner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByID(' + d.id + ')" ;>';
            inner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByNameForModelF6(' + d.id + ')" ;>';
            outerinner += '<div class="setsearchbox anitem dropdown-menu searchitem cp" onclick="GetItemByNameForModelF3(' + d.id + ')";>';
            if (i == 0) {
                firstinner += '<div class="searchheader">Description</div><div class="searchheader">Retail</div></br>';
                inner += '<div class="searchheader">Description</div><div class="searchheader">Retail</div></br>';
                outerinner += '<div class="searchheader">Description</div><div class="searchheader">Retail</div></br>';
            }
            if (d[i] != null) {
                firstinner += '<div class="item_names di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + d.retail + '</div></br>';
                inner += '<div class="item_namesF6 di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + d.retail + '</div></br>';
                outerinner += '<div class="item_dbl di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + d.retail + '</div></br>';

            } else {
                firstinner += '<div class="item_names di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + 0 + '</div></br>';
                inner += '<div class="item_namesF6 di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + 0 + '</div></br>';
                outerinner += '<div class="item_dbl di w-50" data-rel="' + d.id + '">' + d.name + '</div><div class="di">' + 0 + '</div></br>';
            }
            firstinner += '</div>';
            inner += '</div>';
            outerinner += '</div>';



            $("#listallmissions").append(firstinner);
            $("#listallmissionss").append(inner);
            $("#listallmissionsss").append(outerinner);


        });

        //clsoed code
        //$.ajax({
        //    type: "GET",
        //    url: '@Url.Action("AutoCompleteSearchItem", "Items")',
        //    async: false,
        //    dataType: 'json',
        //    success: function(data) {
        //        var firstinner = '';
        //        var inner = '';
        //        var outerinner = '';
        //        //$.cookie("itemspur", JSON.stringify(data) , { expires : 5, path : "/"});
        //        // sessionStorage.setItem("itemspur",JSON.stringify(data));
        //        //Blob([{"itemspur": JSON.stringify(data)}], {type : "application/json"});
        //        //console.log(Blob("itemspur"));
        //        var opts = jQuery.parseJSON(JSON.stringify(data));
        //        if (opts.length > 0) {

        //        }
        //        console.log(data);


        //    },
        //    error: function(xhr, status, error) {
        //        var errorMessage = xhr.status + ': ' + xhr.statusText
        //    },
        //});
    };
    function GetItemByID(val, indexex) {
        //alert(33);
        //if (window.sequence != "" && window.sequence != "undefined" ) {
        //    var seqnum = window.sequence;
        //}
        var seqnum = indexex;
        ////
        //var total = $("#Amount-" + val).text();
        //var subtotalnew = $("#SubTotal").val();
        //var finalsubtotalvalue = subtotalnew.split('$');

        //if (total != null && total != '') {
        //    var newtotal = total.split('$');
        //    var newtotalsuplitted = newtotal[1];
        //    var subtotalsuplitednew = finalsubtotalvalue[1];
        //    if (subtotalsuplitednew != null && subtotalsuplitednew != '' && subtotalsuplitednew != "$NaN") {

        //        var subtractedtotal = parseFloat(subtotalsuplitednew) - parseFloat(newtotalsuplitted);
        //        $("#subtotalauto").val("$" + subtractedtotal);
        //        $("#itemnumber-" + val).empty();
        //        $("#Quantity-" + val).empty();
        //        $("#amount-" + val).empty();
        //        $("#discountin-" + val).empty();
        //        $("#discountout-" + val).empty();
        //        $("#InUnits-" + val).empty();
        //        $("#OutUnits-" + val).empty();
        //        $("#price-" + val).empty();
        //        $("#total-" + val).empty();
        //        $("#description-" + val).empty();
        //    }
        //}
        //var itemnumber = $("#itemnumber-" + val).text();
        ////
        var id = val;
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemStockFinancialByIDForModels", "Items")',

            data: {
                id: id
            },
            dataType: 'json',
            success: function(data) {
                $("#rowid-" + indexex).find("#productId").val(data.id);
                if (data != null && data != "") {
                    var count = 0;
                    var exist = 0;
                    var notexist = true;
                    $('#mytable tr').each(function(index, tr) {
                        if (count > 0) {
                            var Id = tr.attributes["id"].value.split("rowid-")[1];
                            /*   var productId = parseInt($("#rowid-" + Id).find("#productId").val());*/
                            var productId = parseInt($("#itemid-" + Id).html());
                            if (productId === data.id) {
                                exist++;

                            }
                            if (exist > 1) {
                                swal("Error!", "Item Already Added!", "error");
                                notexist = false;

                            }

                        }

                        count++;
                    });

                    if (notexist === true) {
                        //hereis

                        //var xx = $("#Description-" + seqnum).text();
                        //if(xx != null && xx != ""){}
                        //var aa = $("#TotalItems").val();
                        //alert("aa" + aa);
                        //var cc = 1;
                        //var bb = parseFloat(aa) + parseFloat(cc);
                        //alert("bb" + bb);
                        //$("#TotalItems").val(bb);


                        //alert(55);

                        $("#rowid-" + seqnum).find("#productId").val(data.id);
                        $("#Description-" + seqnum).text(data.name);
                        $("#Description-" + seqnum).addClass("openinv-" + seqnum);
                        $("#Description-" + seqnum).attr('contenteditable', 'false');
                        $("#Discount-" + seqnum).text("0.00" + "%");
                        var tr = $("#rowid-" + seqnum).closest("tr");
                        tr.attr('data-itemcode', data.itemNumber);
                        //Add isOutStateTax
                        var vendorid = $("#setvendorid").text();
                        if (vendorid != "") {
                            var Tax = window.outStateTax;
                            var taxPrice = [parseFloat(data.retail)] * [(parseFloat(Tax) / 100)];
                            var newPrice = parseFloat(data.retail) + parseFloat(taxPrice);
                            newPrice = parseFloat(newPrice).toFixed(2);
                            var newcostPrice = parseFloat(data.cost) + parseFloat(taxPrice);
                            newcostPrice = parseFloat(newcostPrice).toFixed(2);
                            $("#Retail-" + seqnum).text("$" + newPrice);
                            $("#Price-" + seqnum).text("$" + newcostPrice);
                            $("#Amount-" + seqnum).text("$" + newcostPrice);
                        }
                        else {
                            $("#Retail-" + seqnum).text("$" + data.retail);
                            $("#Price-" + seqnum).text("$" + data.cost);
                            $("#Amount-" + seqnum).text("$" + data.cost);
                        }

                        $("#itemnum-" + seqnum).text(data.id);
                        $("#itemid-" + seqnum).text(data.id);

                        var string = data.itemNumber;
                        string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                        $("#StockItemNumber-" + seqnum).text(string);

                        if (data.stock != null && data.stock != "") {
                            /*$("#StockItemNumber-" + seqnum).text(data.stock.stockItemNumber);*/

                        }
                        CountTotalOfAllTD();
                        $("#listallmissions").empty();

                        var jj = 1;
                        $('#mytable tr').each(function() {

                            var currentRow = $(this).closest("tr");
                            //var check=currentRow.find("td:eq(2)").val();
                            var check = $("#rowid-" + jj).find("#Description-" + jj).text();
                            // alert(check);
                            if (check[jj] == null || check[jj] == "") {
                                RemoveRow(jj);
                            }
                            jj++
                        });
                        $(".add-row").trigger("click");
                    }
                    else {
                        swal("Error!", "Item Already Added!", "error");
                        RemoveRow(indexex);
                    }
                }


            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }
    function QuantityMultipyPrice(val) {





        $("#Amount-" + val).empty();
        var quantity = $("#Qty-" + val).text();
        var discount = parseFloat(($("#Discount-" + val).text()).split("%")[0]);


        var tootal = $("#Price-" + val).text();

        var ReplacedAmount = tootal.replace(/\$/g, '');
        var priceDiscount = ((ReplacedAmount / 100) * discount) * parseFloat(quantity);
        var foundtotal = parseFloat(quantity) * parseFloat(ReplacedAmount);
        var ceilingvalue = foundtotal;

        ceilingvalue = ceilingvalue.toFixed(2);
        ceilingvalue = ceilingvalue - priceDiscount;
        $("#Amount-" + val).text("$" + ceilingvalue.toFixed(2));
        CountTotalOfAllTD();


        //hereis
        var allitem = 0;
        $("#mytable tr").each(function() {
            var currentRow = $(this);
            var check = currentRow.find("td:eq(3)").text();
            if (check != null && check != "") {
                var col_value = currentRow.find("td:eq(7)").text();
                if ($.isNumeric(col_value)) {
                    allitem += parseFloat(col_value);
                }
            }

        });
        $("#TotalItems").val(0);
        $("#TotalItems").val(allitem);


    }
    function DiscuntChangePrice(val) {
        //

        var quantity = $("#Qty-" + val).text();
        var tootal = $("#Price-" + val).text();

        var check = $("#Discount-" + val).text();
        var discount = parseFloat(($("#Discount-" + val).text()).split("%")[0]);
        if (check == '' || check == "" || check == "$0.00" || check == "undefined" || check == "NaN" || check == NaN || check == undefined) {
            //  $("#discountin-" + val).text('$0.00');
            discount = parseFloat("0.00");
        }


        var ReplacedAmount = tootal.replace(/\$/g, '');
        var priceDiscount = (ReplacedAmount / 100) * discount;
        var foundtotalDiscount = parseFloat(quantity) * parseFloat(priceDiscount);
        var amount = parseFloat(quantity) * parseFloat(ReplacedAmount);
        amount = amount - foundtotalDiscount;
        $("#Amount-" + val).empty();
        $("#Amount-" + val).text("$" + amount.toFixed(2));
        CountTotalOfAllTD();
    }

    function DiscountPer(val) {

        console.log(val);
        var quantity = $("#Discount-" + val).text();
        if (quantity == '0.00%') {
            $("#Discount-" + val).text('');
        }
        else if (quantity == '') {
            //$("#Discount-" + val).text('0')
            // $("#Discount-" + val).text('0.00%');
        }
    }
    function ChangeAmountonDiscount(val) {
        var quantity = $("#Qty-" + val).text();
        var tootal = $("#Price-" + val).text();
        var discount = parseFloat(($("#Discount-" + val).text()).split("%")[0]);

        var ReplacedAmount = tootal.replace(/\$/g, '');
        var priceDiscount = (ReplacedAmount / 100) * discount;
        var foundtotalDiscount = parseFloat(quantity) * parseFloat(priceDiscount);
        var amount = parseFloat(quantity) * parseFloat(ReplacedAmount);
        amount = amount - foundtotalDiscount;
        $("#Amount-" + val).empty();
        $("#Amount-" + val).text("$" + amount.toFixed(2));
        CountTotalOfAllTD();
    }
    var extra = 0;
    function GetAllMatched(val) {
        if (extra == 0) {
            AppendAllMissions(event);
        }
        window.sequence = val;
        // alert(window.sequence);
        var naming = $(".searchdescname" + val).text();
        //  alert(naming);
        if (naming == "") {
            $(".item_names").parent().hide();
        }
        else {
            var text = naming;
            var items = $(".item_names");
            //first, hide all:

            items.parent().hide();
            //show only those matching user input:
            items.filter(function() {
                return $(this).text().toLowerCase().indexOf(text) >= 0;
            }).parent().show();
        }
        extra++;
    };
    function GetItemByStockItemNumber(val) {
        var itemnumber = $("#StockItemNumber-" + val).text();
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemByStockItemNumber", "Purchase")',

            data: {
                itemnumber: itemnumber
            },
            dataType: 'json',
            success: function(data) {
                if (data != null && data != "") {
                    $("#Description-" + val).text(data.itemName);

                    $("#itemid-" + val).text(data.productId);
                    $("#StockItemNumber-" + val).text(data.stockItemNumber);

                    if (data.items != null && data.items != "") {
                        $("#Retail-" + val).text("$" + data.items.retail);
                        $("#Price-" + val).text("$" + data.items.cost);
                        $("#Amount-" + val).text("$" + data.items.cost);


                    }
                }
                CountTotalOfAllTD();

            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }


    function GetItemByItemNumber(event, val) {
        var index = val;
        var itemnumber = $("#StockItemNumber-" + val).text();
        //var thirdcharacter = itemnumber.substring(2, 3);
        //if (thirdcharacter == "-") {
        //    itemnumber = itemnumber.replace('-', '');
        //}
        //else {
        //    return false;
        //}

        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {

            /*alert('You pressed a "enter" key in textbox');*/
        }

        else {
            return false;
        }
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetItemByItemNumber", "Purchase")',

            data: {
                itemnumber: itemnumber
            },
            dataType: 'json',
            success: function(data) {
                if (data != null && data != "") {
                    $("#itemid-" + val).text(data.id);
                    var count = 0;
                    var exist = 0;
                    var notexist = true;
                    $('#mytable tr').each(function(index, tr) {
                        if (count > 0) {
                            var Id = tr.attributes["id"].value.split("rowid-")[1];
                            /*   var productId = parseInt($("#rowid-" + Id).find("#productId").val());*/
                            var productId = parseInt($("#itemid-" + Id).html());
                            if (productId === data.id) {
                                exist++;

                            }
                            if (exist > 1) {
                                swal("Error!", "Item Already Added!", "error");
                                notexist = false;

                            }

                        }

                        count++;
                    });


                    if (notexist === true) {

                        $("#Description-" + val).text(data.description);

                        $("#itemid-" + val).text(data.id);
                        $("#Retail-" + val).text("$" + data.retail);
                        $("#Price-" + val).text("$" + data.cost);
                        $("#Amount-" + val).text("$" + data.cost);
                        var string = data.itemNumber;
                        string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                        $("#StockItemNumber-" + val).text(string);

                        CountTotalOfAllTD();
                        $("#listallmissions").empty();

                    }
                    else {
                        swal("Error!", "Item Already Added!", "error");
                        RemoveRow(index);
                    }
                }



            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });


    }
    function SaveSupplierItemName(event, val) {
        var isValid = true;
        var noitemsearch = false;
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
            /*alert('You pressed a "enter" key in textbox');*/
        }

        else {
            isValid = false;

            return false
        }


        var supplieritemno = $("#SupplierItemNumber-" + val).text();

        var vendorid = $("#setvendorid").text();
        if ($("#setvendorid").text() == 0) {
            swal("Error!", "Kindly Select Vendor!", "error");

            $("#ValVendorName").first().focus();
            $("#ValVendorName").text("VendorName Is Required.");
            $("#ValVendorName").show();
            isValid = false;
            return false;
        }

        if (supplieritemno != "" && supplieritemno != "undefined") {
            var record1 = {};
            record1 = new FormData();
            record1.append("VendorID", vendorid);
            record1.append("SupplierItemNum", supplieritemno);
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetItemBySupplierItemNumber", "Purchase")',

                data: record1,
                async: false,
                dataType: "json",
                processData: false,
                contentType: false,
                success: function(data) {
                    if (data != null && data != "") {
                        $("#itemid-" + val).text(data.id);
                        var count = 0;
                        var exist = 0;
                        var notexist = true;
                        $('#mytable tr').each(function(index, tr) {
                            if (count > 0) {
                                var Id = tr.attributes["id"].value.split("rowid-")[1];
                                /*   var productId = parseInt($("#rowid-" + Id).find("#productId").val());*/
                                var productId = parseInt($("#itemid-" + Id).html());
                                if (productId === data.id) {
                                    exist++;

                                }
                                if (exist > 1) {
                                    swal("Error!", "Item Already Added!", "error");
                                    notexist = false;

                                }

                            }

                            count++;
                        });


                        if (notexist === true) {

                            $("#Description-" + val).text(data.description);

                            $("#itemid-" + val).text(data.id);
                            $("#Retail-" + val).text("$" + data.retail);
                            $("#Price-" + val).text("$" + data.cost);
                            $("#Amount-" + val).text("$" + data.cost);
                            var string = data.itemNumber;
                            string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                            $("#StockItemNumber-" + val).text(string);
                            //ItemSelect(data.vendor.vendorId);
                            CountTotalOfAllTD();
                            $("#listallmissions").empty();

                        }
                        else {
                            swal("Error!", "Item Already Added!", "error");
                            RemoveRow(index);
                        }
                    }


                    else {
                        noitemsearch = true;
                    }


                },
                error: function(xhr, status, error) {
                    var errorMessage = xhr.status + ': ' + xhr.statusText
                },
            });
        }


        if (noitemsearch == true) {


            //var vendorid = $("#setvendorid").text();
            var productid = $("#itemid-" + val).text();
            if (productid == "") {
                isValid = false;
            }
            var supplieritemno = $("#SupplierItemNumber-" + val).text();

            if (supplieritemno != "" && supplieritemno != "undefined") {


                if (supplieritemno == "0") {
                    swal("Error!", "Kindly enter valid value in Supplier Item #");
                    isvalid = false;
                    return false;
                }
                else {
                    isvalid = true;
                }
                var characterandnumers = new RegExp('^[a-zA-Z0-9]+$');
                if (!characterandnumers.test(supplieritemno)) {
                    swal("Error!", "Kindly enter valid value in Supplier Item #");
                    isvalid = false;
                    return false;
                }
                else {
                    isvalid = true;
                }
                if ($("#setvendorid").text() == 0) {
                    swal("Error!", "Kindly Select Vendor!", "error");

                    $("#ValVendorName").first().focus();
                    $("#ValVendorName").text("VendorName Is Required.");
                    $("#ValVendorName").show();
                    isValid = false;
                    return false;
                }
                else {
                    isValid = true;
                }
                if (productid != "" && productid != "undefined") {


                    isValid = true;

                } else {
                    swal("Error!", "Kindly Select Product!", "error");
                    isValid = false;
                    return false;
                }

                $("#ValVendorName").hide();
                isValid = true;

            }
            else {
                isValid = false;
                return false;
            }


            if (vendorid != "" && vendorid != "undefined") {
                isValid = true;
            } else {
                isValid = false;
                return false;
            }

            var record = {};
            record = new FormData();
            record.append("VendorID", vendorid);
            record.append("ProductID", productid);
            record.append("SupplierItemNum", supplieritemno);
            if (isValid == true) {
                $.confirm({
                    title: 'Save New SupplierItemNumber!',
                    content: 'Are you sure to save new SupplierItemNumber?',
                    buttons: {
                        confirm: function() {
                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("SaveSupplier", "Purchase")',

                                data: record,
                                async: false,
                                dataType: "json",
                                processData: false,
                                contentType: false,

                                success: function(data) {


                                    if (data == "Already Exists.") {
                                        setTimeout(function() {
                                            /*alert("Supplier Item Number Already Exists.");*/
                                            swal("Error!", "Supplier Item Number Already Exists.", "error");
                                        }, 2000);
                                        //$("#ValVendorName").first().focus();
                                        //$("#ValVendorName").text("Supplier Item Number Already Exists.");
                                        //$("#ValVendorName").show();
                                    } else if (data == "true") {

                                        setTimeout(function() {
                                            /*   alert("Supplier Item Number Save Successfully.");*/
                                            swal("Success!", "Supplier Item Number Save Successfully.", "success");
                                        }, 2000);
                                    }
                                },
                                error: function(xhr, status, error) {

                                    var errorMessage = xhr.status + ': ' + xhr.statusText
                                },

                            });
                        },
                        cancel: function() {
                        },
                    }
                });


            }



        }


    }
    function GetCountToCheckCheapestProduct(val) {
        //

        var productid = $("#itemid-" + val).text();
        var priceval = $("#Price-" + val).text();

        ChangeAmountonDiscount(val);
        var record = {};
        record = new FormData();
        record.append("id", productid);
        record.append("price", priceval);
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetCountToCheckCheapestProduct", "Purchase")',

            data: record,
            async: false,
            dataType: "json",
            processData: false,
            contentType: false,

            success: function(data) {
                var cheapestvalecount = parseInt(data);
                if (cheapestvalecount > 0) {
                    $("#gifalert").show();
                    //window.val = val;
                } else {
                    $("#gifalert").hide();
                }

            },
            error: function(xhr, status, error) {

                var errorMessage = xhr.status + ': ' + xhr.statusText
            },

        });
    }
    function closemodalbtn() {
        $("#addstore").modal('hide');
    }
    function GetListToCheckCheapestProduct() {
        $(".modal-content").remove();
        var seq = window.val;
        var productid = $("#itemid-" + seq).text();
        var priceval = $("#Price-" + seq).text();
        var record = {};
        record = new FormData();
        record.append("id", productid);
        record.append("price", priceval);
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetListToCheckCheapestProduct", "Purchase")',
            data: record,
            async: false,
            dataType: "json",
            processData: false,
            contentType: false,
            success: function(data) {
                //ShowProductList(data);
                var html = "";
                html += '<div class="modal-content modalstyling">';
                html += '<div class="modal-header">';
                html += '<h5 class="modal-title mx-auto" id="ModalLabel"></h5>';
                html += '<button type="button" class="close" data-dismiss="modal" onclick="closemodalbtn()" aria-label="Close">';
                html += '<span aria-hidden="true">&times;</span>';
                html += '</button>';
                html += '</div>';
                html += '<div class="modal-body">';
                html += '<div class="row">';
                html += '<div id="" class="">';
                html += '</div>';
                html += '<div class="col-sm-12">';
                html += '<div class="table-responsive">';
                html += '<table id="order-listing" class="table dataTable no-footer" role="grid" aria-describedby="order-listing_info">';
                html += '<thead>';
                html += '<tr role="row">';
                html += '<th style="width:10px;">Sr#</th>';
                html += '<th>SupplierName</th>';
                html += '<th>Item Name</th>';
                html += '<th>Price</th>';
                html += '<th>Purchase Date</th>';
                html += '</tr>';
                html += '</thead>';
                html += '<tbody>';
                $.each(data, function(index, item) {
                    //var mydate = moment(item.podate, 'DD/MM/YYYY HH:mm').format("DD/MM/YYYY HH:mm");
                    html += '<tr class="odd">';
                    html += '<td class="sorting_1" style="width:10px;">' + (index + 1) + '</td>';
                    html += ' <td>' + item.supplierName + '</td>';
                    html += ' <td>' + item.description + '</td>';
                    html += ' <td>' + "$" + item.price + '</td>';
                    html += ' <td>' + item.podate + '</td>';
                    html += '</tr>';
                });
                html += '</tbody>';
                html += '</table>';
                html += '</div>';
                html += '</div>';
                html += '</div>';
                html += '</div>';
                html += '</div>';
                $('#addstore').append(html);
                $('#addstore').modal('show');
            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });
    }
    @*function GetListToCheckCheapestProduct() {
        $(".modal-content").remove();
        var seq=  window.val;
        var productid = $("#itemid-" + seq).text();
        var priceval = $("#Price-" + seq).text();

        console.log(productid + "/" + priceval);

        var record = {};
        record = new FormData();
        record.append("id", productid);
        record.append("price", priceval);
        $.ajax({
        type: "POST",
        url: '@Url.Action("GetListToCheckCheapestProduct", "Purchase")',

        data: record,
        async: false,
        dataType: "json",
        processData: false,
        contentType: false,

        success: function (data) {
        ShowProductList(data);
        },
        error: function (xhr, status, error) {

        var errorMessage = xhr.status + ': ' + xhr.statusText
        },

        });
        }*@

                                    var isCtrl = false;
    $(document).keyup(function(e) {
        if (e.which == 17)
            isCtrl = false;
    }).keydown(function(e) {
        if (e.which == 17) isCtrl = true;
        if (e.which == 83 && isCtrl == true) {
            SaveItemSupplierNumber(false, false, false);
            CountTotalOfAllTD();
            return false;
        }
    });
    $(document).keyup(function(e) {

        if (e.which == 17) isCtrl = false;
    }).keydown(function(e) {
        if (e.which == 17) isCtrl = true;
        if (e.which == 73 && isCtrl == true) {
            $(".add-row").trigger("click");
            event.stopPropagation();
            CountTotalOfAllTD();
            return false;
        }
    });

    $(document).keyup(function(e) {

        if (e.which == 17) isCtrl = false;
    }).keydown(function(e) {
        if (e.which == 17) isCtrl = true;
        if (e.which == 65 && isCtrl == true) {
            if ($("#received-invoice").val() == "true") {
                $("#addnewitem").trigger("click");
            }
            event.stopPropagation();
            return false;
        }
    });


    $(document).keyup(function(e) {
        if (e.which == 17)
            isCtrl = false;
    }).keydown(function(e) {
        if (e.which == 17) isCtrl = true;
        if (e.which == 114 && isCtrl == true) {
            if ($("#setvendorid").text() == 0) {
                swal("Error!", "Kindly Select Vendor!", "error");
                valid = false;
            } else {

                $('#additemshort').modal('show');
            }

            return false;
        }
    });
    $(document).keyup(function(e) {
        if (e.which == 17)
            isCtrl = false;
    }).keydown(function(e) {
        if (e.which == 17) isCtrl = true;
        if (e.which == 117 && isCtrl == true) {
            var data = $('#txtSupplierNo').val();
            if (data != null && data != '') {
                if ($("#received-invoice").val() == "true") {
                    $('#InventoryLookupModal').modal('show');
                }

            } else {
                swal("Error!", "Kindly Select Vendor!", "error");
            }


            return false;
        }
    });


    $('body').keydown(function(event) {
        var letter = String.fromCharCode(event.which);
        var count = 0;
        $("#mytable tr").each(function() {
            count++;
        });
        var sernum = count;
        if (event.keyCode == 46) {
            var id = $("#TotalItems").val();
            if (id > 0) {
                $("#rowid-" + id).remove();
                sernum--;
                $("#TotalItems").val(sernum);
            }
            CountTotalOfAllTD();
        }

    });
    function closeitemmodal() {
        $("#additemshort").modal('hide');
        $("#searchPro").val('');
        $('.modalTable tr').removeClass("selectedrow");
        $('#itemquantitylabel').val('');
        shortaddvalue = 0;
    }
    function CloseInventoryLookupModal() {
        $("#InventoryLookupModal").modal('hide');
        $('#itemDescription').val('');
        $('#itemNumber').val('');
        $('#itemStockID').val('');
        $('#itemRetail').val('');
        $('#itemPrice').val('');
        $('#caseQTY').val('');
        $('#customQuantity').val('');
        $('#unitRetail').val('');
        $(".searchnamee").val('');
        $(".searchnameee").val('');
        $("#customerCode").val('');
    }
    //Uncheck checkbox based on condition
    $("#ShowAllitem").click(function() {
        $("#SupplierItemOnly").prop("checked", false);
        if ($(this).find("datalist").length > 0) {
            $(this).find("datalist").empty();
        }

    });
    $("#SupplierItemOnly").click(function() {
        $("#ShowAllitem").prop("checked", false);
        $("#mytable tr").each(function(index, tr) {
            if ($(this).find("datalist").length > 0) {
                $(this).find("datalist").empty();
            }
        });
    });

    var data_array = [];

    function GetItemList(val) {
        var vendorid = $("#setvendorid").text();
        var supplierItemCheck = $("#SupplierItemOnly").is(':checked');
        if (supplierItemCheck == true && vendorid != "") {
            var search = $("#DescriptionInput-" + val).val();
            $("#productList-" + val).empty();
            var dropdown = '';



            $.each(AllSupplieritemsList, function(index, value) {
                if (search != "") {
                    if (value.text.toLowerCase().indexOf(search) >= 0) {
                        dropdown += '<option data-value="' + value.value + '">' + value.text + '</option>';
                        let my_object = {};
                        my_object.title = value.text;
                        my_object.value = value.value;

                        data_array.push(my_object);
                    }
                }
            });
            //$.ajax({
            //    type: "GET",
            //    async: false,
            //    cache: false,
            //    data: { vendorId: vendorid },
            //    url: '@Url.Action("GetItemsWithVenodrId", "Purchase")',
            //    dataType: 'json',
            //    success: function(data) {
            //        $.each(data, function(index, value) {
            //            if (search != "") {
            //                if (value.text.toLowerCase().indexOf(search) >= 0) {
            //                    dropdown += '<option data-value="' + value.value + '">' + value.text + '</option>';
            //                    let my_object = {};
            //                    my_object.title = value.text;
            //                    my_object.value = value.value;

            //                    data_array.push(my_object);
            //                }
            //            }
            //        });

            //    },
            //    error: function(xhr, status, error) {
            //        var errorMessage = xhr.status + ': ' + xhr.statusText
            //    },
            //});
            $("#productList-" + val).append(dropdown);
            $.each(data_array, function(index, value) {
                if (data_array[index].title == search) {
                    GetItemByID(data_array[index].value, val);
                }
            });

        }
        else {
            var search = $("#DescriptionInput-" + val).val();
            $("#productList-" + val).empty();
            var dropdown = '';

            $.each(AllReturnitemsList, function(index, value) {
                if (search != "") {
                    if (value.text.toLowerCase().indexOf(search) >= 0) {
                        dropdown += '<option data-value="' + value.value + '" value="' + value.text + '"></option>';
                        let my_object = {};
                        my_object.title = value.text;
                        my_object.value = value.value;

                        data_array.push(my_object);
                    }
                }
            });

            //$.ajax({
            //    type: "GET",
            //    async: false,
            //    cache: false,
            //    url: '@Url.Action("GetAllItemReturnWithId", "Sale")',
            //    dataType: 'json',
            //    success: function(data) {

            //        $.each(data, function(index, value) {
            //            if (search != "") {
            //                if (value.text.toLowerCase().indexOf(search) >= 0) {
            //                    dropdown += '<option data-value="' + value.value + '" value="' + value.text + '"></option>';
            //                    let my_object = {};
            //                    my_object.title = value.text;
            //                    my_object.value = value.value;

            //                    data_array.push(my_object);
            //                }
            //            }
            //        });

            //    },
            //    error: function(xhr, status, error) {
            //        var errorMessage = xhr.status + ': ' + xhr.statusText
            //    },
            //});

            $("#productList-" + val).append(dropdown);
            $.each(data_array, function(index, value) {
                if (data_array[index].title == search) {
                    GetItemByID(data_array[index].value, val);
                }
            });
        }
    }

    $("#ManualInvoiceNoo").keyup(function() {

        var data = $(this).val();
        //data = "INV-" + data;
        //
        if (data != '') {

            $.ajax({
                url: '@Url.Action("GetPurchaseOrderByInvoiceNumber", "Purchase")',
                async: false,
                Type: 'GET',
                contentType: "application/json;",
                data: { InvoiceNumber: data },
                dataType: "json",
                success: function(data) {
                    var number = 0;
                    $('#mytable tr').each(function(index, tr) {
                        number++;
                    });
                    var sernum = number;
                    //var sernum = 1;

                    if (data.length > 0) {

                        $("#setvendorid").text(data[0].supplierId);
                        $("#myInput").val(data[0].supplierName);
                        ItemSelect(data[0].supplierId);
                        $("#txtSupplierNo").val(data[0].supplierNumber);
                        $("#txtSupplierNo").val(data[0].supplierNumber);
                        $('#PaymentTerms').val(data[0].payTerms);
                        $("#Notes").val(data[0].notes);
                        $("#TotalTobacco").val(data[0].totalTobacco);
                        $("#TotalCigar").val(data[0].totalCigar);
                        $("#TotalCigarette").val(data[0].totalCigarette);
                        $("#CigaretteStock").val(data[0].cigaretteStick);
                        $('#UpdateCost').prop('checked', data[0].updateCost);
                        $('#UpateOscost').prop('checked', data[0].updateOscost);
                        $('#Received').prop('checked', data[0].received);
                        $('#ManualInvoiceNo').val(data[0].manualInvoiceNumber);
                        $(".tableRow").remove();
                        $("#TotalItems").val(0);
                        $("#Savebtn").hide();
                        $("#Printbtn").hide();
                        if (data[0].isPaid == true) {
                            $("#otherpayment").prop("disabled", true);
                            $("#imgPaid").show();
                        }
                        else {
                            $("#otherpayment").prop("disabled", false);
                            $("#imgPaid").hide();
                        }
                        if (data[0].received != true) {
                            $("#Editbtn").show();
                            $("#imgRecieved").hide();

                        }
                        else {
                            $("#Received").prop("disabled", true);
                            $("#imgRecieved").show();

                        }

                        $("#txtInvoiceNumber").text(data[0].invoiceNumber);
                        //
                        if (data[0].received) {
                            $("#Savebtn").hide();
                            $("#Editbtn").hide();
                            $("#Printbtn").hide();
                            $("#setvendorid").prop("disabled", true);
                            $("#myInput").prop("disabled", true);
                            $("#txtSupplierNo").prop("disabled", true);
                            $("#Notes").prop("disabled", true);
                            $("#TotalTobacco").prop("disabled", true);
                            $("#TotalCigar").prop("disabled", true);
                            $("#TotalCigarette").prop("disabled", true);
                            $("#CigaretteStock").prop("disabled", true);
                            $('#UpdateCost').prop("disabled", true);
                            $('#UpateOscost').prop("disabled", true);
                            $('#Received').prop("disabled", true);
                            $(".tableRow").remove();
                            $("#TotalItems").prop("disabled", true);
                            $("#Savebtn").hide();
                            if (data[0].isPaid == true) {
                                $("#otherpayment").prop("disabled", true);
                                $("#imgPaid").show();
                            }
                            else {
                                $("#otherpayment").prop("disabled", false);
                                $("#imgPaid").hide();
                            }
                            if (data[0].received != true) {
                                $("#Editbtn").show();
                                $("#imgRecieved").hide();
                            }
                            else {
                                $("#Received").prop("disabled", true);
                                $("#imgRecieved").show();
                            }

                            $("#txtInvoiceNumber").text(data[0].invoiceNumber);
                            //
                        }

                        else {
                            $('#UpdateCost').prop("disabled", false);
                            $('#UpateOscost').prop("disabled", false);
                            $("#Savebtn").hide();
                            $("#Editbtn").show();
                            $("#Printbtn").hide();
                        }
                    }
                    else {
                        $("#txtInvoiceNumber").text('@ViewBag.Invoicenumber');
                        $('#appendnewrowforsale').html('');
                        $("#Savebtn").show();
                        $("#Printbtn").show();
                        $("#Editbtn").hide();

                    }
                    var suppliername = $("#txtSupplierName").val();
                    var suppliercode = $("#txtSupplierNo").text();
                    var isreportstatus = $("#Report").is(':checked');
                    var showAllitem = $("#ShowAllitem").is(':checked');
                    var supplierItemOnly = $("#SupplierItemOnly").is(':checked');
                    var UpdateCost = $("#UpdateCost").is(':checked');
                    var UpdateOscost = $("#UpateOscost").is(':checked');
                    var Received = $("#Received").is(':checked');
                    var IsTax = $("#IsTax").is(':checked');
                    var IsPrice = $("#IsPrice").is(':checked');
                    var IsQty = $("#IsQty").is(':checked');
                    var IsCaseQty = $("#IsCaseQty").is(':checked');
                    var IsDiscount = $("#IsDiscount").is(':checked');
                    if (data.length > 0) {
                        if (data[0].received != true) {
                            $.each(data, function(index, value) {
                                var html = '';
                                html += '<tr  id="rowid-' + sernum + '" class="tableRow" data-itemcode="">';
                                html += '<td id="countser-' + sernum + '" style="width: 10px;display:none" class="counter brd" contenteditable="true">' + sernum + '</td>';
                                html += '<td style="width: 10px" id="delete-' + sernum + '"  onclick="RemoveRow(' + sernum + ')"><span class="delete-row ti-close"></span></td>';
                                html += '<td  id="SupplierItemNumber-' + sernum + '" style="width: 10px"  class="brd" contenteditable="true" onkeyup="SaveSupplierItemName(event,' + sernum + ')">' + value.supplierItemNumber + '</td>';
                                html += '<td id="StockItemNumber-' + sernum + '" style="width: 10px" class="brd" contenteditable="true" onkeyup ="GetItemByItemNumber(event,' + sernum + ')">' + value.stockItemNumber + '</td>';
                                html += '<td id="Description-' + sernum + '" contenteditable="false" class="searchdescname brd' + sernum + '">' + value.description + '</td>';
                                html += '<td id="Retail-' + sernum + '" contenteditable="false" class="table-secondary brd">' + value.retail + '</td>';
                                html += '<td id="Price-' + sernum + '" class="brd" contenteditable="true" onkeyup = "GetCountToCheckCheapestProduct(' + sernum + ')">$' + value.price + '</td>';
                                html += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                html += '<td id="CaseQty-' + sernum + '" class="brd" contenteditable="true">' + value.caseQty + '</td>';
                                html += '<td id="Discount-' + sernum + '" class="brd" contenteditable="true" onkeyup="DiscuntChangePrice(' + sernum + ')">' + value.discount + '</td>';
                                html += '<td id="Amount-' + sernum + '" contenteditable="false" class="table-primary brd">$' + value.amount + '</td>';
                                html += '<td id="suppliername-' + sernum + '" style="display:none;">' + suppliername + '</td>';
                                html += '<td style="display:none" id="suppliercode-' + sernum + '" contenteditable="true">' + suppliercode + '</td>';
                                html += '<td  id="reportid-' + sernum + '" style="display:none;">' + isreportstatus + '</td>';
                                html += '<td  id="showAllitemid-' + sernum + '" style="display:none;">' + showAllitem + '</td>';
                                html += '<td  id="supplierItemOnlyid-' + sernum + '" style="display:none;">' + supplierItemOnly + '</td>';
                                html += '<td  id="UpdateCostid-' + sernum + '" style="display:none;">' + UpdateCost + '</td>';
                                html += '<td  id="UpdateOscostid-' + sernum + '" style="display:none;">' + UpdateOscost + '</td>';
                                html += '<td  id="Receivedid-' + sernum + '" style="display:none;">' + Received + '</td>';
                                html += '<td  id="IsTaxid-' + sernum + '" style="display:none;">' + IsTax + '</td>';
                                html += '<td  id="IsPriceid-' + sernum + '" style="display:none;">' + IsPrice + '</td>';
                                html += '<td  id="IsQtyid-' + sernum + '" style="display:none;">' + IsQty + '</td>';
                                html += '<td  id="IsCaseQtyid-' + sernum + '" style="display:none;">' + IsCaseQty + '</td>';
                                html += '<td  id="IsDiscountid-' + sernum + '" style="display:none;">' + IsDiscount + '</td>';
                                html += '<td  style="display:none" id="itemid-' + sernum + '" style="display:none;">' + value.itemId + '</td>';
                                html += '<input type="hidden" value="" id="productId"/>';
                                html += '<input type="hidden" value="' + value.purchaseorderId + '" id="purchaseId"/>';
                                html += '<input type="hidden" value="' + value.simpleInvoiceNumber + '" id="simpleinvoicenumber"/>';
                                html += '</tr >';

                                $('#appendnewrowforsale').append(html);
                                //$("#TotalItems").val(sernum);
                                $(".add-row").css("pointer-events", "auto");
                                $("#addnewitem").css("pointer-events", "auto");
                                $("#received-invoice").val("true");
                                $('#SupplierItemOnly').prop('disabled', false);
                                $('#ShowAllitem').prop('disabled', false);
                                sernum++;
                                CountTotalOfAllTD();
                            });
                        }
                        else {
                            $.each(data, function(index, value) {
                                var html = '';

                                html += '<tr  id="rowid-' + sernum + '" class="tableRow" data-itemcode="">';
                                html += '<td id="countser-' + sernum + '" style="width: 10px;display:none" class="counter brd" contenteditable="false">' + sernum + '</td>';
                                html += '<td style="width: 10px" id="delete-' + sernum + '"  onclick="RemoveRow(' + sernum + ')"><span class="delete-row ti-close"></span></td>';
                                html += '<td  id="SupplierItemNumber-' + sernum + '" style="width: 10px"  class="brd" contenteditable="false" onkeyup="SaveSupplierItemName(event,' + sernum + ')">' + value.supplierItemNumber + '</td>';
                                html += '<td id="StockItemNumber-' + sernum + '" style="width: 10px" class="brd" contenteditable="false" onkeyup ="GetItemByItemNumber(event,' + sernum + ')">' + value.stockItemNumber + '</td>';
                                html += '<td id="Description-' + sernum + '" contenteditable="false" class="searchdescname brd' + sernum + '">' + value.description + '</td>';
                                html += '<td id="Retail-' + sernum + '" contenteditable="false" class="table-secondary brd">' + value.retail + '</td>';
                                html += '<td id="Price-' + sernum + '" class="brd" contenteditable="true" onkeyup = "GetCountToCheckCheapestProduct(' + sernum + ')">$' + value.price + '</td>';
                                html += '<td id="Qty-' + sernum + '" class="brd" contenteditable="false"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                html += '<td id="CaseQty-' + sernum + '" class="brd" contenteditable="false">' + value.caseQty + '</td>';
                                html += '<td id="Discount-' + sernum + '" class="brd" contenteditable="false" onkeyup="DiscuntChangePrice(' + sernum + ')">' + value.discount + '</td>';
                                html += '<td id="Amount-' + sernum + '" contenteditable="false" class="table-primary brd">$' + value.amount + '</td>';
                                html += '<td id="suppliername-' + sernum + '" style="display:none;">' + suppliername + '</td>';
                                html += '<td style="display:none" id="suppliercode-' + sernum + '" contenteditable="false">' + suppliercode + '</td>';
                                html += '<td  id="reportid-' + sernum + '" style="display:none;">' + isreportstatus + '</td>';
                                html += '<td  id="showAllitemid-' + sernum + '" style="display:none;">' + showAllitem + '</td>';
                                html += '<td  id="supplierItemOnlyid-' + sernum + '" style="display:none;">' + supplierItemOnly + '</td>';
                                html += '<td  id="UpdateCostid-' + sernum + '" style="display:none;">' + UpdateCost + '</td>';
                                html += '<td  id="UpdateOscostid-' + sernum + '" style="display:none;">' + UpdateOscost + '</td>';
                                html += '<td  id="Receivedid-' + sernum + '" style="display:none;">' + Received + '</td>';
                                html += '<td  id="IsTaxid-' + sernum + '" style="display:none;">' + IsTax + '</td>';
                                html += '<td  id="IsPriceid-' + sernum + '" style="display:none;">' + IsPrice + '</td>';
                                html += '<td  id="IsQtyid-' + sernum + '" style="display:none;">' + IsQty + '</td>';
                                html += '<td  id="IsCaseQtyid-' + sernum + '" style="display:none;">' + IsCaseQty + '</td>';
                                html += '<td  id="IsDiscountid-' + sernum + '" style="display:none;">' + IsDiscount + '</td>';
                                html += '<td  style="display:none" id="itemid-' + sernum + '" style="display:none;">' + value.itemId + '</td>';
                                html += '<input type="hidden" value="" id="productId"/>';
                                html += '<input type="hidden" value="' + value.purchaseorderId + '" id="purchaseId"/>';
                                html += '<input type="hidden" value="' + value.simpleInvoiceNumber + '" id="simpleinvoicenumber"/>';
                                html += '</tr >';

                                $('#appendnewrowforsale').append(html);
                                //$("#TotalItems").val(sernum);
                                CountTotalOfAllTD();

                                $('#Received').prop('disabled', true);
                                $('#SupplierItemOnly').prop('disabled', true);
                                $('#ShowAllitem').prop('disabled', true);
                                $(".add-row").css("pointer-events", "none");
                                $("#addnewitem").css("pointer-events", "none");
                                $("#delete-" + sernum).prop("onclick", null);
                                $("#received-invoice").val("false");

                                sernum++;
                            });
                        }
                    }
                    else {
                        $('#appendnewrowforsale').html('');
                        $("#Savebtn").show();
                        $("#Printbtn").show();
                        $("#Editbtn").hide();

                    }

                },
                error: function(xhr, status, error) {
                    var errorMessage = xhr.status + ': ' + xhr.statusText
                },
            });
        }

    });


    var nextinvoice = function(method, selectedinvoicenumber) {
        var data = $("#txtInvoiceNumber").text();

        if (method == 'null') {
            data = selectedinvoicenumber

            if (data == 'value') { return false; }

        }
        //data = "INV-" + data;
        //
        if (data != '') {

            $.ajax({
                url: '@Url.Action("GetPurchaseOrderByInvoiceNumber", "Purchase")',
                async: false,
                cache: false,
                Type: 'GET',
                contentType: "application/json;",
                data: { InvoiceNumber: data, Method: method },
                dataType: "json",
                success: function(data) {

                    //var data = jQuery.parseJSON(JSON.stringify(response));
                    //   console.log("*******" + data);

                    //var sernum = 1;

                    if (data.length > 0) {
                        $("#setvendorid").text(data[0].supplierId);
                        $("#myInput").val(data[0].supplierName);
                        $("#Freight").val(data[0].freight);
                        $("#Freight").attr('readonly', true);
                        ItemSelect(data[0].supplierId);
                        $("#txtSupplierNo").val(data[0].supplierNumber);
                        $("#txtSupplierNo").val(data[0].supplierNumber);
                        $('#PaymentTerms').val(data[0].payTerms);
                        $('#Tax').val(data[0].tax);
                        $("#Tax").attr('readonly', true);
                        $('#Other').val(data[0].other);
                        $("#Other").attr('readonly', true);
                        $("#Total").attr('readonly', true);
                        $("#SubTotal").attr('readonly', true);
                        $("#Notes").val(data[0].notes);
                        $("#TotalTobacco").val(data[0].totalTobacco);
                        $("#TotalCigar").val(data[0].totalCigar);
                        $("#TotalCigarette").val(data[0].totalCigarette);
                        $("#CigaretteStock").val(data[0].cigaretteStick);
                        $("#DateReceived").val(data[0].dateReceived);
                        $('#UpdateCost').prop('checked', data[0].updateCost);
                        $('#ManualInvoiceNo').val(data[0].manualInvoiceNumber);
                        $('#UpateOscost').prop('checked', data[0].updateOscost);
                        $('#Received').prop('checked', data[0].received);
                        $(".tableRow").remove();
                        
                        // count total items Qty
                        let totalQty = 0;
                        data.forEach((item) => {
                            if(item.qty != 0 && item.qty != null)
                            totalQty = totalQty + parseInt(item.qty);
                        });

                        $("#TotalItems").val(totalQty);
                        $("#Savebtn").hide();
                        $("#Printbtn").hide();
                        if (data[0].isPaid == true) {
                            $("#otherpayment").prop("disabled", true);
                            $("#imgPaid").show();
                        }
                        else {
                            $("#otherpayment").prop("disabled", false);
                            $("#imgPaid").hide();
                        }
                        if (data[0].received != true) {
                            $("#imgPaid").removeClass("show");
                            $("#imgPaid").addClass("hide");
                            $("#imgRecieved").addClass("hide");
                            $("#imgRecieved").removeClass("show");
                            $("#Editbtn").show();
                        }
                        else {
                            $("#imgPaid").removeClass("hide");
                            $("#imgPaid").addClass("show");
                            $("#imgRecieved").addClass("show");
                            $("#imgRecieved").removeClass("hide");
                            $("#Received").prop("disabled", true);
                        }

                        var number = 0;
                        $('#mytable tr').each(function(index, tr) {
                            number++;
                        });
                        var sernum = number;

                        $("#txtInvoiceNumber").text(data[0].invoiceNumber);
                        //
                        if (data[0].received) {
                            //working here
                            $("#Savebtn").hide();
                            //$("#Editbtn").hide();
                            $("#Editbtn").show();
                            $("#Printbtn").hide();
                            $("#setvendorid").prop("disabled", true);
                            $("#myInput").prop("disabled", true);
                            $("#txtSupplierNo").prop("disabled", true);
                            $("#Notes").prop("disabled", true);
                            //$("#TotalTobacco").prop("disabled", true);
                            $("#TotalTobacco").prop("disabled", false);
                            $("#TotalCigar").prop("disabled", false);
                            $("#TotalCigarette").prop("disabled", false);
                            $("#CigaretteStock").prop("disabled", false);
                            //$("#TotalCigar").prop("disabled", true);
                            //$("#TotalCigarette").prop("disabled", true);
                            //$("#CigaretteStock").prop("disabled", true);
                            //$('#UpdateCost').prop("disabled", true);
                            //$('#UpateOscost').prop("disabled", true);
                            //$('#Received').prop("disabled", true);
                            $('#UpdateCost').prop("disabled", false);
                            $('#UpateOscost').prop("disabled", false);
                            $('#Received').prop("disabled", false);
                            $(".tableRow").remove();
                            $("#TotalItems").prop("disabled", true);
                            $("#Savebtn").hide();
                            if (data[0].isPaid == true) {
                                $("#otherpayment").prop("disabled", true);
                                $("#imgPaid").show();
                            }
                            else {
                                $("#otherpayment").prop("disabled", false);
                                $("#imgPaid").hide();
                            }
                            if (data[0].received != true) {
                                $("#Editbtn").show();
                                $("#imgRecieved").hide();

                            }
                            else {
                                $("#Received").prop("disabled", true);
                                $("#imgRecieved").show();

                            }

                            $("#txtInvoiceNumber").text(data[0].invoiceNumber);
                            //
                        }

                        else {

                            $('#UpdateCost').prop("disabled", false);
                            $('#UpateOscost').prop("disabled", false);
                            $("#Savebtn").hide();
                            $("#Editbtn").show();
                            $("#Printbtn").hide();
                        }
                    }
                    else {
                        $("#imgPaid").removeClass("show");
                        $("#imgPaid").addClass("hide");
                        $("#imgRecieved").addClass("hide");
                        $("#imgRecieved").removeClass("show");
                        $("#txtInvoiceNumber").text('@ViewBag.Invoicenumber');
                        $('#appendnewrowforsale').html('');
                        $("#Savebtn").show();
                        $("#Printbtn").show();
                        $("#Editbtn").hide();

                    }
                    if (data[0].invoicePayments != null) {

                        if (data[0].invoicePayments.totalPaid == true) {
                            $("#ispartialPaid").val('paid');
                            $("#wire").attr('disabled', true);
                            $("#cashout").attr('disabled', true);
                            $("#other").attr('disabled', true);
                            $("#payment").attr('disabled', true);
                        } else {
                            $("#preorderPaid").val(parseFloat(data[0].invoicePayments.debit).toFixed(2));
                            $("#wire").attr('disabled', false);
                            $("#cashout").attr('disabled', false);
                            $("#other").attr('disabled', false);
                            $("#payment").attr('disabled', false);
                            //$("#poAmountt").val(data[0].invoicePayments.cashBalance);
                        }
                        console.log("/////////" + data[0].invoicePayments);
                        $('#datepickerPO').datepicker('setDate', '');
                        $("#poAmountt").val('');
                        $("#PoAmount").val(parseFloat(data[0].invoicePayments.netAmount).toFixed(2));
                        $("#poBalance").val(parseFloat(data[0].invoicePayments.cashBalance).toFixed(2));
                        $("#poBalancee").val(parseFloat(data[0].invoicePayments.cashBalance).toFixed(2));
                        $("#descriptionPo").val(data[0].invoicePayments.comments);
                        $("#commentsPO").val(data[0].invoicePayments.comments);

                        $("#datepickerPO").datepicker({
                            dateFormat: "dd/MM/yy"
                        }).datepicker('setDate', new Date(data[0].invoicePayments.date.toString()));
                        if (data[0].invoicePayments.paymentType == "Cash") {
                            $("#otherPaid").val(parseFloat(data[0].invoicePayments.debit).toFixed(2));
                            $("#totalPaid").val(parseFloat(data[0].invoicePayments.debit).toFixed(2));

                        } else {
                            $("#checkPaid").val(parseFloat(data[0].invoicePayments.debit).toFixed(2));
                            $("#totalPaid").val(parseFloat(data[0].invoicePayments.debit).toFixed(2));

                        }
                    }
                    var suppliername = $("#txtSupplierName").val();
                    var suppliercode = $("#txtSupplierNo").text();
                    var isreportstatus = $("#Report").is(':checked');
                    var showAllitem = $("#ShowAllitem").is(':checked');
                    var supplierItemOnly = $("#SupplierItemOnly").is(':checked');
                    var UpdateCost = $("#UpdateCost").is(':checked');
                    var UpdateOscost = $("#UpateOscost").is(':checked');
                    var Received = $("#Received").is(':checked');
                    var IsTax = $("#IsTax").is(':checked');
                    var IsPrice = $("#IsPrice").is(':checked');
                    var IsQty = $("#IsQty").is(':checked');
                    var IsCaseQty = $("#IsCaseQty").is(':checked');
                    var IsDiscount = $("#IsDiscount").is(':checked');
                    if (data.length > 0) {
                        if (data[0].received != true) {
                            $.each(data, function(index, value) {
                                var string = value.stockItemNumber;
                                string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                                var html = '';
                                html += '<tr  id="rowid-' + sernum + '" class="tableRow" data-itemcode="' + value.stockItemNumber + '">';
                                html += '<td id="countser-' + sernum + '" style="width: 10px;display:none" class="counter brd" contenteditable="true">' + sernum + '</td>';
                                html += '<td style="width: 10px"  id="delete-' + sernum + '"  onclick="RemoveRow(' + sernum + ')"><span class="delete-row ti-close"></span></td>';
                                html += '<td  id="SupplierItemNumber-' + sernum + '" style="width: 10px"  class="brd" contenteditable="true" onkeyup="SaveSupplierItemName(event,' + sernum + ')">' + value.supplierItemNumber + '</td>';
                                html += '<td id="StockItemNumber-' + sernum + '" style="width: 10px" class="brd" contenteditable="true" onkeyup ="GetItemByItemNumber(event,' + sernum + ')">' + string + '</td>';
                                html += '<td id="Description-' + sernum + '" contenteditable="false" class="searchdescname brd' + sernum + '">' + value.description + '</td>';
                                html += '<td id="Retail-' + sernum + '" contenteditable="false" class="table-secondary brd">' + value.retail + '</td>';
                                html += '<td id="Price-' + sernum + '" class="brd" contenteditable="true" onkeyup = "GetCountToCheckCheapestProduct(' + sernum + ')">$' + value.price + '</td>';
                                html += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                html += '<td id="CaseQty-' + sernum + '" class="brd" contenteditable="true">' + value.caseQty + '</td>';
                                html += '<td id="Discount-' + sernum + '" class="brd" contenteditable="true" onkeyup="DiscuntChangePrice(' + sernum + ')">' + value.discount + '</td>';
                                html += '<td id="Amount-' + sernum + '" contenteditable="false" class="table-primary brd">$' + value.amount + '</td>';
                                html += '<td id="suppliername-' + sernum + '" style="display:none;">' + suppliername + '</td>';
                                html += '<td style="display:none" id="suppliercode-' + sernum + '" contenteditable="true">' + suppliercode + '</td>';
                                html += '<td  id="reportid-' + sernum + '" style="display:none;">' + isreportstatus + '</td>';
                                html += '<td  id="showAllitemid-' + sernum + '" style="display:none;">' + showAllitem + '</td>';
                                html += '<td  id="supplierItemOnlyid-' + sernum + '" style="display:none;">' + supplierItemOnly + '</td>';
                                html += '<td  id="UpdateCostid-' + sernum + '" style="display:none;">' + UpdateCost + '</td>';
                                html += '<td  id="UpdateOscostid-' + sernum + '" style="display:none;">' + UpdateOscost + '</td>';
                                html += '<td  id="Receivedid-' + sernum + '" style="display:none;">' + Received + '</td>';
                                html += '<td  id="IsTaxid-' + sernum + '" style="display:none;">' + IsTax + '</td>';
                                html += '<td  id="IsPriceid-' + sernum + '" style="display:none;">' + IsPrice + '</td>';
                                html += '<td  id="IsQtyid-' + sernum + '" style="display:none;">' + IsQty + '</td>';
                                html += '<td  id="IsCaseQtyid-' + sernum + '" style="display:none;">' + IsCaseQty + '</td>';
                                html += '<td  id="IsDiscountid-' + sernum + '" style="display:none;">' + IsDiscount + '</td>';
                                html += '<td  style="display:none" id="itemid-' + sernum + '" style="display:none;">' + value.itemId + '</td>';
                                html += '<input type="hidden" value="" id="productId"/>';
                                html += '<input type="hidden" value="' + value.purchaseorderId + '" id="purchaseId"/>';
                                html += '<input type="hidden" value="' + value.simpleInvoiceNumber + '" id="simpleinvoicenumber"/>';
                                html += '</tr >';

                                $('#appendnewrowforsale').append(html);
                                //$("#TotalItems").val(sernum);
                                $(".add-row").css("pointer-events", "auto");
                                $("#addnewitem").css("pointer-events", "auto");
                                $("#received-invoice").val("true");
                                $('#SupplierItemOnly').prop('disabled', false);
                                $('#ShowAllitem').prop('disabled', false);
                                sernum++;
                                CountTotalOfAllTD();


                                var htmls = '';
                                htmls += '<tr  id="rowid-' + sernum + '" class="tableRow" data-itemcode="' + value.stockItemNumber + '">';
                                //htmls += '<td id="countser-' + sernum + '" style="width: 10px;display:none" class="counter brd" contenteditable="true">' + sernum + '</td>';
                                htmls += '<td id="Description-' + sernum + '" contenteditable="false" class="searchdescname brd' + sernum + '">' + value.description + '</td>';
                                htmls += '<td id="StockItemNumber-' + sernum + '" style="width: 10px" class="brd" contenteditable="true" >' + string + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '</tr >';


                                //$('#appendnewrowforSecond').append(htmls);
                            });

                            $('#ManualInvoiceNo').attr("readonly", false);

                        }
                        else {
                            $.each(data, function(index, value) {
                                var string = value.stockItemNumber;
                                string = string.substring(0, 2) + '-' + string.substring(2, string.length);

                                var html = '';

                                html += '<tr  id="rowid-' + sernum + '" class="tableRow" data-itemcode="' + value.stockItemNumber + '">';
                                html += '<td id="countser-' + sernum + '" style="width: 10px;display:none" class="counter brd" contenteditable="false">' + sernum + '</td>';
                                html += '<td style="width: 10px"  id="delete-' + sernum + '"  onclick="RemoveRow(' + sernum + ')"><span class="delete-row ti-close"></span></td>';
                                html += '<td  id="SupplierItemNumber-' + sernum + '" style="width: 10px"  class="brd xx" contenteditable="false" onkeyup="SaveSupplierItemName(event,' + sernum + ')">' + value.supplierItemNumber + '</td>';
                                html += '<td id="StockItemNumber-' + sernum + '" style="width: 10px" class="brd" contenteditable="false" onkeyup ="GetItemByItemNumber(event,' + sernum + ')">' + string + '</td>';
                                html += '<td id="Description-' + sernum + '" contenteditable="false" class="searchdescname brd' + sernum + '">' + value.description + '</td>';
                                html += '<td id="Retail-' + sernum + '" contenteditable="false" class="table-secondary brd">' + value.retail + '</td>';
                                html += '<td id="Price-' + sernum + '" class="brd" contenteditable="true" onkeyup = "GetCountToCheckCheapestProduct(' + sernum + ')">$' + value.price + '</td>';
                                html += '<td id="Qty-' + sernum + '" class="brd" contenteditable="false"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                html += '<td id="CaseQty-' + sernum + '" class="brd" contenteditable="false">' + value.caseQty + '</td>';
                                html += '<td id="Discount-' + sernum + '" class="brd" contenteditable="false" onkeyup="DiscuntChangePrice(' + sernum + ')">' + value.discount + '</td>';
                                html += '<td id="Amount-' + sernum + '" contenteditable="false" class="table-primary brd">$' + value.amount + '</td>';
                                html += '<td id="suppliername-' + sernum + '" style="display:none;">' + suppliername + '</td>';
                                html += '<td style="display:none" id="suppliercode-' + sernum + '" contenteditable="false">' + suppliercode + '</td>';
                                html += '<td  id="reportid-' + sernum + '" style="display:none;">' + isreportstatus + '</td>';
                                html += '<td  id="showAllitemid-' + sernum + '" style="display:none;">' + showAllitem + '</td>';
                                html += '<td  id="supplierItemOnlyid-' + sernum + '" style="display:none;">' + supplierItemOnly + '</td>';
                                html += '<td  id="UpdateCostid-' + sernum + '" style="display:none;">' + UpdateCost + '</td>';
                                html += '<td  id="UpdateOscostid-' + sernum + '" style="display:none;">' + UpdateOscost + '</td>';
                                html += '<td  id="Receivedid-' + sernum + '" style="display:none;">' + Received + '</td>';
                                html += '<td  id="IsTaxid-' + sernum + '" style="display:none;">' + IsTax + '</td>';
                                html += '<td  id="IsPriceid-' + sernum + '" style="display:none;">' + IsPrice + '</td>';
                                html += '<td  id="IsQtyid-' + sernum + '" style="display:none;">' + IsQty + '</td>';
                                html += '<td  id="IsCaseQtyid-' + sernum + '" style="display:none;">' + IsCaseQty + '</td>';
                                html += '<td  id="IsDiscountid-' + sernum + '" style="display:none;">' + IsDiscount + '</td>';
                                html += '<td  style="display:none" id="itemid-' + sernum + '" style="display:none;">' + value.itemId + '</td>';
                                html += '<input type="hidden" value="" id="productId"/>';
                                html += '<input type="hidden" value="' + value.purchaseorderId + '" id="purchaseId"/>';
                                html += '<input type="hidden" value="' + value.simpleInvoiceNumber + '" id="simpleinvoicenumber"/>';
                                html += '</tr >';

                                $('#appendnewrowforsale').append(html);

                                var htmls = '';
                                htmls += '<tr  id="rowid-' + sernum + '" class="tableRow" data-itemcode="' + value.stockItemNumber + '">';
                                htmls += '<td id="countser-' + sernum + '" style="width: 10px;display:none" class="counter brd" contenteditable="true">' + sernum + '</td>';
                                htmls += '<td id="Description-' + sernum + '" contenteditable="false" class="searchdescname brd' + sernum + '">' + value.description + '</td>';
                                htmls += '<td id="StockItemNumber-' + sernum + '" style="width: 10px" class="brd" contenteditable="true" >' + string + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '<td id="Qty-' + sernum + '" class="brd" contenteditable="true"" onkeyup="QuantityMultipyPrice(' + sernum + ')">' + value.qty + '</td>';
                                htmls += '</tr >';


                                $('#appendnewrowforSecond').append(htmls);

                                //$("#TotalItems").val(sernum);
                                CountTotalOfAllTD();


                                $('#Received').prop('disabled', true);
                                //$('#SupplierItemOnly').prop('disabled', true);
                                //$('#ShowAllitem').prop('disabled', true);
                                //$(".add-row").css("pointer-events", "none");
                                //$("#addnewitem").css("pointer-events", "none");
                                //$("#delete-" + sernum).prop("onclick", null);
                                $("#received-invoice").val("false");

                                sernum++;
                            });

                            $('#ManualInvoiceNo').attr("readonly", true);
                        }
                    }
                    else {
                        $('#appendnewrowforsale').html('');
                        $("#Savebtn").show();
                        $("#Printbtn").show();
                        $("#Editbtn").hide();

                    }

                },
                error: function(xhr, status, error) {
                    var errorMessage = xhr.status + ': ' + xhr.statusText
                },
            });
        }

    }




    $("#otherpayment").click(function() {
        var getsupplier = $("#myInput").val();
        if (getsupplier != '' && getsupplier != null) {
            //yahannnnnnnn
            getCreditSupplier();
            $("#modalPayment").modal('toggle');
        } else {
            toastr.error("Please Select Vendor First");
        }
        var invoiceNumber = $("#txtInvoiceNumber").text();
        $("#poNumber").text(invoiceNumber);
        var companyName = $("#myInput").val();
        $("#companyName").text(companyName);

        //Start

        //End
    });
    $("#close2").click(function() {
        $("#modalPayment").modal('toggle');
    });



    $("#paymentmodaloneOpen").click(function() {
        $("#poAmountt").val("");
        $("#datepickerPO").datepicker();
        //$('#datepickerPO').datepicker('setDate', 'today');
        $("#modalPaymentone").modal('toggle');
        var invoiceNumber = $("#txtInvoiceNumber").text();
        $("#poNumberone").text(invoiceNumber);
        var companyName = $("#myInput").val();
        $("#companyNameone").text(companyName);
        if ($("#ispartialPaid").val() == "not" && $("#preorderPaid").val() != "0") {
        } else {
                var poTotal = $("#PoAmount").val();
                $("#poBalancee").val("$" + poTotal);
        }
    });
    $("#paymentonemodalclose").click(function() {
        $("#modalPaymentone").modal('toggle');
    });

    $("#modalPaymentone").keyup(function(e) {
        if (e.keyCode == 187) {
            var poTotal = $("#PoAmount").val();
            $("#poAmountt").val(poTotal);

        }
    });

    $("#wire").click(function() {
        var checkdate = $("#datepickerPO").val();
        $("#modalPaymentone").modal('toggle');
        if ($("#ispartialPaid").val() == "not") {
            var currentPaid = parseFloat($("#poAmountt").val());
            var ActualBill = parseFloat($("#PoAmount").val());
            var prevBalance = parseFloat($("#previousBalance").val());
            var lastpaid = $("#preorderPaid").val();
            var pobalance = $("#poBalance").val();

            if (parseFloat(pobalance) < parseFloat(currentPaid) && parseFloat(pobalance) > 0) {
                $("#poAmountt").val('');
                swal("Error!", "Cannot pay more then remaining balance", "error");
            } else {

                totalPoBalance("wire");
            }
        } else {
            //var poAmount = $("#poAmountt").val();
            //$("#checkPaid").val(poAmount);
            totalPoBalance("wire");
        }
         var cmt = $("#commentsPO").val();
        var cmtt = $("#descriptionPo").val();
        if (cmtt == "") {
            $("#descriptionPo").val(cmt);
        }
        else {
            $("#descriptionPo").empty().val(cmt);
        }

        if (checkdate == "" || checkdate == null || checkdate == '' || checkdate == undefined || checkdate == NaN) {
            $('#datepickerPO').datepicker('setDate', 'today');
        }

    });
    $("#cashout").click(function() {

        var checkdate = $("#datepickerPO").val();
        $("#modalPaymentone").modal('toggle');
        if ($("#ispartialPaid").val() == "not") {
            var currentPaid = parseFloat($("#poAmountt").val());
            var ActualBill = parseFloat($("#PoAmount").val());
            var prevBalance = parseFloat($("#previousBalance").val());
            var lastpaid = $("#preorderPaid").val();
            var pobalance = $("#poBalance").val();
            if (parseFloat(pobalance) < parseFloat(currentPaid) && parseFloat(pobalance) > 0) {
            console.log("1st POB " + pobalance + " " + "Current " + currentPaid + " " + " POB " + pobalance);

                $("#poAmountt").val('');
                swal("Error!", "Cannot pay more then remaining balance", "error");
            } else {
                //var poAmount = $("#poAmountt").val();
                //$("#otherPaid").val(poAmount);
                totalPoBalance("cashout");
            }
        } else {
            //var poAmount = $("#poAmountt").val();
            //$("#otherPaid").val(poAmount);
            totalPoBalance("cashout");
        }
        var cmt = $("#commentsPO").val();
        var cmtt = $("#descriptionPo").val();
        if (cmtt == "") {
            $("#descriptionPo").val(cmt);
        }
        else {
            $("#descriptionPo").empty().val(cmt);
        }

        if (checkdate == "" || checkdate == null || checkdate == '' || checkdate == undefined || checkdate == NaN) {
            $('#datepickerPO').datepicker('setDate', 'today');
        }

    });


    $("#paymentmodalonecredit").click(function() {
        $("#poAmountt").val("");

        $("#modalPaymentcreditone").modal('toggle');
        var invoiceNumber = $("#txtInvoiceNumber").text();
        $("#poNumbercreditone").text(invoiceNumber);
        var companyName = $("#myInput").val();
        $("#companyNamecreditone").text(companyName);
        var poTotal = $("#PoAmount").val();
        $("#poBalanceecredit").val("$" + poTotal);

    });
    $("#paymentonecreditmodalclose").click(function() {
        $("#modalPaymentcreditone").modal('toggle');
    });





    $("#addnewitem").click(function() {
        var isvalid = false;
        if ($("#setvendorid").text() == 0) {
            swal("Error!", "Kindly Select Vendor!", "error");

            $("#ValVendorName").first().focus();
            $("#ValVendorName").text("VendorName Is Required.");
            $("#ValVendorName").show();
            isvalid = false;
            return false;
        }
        else {
            isvalid = true;
        }
        if (isvalid == true) {
            $("#modalNewItem").modal('toggle');
        }
        //var invoiceNumber = $("#txtInvoiceNumber").text();
        //$("#poNumber").text(invoiceNumber);
    });
    $(".close1").click(function() {
        $("#modalNewItem").modal('toggle');
    });
    function totalPoBalance(type) {
        //actualbill
        //var currentPaid = 0;
        //var checkPaid =0;
        //if(type == "cashout"){
        // currentPaid = parseFloat($("#poAmountt").val());

        //}else{
        //currentCashPaid = parseFloat($("#poAmountt").val());
        //checkPaid = parseFloat($("#checkPaid").val());
        //currentPaid = currentCashPaid + checkPaid;
        //}
        var currentPaid = parseFloat($("#poAmountt").val());
        var POPrice = $("#PoAmount").val();
        var ActualBill = $("#PoAmount").val();
        var lastpaid = $("#preorderPaid").val();

        if (POPrice != NaN) {
            POPrice = POPrice.replace("$", "");
        }
        var poAmount = POPrice;
        //lastpaid
        var otherPaid = parseFloat($("#otherPaid").val());
        var prevBalance = parseFloat($("#previousBalance").val());
        var creditbalance = parseFloat($("#creditvendor").val());
        var AlPaidByNow = parseFloat($("#totalPaid").val());
        var checkPaid = parseFloat($("#checkPaid").val());
        var totalPaid = (parseFloat(checkPaid) + parseFloat(lastpaid) + creditbalance).toFixed(2);
        console.log("check " + checkPaid + " " + "other paid " + otherPaid + " " + " credit " + creditbalance);

        //$("#totalPaid").val("$" + totalPaid);
        var PoBalance = (poAmount);

        if (currentPaid != NaN && totalPaid != NaN && $("#ispartialPaid").val() == "paid") {
            PoBalance = parseFloat(PoBalance) - parseFloat(totalPaid);
            $("#poBalance").val(parseFloat(PoBalance).toFixed(2));
        }
        else if (currentPaid != NaN && totalPaid != NaN && $("#ispartialPaid").val() == "not") {
            console.log("current " + currentPaid + " " + "last paid " + lastpaid + " " + "totalpaid" + totalPaid + " ActualBill " + ActualBill);
            if (otherPaid != "0" && otherPaid != "" && otherPaid != '' & otherPaid != NaN || lastpaid != '' && lastpaid != "" && lastpaid != undefined && lastpaid != null && lastpaid != "0") {
                var Gross = "0";
                if (lastpaid != '' && lastpaid != "" && lastpaid != undefined && lastpaid != null && lastpaid != "0") {
                    Gross = (parseFloat(lastpaid) + currentPaid).toFixed(2);
                } else {
                    Gross = (parseFloat(otherPaid) + currentPaid).toFixed(2);
                }
                  if (parseFloat(ActualBill) < parseFloat(Gross)) {
                    swal("Error!", "Cannot pay more then remaining balance", "error");
                } else {
                    PoBalance = parseFloat(ActualBill) - parseFloat(Gross);
                    //if(type == "cashout" || type == "other"){
                    //    $("#otherPaid").val(Gross);
                    //}else{
                    //    $("#checkPaid").val(Gross);
                    //}
                     $("#otherPaid").val(parseFloat(Gross).toFixed(2));
                    $("#totalPaid").val(parseFloat(Gross).toFixed(2));
                }
            } else {
                var Gross = (currentPaid).toFixed(2);
                if (parseFloat(ActualBill) < parseFloat(Gross)) {
                console.log("2nd POB " + ActualBill + " " + "Current " + currentPaid + " " + " POB " + Gross);

                    swal("Error!", "Cannot pay more then remaining balance", "error");
                } else {
                    PoBalance = parseFloat(ActualBill) - parseFloat(currentPaid);
                    // if(type == "cashout" || type == "other"){
                    //    $("#otherPaid").val(Gross);
                    //}else{
                    //    $("#checkPaid").val(Gross);
                    //}
                    $("#otherPaid").val(parseFloat(Gross).toFixed(2));
                    $("#totalPaid").val(parseFloat(Gross).toFixed(2));
                }
            }

            //    var prePaid = parseFloat($("#previousBalance").val());
            //    var lastpaid = $("#preorderPaid").val();
            //    var TotalToPay =  parseFloat(lastpaid) + parseFloat(currentPaid);
            //    $("#otherPaid").val(TotalToPay);
            //    PoBalance =   parseFloat(PoBalance) - parseFloat(AlPaidByNow);

            //var RemainingBalance = parseFloat(poAmount) - parseFloat(totalPaid);
            $("#poBalance").val(parseFloat(PoBalance).toFixed(2));
            //    console.log(PoBalance);
        }
        else {
            PoBalance = "0.00";
            $("#poBalance").val(parseFloat(PoBalance).toFixed(2));
        }
        console.log("GGG" + poAmount + "//" + totalPaid);
        //if (PoBalance < 0) {
        //    swal("Error!", "You are excceding Invoice Amount!", "error");
        //    $("#poBalance").val(0.00);

        //}
        //else {

        // }
        // $("#poBalance").val(parseFloat(PoBalance).toFixed(2));
        var RececheckotherPaid = parseFloat($("#otherPaid").val());
        if (RececheckotherPaid != "0" && RececheckotherPaid != "" && RececheckotherPaid != '' && RececheckotherPaid != NaN && RececheckotherPaid > 0) {
        $("#payment").prop("disabled", false);
        }else{
        $("#payment").prop("disabled", true);
        }
    }
    $("#payment").click(function() {



        var tablecount = $("#mytable TBODY TR").length;
        if (parseInt(tablecount) == 0) {
            swal("Error!", "Please Complete Current Invoice", "error");

            //var invoiceNumber = $("#txtInvoiceNumber").text();
            //console.log(invoiceNumber);
            //var poAmount = $("#PoAmount").val();
            //var checkPaid = $("#checkPaid").val();
            //var otherPaid = $("#otherPaid").val();
            //var prevBalance = $("#previousBalance").val();
            //var totalPaid = ($("#totalPaid").val()).split("$")[1];
            //var comment = $("#descriptionPo").val();
            //var supplierName = $("#myInput").val();
            //var supplierCode = $("#txtSupplierNo").val();
            //var remainingBalance = $("#poBalance").val();
            //var supplierId = $('#setvendorid').text();
            //var supplierPayments = {
            //    InvoiceNumber: invoiceNumber,
            //    NetAmount: poAmount,
            //    Debit: totalPaid,
            //    Note: comment,
            //    CashBalance: remainingBalance,
            //    AccountId: supplierId,
            //};
            ////var PoBalance = (parseFloat(poAmount) + parseFloat(prevBalance));
            //var PoBalance = (parseFloat(poAmount));
            //PoBalance = PoBalance - parseFloat(totalPaid);
            //// SaveItemSupplierNumber(true, false, true);
            //$.ajax({
            //    type: "POST",
            //    url: '@Url.Action("SavePaymentOther", "Purchase")',
            //    data: JSON.stringify(supplierPayments),
            //    contentType: "application/json; charset=utf-8",
            //    dataType: "json",
            //    async: false,
            //    cache: false,
            //    success: function(data) {


            //            if (data == true) {
            //                toastr.success("Amount Paid");
            //                setTimeout(function() {
            //                    window.location.reload();
            //                }, 2500);

            //            }
            //            else {
            //                toastr.error("Unable to add");
            //                location.reload();
            //            }
            //    }
            //});
        } else {
            SaveItemSupplierNumber(true, false, true)
        }


    });

    function SavePaymentWhileInvoice(justpay) {
        var invoiceNumber = $("#txtInvoiceNumber").text();
        console.log(invoiceNumber);
        var poAmount = $("#PoAmount").val();
        var checkPaid = $("#checkPaid").val();
        var otherPaid = $("#otherPaid").val();
        var prevBalance = $("#previousBalance").val();
        var totalPaid = ($("#totalPaid").val());
        var comment = $("#descriptionPo").val();
        var supplierName = $("#myInput").val();
        var supplierCode = $("#txtSupplierNo").val();
        var remainingBalance = $("#poBalance").val();
        var supplierId = $('#setvendorid').text();
        var supplierPayments = {
            InvoiceNumber: invoiceNumber,
            NetAmount: poAmount,
            Debit: totalPaid,
            Comments: comment,
            Note: comment,
            CashBalance: remainingBalance,
            AccountId: supplierId,
        };
        //var PoBalance = (parseFloat(poAmount) + parseFloat(prevBalance));
        // var PoBalance = (parseFloat(poAmount));
        //PoBalance = PoBalance - parseFloat(totalPaid);
        // SaveItemSupplierNumber(true, false, true);
        $.ajax({
            type: "POST",
            url: '@Url.Action("SavePaymentOther", "Purchase")',
            data: JSON.stringify(supplierPayments),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            cache: false,
            success: function(data) {

                if (data == true) {

                    if (justpay) {
                        setTimeout(function() {
                            swal("Success!", "Paid Successfully.", "success");
                    location.reload();

                        }, 2000);

                    } else {
                        setTimeout(function() {
                            swal("Success!", "Purchsase Order Create & Paid Successfully.", "success");
                    location.reload();

                        }, 2000);

                    }
                }
                else {
                    toastr.error("Unable to add Payment But Invoice Saved");
                    location.reload();
                }
            }
        });

    }

    //$("#payment").click(function() {
    //    var invoiceNumber = $("#txtInvoiceNumber").text();
    //    var poAmount = $("#PoAmount").val();
    //    var checkPaid = $("#checkPaid").val();
    //    var otherPaid = $("#otherPaid").val();
    //    var prevBalance = $("#previousBalance").val();
    //    var totalPaid = ($("#totalPaid").val()).split("$")[1];
    //    var comment = $("#descriptionPo").val();
    //    var supplierName = $("#myInput").val();
    //    var supplierCode = $("#txtSupplierNo").val();
    //    var supplierPayments = {
    //        Ponumber: invoiceNumber,
    //        SupplierName: supplierName,
    //        SupplierCode: supplierCode,
    //        Pobalance: poAmount,
    //        TotalPaid: totalPaid,
    //        OtherPaymentAmount: otherPaid,
    //        //  IsOtherPayment:
    //        //     IsCreditCustomer:
    //        //   CreditCustomerAmount:
    //        CheckPaidAmount: checkPaid,
    //        // IsCheckPaid:
    //        Comments: comment,
    //    };
    //    var PoBalance = (parseFloat(poAmount) + parseFloat(prevBalance));
    //    PoBalance = PoBalance - parseFloat(totalPaid);
    //    //
    //    if (PoBalance < 0) {
    //        swal("Error!", "You are excceding Invoice Amount!", "error");
    //        $("#poBalance").val(0.00);
    //    }
    //    else {
    //        window.paymentInProcess = true;
    //        if ($("#Savebtn").is(':visible')) {
    //            SaveItemSupplierNumber(false, false);
    //        }
    //        if ($("#Editbtn").is(':visible')) {
    //            SaveItemSupplierNumber(false, true);
    //        }
    //        //
    //        if (window.isValidSave == false) {
    //            swal("Error!", "Vendor is not selected!", "error");
    //        }
    //    }
    //});


    function savePayment(isupdated) {

        var invoiceNumber = $("#txtInvoiceNumber").text().trim();
        var poAmount = $("#PoAmount").val();
        var checkPaid = $("#checkPaid").val();
        var otherPaid = $("#otherPaid").val();
        var prevBalance = $("#previousBalance").val();
        var totalPaid = ($("#totalPaid").val()).split("$")[1];
        var comment = $("#descriptionPo").val();
        var supplierName = $("#myInput").val();
        var supplierCode = $("#txtSupplierNo").val();
        var creditVendor = $("#creditvendor").val();
        var supplierId = $('#setvendorid').text();
        var remainingBalance = parseFloat(poAmount) - parseFloat(totalPaid);
        //
        var supplierPayments = {
            Ponumber: invoiceNumber,
            SupplierName: supplierName,
            SupplierCode: supplierCode,
            SupplierId: supplierId,
            Pobalance: poAmount,
            TotalPaid: totalPaid,
            OtherPaymentAmount: otherPaid,
            CreditCustomerAmount: creditVendor,
            RemaningPayment: remainingBalance.toString(),
            //  IsOtherPayment:
            //     IsCreditCustomer:
            //   CreditCustomerAmount:
            CheckPaidAmount: checkPaid,
            // IsCheckPaid:
            Comments: comment,
        };
        $.confirm({
            title: 'Save Payment for Invoice No: ' + invoiceNumber + '',
            content: 'Are you sure to save Payment?',
            buttons: {
                confirm: function() {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("SaveInvoicePayment", "Purchase")',
                        data: JSON.stringify(supplierPayments),
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function(data) {
                            if (data == true) {
                                if ($("#Received").is(':checked')) {
                                    $("#Editbtn").hide();
                                }
                                else {
                                    $("#Editbtn").show();
                                }
                                $("#Savebtn").hide();
                                $("#Printbtn").hide();
                                setTimeout(function() {
                                    /*   alert("Supplier Item Number Save Successfully.");*/
                                    if (isupdated == false) {
                                        swal("Success!", "Purchsase Order Create Successfully.", "success");
                                    }
                                    else {
                                        swal("Success!", "Purchsase Order Update Successfully.", "success");
                                    }
                                }, 2000);
                                //location.reload();
                            }
                        }
                    });
                },
                cancel: function() {
                },
            }
        });

    }




    function SaveItems() {
        var NeedHighAuthorization = false;

        var IsValid = true;

        var name = $("#description").val();
        var Category = $("#category").val();
        var retail = $("#productretail").val();
        var barcode = $("#productbarcode").val();
        var qtycase = $("#productcaseqty").val();
        var minquantity = "100";
        var maxquantity = "1000";
        var Cost = $("#productcost").val();
        var suppliertemnumber = $("#supplieritem").val();



        var record = {};
        record = new FormData();

        if (name == "" || name == "undefined") {

            $("#namevalidation").text("Please Enter Item Name");
            $("#namevalidation").show();
            $("#description").focus();
            IsValid = false;
        } else {
            $("#namevalidation").text("").hide();
        }


        console.log($("#category option:selected")[0].value);
        if ($("#category option:selected")[0].value == "--Choose Item Category--" || $("#category option:selected")[0].value == "") {

            $("#categoryvalidation").text("Please Select Item Category");
            $("#categoryvalidation").show();
            $("#category").focus();
            IsValid = false;
        } else {
            $("#categoryvalidation").text("").hide();
        }



        if (Cost == "" || Cost == "undefined") {


            $("#productcostyvalidation").text("Please Enter Cost Price");
            $("#productcostyvalidation").show();
            $("#productcost").focus();
            IsValid = false;

        } else if (Cost == 0 || Cost < 0) {

            $("#productcostyvalidation").text("Cost Should Be Greater Than 0");
            $("#productcostyvalidation").show();
            $("#productcost").focus();
            IsValid = false;
        }

        else {
            $("#productcostyvalidation").text("").hide();
        }
        //if (suppliertemnumber == "" || suppliertemnumber == "undefined") {
        //    $("#supplieritemvalidation").text("Please Enter Supplie-Item-Number");
        //    $("#supplieritemvalidation").show();
        //    $("#supplieritem").focus();
        //    IsValid = false;
        //}
        if (suppliertemnumber == "") {
        }
        else if (suppliertemnumber == 0 || suppliertemnumber < 0) {

            $("#supplieritemvalidation").text("Supplie-Item-Number Should Be Greater Than 0");
            $("#supplieritemvalidation").show();
            $("#supplieritem").focus();
            IsValid = false;
        }
        else if (!/^[1-9]+[0-9]*$/.test(suppliertemnumber)) {
            $("#supplieritemvalidation").text("Enter valid Supplie-Item-Number ");
            $("#supplieritemvalidation").show();
            $("#supplieritem").focus();
            IsValid = false;
        }

        else {
            $("#supplieritemvalidation").text("").hide();
        }


        if (retail == "" || retail == "undefined") {


            $("#productretailvalidation").text("Please Enter Retail Price");
            $("#productretailvalidation").show();
            $("#productretail").focus();
            IsValid = false;

        }
        else if (retail == 0 || retail < 0) {

            $("#productretailvalidation").text("Retail Should Be Greater Than 0");
            $("#productretailvalidation").show();
            $("#productretail").focus();
            IsValid = false;
        }

        else {
            $("#productretailvalidation").text("").hide();
        }



        if (barcode == "" || barcode == "undefined") {

            $("#productbarcodevalidation").text("Please Enter barcode");
            $("#productbarcodevalidation").show();
            $("#productbarcode").focus();
            IsValid = false;
        }
        else {
            $("#productbarcodevalidation").text("").hide();
            if (/^[0-9]+$/.test(barcode) && barcode.length == 12) {

            }
            else {

                $("#productbarcodevalidation").text("Barcode should contain number only with the length of 12");
                $("#productbarcodevalidation").show();
                $("#productbarcode").focus();
                IsValid = false;
            }
        }




        if (qtycase == "" || qtycase == "undefined") {


            $("#productcaseqtyvalidation").text("Please Enter Case Quantity");
            $("#productcaseqtyvalidation").show();
            $("#productcaseqty").focus();
            IsValid = false;

        }
        else if (qtycase == 0 || qtycase < 0) {

            $("#productcaseqtyvalidation").text("Case Quantity Should Be Greater Than 0");
            $("#productcaseqtyvalidation").show();
            $("#productcaseqty").focus();
            IsValid = false;
        }

        else {
            $("#productcaseqtyvalidation").text("").hide();
        }





        var vendorid = $("#setvendorid").text();
        var supplieritemno = suppliertemnumber;
        if (supplieritemno == "") {

        }
        else if (supplieritemno != "" && supplieritemno != "undefined") {

            if ($("#setvendorid").text() == 0) {
                swal("Error!", "Kindly Select Vendor!", "error");

                $("#ValVendorName").first().focus();
                $("#ValVendorName").text("VendorName Is Required.");
                $("#ValVendorName").show();
                isValid = false;
                return false;
            }
            else {
                isValid = true;
            }

        }
        else {
            isValid = false;
            return false;
        }
        if (vendorid != "" && vendorid != "undefined") {
            isValid = true;
        } else {
            isValid = false;
            return false;
        }



        if (IsValid) {
            record.append("NeedHighAuthorization", NeedHighAuthorization);
            record.append("Name", name);
            record.append("ItemCategoryId", Category);
            record.append("Retail", retail);
            record.append("BarCode", barcode);
            record.append("QuantityCase", qtycase);
            record.append("MinOrderQty", minquantity);
            record.append("MaxOrderQty", maxquantity);
            //record.append("SalesLimit", saleslimit);
            //  //FixedCost
            record.append("Financial.Cost", Cost);
            record.append("Financial.Retail", retail);
            record.append("ItemImage", null);
            record.append("SupplierItemNumber.VendorID", vendorid);
            record.append("SupplierItemNumber.SupplierItemNum", supplieritemno);


            $.confirm({
                title: 'Save New Item!',
                content: 'Are you sure to save new item?',
                buttons: {
                    confirm: function() {
                        $.blockUI({ message: '<h3 class="blockui-txt"><img src="../images/busy.gif" style="width:15%"/> Loading ...</h1>' });
                        $.ajax({
                            url: '@Url.Action("AddItemfromPO", "Purchase")',
                            type: "POST",
                            data: record,
                            async: false,
                            dataType: "json",
                            processData: false,
                            contentType: false,
                            success: function(data) {
    @*if (data != null) {


                                    setTimeout(function () {
                                    $.unblockUI();
                                    window.location = '@Url.Action("NewPurchaseOrderGet", "Purchase")';
                                    }, 2500);
                                    }*@

                                                    if (data != null) {
                                    $("#modalNewItem").modal('toggle');
                                    if (data == "Already Exists.") {
                                        setTimeout(function() {
                                            /*alert("Supplier Item Number Already Exists.");*/
                                            swal("Error!", "Supplier Item Number Already Exists.", "error");
                                        }, 2000);
                                        //$("#ValVendorName").first().focus();
                                        //$("#ValVendorName").text("Supplier Item Number Already Exists.");
                                        //$("#ValVendorName").show();
                                    }
                                    else {
                                        var sr = 0;
                                        $("#mytable tr").each(function(index, tr) {
                                            sr++;
                                        });
                                        //sr++;
                                        $(".add-row").trigger("click");
                                        $("#Description-" + sr).text(data.name);
                                        $("#Description-" + sr).addClass("openinv-" + sr);


                                        $("#itemid-" + sr).text(data.id);
                                        //$("#StockItemNumber-" + 1).text(data.stockItemNumber);

                                        $("#Retail-" + sr).text("$" + data.retail);
                                        $("#Price-" + sr).text("$" + data.cost);
                                        $("#Amount-" + sr).text("$" + data.cost);
                                        $("#SupplierItemNumber-" + sr).text(data.supplierItemNumber.supplierItemNum);
                                        var string = data.itemNumber;
                                        string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                                        $("#StockItemNumber-" + sr).text(string);
                                        $("#modalNewItem").modal('toggle');

                                        $("#description").val("");
                                        $("#category").val("");
                                        $("#productretail").val("");
                                        $("#productbarcode").val("");
                                        $("#productcaseqty").val("");
                                        $("#productcost").val("");
                                        $("#supplieritem").val("");

                                    }
                                    CountTotalOfAllTD();
                                    setTimeout(function() {
                                        $.unblockUI();
                                    }, 2500);
                                }

                            },
                            error: function() {
                                setTimeout(function() {
                                    $.unblockUI();
                                }, 2500);
                            }
                        });
                    },
                    cancel: function() {
                    },
                }
            });

        }
    }

    function showItemCostChange() {

        var InvoiceNumber = $("#txtInvoiceNumber").text();
        $.ajax({
            url: '@Url.Action("GetItemCostChangeList", "Purchase")',
            type: "Post",
            data: { invoicenumber: InvoiceNumber },
            async: false,
            dataType: 'json',
            //contentType: false,
            success: function(data) {
                $('#cart_body tr').remove();
                if (data.length > 0 && data != "null" && data != "false" && data != "") {
                    $.each(data, function(index, value) {
                        $('#cart_body').append("<tr><td>" + value.itemName + "</td><td>" + value.oldPrice + "</td><td>" + value.newPrice + "</td><td>" + value.priceDiff + "</td><td>" + parseFloat(value.pricePercentage).toFixed(2) + "%" + "</td><td>" + value.createdDate + "</td><td>" + value.createdBy + "</td></tr>");
                    });
                } else {
                    $('#cart_body').append("<tr><td></td><td></td><td></td><td>No Detail Found</td><td></td><td></td><td></td></tr>");
                }

            },
            error: function() {
                alert('Failed to receive the Data');
            }
        });
        $("#CostChangeTable").modal('show');

    }

    function closemodal() {
        $("#CostChangeTable").modal('hide');
        $("#modalPayment").modal('hide');
        $("#addnewitem").modal('hide');
    }


    function VendorDetailModal(id) {
        debugger;
        var VendorId = parseInt($("#searchdropdown").attr("data-vendorID"));
        //$('#VendorParModal').modal('show');
        //var myval = $("#inv-" + id).text();
        var id = VendorId;
        $.ajax({

            url: '@Url.Action("GetJsonVendorDetail", "Vendor")',
            async: false,
            Type: 'GET',
            contentType: "application/json;",
            data: { id: id },
            dataType: "json",
            success: function(data) {

                if (data == "false.") {
                    toastr.error("Please Select Supplier First");

                } else {


                    $.blockUI({ message: '<h3 class="blockui-txt"><img src="../images/busy.gif" style="width:15%"/> Loading ...</h1>' });
                    $("#SupplierListSearch :input").attr("disabled", false);

                    var iconhtml = '';
                    //iconhtml += ' <a href="#" id="Attachmentbtn"><i data-bs-toggle="modal" data-bs-target="#attach"><img class="hide-icon" src="../images/attach.png" style="width:50px" title="Attachments" /></i></a>';
                    //iconhtml += '<img class="hide-icon cp" src="../images/delete.png" style="width:50px" title="Delete" onclick="DeleteVendor()"/>';
                    iconhtml += '<img class="hide-icon saveexisting cp" src="../images/edit.png" style="width:50px" title="Edit" onclick="onEditTrigger()" />';
                    //iconhtml += '<img class="hide-icon cp" src="../images/printer.png" style="width:50px" title="Print" />';
                    $("#defaultlisticons").append(iconhtml);



                    var itennumberhtml = '';
                    itennumberhtml += '<h3>';
                    itennumberhtml += '<label id="itemlabel">Supplier Number:</label><span id="itemsupplierfound" class="itemnumberbox di"></span></br>';
                    itennumberhtml += ' </h3>';
                    $("#existingitemnumber").append(itennumberhtml);


                    $('#txtVendorId').val(data.vendorId);
                    $('#txtFullname').val(data.fullName);
                    $('#txtSupplierNumber').text(data.vendorCode);
                    $("#itemsupplierfound").text(data.vendorCode);
                    $('#txtCompnay').val(data.company);
                    $('#myInput').val(data.company);
                    $('#AccountNumberList').text(data.accountNumber);
                    $('#txtTitle').val(data.title);
                    $('#txtFirstName').val(data.firstName);
                    $('#txtLastName').val(data.lastName);
                    $('#txtStreet').val(data.street);
                    $('#txtCity').val(data.city);
                    $('#txtState').val(data.state);
                    $('#txtZipCode').val(data.zipCode);
                    $('#txtSuite').val(data.suite);
                    $('#txtCountry').val(data.country);
                    $('#txtPhone').val(data.phone);
                    $('#txtFax').val(data.fax);
                    $('#txtPayTerms').val(data.payTerms);
                    $('#txtDiscount').val(data.discount);
                    $('#txtCreditLimit').val(data.creditLimit);
                    $('#txtFedTax').val(data.fedTaxId);
                    $('#txtStateTax').val(data.stateTaxId);
                    $('#txtEmail').val(data.email);
                    $('#txtWebsite').val(data.website);
                    $('#txtLedger').val(data.ledger);
                    $('#txtLedgerCode').val(data.ledgerCode);
                    $('#txtCheckMemo').val(data.checkMemo);
                    if (data.printYtdonChecks == true) {
                        $("#PrintYtdonChecks").prop("checked", true);
                    }
                    else {
                        $("#PrintYtdonChecks").prop("checked", true);
                    }
                    $('#txtComments').val(data.comments);
                    if (data.SupplierChecked == true) {
                        $('#SupplierChecked').prop("checked", true);
                    }
                    $('#txtVendortype').val(data.venderType);
                    $('#txtStateDiscount').val(data.stateDiscount);
                    //$('#OutOfStateSupplier').val(data.outOfStateSupplier);
                    if (data.outOfStateSupplier == true) {
                        $("#OutOfStateSupplier").prop("checked", true);
                    }
                    else {
                        $("#OutOfStateSupplier").prop("checked", false);
                    }
                    if (data.localTextPaidBySupplier == true) {
                        $("#LocalTextPaidBySupplier").prop("checked", true);
                    }
                    else {
                        $("#LocalTextPaidBySupplier").prop("checked", false);
                    }
                    if (data.reportTaxesToStateNc == true) {
                        $("#ReportTaxesToStateNc").prop("checked", true);
                    }
                    else {
                        $("#ReportTaxesToStateNc").prop("checked", false);
                    }
                    $("#AddnewUpdatebtn").hide();
                    $("#Addnewbtn").hide();
                    //$("#Deletebtn").show();
                    //$("#Printbtn").show();
                    //$("#Attachmentbtn ").show();
                    $("#searchdropdown").empty();
                    $('#VendorParModal').modal('show');
                    setTimeout(function() {
                        $.unblockUI();
                    }, 2500);
                }
            },

        });
    }
    function InvShowProductList(data) {
        var html = "";
        $('#appendnewrowforsalePartialdetail').empty();

        $.each(data, function(index, item) {


            $("#myInputP").val(item.supplierName);
            $("#txtSupplierNo").val(item.supplierNumber);
            $("#SubTotal").val(item.subTotal);
            $("#Total").val(item.total);
            $("#Tax").val(item.tax);
            $("#Freight").val(item.freight);
            $("#Other").val(item.other);
            $("#TotalItems").val(item.totalItems);
            $("#Notes").val(item.notes);
            $("#PaymentTerms").val(item.paymentTerms);
            $("#Podate").val(item.pOrderDate);
            $("#DateReceived").val(item.recievedOrderDate);
            $("#TotalTobacco").val(item.totalTobacco);
            $("#TotalCigar").val(item.totalCigar);
            $("#TotalCigarette").val(item.totalCigarette);
            $("#CigaretteStock").val(item.cigaretteStick);
            if (item.isTax == true) {
                $('#IsTax').prop('checked', true);
            } else {
                $('#IsTax').prop('checked', false);
            }
            if (item.received == true) {
                $('#Received').prop('checked', true);
            } else {
                $('#Received').prop('checked', false);
            }
            if (item.updateCost == true) {
                $('#UpdateCost').prop('checked', true);
            } else {
                $('#UpdateCost').prop('checked', false);
            }
            if (item.updateOscost == true) {
                $('#UpateOscost').prop('checked', true);
            } else {
                $('#UpateOscost').prop('checked', false);
            }
            if (item.supplieritems == true) {
                $('#SupplierItemOnly').prop('checked', true);
            } else {
                $('#SupplierItemOnly').prop('checked', false);
            }
            if (item.showAllItems == true) {
                $('#ShowAllitem').prop('checked', true);
            } else {
                $('#ShowAllitem').prop('checked', false);
            }
            if (item.isCaseQty == true) {
                $('#IsCaseQty').prop('checked', true);
            } else {
                $('#IsCaseQty').prop('checked', false);
            }
            if (item.isDiscount == true) {
                $('#IsDiscount').prop('checked', true);
            } else {
                $('#IsDiscount').prop('checked', false);
            }
            if (item.isPrice == true) {
                $('#IsPrice').prop('checked', true);
            } else {
                $('#IsPrice').prop('checked', false);
            }
            if (item.isQty == true) {
                $('#IsQty').prop('checked', true);
            } else {
                $('#IsQty').prop('checked', false);
            }
            if (item.isReport == true) {
                $('#Report').prop('checked', true);
            } else {
                $('#Report').prop('checked', false);
            }
        });

        $.each(data, function(index, item) {

            html += '<tr class="odd" style="background-color: #f89898 !important;">';
            html += '<td class="sorting_1 brdr-right" style = "width:10px;">' + (index + 1) + '</td>';
            html += ' <td class="brdr-right" style = "width:10px;">' + item.supplierItemNumber + '</td>';
            html += ' <td class="brdr-right" style = "width:10px;">' + item.stockItemNumber + '</td>';
            html += ' <td class="brdr-right">' + item.description + '</td>';
            html += ' <td class="brdr-right">' + item.retail + '</td>';
            html += ' <td class="brdr-right">' + item.price + '</td>';
            html += ' <td class="brdr-right">' + item.qty + '</td>';
            html += ' <td class="brdr-right">' + item.caseQty + '</td>';
            html += ' <td class="brdr-right">' + item.discount + '</td>';
            html += ' <td>' + item.amount + '</td>';
            html += '</tr>';


        });

        $('#appendnewrowforsalePartialdetail').append(html);
        $('#VendorParModal').modal('show');

    }
    function CloseVendorParModal() {
        $("#VendorParModal").modal('hide');
    }

    function opencheque() {
        var amount = $("#ToTalInDollar").val();
        $("#ToTalInDollar").trigger("keyup");
        $("#VendorChequeModal").modal('show');
        $.ajax({
            type: "GET",
            url: '@Url.Action("GenerateAutoCodeForCheque", "Purchase")',
            async: false,
            dataType: 'json',
            cache: false,
            success: function(data) {
                var code = data;
                $("#AutoCode").text(code + "||:");
            },
            error: function(xhr, status, error) {
                var errorMessage = xhr.status + ': ' + xhr.statusText
            },
        });
    }
    function closecheque() {
        $("#VendorChequeModal").modal('hide');
    }

    function convertNumberToWords(amount) {
        var words = new Array();
        words[0] = '';
        words[1] = 'One';
        words[2] = 'Two';
        words[3] = 'Three';
        words[4] = 'Four';
        words[5] = 'Five';
        words[6] = 'Six';
        words[7] = 'Seven';
        words[8] = 'Eight';
        words[9] = 'Nine';
        words[10] = 'Ten';
        words[11] = 'Eleven';
        words[12] = 'Twelve';
        words[13] = 'Thirteen';
        words[14] = 'Fourteen';
        words[15] = 'Fifteen';
        words[16] = 'Sixteen';
        words[17] = 'Seventeen';
        words[18] = 'Eighteen';
        words[19] = 'Nineteen';
        words[20] = 'Twenty';
        words[30] = 'Thirty';
        words[40] = 'Forty';
        words[50] = 'Fifty';
        words[60] = 'Sixty';
        words[70] = 'Seventy';
        words[80] = 'Eighty';
        words[90] = 'Ninety';
        amount = amount.toString();
        var atemp = amount.split(".");
        var number = atemp[0].split(",").join("");
        var n_length = number.length;
        var words_string = "";
        if (n_length <= 9) {
            var n_array = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0);
            var received_n_array = new Array();
            for (var i = 0; i < n_length; i++) {
                received_n_array[i] = number.substr(i, 1);
            }
            for (var i = 9 - n_length, j = 0; i < 9; i++, j++) {
                n_array[i] = received_n_array[j];
            }
            for (var i = 0, j = 1; i < 9; i++, j++) {
                if (i == 0 || i == 2 || i == 4 || i == 7) {
                    if (n_array[i] == 1) {
                        n_array[j] = 10 + parseInt(n_array[j]);
                        n_array[i] = 0;
                    }
                }
            }
            value = "";
            for (var i = 0; i < 9; i++) {
                if (i == 0 || i == 2 || i == 4 || i == 7) {
                    value = n_array[i] * 10;
                } else {
                    value = n_array[i];
                }
                if (value != 0) {
                    words_string += words[value] + " ";
                }
                if ((i == 1 && value != 0) || (i == 0 && value != 0 && n_array[i + 1] == 0)) {
                    words_string += "Millions";
                }
                if ((i == 3 && value != 0) || (i == 2 && value != 0 && n_array[i + 1] == 0)) {
                    words_string += "Hundred Thousands ";
                }
                if ((i == 5 && value != 0) || (i == 4 && value != 0 && n_array[i + 1] == 0)) {
                    words_string += "Thousand ";
                }
                if (i == 6 && value != 0 && (n_array[i + 1] != 0 && n_array[i + 2] != 0)) {
                    words_string += "Hundred ";
                } else if (i == 6 && value != 0) {
                    words_string += "Hundred ";
                }
            }
            words_string = words_string.split(" ").join(" ");
            const numS = $("#ToTalInDollar").val();
            if (Number.isInteger(numS)) {
                return 0;
            } else {
                const decimalStr = numS.toString().split('.')[1];
                if (decimalStr == "" || decimalStr == null || decimalStr == "undefined") {
                    $("#DecimalPart").html("0/100");
                } else {
                    $("#DecimalPart").html(decimalStr + "/100");
                }

            }

        }
        return words_string;

    }
    var chequeInvoice = $("#txtInvoiceNumber").text();
    $("#CheqeInvoiceNumber").val(chequeInvoice);




    function SaveItemForCheque(printorNot, updateorNot) {
        //
        var isValid = false;
        var chequeNum = $("#AutoCode").text();
        var titleCheque = $("#chequeName").val();
        var chequeDate = $("#chequeTill").datepicker("getDate");
        var vendorid = $("#setvendorid").text();
        var suppliername = $("#myInput").val();
        var suppliercode = $("#txtSupplierNo").val();
        var invoicenum = $("#txtInvoiceNumber").text();
        var totalitems = $("#TotalItems").val();
        var subTotal = $("#SubTotal").val();
        var freight = $("#Freight").val();
        var tax = $("#Tax").val();
        var other = $("#Other").val();
        var total = $("#Total").val();
        var manualInvoice = $("#ManualInvoiceNo").val();
        var poDate = $("#Podate").val();
        var paymentTerms = "Cheque";
        var totalTobacco = $("#TotalTobacco").val();
        var totalCigar = $("#TotalCigar").val();
        var totalCigarette = $("#TotalCigarette").val();
        var cigaretteStock = $("#CigaretteStock").val();
        var dateReceived = $("#DateReceived").val();
        var Notes = $("#Notes").val();
        var vendoridabc = $('#setvendorid').text();
        var characterandnumers = new RegExp('^[a-zA-Z0-9]+$');

        if (manualInvoice == "") {
            swal("Error!", "Kindly enter Invoice #");
            isvalid = false;
            return false;
        }
        //var numberonly = new RegExp('^[0-9]*$');
        if (!characterandnumers.test(manualInvoice)) {
            swal("Error!", "Kindly enter valid invoice #");
            isvalid = false;
            return false;
        }
        var SaleDetails = new Array();
        var count1 = 1;
        $("#mytable TBODY TR").each(function() {
            var row = $(this);
            var Sale = {};
            if (row.find("TD").eq(24).html() == '') {
                RemoveRow(count1);
                //count1--;
                return;
            }
            Sale.SupplierItemNumber = row.find("TD").eq(2).text();
            Sale.StockItemNumber = row.find("TD").eq(3).html();
            Sale.StockItemNumber = Sale.StockItemNumber.replace('-', '');
            Sale.Description = row.find("TD").eq(4).html();
            Sale.Retail = row.find("TD").eq(5).html();
            Sale.Price = row.find("TD").eq(6).html();
            Sale.Qty = row.find("TD").eq(7).html();
            Sale.CaseQty = row.find("TD").eq(8).html();
            Sale.Discount = row.find("TD").eq(9).html();
            Sale.Amount = row.find("TD").eq(10).html();
            Sale.IsReport = row.find("TD").eq(13).html();
            Sale.ShowAllItems = row.find("TD").eq(14).html();
            Sale.Supplieritems = row.find("TD").eq(15).html();
            Sale.UpdateCost = row.find("TD").eq(16).html();
            Sale.UpdateOscost = row.find("TD").eq(17).html();
            Sale.Received = row.find("TD").eq(18).html();
            Sale.IsTax = row.find("TD").eq(19).html();
            Sale.IsPrice = row.find("TD").eq(20).html();
            Sale.IsQty = row.find("TD").eq(21).html();
            Sale.IsCaseQty = row.find("TD").eq(22).html();
            Sale.IsDiscount = row.find("TD").eq(23).html();
            Sale.ItemId = row.find("TD").eq(24).html();
            Sale.SupplierName = suppliername;
            Sale.SupplierNumber = suppliercode;
            Sale.InvoiceNumber = invoicenum;
            Sale.TotalItems = totalitems;
            Sale.SubTotal = subTotal;
            Sale.Freight = freight;
            Sale.Tax = tax;
            Sale.Other = other;
            Sale.Total = total;
            Sale.ManualInvoiceNumber = manualInvoice;
            Sale.Podate = poDate;
            Sale.PaymentTerms = paymentTerms;
            Sale.TotalTobacco = totalTobacco;
            Sale.TotalCigar = totalCigar;
            Sale.TotalCigarette = totalCigarette;
            Sale.CigaretteStick = cigaretteStock;
            Sale.CheckNumber = chequeNum;
            Sale.CheckTitle = titleCheque;
            Sale.CheckDate = chequeDate;
            Sale.Notes = Notes;
            Sale.SupplierId = vendoridabc;
            if (updateorNot == true) {
                Sale.PurchaseorderId = row.find("#purchaseId").val();
                Sale.SimpleInvoiceNumber = row.find("#simpleinvoicenumber").val();
            }
            //
            var isreportstatus = $("#Report").is(':checked');
            if (isreportstatus == true) {
                Sale.isreportstatus = "true";
            } else {

                Sale.isreportstatus = "false";

            }
            var showAllitem = $("#ShowAllitem").is(':checked');
            if (showAllitem == true) {
                Sale.showAllitem = "true";
            } else {

                Sale.showAllitem = "false";

            }
            var supplierItemOnly = $("#SupplierItemOnly").is(':checked');
            if (supplierItemOnly == true) {
                Sale.supplierItemOnly = "true";
            } else {

                Sale.supplierItemOnly = "false";

            }
            var UpdateCost = $("#UpdateCost").is(':checked');
            if (UpdateCost == true) {
                Sale.UpdateCost = "true";
            } else {

                Sale.UpdateCost = "false";

            }
            var UpdateOscost = $("#UpateOscost").is(':checked');
            if (UpdateOscost == true) {
                Sale.UpdateOscost = "true";
            } else {

                Sale.UpdateOscost = "false";

            }
            var Received = $("#Received").is(':checked');
            if (Received == true) {
                Sale.Received = "true";
            } else {

                Sale.Received = "false";

            }
            var IsTax = $("#IsTax").is(':checked');
            if (IsTax == true) {
                Sale.IsTax = "true";
            } else {

                Sale.IsTax = "false";

            }
            var IsPrice = $("#IsPrice").is(':checked');
            if (IsPrice == true) {
                Sale.IsPrice = "true";
            } else {

                Sale.IsPrice = "false";

            }
            var IsQty = $("#IsQty").is(':checked');
            if (IsQty == true) {
                Sale.IsQty = "true";
            } else {

                Sale.IsQty = "false";

            }
            var IsCaseQty = $("#IsCaseQty").is(':checked');
            if (IsCaseQty == true) {
                Sale.IsCaseQty = "true";
            } else {

                Sale.IsCaseQty = "false";

            }
            var IsDiscount = $("#IsDiscount").is(':checked');
            if (IsDiscount == true) {
                Sale.IsDiscount = "true";
            } else {

                Sale.IsDiscount = "false";

            }

            Sale.IsPrintinvoice = false;
            if (printorNot) {
                Sale.IsPrintinvoice = true;
            }
            Sale.ItemNumber = $(this).attr("data-itemcode");
            SaleDetails.push(Sale);
            count1++;
        });


        if (vendorid != "" && vendorid != "undefined") {
            isValid = true;
            window.isValidSave = true;
        } else {
            swal("Error!", "Kindly select Vendor");
            isvalid = false;
            window.isValidSave = false;
            return false;

        }
        var tablecount = $("#mytable TBODY TR").length;
        if (parseInt(tablecount) == 0) {
            swal("Error!", "Kindly select Any Product");
            isvalid = false;
            return false;
        }
        if (isValid == true) {
            if (updateorNot == false) {
                $.confirm({
                    title: 'Save New Purchase Invoice!',
                    content: 'Are you sure to save new Purchase Invoice?',
                    buttons: {
                        confirm: function() {
                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("CreatePurchaseOrder", "Purchase")',
                                data: JSON.stringify(SaleDetails),
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function(data) {
                                    //if (data.success=="print") {
                                    console.log(data);
                                    var model = data.responseData;

                                    //}
                                    //else if (data.success == "notprint") {

                                    var count = 0;

                                    $("#mytable TBODY TR").each(function(index, tr) {
                                        var count2 = count + 1;
                                        var row = $(this);
                                        for (var i = 0; i < data.data.length; i++) {
                                            var gg = $("#itemid-" + count2).text();
                                            if ($("#itemid-" + count2).text() == data.data[i].itemId) {
                                                row.find("#purchaseId").val(data.data[i].purchaseorderId);
                                                row.find("#simpleinvoicenumber").val(data.data[i].simpleInvoiceNumber);

                                            }
                                        }

                                        count++;
                                    });

                                    if (window.paymentInProcess == false) {
                                        if ($("#Received").is(':checked')) {
                                            //$( "p" ).addClass( "myClass yourClass" );
                                            //$( "#foo" ).removeClass( 'className');
                                            $("#Editbtn").hide();
                                            $("#imgPaid").addClass("show");
                                            $("#imgPaid").removeClass("hide");
                                            $("#imgRecieved").removeClass("hide");
                                            $("#imgRecieved").addClass("show");
                                        }
                                        else {
                                            $("#Editbtn").show();
                                        }
                                        $("#Savebtn").hide();
                                        $("#Printbtn").hide();
                                        setTimeout(function() {
                                            /*   alert("Supplier Item Number Save Successfully.");*/
                                            swal("Success!", "Purchsase Order Create Successfully.", "success");
                                        }, 2000);

                                        location.reload();
                                    }
                                    else {
                                        var isupdated = false;
                                        savePayment(isupdated);
                                    }
                                    if (data.success == "print") {
                                        window.open('@Url.Action("PurchaseInvoice", "Purchase")', '_blank');
                                    }

                                    //}
                                    location.reload();
                                }
                            });
                        },
                        cancel: function() {
                        },
                    }
                });
            }
            else {
                $.confirm({
                    title: 'Edit Purchase Invoice!',
                    content: 'Are you sure to edit Purchase Invoice?',
                    buttons: {
                        confirm: function() {
                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("UpdatePurchaseOrder", "Purchase")',
                                data: JSON.stringify(SaleDetails),
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function(data) {
                                    // if (data.success=="print") {
                                    var model = data.responseData;
                                    var count = 0;

                                    $("#mytable TBODY TR").each(function(index, tr) {
                                        var count2 = count + 1;
                                        var row = $(this);
                                        for (var i = 0; i < data.data.length; i++) {
                                            var gg = $("#itemid-" + count2).text();
                                            if ($("#itemid-" + count2).text() == data.data[i].itemId) {
                                                row.find("#purchaseId").val(data.data[i].purchaseorderId);
                                                row.find("#simpleinvoicenumber").val(data.data[i].simpleInvoiceNumber);

                                            }
                                        }

                                        count++;
                                    });
                                    if (window.paymentInProcess == false) {
                                        if ($("#Received").is(':checked')) {
                                            $("#Editbtn").hide();
                                            $("#imgPaid").addClass("show");
                                            $("#imgPaid").removeClass("hide");
                                            $("#imgRecieved").removeClass("hide");
                                            $("#imgRecieved").addClass("show");

                                        }
                                        else {
                                            $("#Editbtn").show();
                                        }
                                        $("#Savebtn").hide();
                                        $("#Printbtn").hide();
                                        getopeninvoicelist();
                                        getpostinvoicelist();
                                        setTimeout(function() {
                                            /*   alert("Supplier Item Number Save Successfully.");*/
                                            swal("Success!", "Purchsase Order Update Successfully.", "success");
                                        }, 2000);
                                    }



                                    if (data.success == "print") {
                                        window.open('@Url.Action("PurchaseInvoice", "Purchase")', '_blank');
                                    }

                                    else if (data.success == "notprint") {
                                        //getopeninvoicelist();
                                        //getpostinvoicelist();
                                        var isupdated = true;
                                        savePayment(isupdated);
                                    }
                                }
                            });
                        },
                        cancel: function() {
                        },
                    }
                });
            }

        }
    };
    var ChkStc = $("#StockItemNumber-1").text();
    if (ChkStc == null || ChkStc == "" || ChkStc == "undefined") {
        $("#writecheque").prop('disabled', true);
    } else {

    }

    function GetItemListModal() {

        var data_array = [];
        var search = $("#DescriptionInput").val();
        $("#productList").empty();
        var dropdown = '';

        $.each(AllItemsList, function(index, value) {
            if (search != "") {
                if (value.text.toLowerCase().indexOf(search.toLowerCase()) >= 0) {
                    dropdown += '<option data-value="' + value.value + '" value="' + value.text + '"></option>';
                    let my_object = {};
                    my_object.title = value.text;
                    my_object.value = value.value;

                    data_array.push(my_object);
                }
            }
        });
        //$.ajax({
        //    type: "GET",
        //    async: false,
        //    cache: false,
        //    url: '@Url.Action("GetAllItem", "Sale")',
        //    dataType: 'json',
        //    success: function(data) {

        //        $.each(data, function(index, value) {
        //            if (search != "") {
        //                if (value.text.toLowerCase().indexOf(search.toLowerCase()) >= 0) {
        //                    dropdown += '<option data-value="' + value.value + '" value="' + value.text + '"></option>';
        //                    let my_object = {};
        //                    my_object.title = value.text;
        //                    my_object.value = value.value;

        //                    data_array.push(my_object);
        //                }
        //            }
        //        });

        //    },
        //    error: function(xhr, status, error) {
        //        var errorMessage = xhr.status + ': ' + xhr.statusText
        //    },
        //});

        $("#productList").append(dropdown);
        $.each(data_array, function(index, value) {
            if (data_array[index].title == search) {
                var string = data_array[index].value;
                string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                $("#ucpnitem").val(data_array[index].value);
                GetItemByItemNumberModal();
            }
        });
        //data_array.empty();

    }


    function GetItemByItemNumberModal() {

        var itemno = $('#ucpnitem').val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("ItemWithUcpAndItemNo", "Purchase")',

            data: { itemno: itemno },
            dataType: 'json',
            success: function(data) {

                if (data != null && data != "" && data != "false") {
                    $("#itemDescriptionM").val(data.name);
                    $("#itemNumM").html(itemno);
                    $("#itemRetailM").val(data.unitRetail);
                    $("#manufactureM").val(data.brandName);
                    $("#catagoryM").val(data.categoryName);
                    $("#subCatagoryM").val(data.subCatName);
                    $("#familyM").val(data.family);
                    $("#unitChargeM").val(data.cost);
                    $("#unitPriceM").val(data.saleRetail);
                    $("#qtyOnHandM").val(data.itemQuantity);

                }
                else {

                    swal("Error!", "There is no record with this UCP/itemNo.", "error");
                    $('#ucpnitem').val("");
                }
            },
            error: function() {

            },
        });

    }


    function GetItemListModalF6() {

        var data_array = [];
        var search = $("#DescriptionInput1").val();
        $("#productList1").empty();
        var dropdown = '';


        $.each(AllItemsList, function(index, value) {
            if (search != "") {
                if (value.text.toLowerCase().indexOf(search.toLowerCase()) >= 0) {
                    console.log(value.text);
                    dropdown += '<option data-value="' + value.value + '" value="' + value.text + '"></option>';
                    let my_object = {};
                    my_object.title = value.text;
                    my_object.value = value.value;

                    data_array.push(my_object);
                }
            }
        });
        //$.ajax({
        //    type: "GET",
        //    async: false,
        //    cache: false,
        //    url: '@Url.Action("GetAllItem", "Sale")',
        //    dataType: 'json',
        //    success: function(data) {

        //        $.each(data, function(index, value) {
        //            if (search != "") {
        //                if (value.text.toLowerCase().indexOf(search.toLowerCase()) >= 0) {
        //                    dropdown += '<option data-value="' + value.value + '" value="' + value.text + '"></option>';
        //                    let my_object = {};
        //                    my_object.title = value.text;
        //                    my_object.value = value.value;

        //                    data_array.push(my_object);
        //                }
        //            }
        //        });

        //    },
        //    error: function(xhr, status, error) {
        //        var errorMessage = xhr.status + ': ' + xhr.statusText
        //    },
        //});

        $("#productList1").append(dropdown);
        $.each(data_array, function(index, value) {
            if (data_array[index].title == search) {
                var string = data_array[index].value;
                string = string.substring(0, 2) + '-' + string.substring(2, string.length);
                $("#itemStockID").val(data_array[index].value);
                GetItemData();
            }
        });
        //data_array.empty();

    }

</script>

