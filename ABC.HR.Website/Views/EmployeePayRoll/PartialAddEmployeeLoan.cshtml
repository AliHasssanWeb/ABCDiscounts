@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@model ABC.EFCore.Repository.Edmx.EmpLoan

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" />

<div class="row container">
    <div class="col-md-12">
        @*<form asp-action="AddEmployeeAllowance">*@

        @*<form method="post" action="@Url.Action("AddEmployeeAllowance","/HumanResource/Employees")">*@

        <div class="row">
            <div class="form-group col-md-6">
                <label asp-for="EmployeeId" class="control-label"></label>
                <select asp-for="EmployeeId"
                        class="form-control" id="temployeeId"
                        asp-items="@(new SelectList(ViewBag.EmployeeNo,"Value", "Text"))">
                    <option disabled selected>--- SELECT EMPLOYEE---</option>
                </select>
                @*<input asp-for="EmployeeId" class="form-control" />*@
               
                <small id="empIdd" class="text-danger text-info"></small>
            </div>
            <div class="form-group col-md-6">
                <label asp-for="EmpLoanTypeId" class="control-label"></label>
                <select asp-for="EmpLoanTypeId" id="tempLoanTypeId"
                        class="form-control"
                        asp-items="@(new SelectList(ViewBag.EmpLoanType,"Value", "Text"))">
                    <option disabled selected>--- SELECT LOAN TYPE---</option>

                </select>
                @*<input asp-for="AllowanceTypeId" class="form-control" />*@
                
                <small id="empLoanTypeId" class="text-danger text-info"></small>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-6">
                <label asp-for="Date" class="control-label"></label>
                <input   id="tdate" class="form-control" type="date"/>
                 
                <small id="datee" class="text-danger text-info"></small>
            </div>

            <div class="form-group col-md-6">
                <label class="control-label">Amount</label>
                <input  id="tamount" class="form-control" type="number"/>
                
                <small id="amountt" class="text-danger text-info"></small>
            </div>
        </div>

        <div class="row">


            <div class="form-group col-md-8">

                <label asp-for="Reason" class="control-label"></label>
                <textarea   id="treason" rows="4" cols="70" style="border: 1px solid #dee2e6; border-radius: 4px; "></textarea>
                 
                <small id="reasonn" class="text-danger text-info"></small>
            </div>

        </div>
        <div class="row">
            <div class="form-group col-md-6">
                <label asp-for="IsApprove" class="control-label"></label>
                <input id="tisApprove" type="checkbox" checked />
                <span asp-validation-for="IsApprove" class="text-danger"></span>
            </div>
        </div>

        <div class="form-group col-md-4">
            <input type="button" value="Create" onclick="SaveEpmLoan()" class="btn btn-lg btn-dark me-3 wd-40" style="color:whitesmoke" />
            <button type="button" class="btn btn-lg btn-dark me-3 wd-40" data-dismiss="modal" style="color:whitesmoke">Close</button>

        </div>

    </div>
</div>





@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}



}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

@*<script>
        $(function () {

            $('#submitalo').on('click', function (evt) {
                debugger
                evt.preventDefault();
                var url = "/HumanResource/Employees/AddEmployeeAllowance"
                $.post('/HumanResource/Employees/AddEmployeeAllowance', $('#myForm').serialize(), function () {
                    alert('Posted using jQuery');
                });
            });
        });
    </script>*@



<script>
    function SaveEpmLoan() {

        debugger
        var Employee = $("#temployeeId").val();
        var LoanType = $("#tempLoanTypeId").val();
        var Amount = $("#tamount").val();
        var Date = $("#tdate").val();
        var Reason = $("#treason").val();



        if (Employee == null) {
            $("#empIdd").html("<ul><li>Please Select Employee.</li> </ul>");
            return false;
        }
        else if (LoanType == null) {

            $("#empLoanTypeId").html("<ul><li>Please enter LoanType here.</li> </ul>");
            $("#empIdd").html("");
            return false;
        }
        else if (Date == "") {
            $("#datee").html("<ul><li>Please fill Date field</li> </ul>");
            $("#empLoanTypeId").html("");

            return false;


        }

        else if (Amount == "") {

            $("#amountt").html("<ul><li>Please enter amount here.</li> </ul>");
            $("#datee").html("");
            return false;
        }



        else if (Reason == "") {
            $("#reasonn").html("<ul><li>Please fill Reason field</li> </ul>");
            $("#amountt").html("");

            return false;

        }
        $.ajax({

            type: "POST",
                              url: '@Url.Action("AddEmployeeLoan", "EmployeeLoan")',

           // url:"https://localhost:44372/PayRoll/EmployeeLoan/AddEmployeeLoan",
            //url:"https://apps.ab-sol.net/abc.pos/PayRoll/EmployeeLoan/AddEmployeeLoan",
            data: { EmployeeId: $("#temployeeId").val(), EmpLoanTypeId: $("#tempLoanTypeId").val(), Date: $("#tdate").val(), Amount: $("#tamount").val(), Reason: $("#treason").val(), IsApprove: $("#tisApprove").val() },
            //       contentType: "application/json; charset=utf-8",
            //     dataType: "json",
            success: function (data) {
                $("#empIdd").html("");
                $("#datee").html("");
                $("#empLoanTypeId").html("");
                $("#reasonn").html("");
                $("#temployeeId").val("");
                $("#tempLoanTypeId").val("");
                $("#tamount").val("");
                $("#tdate").val("");
                $("#treason").val("");



                //new Notify({
                //    title: 'Success!',
                //    text: "Loan added Successfully",
                //    status: 'success',
                //    effect: 'slide',// animation
                //    speed: 300, // animation speed
                //    type: 3,
                //    autoclose: true,
                //    autotimeout: 4000
                //});

                toastr.success("Saved Successfully");
            }
        });
    }
</script>